"use strict";(self.webpackChunkh3_website=self.webpackChunkh3_website||[]).push([[7576],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>h});var i=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),u=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=u(e.components);return i.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=u(n),h=r,g=d["".concat(s,".").concat(h)]||d[h]||c[h]||l;return n?i.createElement(g,a(a({ref:t},p),{},{components:n})):i.createElement(g,a({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,a=new Array(l);a[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,a[1]=o;for(var u=2;u<l;u++)a[u]=n[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1914:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var i=n(8168),r=(n(6540),n(5680));const l={id:"compilation-options",title:"Compilation options",sidebar_label:"Compilation options",slug:"/core-library/compilation-options"},a=void 0,o={unversionedId:"core-library/compilation-options",id:"core-library/compilation-options",title:"Compilation options",description:"A number of options in CMake can be set when compiling the H3 core library. These are relevant for building",source:"@site/docs/core-library/compilation-options.md",sourceDirName:"core-library",slug:"/core-library/compilation-options",permalink:"/docs/core-library/compilation-options",draft:!1,editUrl:"https://github.com/uber/h3/edit/master/website/docs/core-library/compilation-options.md",tags:[],version:"current",frontMatter:{id:"compilation-options",title:"Compilation options",sidebar_label:"Compilation options",slug:"/core-library/compilation-options"},sidebar:"someSidebar",previous:{title:"Unix-style Filters for H3",permalink:"/docs/core-library/filters"},next:{title:"Testing strategy",permalink:"/docs/core-library/testing"}},s={},u=[{value:"AUDIT_SOURCE_FILE_LIST",id:"audit_source_file_list",level:2},{value:"BUILD_ALLOC_TESTS",id:"build_alloc_tests",level:2},{value:"BUILD_BENCHMARKS",id:"build_benchmarks",level:2},{value:"BUILD_COUNTRY_BENCHMARKS",id:"build_country_benchmarks",level:2},{value:"BUILD_FILTERS",id:"build_filters",level:2},{value:"BUILD_GENERATORS",id:"build_generators",level:2},{value:"BUILD_TESTING",id:"build_testing",level:2},{value:"BUILD_FUZZERS",id:"build_fuzzers",level:2},{value:"ENABLE_LIBFUZZER",id:"enable_libfuzzer",level:2},{value:"CMAKE_BUILD_TYPE",id:"cmake_build_type",level:2},{value:"ENABLE_COVERAGE",id:"enable_coverage",level:2},{value:"ENABLE_DOCS",id:"enable_docs",level:2},{value:"ENABLE_FORMAT",id:"enable_format",level:2},{value:"ENABLE_LINTING",id:"enable_linting",level:2},{value:"H3_ALLOC_PREFIX",id:"h3_alloc_prefix",level:2},{value:"H3_PREFIX",id:"h3_prefix",level:2},{value:"PRINT_TEST_FILES",id:"print_test_files",level:2},{value:"ENABLE_WARNINGS",id:"enable_warnings",level:2},{value:"WARNINGS_AS_ERRORS",id:"warnings_as_errors",level:2},{value:"WRAP_VALGRIND",id:"wrap_valgrind",level:2}],p={toc:u};function c(e){let{components:t,...n}=e;return(0,r.yg)("wrapper",(0,i.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"A number of options in CMake can be set when compiling the H3 core library. These are relevant for building\ndifferent ways of using and testing the library and do not affect the underlying algorithms."),(0,r.yg)("p",null,"When configuring with CMake, an option may be specified using ",(0,r.yg)("inlineCode",{parentName:"p"},"-D")," on the command line, like so for setting\n",(0,r.yg)("inlineCode",{parentName:"p"},"CMAKE_BUILD_TYPE")," to ",(0,r.yg)("inlineCode",{parentName:"p"},"Release"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cmake .. -DCMAKE_BUILD_TYPE=Release\n")),(0,r.yg)("p",null,"Boolean options should be set to ",(0,r.yg)("inlineCode",{parentName:"p"},"ON")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"OFF"),", like so:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cmake .. -DBUILD_TESTING=OFF\n")),(0,r.yg)("h2",{id:"audit_source_file_list"},"AUDIT_SOURCE_FILE_LIST"),(0,r.yg)("p",null,"Whether to glob the list of source files and compare it to the ",(0,r.yg)("inlineCode",{parentName:"p"},"ALL_SOURCE_FILES")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"EXAMPLE_SOURCE_FILES")," lists\ndefined in CMake. This is a quality control measure to ensure that the source file list in ",(0,r.yg)("inlineCode",{parentName:"p"},"CMakeLists.txt")," actually\nmatches the sources in the repository and is not missing any files."),(0,r.yg)("h2",{id:"build_alloc_tests"},"BUILD_ALLOC_TESTS"),(0,r.yg)("p",null,"Whether to build the parts of the ",(0,r.yg)("a",{parentName:"p",href:"./testing"},"test suite")," that exercise the ",(0,r.yg)("a",{parentName:"p",href:"./custom-alloc"},"H3_ALLOC_PREFIX")," feature."),(0,r.yg)("h2",{id:"build_benchmarks"},"BUILD_BENCHMARKS"),(0,r.yg)("p",null,"Whether to build the ",(0,r.yg)("a",{parentName:"p",href:"./testing#benchmarks"},"benchmark suite"),"."),(0,r.yg)("h2",{id:"build_country_benchmarks"},"BUILD_COUNTRY_BENCHMARKS"),(0,r.yg)("p",null,"Whether to build benchmarks that use ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/nvkelso/natural-earth-vector/"},"Natural Earth")," geometries."),(0,r.yg)("p",null,"The geometries will be downloaded at build time using Node."),(0,r.yg)("h2",{id:"build_filters"},"BUILD_FILTERS"),(0,r.yg)("p",null,"Whether to build the ",(0,r.yg)("a",{parentName:"p",href:"./filters"},"H3 command line filter")," executables."),(0,r.yg)("h2",{id:"build_generators"},"BUILD_GENERATORS"),(0,r.yg)("p",null,"Whether to build generator executables used in the development of H3. This is not required for\nbuilding the library as the output of these generators is checked in."),(0,r.yg)("h2",{id:"build_testing"},"BUILD_TESTING"),(0,r.yg)("p",null,"Whether to build the ",(0,r.yg)("a",{parentName:"p",href:"./testing"},"test suite"),"."),(0,r.yg)("h2",{id:"build_fuzzers"},"BUILD_FUZZERS"),(0,r.yg)("p",null,"Whether to build the ",(0,r.yg)("a",{parentName:"p",href:"./testing#fuzzers"},"fuzzer suite"),"."),(0,r.yg)("h2",{id:"enable_libfuzzer"},"ENABLE_LIBFUZZER"),(0,r.yg)("p",null,"Whether to build the fuzzers with ",(0,r.yg)("a",{parentName:"p",href:"https://www.llvm.org/docs/LibFuzzer.html"},"libFuzzer")," (this expects to be used with Clang). If OFF, a ",(0,r.yg)("inlineCode",{parentName:"p"},"main")," function suitable for use with ",(0,r.yg)("a",{parentName:"p",href:"https://lcamtuf.coredump.cx/afl/"},"American fuzzy lop")," is included."),(0,r.yg)("h2",{id:"cmake_build_type"},"CMAKE_BUILD_TYPE"),(0,r.yg)("p",null,"Should be set to ",(0,r.yg)("inlineCode",{parentName:"p"},"Release")," for production builds, and ",(0,r.yg)("inlineCode",{parentName:"p"},"Debug")," in development."),(0,r.yg)("h2",{id:"enable_coverage"},"ENABLE_COVERAGE"),(0,r.yg)("p",null,"Whether to compile ",(0,r.yg)("inlineCode",{parentName:"p"},"Debug")," builds with coverage instrumentation (compatible with GCC, Clang, and lcov). This also excludes defensive code in the library that should not be counted against coverage because it is unreachable."),(0,r.yg)("h2",{id:"enable_docs"},"ENABLE_DOCS"),(0,r.yg)("p",null,"Whether to build the Doxygen documentation. This is not the same as the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/uber/h3/tree/master/website"},"H3 website"),",\nbut is rather the documentation for the internal C library functions."),(0,r.yg)("h2",{id:"enable_format"},"ENABLE_FORMAT"),(0,r.yg)("p",null,"Whether to enable using clang-format-14 to format source files before building. This should be enabled\nbefore submitting patches for H3 as continuous integration will fail if the formatting does not match."),(0,r.yg)("p",null,"Only this version of clang-format should be used to format the sources as new releases of clang-format\ncan change defaults, causing unintended churn of source code formatting."),(0,r.yg)("h2",{id:"enable_linting"},"ENABLE_LINTING"),(0,r.yg)("p",null,"Whether to enable using clang-tidy to lint source files when building. Only invoked when\n",(0,r.yg)("a",{parentName:"p",href:"https://cmake.org/cmake/help/latest/prop_tgt/LANG_CLANG_TIDY.html"},"Makefile or Ninja CMake generators"),"\nare used."),(0,r.yg)("h2",{id:"h3_alloc_prefix"},"H3_ALLOC_PREFIX"),(0,r.yg)("p",null,"Used for directing the library to use a ",(0,r.yg)("a",{parentName:"p",href:"./custom-alloc"},"different set of functions for memory management"),"."),(0,r.yg)("h2",{id:"h3_prefix"},"H3_PREFIX"),(0,r.yg)("p",null,"Used for ",(0,r.yg)("a",{parentName:"p",href:"./usage#function-renaming"},"renaming the public API"),"."),(0,r.yg)("h2",{id:"print_test_files"},"PRINT_TEST_FILES"),(0,r.yg)("p",null,"If enabled, CMake will print which CTest test case corresponds to which input file."),(0,r.yg)("h2",{id:"enable_warnings"},"ENABLE_WARNINGS"),(0,r.yg)("p",null,"Whether to enable all compiler warnings. (i.e. ",(0,r.yg)("a",{parentName:"p",href:"https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wall"},(0,r.yg)("inlineCode",{parentName:"a"},"-Wall")),")"),(0,r.yg)("h2",{id:"warnings_as_errors"},"WARNINGS_AS_ERRORS"),(0,r.yg)("p",null,"Whether to treat compiler warnings as errors. While a useful tool for ensuring software quality, this should not be enabled\nfor production builds as compiler warnings can change unexpectedly between versions. This is intended to be used with\n",(0,r.yg)("inlineCode",{parentName:"p"},"ENABLE_WARNINGS")," on."),(0,r.yg)("h2",{id:"wrap_valgrind"},"WRAP_VALGRIND"),(0,r.yg)("p",null,"Whether to wrap invocations of the test suite with ",(0,r.yg)("inlineCode",{parentName:"p"},"valgrind")," (if available)."))}c.isMDXComponent=!0}}]);