/*! For license information please see 4220.89659f15.js.LICENSE.txt */
(self.webpackChunkh3_website=self.webpackChunkh3_website||[]).push([[4220],{8478:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6540),i=n(2303);function s(e){let{children:t,fallback:n}=e;return(0,i.A)()?r.createElement(r.Fragment,null,null==t?void 0:t()):null!=n?n:null}},6570:e=>{"use strict";function t(e,t,r){r=r||2;var s,A,o,a,u,h,f,p=t&&t.length,g=p?t[0]*r:e.length,_=n(e,0,g,r,!0),m=[];if(!_||_.next===_.prev)return m;if(p&&(_=function(e,t,r,i){var s,A,o,a=[];for(s=0,A=t.length;s<A;s++)(o=n(e,t[s]*i,s<A-1?t[s+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),a.push(d(o));for(a.sort(c),s=0;s<a.length;s++)r=l(a[s],r);return r}(e,t,_,r)),e.length>80*r){s=o=e[0],A=a=e[1];for(var E=r;E<g;E+=r)(u=e[E])<s&&(s=u),(h=e[E+1])<A&&(A=h),u>o&&(o=u),h>a&&(a=h);f=0!==(f=Math.max(o-s,a-A))?32767/f:0}return i(_,m,r,s,A,f,0),m}function n(e,t,n,r,i){var s,A;if(i===R(e,t,n,r)>0)for(s=t;s<n;s+=r)A=w(s,e[s],e[s+1],A);else for(s=n-r;s>=t;s-=r)A=w(s,e[s],e[s+1],A);return A&&_(A,A.next)&&(T(A),A=A.next),A}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,c,l,u,d){if(e){!d&&u&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=h(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,s,A,o,a,c=1;do{for(n=e,e=null,s=null,A=0;n;){for(A++,r=n,o=0,t=0;t<c&&(o++,r=r.nextZ);t++);for(a=c;o>0||a>0&&r;)0!==o&&(0===a||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,a--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(A>1)}(i)}(e,c,l,u);for(var f,p,g=e;e.prev!==e.next;)if(f=e.prev,p=e.next,u?A(e,c,l,u):s(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(p.i/n|0),T(e),e=p.next,g=p.next;else if((e=p)===g){d?1===d?i(e=o(r(e),t,n),t,n,c,l,u,2):2===d&&a(e,t,n,c,l,u):i(r(e),t,n,c,l,u,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var i=t.x,s=n.x,A=r.x,o=t.y,a=n.y,c=r.y,l=i<s?i<A?i:A:s<A?s:A,u=o<a?o<c?o:c:a<c?a:c,h=i>s?i>A?i:A:s>A?s:A,d=o>a?o>c?o:c:a>c?a:c,p=r.next;p!==t;){if(p.x>=l&&p.x<=h&&p.y>=u&&p.y<=d&&f(i,o,s,a,A,c,p.x,p.y)&&g(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function A(e,t,n,r){var i=e.prev,s=e,A=e.next;if(g(i,s,A)>=0)return!1;for(var o=i.x,a=s.x,c=A.x,l=i.y,u=s.y,d=A.y,p=o<a?o<c?o:c:a<c?a:c,_=l<u?l<d?l:d:u<d?u:d,m=o>a?o>c?o:c:a>c?a:c,E=l>u?l>d?l:d:u>d?u:d,v=h(p,_,t,n,r),y=h(m,E,t,n,r),b=e.prevZ,w=e.nextZ;b&&b.z>=v&&w&&w.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=_&&b.y<=E&&b!==i&&b!==A&&f(o,l,a,u,c,d,b.x,b.y)&&g(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,w.x>=p&&w.x<=m&&w.y>=_&&w.y<=E&&w!==i&&w!==A&&f(o,l,a,u,c,d,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=_&&b.y<=E&&b!==i&&b!==A&&f(o,l,a,u,c,d,b.x,b.y)&&g(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=y;){if(w.x>=p&&w.x<=m&&w.y>=_&&w.y<=E&&w!==i&&w!==A&&f(o,l,a,u,c,d,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function o(e,t,n){var i=e;do{var s=i.prev,A=i.next.next;!_(s,A)&&m(s,i,i.next,A)&&y(s,A)&&y(A,s)&&(t.push(s.i/n|0),t.push(i.i/n|0),t.push(A.i/n|0),T(i),T(i.next),i=e=A),i=i.next}while(i!==e);return r(i)}function a(e,t,n,s,A,o){var a=e;do{for(var c=a.next.next;c!==a.prev;){if(a.i!==c.i&&p(a,c)){var l=b(a,c);return a=r(a,a.next),l=r(l,l.next),i(a,t,n,s,A,o,0),void i(l,t,n,s,A,o,0)}c=c.next}a=a.next}while(a!==e)}function c(e,t){return e.x-t.x}function l(e,t){var n=function(e,t){var n,r=t,i=e.x,s=e.y,A=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var o=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=i&&o>A&&(A=o,n=r.x<r.next.x?r:r.next,o===i))return n}r=r.next}while(r!==t);if(!n)return null;var a,c=n,l=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&f(s<h?i:A,s,l,h,s<h?A:i,s,r.x,r.y)&&(a=Math.abs(s-r.y)/(i-r.x),y(r,e)&&(a<d||a===d&&(r.x>n.x||r.x===n.x&&u(n,r)))&&(n=r,d=a)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var i=b(n,e);return r(i,i.next),r(n,n.next)}function u(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function h(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function f(e,t,n,r,i,s,A,o){return(i-A)*(t-o)>=(e-A)*(s-o)&&(e-A)*(r-o)>=(n-A)*(t-o)&&(n-A)*(s-o)>=(i-A)*(r-o)}function p(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&m(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(y(e,t)&&y(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||_(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function m(e,t,n,r){var i=v(g(e,t,n)),s=v(g(e,t,r)),A=v(g(n,r,e)),o=v(g(n,r,t));return i!==s&&A!==o||(!(0!==i||!E(e,n,t))||(!(0!==s||!E(e,r,t))||(!(0!==A||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function v(e){return e>0?1:e<0?-1:0}function y(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function b(e,t){var n=new S(e.i,e.x,e.y),r=new S(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function w(e,t,n,r){var i=new S(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(e,t,n,r){for(var i=0,s=t,A=n-r;s<n;s+=r)i+=(e[A]-e[s])*(e[s+1]+e[A+1]),A=s;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,s=i?t[0]*n:e.length,A=Math.abs(R(e,0,s,n));if(i)for(var o=0,a=t.length;o<a;o++){var c=t[o]*n,l=o<a-1?t[o+1]*n:e.length;A-=Math.abs(R(e,c,l,n))}var u=0;for(o=0;o<r.length;o+=3){var h=r[o]*n,d=r[o+1]*n,f=r[o+2]*n;u+=Math.abs((e[h]-e[f])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[f+1]-e[h+1]))}return 0===A&&0===u?0:Math.abs((u-A)/A)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var A=0;A<t;A++)n.vertices.push(e[i][s][A]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},7304:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>G,JS:()=>D,O$:()=>U,PB:()=>N,QN:()=>_,QO:()=>Y,Sg:()=>V,Sq:()=>K,Wq:()=>$,Wy:()=>Z,Y9:()=>X,_k:()=>z,a0:()=>q,h6:()=>w,l3:()=>F,s7:()=>W,u$:()=>j,uE:()=>Q,xZ:()=>H,yn:()=>J});var r=function(e){var t,n=void 0!==(e=e||{})?e:{},r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);var i,s=[],A="";"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",i=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=$(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)};var o=n.print||console.log.bind(console),a=n.printErr||console.warn.bind(console);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=null,n.arguments&&(s=n.arguments);var c=0;var l=!1;function u(e){var t,r=n["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||oe("Assertion failed: "+t),r}function h(e,t,n,r,i){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var i=n,s=n+r-1,A=0;A<e.length;++A){var o=e.charCodeAt(A);if(o>=55296&&o<=57343)o=65536+((1023&o)<<10)|1023&e.charCodeAt(++A);if(o<=127){if(n>=s)break;t[n++]=o}else if(o<=2047){if(n+1>=s)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=s)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}t[n]=0})(e,_,t,n)})(e,t=J(n),n)}return t},array:function(e){var t=J(e.length);return function(e,t){g.set(e,t)}(e,t),t}};var A=u(e),o=[],a=0;if(r)for(var c=0;c<r.length;c++){var l=s[n[c]];l?(0===a&&(a=te()),o[c]=l(r[c])):o[c]=r[c]}var h=A.apply(null,o);return h=function(e){return"string"===t?f(e):"boolean"===t?Boolean(e):e}(h),0!==a&&ee(a),h}var d="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function f(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&d)return d.decode(e.subarray(t,i));for(var s="";t<i;){var A=e[t++];if(128&A){var o=63&e[t++];if(192!=(224&A)){var a=63&e[t++];if((A=224==(240&A)?(15&A)<<12|o<<6|a:(7&A)<<18|o<<12|a<<6|63&e[t++])<65536)s+=String.fromCharCode(A);else{var c=A-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&A)<<6|o)}else s+=String.fromCharCode(A)}return s}(_,e,t):""}var p,g,_,m,E,v,y;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function b(e,t){return e%t>0&&(e+=t-e%t),e}function w(e){p=e,n.HEAP8=g=new Int8Array(e),n.HEAP16=m=new Int16Array(e),n.HEAP32=E=new Int32Array(e),n.HEAPU8=_=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=v=new Float32Array(e),n.HEAPF64=y=new Float64Array(e)}var T=n.TOTAL_MEMORY||33554432;function S(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?n.dynCall_v(r):n.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}T=(p=n.buffer?n.buffer:new ArrayBuffer(T)).byteLength,w(p),E[6032]=5267040;var R=[],C=[],x=[],P=[];var M=Math.abs,I=Math.ceil,L=Math.floor,k=Math.min,O=0,B=null,D=null;n.preloadedImages={},n.preloadedAudios={};var N,F,U=null,G="data:application/octet-stream;base64,";function V(e){return String.prototype.startsWith?e.startsWith(G):0===e.indexOf(G)}U="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";function z(e){return e}function j(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){return e===e?e:e+" ["+e+"]"}))}function W(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function H(){return g.length}function Q(e){try{var t=new ArrayBuffer(e);if(t.byteLength!=e)return;return new Int8Array(t).set(g),q(t),w(t),1}catch(n){}}var X="function"==typeof atob?atob:function(e){var t,n,r,i,s,A,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=o.indexOf(e.charAt(c++))<<2|(i=o.indexOf(e.charAt(c++)))>>4,n=(15&i)<<4|(s=o.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(A=o.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!==s&&(a+=String.fromCharCode(n)),64!==A&&(a+=String.fromCharCode(r))}while(c<e.length);return a};function $(e){if(V(e))return function(e){try{for(var t=X(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(i){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(G.length))}var Y,K,Z=function(e,t,n){var r=new e.Int8Array(n),i=new e.Int32Array(n),s=(new e.Uint8Array(n),new e.Float32Array(n),new e.Float64Array(n)),A=0|t.o,o=0|t.p,a=e.Math.floor,c=e.Math.abs,l=e.Math.sqrt,u=e.Math.pow,h=e.Math.cos,d=e.Math.sin,f=e.Math.tan,p=e.Math.acos,g=e.Math.asin,_=e.Math.atan,m=e.Math.atan2,E=e.Math.ceil,v=e.Math.imul,y=e.Math.min,b=e.Math.max,w=e.Math.clz32,T=t.b,S=t.c,R=t.d,C=t.e,x=t.f,P=t.g,M=t.h,I=t.i,L=24160;function k(e,t,n,r){return 0|O(e|=0,t|=0,n|=0,r|=0,0)}function O(e,t,n,r,s){var A,o=0,a=0,c=0,l=0;if(A=L,L=L+16|0,a=A,!(0|B(e|=0,t|=0,n|=0,r|=0,s|=0)))return L=A,0|(r=0);do{if((0|n)>=0){if((0|n)>13780509){if(0|(o=0|tt(15,a)))break;a=0|i[(c=a)>>2],c=0|i[c+4>>2]}else l=0|Nt(0|n,0|(o=((0|n)<0)<<31>>31),3,0),c=0|S(),o=0|Lt(0|n,0|o,1,0),o=0|Lt(0|(o=0|Nt(0|l,0|c,0|o,0|S())),0|S(),1,0),c=0|S(),i[a>>2]=o,i[a+4>>2]=c,a=o;if(Xt(0|r,0,a<<3|0),0|s){Xt(0|s,0,a<<2|0),o=0|D(e,t,n,r,s,a,c,0);break}(o=0|It(a,4))?(l=0|D(e,t,n,r,o,a,c,0),Mt(o),o=l):o=13}else o=2}while(0);return L=A,0|(l=o)}function B(e,t,n,r,s){e|=0,t|=0,n|=0,r|=0,s|=0;var A,o,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0;if(o=L,L=L+16|0,g=o+8|0,i[(p=A=o)>>2]=e,i[p+4>>2]=t,(0|n)<0)return L=o,0|(g=2);if(i[(a=r)>>2]=e,i[a+4>>2]=t,(a=0!=(0|s))&&(i[s>>2]=0),0|Ne(e,t))return L=o,0|(g=9);i[g>>2]=0;e:do{if((0|n)>=1)if(a)for(d=1,h=0,f=0,p=1,a=e;;){if(!(h|f)){if(0|(a=0|N(a,t,4,g,A)))break e;if(0|Ne(a=0|i[(t=A)>>2],t=0|i[t+4>>2])){a=9;break e}}if(0|(a=0|N(a,t,0|i[22384+(f<<2)>>2],g,A)))break e;if(a=0|i[(t=A)>>2],t=0|i[t+4>>2],i[(e=r+(d<<3)|0)>>2]=a,i[e+4>>2]=t,i[s+(d<<2)>>2]=p,c=(0|(e=h+1|0))==(0|p),u=6==(0|(l=f+1|0)),0|Ne(a,t)){a=9;break e}if((0|(p=p+(u&c&1)|0))>(0|n)){a=0;break}d=d+1|0,h=c?0:e,f=c?u?0:l:f}else for(d=1,h=0,f=0,p=1,a=e;;){if(!(h|f)){if(0|(a=0|N(a,t,4,g,A)))break e;if(0|Ne(a=0|i[(t=A)>>2],t=0|i[t+4>>2])){a=9;break e}}if(0|(a=0|N(a,t,0|i[22384+(f<<2)>>2],g,A)))break e;if(a=0|i[(t=A)>>2],t=0|i[t+4>>2],i[(e=r+(d<<3)|0)>>2]=a,i[e+4>>2]=t,c=(0|(e=h+1|0))==(0|p),u=6==(0|(l=f+1|0)),0|Ne(a,t)){a=9;break e}if((0|(p=p+(u&c&1)|0))>(0|n)){a=0;break}d=d+1|0,h=c?0:e,f=c?u?0:l:f}else a=0}while(0);return L=o,0|(g=a)}function D(e,t,n,r,s,A,o,a){n|=0,r|=0,s|=0,a|=0;var c,l,u,h=0,d=0,f=0,p=0,g=0,_=0,m=0;if(u=L,L=L+16|0,c=u+8|0,l=u,h=0|Ut(0|(e|=0),0|(t|=0),0|(A|=0),0|(o|=0)),f=0|S(),!(0==(0|(m=0|i[(_=p=r+(h<<3)|0)>>2]))&0==(0|(_=0|i[_+4>>2]))|(d=(0|m)==(0|e)&(0|_)==(0|t))))do{h=0|Ft(0|(h=0|Lt(0|h,0|f,1,0)),0|S(),0|A,0|o),f=0|S(),d=(0|(_=0|i[(m=p=r+(h<<3)|0)>>2]))==(0|e)&(0|(m=0|i[m+4>>2]))==(0|t)}while(!(0==(0|_)&0==(0|m)|d));if(h=s+(h<<2)|0,d&&(0|i[h>>2])<=(0|a))return L=u,0|(m=0);if(i[(m=p)>>2]=e,i[m+4>>2]=t,i[h>>2]=a,(0|a)>=(0|n))return L=u,0|(m=0);switch(d=a+1|0,i[c>>2]=0,0|(h=0|N(e,t,2,c,l))){case 9:g=9;break;case 0:(h=0|D(0|i[(h=l)>>2],0|i[h+4>>2],n,r,s,A,o,d))||(g=9)}e:do{if(9==(0|g)){switch(i[c>>2]=0,0|(h=0|N(e,t,3,c,l))){case 9:break;case 0:if(0|(h=0|D(0|i[(h=l)>>2],0|i[h+4>>2],n,r,s,A,o,d)))break e;break;default:break e}switch(i[c>>2]=0,0|(h=0|N(e,t,1,c,l))){case 9:break;case 0:if(0|(h=0|D(0|i[(h=l)>>2],0|i[h+4>>2],n,r,s,A,o,d)))break e;break;default:break e}switch(i[c>>2]=0,0|(h=0|N(e,t,5,c,l))){case 9:break;case 0:if(0|(h=0|D(0|i[(h=l)>>2],0|i[h+4>>2],n,r,s,A,o,d)))break e;break;default:break e}switch(i[c>>2]=0,0|(h=0|N(e,t,4,c,l))){case 9:break;case 0:if(0|(h=0|D(0|i[(h=l)>>2],0|i[h+4>>2],n,r,s,A,o,d)))break e;break;default:break e}switch(i[c>>2]=0,0|(h=0|N(e,t,6,c,l))){case 9:break;case 0:if(0|(h=0|D(0|i[(h=l)>>2],0|i[h+4>>2],n,r,s,A,o,d)))break e;break;default:break e}return L=u,0|(m=0)}}while(0);return L=u,0|(m=h)}function N(e,t,n,r,s){e|=0,t|=0,s|=0;var A,o,a=0,c=0,l=0,u=0,h=0,d=0,f=0;if((n|=0)>>>0>6)return 0|(s=1);if(h=(0|i[(r|=0)>>2])%6|0,i[r>>2]=h,(0|h)>0){a=0;do{n=0|fe(n),a=a+1|0}while((0|a)<(0|i[r>>2]))}if(h=0|Vt(0|e,0|t,45),S(),(o=127&h)>>>0>121)return 0|(s=5);A=0|Fe(e,t),a=0|Vt(0|e,0|t,52),S(),a&=15;e:do{if(a){for(;;){if(l=0|Vt(0|e,0|t,0|(c=3*(15-a|0)|0)),S(),7==(0|(l&=7))){t=5;break}if(f=0==(0|je(a)),a=a+-1|0,d=0|zt(7,0,0|c),t&=~(0|S()),e=0|zt(0|i[(f?432:16)+(28*l|0)+(n<<2)>>2],0,0|c)|e&~d,t|=c=0|S(),!(n=0|i[(f?640:224)+(28*l|0)+(n<<2)>>2])){n=0;break e}if(!a){u=8;break e}}return 0|t}u=8}while(0);8==(0|u)&&(e|=0|zt(0|(f=0|i[848+(28*o|0)+(n<<2)>>2]),0,45),t=0|S()|-1040385&t,n=0|i[4272+(28*o|0)+(n<<2)>>2],127==(127&f|0)&&(f=0|zt(0|i[848+(28*o|0)+20>>2],0,45),t=0|S()|-1040385&t,n=0|i[4272+(28*o|0)+20>>2],e=0|Ge(f|e,t),t=0|S(),i[r>>2]=1+(0|i[r>>2]))),l=0|Vt(0|e,0|t,45),S(),l&=127;e:do{if(0|G(l)){t:do{if(1==(0|Fe(e,t))){if((0|o)!=(0|l)){if(0|W(l,0|i[7696+(28*o|0)>>2])){e=0|ze(e,t),c=1,t=0|S();break}R(23313,22416,436,22424)}switch(0|A){case 3:e=0|Ge(e,t),t=0|S(),i[r>>2]=1+(0|i[r>>2]),c=0;break t;case 5:e=0|ze(e,t),t=0|S(),i[r>>2]=5+(0|i[r>>2]),c=0;break t;case 0:return 0|(f=9);default:return 0|(f=1)}}else c=0}while(0);if((0|n)>0){a=0;do{e=0|Ue(e,t),t=0|S(),a=a+1|0}while((0|a)!=(0|n))}if((0|o)!=(0|l)){if(!(0|V(l))){if(0!=(0|c)|5!=(0|Fe(e,t)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&h){case 8:case 118:break e}3!=(0|Fe(e,t))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){a=0;do{e=0|Ge(e,t),t=0|S(),a=a+1|0}while((0|a)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,i[(f=s)>>2]=e,i[f+4>>2]=t,0|(f=0)}function F(e,t,n,r){n|=0,r|=0;var s,A,o,a=0,c=0;for(o=L,L=L+16|0,s=o,A=o+8|0,a=(a=0==(0|Ne(e|=0,t|=0)))?1:2;;){if(i[A>>2]=0,0==(0|N(e,t,a,A,s))&((0|i[(c=s)>>2])==(0|n)?(0|i[c+4>>2])==(0|r):0)){e=4;break}if((a=a+1|0)>>>0>=7){a=7,e=4;break}}return 4==(0|e)?(L=o,0|a):0}function U(e,t,n,r,A,o,a){t|=0,n|=0,r|=0,A|=0,o|=0,a|=0;var c,l,u,h,d,f,p,g,_,m,E=0,v=0,y=0,b=0,w=0,T=0,R=0,C=0,x=0,P=0,M=0,I=0,k=0,O=0,B=0,D=0,N=0,F=0,U=0;if(m=L,L=L+64|0,p=m+48|0,g=m+32|0,_=m+24|0,c=m+8|0,l=m,(0|(v=0|i[(e|=0)>>2]))<=0)return L=m,0|(B=0);for(u=e+4|0,h=p+8|0,d=g+8|0,f=c+8|0,E=0,k=0;;){I=(y=0|i[u>>2])+(k<<4)|0,i[p>>2]=i[I>>2],i[p+4>>2]=i[I+4>>2],i[p+8>>2]=i[I+8>>2],i[p+12>>2]=i[I+12>>2],(0|k)==(v+-1|0)?(i[g>>2]=i[y>>2],i[g+4>>2]=i[y+4>>2],i[g+8>>2]=i[y+8>>2],i[g+12>>2]=i[y+12>>2]):(I=y+(k+1<<4)|0,i[g>>2]=i[I>>2],i[g+4>>2]=i[I+4>>2],i[g+8>>2]=i[I+8>>2],i[g+12>>2]=i[I+12>>2]),v=0|K(p,g,r,_);e:do{if(v)y=0,E=v;else if(v=0|i[(y=_)>>2],(0|(y=0|i[y+4>>2]))>0|0==(0|y)&v>>>0>0){M=0,I=0;t:for(;;){if(U=+s[p>>3],F=+((P=0|kt(0|v,0|y,0|M,0|I))>>>0)+4294967296*+(0|S()),D=+(v>>>0)+4294967296*+(0|y),N=+(M>>>0)+4294967296*+(0|I),s[c>>3]=U*F/D+ +s[g>>3]*N/D,s[f>>3]=+s[h>>3]*F/D+ +s[d>>3]*N/D,0|(v=0|We(c,r,l))){E=v;break}T=0|Ut(0|(x=0|i[(P=l)>>2]),0|(P=0|i[P+4>>2]),0|t,0|n),b=0|S(),y=0|i[(w=v=a+(T<<3)|0)>>2],w=0|i[w+4>>2];n:do{if(0==(0|y)&0==(0|w))O=v,B=16;else for(R=0,C=0;;){if((0|R)>(0|n)|(0|R)==(0|n)&C>>>0>t>>>0){E=1;break t}if((0|y)==(0|x)&(0|w)==(0|P))break n;if(T=0|Ft(0|(v=0|Lt(0|T,0|b,1,0)),0|S(),0|t,0|n),b=0|S(),C=0|Lt(0|C,0|R,1,0),R=0|S(),0==(0|(y=0|i[(w=v=a+(T<<3)|0)>>2]))&0==(0|(w=0|i[w+4>>2]))){O=v,B=16;break}}}while(0);if(16!=(0|B)||(B=0,0==(0|x)&0==(0|P))||(i[(C=O)>>2]=x,i[C+4>>2]=P,C=o+(i[A>>2]<<3)|0,i[C>>2]=x,i[C+4>>2]=P,C=0|Lt(0|i[(C=A)>>2],0|i[C+4>>2],1,0),x=0|S(),i[(P=A)>>2]=C,i[P+4>>2]=x),M=0|Lt(0|M,0|I,1,0),I=0|S(),v=0|i[(y=_)>>2],!((0|(y=0|i[y+4>>2]))>(0|I)|(0|y)==(0|I)&v>>>0>M>>>0)){y=1;break e}}y=0}else y=1}while(0);if(k=k+1|0,!y){B=21;break}if((0|k)>=(0|(v=0|i[e>>2]))){E=0,B=21;break}}return 21==(0|B)?(L=m,0|E):0}function G(e){return(e|=0)>>>0>121?0|(e=0):0|(e=0|i[7696+(28*e|0)+16>>2])}function V(e){return 4==(0|(e|=0))|117==(0|e)|0}function z(e){return 0|i[11120+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)>>2]}function j(e){return 0|i[11120+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)+4>>2]}function W(e,t){return t|=0,(0|i[7696+(28*(e|=0)|0)+20>>2])==(0|t)?0|(t=1):0|(t=(0|i[7696+(28*e|0)+24>>2])==(0|t))}function H(e,t){return 0|i[848+(28*(e|=0)|0)+((t|=0)<<2)>>2]}function Q(e,t){return t|=0,(0|i[848+(28*(e|=0)|0)>>2])==(0|t)?0|(t=0):(0|i[848+(28*e|0)+4>>2])==(0|t)?0|(t=1):(0|i[848+(28*e|0)+8>>2])==(0|t)?0|(t=2):(0|i[848+(28*e|0)+12>>2])==(0|t)?0|(t=3):(0|i[848+(28*e|0)+16>>2])==(0|t)?0|(t=4):(0|i[848+(28*e|0)+20>>2])==(0|t)?0|(t=5):0|((0|i[848+(28*e|0)+24>>2])==(0|t)?6:7)}function X(e){return+s[(e|=0)+16>>3]<+s[e+24>>3]|0}function $(e,t){e|=0;var n,r,i=0;return(i=+s[(t|=0)>>3])>=+s[e+8>>3]&&i<=+s[e>>3]?(n=+s[e+16>>3],i=+s[e+24>>3],t=(r=+s[t+8>>3])>=i,e=r<=n&1,n<i?t&&(e=1):t||(e=0),0|(t=0!=(0|e))):0|(t=0)}function Y(e,t,n){e|=0,t|=0,n|=0;var r,o,l,u,h,d,f,p=0,g=0,_=0,m=0,v=0,b=0,w=0;d=L,L=L+288|0,h=d+264|0,m=d+96|0,g=(p=_=d)+96|0;do{i[p>>2]=0,p=p+4|0}while((0|p)<(0|g));return 0|(t=0|Ye(t,_))?(L=d,0|(b=t)):(Xe(_=0|i[(g=_)>>2],g=0|i[g+4>>2],h),$e(_,g,m),u=+et(h,m+8|0),s[h>>3]=+s[e>>3],s[(g=h+8|0)>>3]=+s[e+16>>3],s[m>>3]=+s[e+8>>3],s[(_=m+8|0)>>3]=+s[e+24>>3],o=+et(h,m),w=+s[g>>3]-+s[_>>3],l=+c(+w),f=+s[h>>3]-+s[m>>3],r=+c(+f),0==w|0==f||(w=+jt(+l,+r),w=+E(+o*o/+Wt(+w/+Wt(+l,+r),3)/(u*(2.59807621135*u)*.8)),s[A>>3]=w,v=~~w>>>0,b=+c(w)>=1?w>0?~~+y(+a(w/4294967296),4294967295)>>>0:~~+E((w-+(~~w>>>0))/4294967296)>>>0:0,2146435072==(2146435072&i[A+4>>2]|0))?t=1:(m=0==(0|v)&0==(0|b),i[(t=n)>>2]=m?1:v,i[t+4>>2]=m?0:b,t=0),L=d,0|(b=t))}function K(e,t,n,r){e|=0,t|=0,n|=0,r|=0;var o,l,u,h,d=0,f=0,p=0;h=L,L=L+288|0,l=h+264|0,u=h+96|0,o=(d=f=h)+96|0;do{i[d>>2]=0,d=d+4|0}while((0|d)<(0|o));return 0|(n=0|Ye(n,f))?(L=h,0|(r=n)):(Xe(d=0|i[(n=f)>>2],n=0|i[n+4>>2],l),$e(d,n,u),p=+et(l,u+8|0),p=+E(+ +et(e,t)/(2*p)),s[A>>3]=p,n=~~p>>>0,d=+c(p)>=1?p>0?~~+y(+a(p/4294967296),4294967295)>>>0:~~+E((p-+(~~p>>>0))/4294967296)>>>0:0,2146435072==(2146435072&i[A+4>>2]|0)?(L=h,0|(r=1)):(f=0==(0|n)&0==(0|d),i[r>>2]=f?1:n,i[r+4>>2]=f?0:d,L=h,0|(r=0)))}function Z(e,t,n,r){t|=0,n|=0,r|=0,i[(e|=0)>>2]=t,i[e+4>>2]=n,i[e+8>>2]=r}function q(e,t){e|=0;var n,r,A,o,a=0,l=0,u=0,h=0,d=0,f=0,p=0;i[(o=(t|=0)+8|0)>>2]=0,r=+s[e>>3],h=+c(+r),A=+s[e+8>>3],h+=.5*(d=+c(+A)/.8660254037844386),h-=+(0|(a=~~h)),d-=+(0|(e=~~d));do{if(h<.5){if(h<.3333333333333333){if(i[t>>2]=a,d<.5*(h+1)){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(e=(1&!(d<(p=1-h)))+e|0,i[t+4>>2]=e,p<=d&d<2*h){a=a+1|0,i[t>>2]=a;break}i[t>>2]=a;break}if(!(h<.6666666666666666)){if(a=a+1|0,i[t>>2]=a,d<.5*h){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(d<1-h){if(i[t+4>>2]=e,2*h-1<d){i[t>>2]=a;break}}else e=e+1|0,i[t+4>>2]=e;a=a+1|0,i[t>>2]=a}while(0);do{if(r<0){if(1&e){a=~~(+(0|a)-(2*(+((f=0|kt(0|a,((0|a)<0)<<31>>31|0,0|(f=(e+1|0)/2|0),((0|f)<0)<<31>>31|0))>>>0)+4294967296*+(0|S()))+1)),i[t>>2]=a;break}a=~~(+(0|a)-2*(+((f=0|kt(0|a,((0|a)<0)<<31>>31|0,0|(f=(0|e)/2|0),((0|f)<0)<<31>>31|0))>>>0)+4294967296*+(0|S()))),i[t>>2]=a;break}}while(0);f=t+4|0,A<0&&(a=a-((1|e<<1)/2|0)|0,i[t>>2]=a,e=0-e|0,i[f>>2]=e),l=e-a|0,(0|a)<0?(u=0-a|0,i[f>>2]=l,i[o>>2]=u,i[t>>2]=0,e=l,a=0):u=0,(0|e)<0&&(a=a-e|0,i[t>>2]=a,u=u-e|0,i[o>>2]=u,i[f>>2]=0,e=0),n=a-u|0,l=e-u|0,(0|u)<0&&(i[t>>2]=n,i[f>>2]=l,i[o>>2]=0,e=l,a=n,u=0),(0|(l=(0|u)<(0|(l=(0|e)<(0|a)?e:a))?u:l))<=0||(i[t>>2]=a-l,i[f>>2]=e-l,i[o>>2]=u-l)}function J(e){var t,n=0,r=0,s=0,A=0,o=0;n=0|i[(e|=0)>>2],r=0|i[(t=e+4|0)>>2],(0|n)<0&&(r=r-n|0,i[t>>2]=r,i[(o=e+8|0)>>2]=(0|i[o>>2])-n,i[e>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[e>>2]=n,A=(0|i[(o=e+8|0)>>2])-r|0,i[o>>2]=A,i[t>>2]=0,r=0):(o=A=e+8|0,A=0|i[A>>2]),(0|A)<0&&(n=n-A|0,i[e>>2]=n,r=r-A|0,i[t>>2]=r,i[o>>2]=0,A=0),(0|(s=(0|A)<(0|(s=(0|r)<(0|n)?r:n))?A:s))<=0||(i[e>>2]=n-s,i[t>>2]=r-s,i[o>>2]=A-s)}function ee(e,t){t|=0;var n,r;r=0|i[(e|=0)+8>>2],n=+((0|i[e+4>>2])-r|0),s[t>>3]=+((0|i[e>>2])-r|0)-.5*n,s[t+8>>3]=.8660254037844386*n}function te(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[t>>2])+(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])+(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])+(0|i[e+8>>2])}function ne(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[e>>2])-(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])-(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])-(0|i[t+8>>2])}function re(e,t){t|=0;var n,r=0;r=0|v(0|i[(e|=0)>>2],t),i[e>>2]=r,n=0|v(0|i[(r=e+4|0)>>2],t),i[r>>2]=n,t=0|v(0|i[(e=e+8|0)>>2],t),i[e>>2]=t}function ie(e){var t,n,r=0,s=0,A=0,o=0,a=0;a=(0|(n=0|i[(e|=0)>>2]))<0,e=(e=(s=(0|(o=((t=(0|(A=(0|i[e+4>>2])-(a?n:0)|0))<0)?0-A|0:0)+((0|i[e+8>>2])-(a?n:0))|0))<0)?0:o)-((A=(0|(s=(0|e)<(0|(s=(0|(r=(t?0:A)-(s?o:0)|0))<(0|(o=(a?0:n)-(t?A:0)-(s?o:0)|0))?r:o))?e:s))>0)?s:0)|0,r=r-(A?s:0)|0;e:do{switch(o-(A?s:0)|0){case 0:switch(0|r){case 0:return 0|(a=0==(0|e)?0:1==(0|e)?1:7);case 1:return 0|(a=0==(0|e)?2:1==(0|e)?3:7);default:break e}case 1:switch(0|r){case 0:return 0|(a=0==(0|e)?4:1==(0|e)?5:7);case 1:if(e)break e;return 0|(e=6);default:break e}}}while(0);return 0|(a=7)}function se(e){var t,n=0,r=0,s=0,A=0,o=0,a=0;A=0|i[(t=(e|=0)+8|0)>>2],o=(0|i[e>>2])-A|0,A=(0|i[(a=e+4|0)>>2])-A|0;do{if(o>>>0>715827881|A>>>0>715827881){if(r=(0|o)>0){if((2147483647-o|0)<(0|o))return 0|(a=1);if((2147483647-(o<<1)|0)<(0|o))return 0|(a=1)}else{if((-2147483648-o|0)>(0|o))return 0|(a=1);if((-2147483648-(o<<1)|0)>(0|o))return 0|(a=1)}if(n=3*o|0,(0|A)>0){if((2147483647-A|0)<(0|A))return 0|(a=1)}else if((-2147483648-A|0)>(0|A))return 0|(a=1);if(s=A<<1,(0|o)>-1){if((-2147483648|n|0)>=(0|A))return 0|(a=1)}else if((-2147483648^n|0)<(0|A))return 0|(a=1);if(r){if(!((2147483647-o|0)<(0|s))){r=s;break}return 0|(n=1)}if(!((-2147483648-o|0)>(0|s))){r=s;break}return 0|(n=1)}r=A<<1,n=3*o|0}while(0);s=0|xt(+(n-A|0)/7),i[e>>2]=s,A=0|xt(+(r+o|0)/7),i[a>>2]=A,i[t>>2]=0,n=(r=(0|A)<(0|s))?s:A,r=r?A:s;do{if((0|r)<0){if((0|n)>0){if((-2147483648|n|0)<(0|r)&-2147483648!=(0|r)&(2147483647-n|0)>=(0|r))break;R(23313,22444,355,22455)}if(-2147483648==(0|r)|(-2147483648-n|0)>(0|r)&&R(23313,22444,355,22455),(0|n)>-1){if((-2147483648|n|0)<(0|r))break;R(23313,22444,355,22455)}else{if((-2147483648^n|0)>=(0|r))break;R(23313,22444,355,22455)}}}while(0);return n=A-s|0,(0|s)<0?(r=0-s|0,i[a>>2]=n,i[t>>2]=r,i[e>>2]=0,s=0):(n=A,r=0),(0|n)<0&&(s=s-n|0,i[e>>2]=s,r=r-n|0,i[t>>2]=r,i[a>>2]=0,n=0),o=s-r|0,A=n-r|0,(0|r)<0?(i[e>>2]=o,i[a>>2]=A,i[t>>2]=0,n=A,A=o,r=0):A=s,(0|(s=(0|r)<(0|(s=(0|n)<(0|A)?n:A))?r:s))<=0||(i[e>>2]=A-s,i[a>>2]=n-s,i[t>>2]=r-s),0|(a=0)}function Ae(e){var t,n=0,r=0,s=0,A=0,o=0,a=0;A=0|i[(t=(e|=0)+8|0)>>2],o=(0|i[e>>2])-A|0,A=(0|i[(a=e+4|0)>>2])-A|0;do{if(o>>>0>715827881|A>>>0>715827881){if(r=(0|o)>0){if((2147483647-o|0)<(0|o))return 0|(a=1)}else if((-2147483648-o|0)>(0|o))return 0|(a=1);if(n=o<<1,(0|A)>0){if((2147483647-A|0)<(0|A))return 0|(a=1);if((2147483647-(A<<1)|0)<(0|A))return 0|(a=1)}else{if((-2147483648-A|0)>(0|A))return 0|(a=1);if((-2147483648-(A<<1)|0)>(0|A))return 0|(a=1)}if(s=3*A|0,r){if((2147483647-n|0)<(0|A))return 0|(a=1)}else if((-2147483648-n|0)>(0|A))return 0|(a=1);if((0|A)>-1){if((-2147483648|s|0)<(0|o)){r=s;break}return 0|(n=1)}if(!((-2147483648^s|0)<(0|o))){r=s;break}return 0|(n=1)}r=3*A|0,n=o<<1}while(0);s=0|xt(+(n+A|0)/7),i[e>>2]=s,A=0|xt(+(r-o|0)/7),i[a>>2]=A,i[t>>2]=0,n=(r=(0|A)<(0|s))?s:A,r=r?A:s;do{if((0|r)<0){if((0|n)>0){if((-2147483648|n|0)<(0|r)&-2147483648!=(0|r)&(2147483647-n|0)>=(0|r))break;R(23313,22444,404,22469)}if(-2147483648==(0|r)|(-2147483648-n|0)>(0|r)&&R(23313,22444,404,22469),(0|n)>-1){if((-2147483648|n|0)<(0|r))break;R(23313,22444,404,22469)}else{if((-2147483648^n|0)>=(0|r))break;R(23313,22444,404,22469)}}}while(0);return n=A-s|0,(0|s)<0?(r=0-s|0,i[a>>2]=n,i[t>>2]=r,i[e>>2]=0,s=0):(n=A,r=0),(0|n)<0&&(s=s-n|0,i[e>>2]=s,r=r-n|0,i[t>>2]=r,i[a>>2]=0,n=0),o=s-r|0,A=n-r|0,(0|r)<0?(i[e>>2]=o,i[a>>2]=A,i[t>>2]=0,n=A,A=o,r=0):A=s,(0|(s=(0|r)<(0|(s=(0|n)<(0|A)?n:A))?r:s))<=0||(i[e>>2]=A-s,i[a>>2]=n-s,i[t>>2]=r-s),0|(a=0)}function oe(e){var t,n,r=0,s=0,A=0,o=0,a=0;s=0|i[(t=(e|=0)+8|0)>>2],A=0|xt(+((3*(r=(0|i[e>>2])-s|0)|0)-(s=(0|i[(n=e+4|0)>>2])-s|0)|0)/7),i[e>>2]=A,r=0|xt(+((s<<1)+r|0)/7),i[n>>2]=r,i[t>>2]=0,s=r-A|0,(0|A)<0?(a=0-A|0,i[n>>2]=s,i[t>>2]=a,i[e>>2]=0,r=s,A=0,s=a):s=0,(0|r)<0&&(A=A-r|0,i[e>>2]=A,s=s-r|0,i[t>>2]=s,i[n>>2]=0,r=0),a=A-s|0,o=r-s|0,(0|s)<0?(i[e>>2]=a,i[n>>2]=o,i[t>>2]=0,r=o,o=a,s=0):o=A,(0|(A=(0|s)<(0|(A=(0|r)<(0|o)?r:o))?s:A))<=0||(i[e>>2]=o-A,i[n>>2]=r-A,i[t>>2]=s-A)}function ae(e){var t,n,r=0,s=0,A=0,o=0,a=0;s=0|i[(t=(e|=0)+8|0)>>2],A=0|xt(+(((r=(0|i[e>>2])-s|0)<<1)+(s=(0|i[(n=e+4|0)>>2])-s|0)|0)/7),i[e>>2]=A,r=0|xt(+((3*s|0)-r|0)/7),i[n>>2]=r,i[t>>2]=0,s=r-A|0,(0|A)<0?(a=0-A|0,i[n>>2]=s,i[t>>2]=a,i[e>>2]=0,r=s,A=0,s=a):s=0,(0|r)<0&&(A=A-r|0,i[e>>2]=A,s=s-r|0,i[t>>2]=s,i[n>>2]=0,r=0),a=A-s|0,o=r-s|0,(0|s)<0?(i[e>>2]=a,i[n>>2]=o,i[t>>2]=0,r=o,o=a,s=0):o=A,(0|(A=(0|s)<(0|(A=(0|r)<(0|o)?r:o))?s:A))<=0||(i[e>>2]=o-A,i[n>>2]=r-A,i[t>>2]=s-A)}function ce(e){var t,n,r,s=0,A=0,o=0,a=0;s=0|i[(e|=0)>>2],A=0|i[(n=e+4|0)>>2],o=0|i[(r=e+8|0)>>2],a=A+(3*s|0)|0,i[e>>2]=a,A=o+(3*A|0)|0,i[n>>2]=A,s=(3*o|0)+s|0,i[r>>2]=s,o=A-a|0,(0|a)<0?(s=s-a|0,i[n>>2]=o,i[r>>2]=s,i[e>>2]=0,A=o,o=0):o=a,(0|A)<0&&(o=o-A|0,i[e>>2]=o,s=s-A|0,i[r>>2]=s,i[n>>2]=0,A=0),t=o-s|0,a=A-s|0,(0|s)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,o=t,s=0):a=A,(0|(A=(0|s)<(0|(A=(0|a)<(0|o)?a:o))?s:A))<=0||(i[e>>2]=o-A,i[n>>2]=a-A,i[r>>2]=s-A)}function le(e){var t,n,r,s=0,A=0,o=0,a=0;a=0|i[(e|=0)>>2],o=(3*(s=0|i[(n=e+4|0)>>2])|0)+a|0,a=(A=0|i[(r=e+8|0)>>2])+(3*a|0)|0,i[e>>2]=a,i[n>>2]=o,s=(3*A|0)+s|0,i[r>>2]=s,A=o-a|0,(0|a)<0?(s=s-a|0,i[n>>2]=A,i[r>>2]=s,i[e>>2]=0,a=0):A=o,(0|A)<0&&(a=a-A|0,i[e>>2]=a,s=s-A|0,i[r>>2]=s,i[n>>2]=0,A=0),t=a-s|0,o=A-s|0,(0|s)<0?(i[e>>2]=t,i[n>>2]=o,i[r>>2]=0,a=t,s=0):o=A,(0|(A=(0|s)<(0|(A=(0|o)<(0|a)?o:a))?s:A))<=0||(i[e>>2]=a-A,i[n>>2]=o-A,i[r>>2]=s-A)}function ue(e,t){e|=0;var n,r,s,A=0,o=0,a=0;((t|=0)+-1|0)>>>0>=6||(a=(0|i[15440+(12*t|0)>>2])+(0|i[e>>2])|0,i[e>>2]=a,s=e+4|0,o=(0|i[15440+(12*t|0)+4>>2])+(0|i[s>>2])|0,i[s>>2]=o,r=e+8|0,t=(0|i[15440+(12*t|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=t,A=o-a|0,(0|a)<0?(t=t-a|0,i[s>>2]=A,i[r>>2]=t,i[e>>2]=0,o=0):(A=o,o=a),(0|A)<0&&(o=o-A|0,i[e>>2]=o,t=t-A|0,i[r>>2]=t,i[s>>2]=0,A=0),n=o-t|0,a=A-t|0,(0|t)<0?(i[e>>2]=n,i[s>>2]=a,i[r>>2]=0,o=n,t=0):a=A,(0|(A=(0|t)<(0|(A=(0|a)<(0|o)?a:o))?t:A))<=0||(i[e>>2]=o-A,i[s>>2]=a-A,i[r>>2]=t-A))}function he(e){var t,n,r,s=0,A=0,o=0,a=0;a=0|i[(e|=0)>>2],o=(s=0|i[(n=e+4|0)>>2])+a|0,a=(A=0|i[(r=e+8|0)>>2])+a|0,i[e>>2]=a,i[n>>2]=o,s=A+s|0,i[r>>2]=s,A=o-a|0,(0|a)<0?(s=s-a|0,i[n>>2]=A,i[r>>2]=s,i[e>>2]=0,o=0):(A=o,o=a),(0|A)<0&&(o=o-A|0,i[e>>2]=o,s=s-A|0,i[r>>2]=s,i[n>>2]=0,A=0),t=o-s|0,a=A-s|0,(0|s)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,o=t,s=0):a=A,(0|(A=(0|s)<(0|(A=(0|a)<(0|o)?a:o))?s:A))<=0||(i[e>>2]=o-A,i[n>>2]=a-A,i[r>>2]=s-A)}function de(e){var t,n,r,s=0,A=0,o=0,a=0;s=0|i[(e|=0)>>2],o=0|i[(n=e+4|0)>>2],A=0|i[(r=e+8|0)>>2],a=o+s|0,i[e>>2]=a,o=A+o|0,i[n>>2]=o,s=A+s|0,i[r>>2]=s,A=o-a|0,(0|a)<0?(s=s-a|0,i[n>>2]=A,i[r>>2]=s,i[e>>2]=0,o=0):(A=o,o=a),(0|A)<0&&(o=o-A|0,i[e>>2]=o,s=s-A|0,i[r>>2]=s,i[n>>2]=0,A=0),t=o-s|0,a=A-s|0,(0|s)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,o=t,s=0):a=A,(0|(A=(0|s)<(0|(A=(0|a)<(0|o)?a:o))?s:A))<=0||(i[e>>2]=o-A,i[n>>2]=a-A,i[r>>2]=s-A)}function fe(e){switch(0|(e|=0)){case 1:e=5;break;case 5:e=4;break;case 4:e=6;break;case 6:e=2;break;case 2:e=3;break;case 3:e=1}return 0|e}function pe(e){switch(0|(e|=0)){case 1:e=3;break;case 3:e=2;break;case 2:e=6;break;case 6:e=4;break;case 4:e=5;break;case 5:e=1}return 0|e}function ge(e){var t,n,r,s=0,A=0,o=0,a=0;s=0|i[(e|=0)>>2],A=0|i[(n=e+4|0)>>2],o=0|i[(r=e+8|0)>>2],a=A+(s<<1)|0,i[e>>2]=a,A=o+(A<<1)|0,i[n>>2]=A,s=(o<<1)+s|0,i[r>>2]=s,o=A-a|0,(0|a)<0?(s=s-a|0,i[n>>2]=o,i[r>>2]=s,i[e>>2]=0,A=o,o=0):o=a,(0|A)<0&&(o=o-A|0,i[e>>2]=o,s=s-A|0,i[r>>2]=s,i[n>>2]=0,A=0),t=o-s|0,a=A-s|0,(0|s)<0?(i[e>>2]=t,i[n>>2]=a,i[r>>2]=0,o=t,s=0):a=A,(0|(A=(0|s)<(0|(A=(0|a)<(0|o)?a:o))?s:A))<=0||(i[e>>2]=o-A,i[n>>2]=a-A,i[r>>2]=s-A)}function _e(e){var t,n,r,s=0,A=0,o=0,a=0;a=0|i[(e|=0)>>2],o=((s=0|i[(n=e+4|0)>>2])<<1)+a|0,a=(A=0|i[(r=e+8|0)>>2])+(a<<1)|0,i[e>>2]=a,i[n>>2]=o,s=(A<<1)+s|0,i[r>>2]=s,A=o-a|0,(0|a)<0?(s=s-a|0,i[n>>2]=A,i[r>>2]=s,i[e>>2]=0,a=0):A=o,(0|A)<0&&(a=a-A|0,i[e>>2]=a,s=s-A|0,i[r>>2]=s,i[n>>2]=0,A=0),t=a-s|0,o=A-s|0,(0|s)<0?(i[e>>2]=t,i[n>>2]=o,i[r>>2]=0,a=t,s=0):o=A,(0|(A=(0|s)<(0|(A=(0|o)<(0|a)?o:a))?s:A))<=0||(i[e>>2]=a-A,i[n>>2]=o-A,i[r>>2]=s-A)}function me(e,t){t|=0;var n,r,s,A=0,o=0,a=0;return s=(0|(r=(0|i[(e|=0)>>2])-(0|i[t>>2])|0))<0,n=(0|(o=(0|i[e+4>>2])-(0|i[t+4>>2])-(s?r:0)|0))<0,t=(t=(e=(0|(a=(s?0-r|0:0)+(0|i[e+8>>2])-(0|i[t+8>>2])+(n?0-o|0:0)|0))<0)?0:a)-((o=(0|(e=(0|t)<(0|(e=(0|(A=(n?0:o)-(e?a:0)|0))<(0|(a=(s?0:r)-(n?o:0)-(e?a:0)|0))?A:a))?t:e))>0)?e:0)|0,A=A-(o?e:0)|0,0|((0|(e=(0|(e=a-(o?e:0)|0))>-1?e:0-e|0))>(0|(t=(0|(A=(0|A)>-1?A:0-A|0))>(0|(t=(0|t)>-1?t:0-t|0))?A:t))?e:t)}function Ee(e,t){t|=0;var n;n=0|i[(e|=0)+8>>2],i[t>>2]=(0|i[e>>2])-n,i[t+4>>2]=(0|i[e+4>>2])-n}function ve(e,t){t|=0;var n,r,s,A=0,o=0,a=0;o=0|i[(e|=0)>>2],i[t>>2]=o,a=0|i[e+4>>2],i[(r=t+4|0)>>2]=a,i[(s=t+8|0)>>2]=0,e=(A=(0|a)<(0|o))?o:a,A=A?a:o;do{if((0|A)<0){if((0|e)>0){if((-2147483648|e|0)<(0|A)&-2147483648!=(0|A)&(2147483647-e|0)>=(0|A))break;return 0|(e=1)}if(-2147483648==(0|A)|(-2147483648-e|0)>(0|A))return 0|(t=1);if((0|e)>-1){if((-2147483648|e|0)<(0|A))break;return 0|(e=1)}if(!((-2147483648^e|0)<(0|A)))break;return 0|(e=1)}}while(0);return e=a-o|0,(0|o)<0?(A=0-o|0,i[r>>2]=e,i[s>>2]=A,i[t>>2]=0,o=0):(e=a,A=0),(0|e)<0&&(o=o-e|0,i[t>>2]=o,A=A-e|0,i[s>>2]=A,i[r>>2]=0,e=0),n=o-A|0,a=e-A|0,(0|A)<0?(i[t>>2]=n,i[r>>2]=a,i[s>>2]=0,e=a,a=n,A=0):a=o,(0|(o=(0|A)<(0|(o=(0|e)<(0|a)?e:a))?A:o))<=0||(i[t>>2]=a-o,i[r>>2]=e-o,i[s>>2]=A-o),0|(t=0)}function ye(e){var t,n,r,s;n=(s=0|i[(t=(e|=0)+8|0)>>2])-(0|i[e>>2])|0,i[e>>2]=n,e=(0|i[(r=e+4|0)>>2])-s|0,i[r>>2]=e,i[t>>2]=0-(e+n)}function be(e){var t,n,r=0,s=0,A=0,o=0,a=0;r=0-(s=0|i[(e|=0)>>2])|0,i[e>>2]=r,i[(t=e+8|0)>>2]=0,o=(A=0|i[(n=e+4|0)>>2])+s|0,(0|s)>0?(i[n>>2]=o,i[t>>2]=s,i[e>>2]=0,r=0,A=o):s=0,(0|A)<0?(a=r-A|0,i[e>>2]=a,s=s-A|0,i[t>>2]=s,i[n>>2]=0,o=a-s|0,r=0-s|0,(0|s)<0?(i[e>>2]=o,i[n>>2]=r,i[t>>2]=0,A=r,s=0):(A=0,o=a)):o=r,(0|(r=(0|s)<(0|(r=(0|A)<(0|o)?A:o))?s:r))<=0||(i[e>>2]=o-r,i[n>>2]=A-r,i[t>>2]=s-r)}function we(e,t,n){n|=0;var r,s,A=0,o=0;return s=L,L=L+16|0,r=s,o=-2130706433&(t|=0)|134217728,!0&268435456==(2013265920&t|0)?(A=0|Vt(0|(e|=0),0|t,56),S(),A=0|function(e,t,n){n|=0;var r=0,s=0,A=0;if(A=L,L=L+16|0,s=A,r=0|Ne(e=e|0,t=t|0),(n+-1|0)>>>0>5)return L=A,0|(s=-1);if(1==(0|n)&(r=0!=(0|r)))return L=A,0|(s=-1);do{if(!(0|Et(e,t,s))){if(r){r=(5+(0|i[21936+(n<<2)>>2])-(0|i[s>>2])|0)%5|0;break}r=(6+(0|i[21968+(n<<2)>>2])-(0|i[s>>2])|0)%6|0;break}r=-1}while(0);return L=A,0|(s=r)}(e,o,7&A),-1==(0|A)?(i[n>>2]=0,L=s,0|(o=6)):(0|Qe(e,o,r)&&R(23313,22484,282,22499),t=0|Vt(0|e,0|t,52),S(),t&=15,0|Ne(e,o)?Ce(r,t,A,2,n):Ie(r,t,A,2,n),L=s,0|(o=0))):(L=s,0|(o=6))}function Te(e,t,n,r){t|=0,r|=0;var A,o=0,a=0,c=0,l=0;if(A=L,L=L+16|0,function(e,t,n){t|=0,n|=0;var r=0,A=0,o=0;o=L,L=L+32|0,function(e,t){t|=0;var n=0,r=0,i=0;n=+s[(e=e|0)>>3],r=+h(+n),n=+d(+n),s[t+16>>3]=n,n=+s[e+8>>3],i=r*+h(+n),s[t>>3]=i,n=r*+d(+n),s[t+8>>3]=n}(e|=0,A=o),i[t>>2]=0,s[n>>3]=5,(r=+mt(16400,A))<+s[n>>3]&&(i[t>>2]=0,s[n>>3]=r);(r=+mt(16424,A))<+s[n>>3]&&(i[t>>2]=1,s[n>>3]=r);(r=+mt(16448,A))<+s[n>>3]&&(i[t>>2]=2,s[n>>3]=r);(r=+mt(16472,A))<+s[n>>3]&&(i[t>>2]=3,s[n>>3]=r);(r=+mt(16496,A))<+s[n>>3]&&(i[t>>2]=4,s[n>>3]=r);(r=+mt(16520,A))<+s[n>>3]&&(i[t>>2]=5,s[n>>3]=r);(r=+mt(16544,A))<+s[n>>3]&&(i[t>>2]=6,s[n>>3]=r);(r=+mt(16568,A))<+s[n>>3]&&(i[t>>2]=7,s[n>>3]=r);(r=+mt(16592,A))<+s[n>>3]&&(i[t>>2]=8,s[n>>3]=r);(r=+mt(16616,A))<+s[n>>3]&&(i[t>>2]=9,s[n>>3]=r);(r=+mt(16640,A))<+s[n>>3]&&(i[t>>2]=10,s[n>>3]=r);(r=+mt(16664,A))<+s[n>>3]&&(i[t>>2]=11,s[n>>3]=r);(r=+mt(16688,A))<+s[n>>3]&&(i[t>>2]=12,s[n>>3]=r);(r=+mt(16712,A))<+s[n>>3]&&(i[t>>2]=13,s[n>>3]=r);(r=+mt(16736,A))<+s[n>>3]&&(i[t>>2]=14,s[n>>3]=r);(r=+mt(16760,A))<+s[n>>3]&&(i[t>>2]=15,s[n>>3]=r);(r=+mt(16784,A))<+s[n>>3]&&(i[t>>2]=16,s[n>>3]=r);(r=+mt(16808,A))<+s[n>>3]&&(i[t>>2]=17,s[n>>3]=r);(r=+mt(16832,A))<+s[n>>3]&&(i[t>>2]=18,s[n>>3]=r);if(!((r=+mt(16856,A))<+s[n>>3]))return void(L=o);i[t>>2]=19,s[n>>3]=r,L=o}(e|=0,n|=0,l=A),(a=+p(+(1-.5*+s[l>>3])))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(L=A);if(l=0|i[n>>2],o=+qe((o=+s[15920+(24*l|0)>>3])-+qe(+function(e,t){e|=0;var n=0,r=0,i=0,A=0,o=0;return A=+s[(t=t|0)>>3],r=+h(+A),i=+s[t+8>>3]-+s[e+8>>3],o=r*+d(+i),n=+s[e>>3],+ +m(+o,+(+d(+A)*+h(+n)-+h(+i)*(r*+d(+n))))}(15600+(l<<4)|0,e))),c=0|je(t)?+qe(o+-.3334731722518321):o,o=+f(+a)/.381966011250105,(0|t)>0){e=0;do{o*=2.6457513110645907,e=e+1|0}while((0|e)!=(0|t))}a=+h(+c)*o,s[r>>3]=a,c=+d(+c)*o,s[r+8>>3]=c,L=A}function Se(e,t,n,r,A){t|=0,n|=0,r|=0,A|=0;var o=0,a=0;if(o=+function(e){var t=0,n=0;return n=+s[(e=e|0)>>3],t=+s[e+8>>3],+ +l(+(n*n+t*t))}(e|=0),o<1e-16)return t=15600+(t<<4)|0,i[A>>2]=i[t>>2],i[A+4>>2]=i[t+4>>2],i[A+8>>2]=i[t+8>>2],void(i[A+12>>2]=i[t+12>>2]);if(a=+m(+ +s[e+8>>3],+ +s[e>>3]),(0|n)>0){e=0;do{o/=2.6457513110645907,e=e+1|0}while((0|e)!=(0|n))}r?(o/=3,n=0==(0|je(n)),o=+_(.381966011250105*(n?o:o/2.6457513110645907))):(o=+_(.381966011250105*o),0|je(n)&&(a=+qe(a+.3334731722518321))),function(e,t,n,r){e|=0,t=+t,r|=0;var A=0,o=0,a=0,l=0;if((n=+n)<1e-16)return i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],void(i[r+12>>2]=i[e+12>>2]);o=t<0?t+6.283185307179586:t,o=t>=6.283185307179586?o+-6.283185307179586:o;do{if(!(o<1e-16)){if(A=+c(+(o+-3.141592653589793))<1e-16,t=+s[e>>3],A){t-=n,s[r>>3]=t,A=r;break}if(a=+h(+n),n=+d(+n),t=a*+d(+t)+ +h(+o)*(n*+h(+t)),t=+g(+((t=t>1?1:t)<-1?-1:t)),s[r>>3]=t,+c(+(t+-1.5707963267948966))<1e-16)return s[r>>3]=1.5707963267948966,void(s[r+8>>3]=0);if(+c(+(t+1.5707963267948966))<1e-16)return s[r>>3]=-1.5707963267948966,void(s[r+8>>3]=0);if(l=+h(+t),o=n*+d(+o)/l,n=+s[e>>3],t=(a-+d(+t)*+d(+n))/+h(+n)/l,a=o>1?1:o,t=t>1?1:t,(t=+s[e+8>>3]+ +m(+(a<-1?-1:a),+(t<-1?-1:t)))>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);return void(s[r+8>>3]=t)}t=+s[e>>3]+n,s[r>>3]=t,A=r}while(0);if(+c(+(t+-1.5707963267948966))<1e-16)return s[A>>3]=1.5707963267948966,void(s[r+8>>3]=0);if(+c(+(t+1.5707963267948966))<1e-16)return s[A>>3]=-1.5707963267948966,void(s[r+8>>3]=0);if((t=+s[e+8>>3])>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);s[r+8>>3]=t}(15600+(t<<4)|0,+qe(+s[15920+(24*t|0)>>3]-a),o,A)}function Re(e,t,n){t|=0,n|=0;var r,s;r=L,L=L+16|0,ee((e|=0)+4|0,s=r),Se(s,0|i[e>>2],t,0,n),L=r}function Ce(e,t,n,r,A){e|=0,t|=0,n|=0,r|=0,A|=0;var o,a,c,l,u,h,d,f,p,g,_,m,E,v,y,b,w,T,S,C,x,P,M=0,I=0,k=0,O=0,B=0,D=0;if(P=L,L=L+272|0,O=P+240|0,S=P,C=P+224|0,x=P+208|0,_=P+176|0,m=P+160|0,E=P+192|0,v=P+144|0,y=P+128|0,b=P+112|0,w=P+96|0,T=P+80|0,i[(M=P+256|0)>>2]=t,i[O>>2]=i[e>>2],i[O+4>>2]=i[e+4>>2],i[O+8>>2]=i[e+8>>2],i[O+12>>2]=i[e+12>>2],xe(O,M,S),i[A>>2]=0,(0|(O=r+n+(5==(0|r)&1)|0))<=(0|n))L=P;else{a=C+4|0,c=_+4|0,l=n+5|0,u=16880+((o=0|i[M>>2])<<2)|0,h=16960+(o<<2)|0,d=y+8|0,f=b+8|0,p=w+8|0,g=x+4|0,k=n;e:for(;;){I=S+(((0|k)%5|0)<<4)|0,i[x>>2]=i[I>>2],i[x+4>>2]=i[I+4>>2],i[x+8>>2]=i[I+8>>2],i[x+12>>2]=i[I+12>>2];do{}while(2==(0|Pe(x,o,0,1)));if((0|k)>(0|n)&0!=(0|je(t))){if(i[_>>2]=i[x>>2],i[_+4>>2]=i[x+4>>2],i[_+8>>2]=i[x+8>>2],i[_+12>>2]=i[x+12>>2],ee(a,m),r=0|i[_>>2],M=0|i[17040+(80*r|0)+(i[C>>2]<<2)>>2],i[_>>2]=i[18640+(80*r|0)+(20*M|0)>>2],(0|(I=0|i[18640+(80*r|0)+(20*M|0)+16>>2]))>0){e=0;do{he(c),e=e+1|0}while((0|e)<(0|I))}switch(I=18640+(80*r|0)+(20*M|0)+4|0,i[E>>2]=i[I>>2],i[E+4>>2]=i[I+4>>2],i[E+8>>2]=i[I+8>>2],re(E,3*(0|i[u>>2])|0),te(c,E,c),J(c),ee(c,v),B=+(0|i[h>>2]),s[y>>3]=3*B,s[d>>3]=0,D=-1.5*B,s[b>>3]=D,s[f>>3]=2.598076211353316*B,s[w>>3]=D,s[p>>3]=-2.598076211353316*B,0|i[17040+(80*(0|i[_>>2])|0)+(i[x>>2]<<2)>>2]){case 1:e=b,r=y;break;case 3:e=w,r=b;break;case 2:e=y,r=w;break;default:e=12;break e}gt(m,v,r,e,T),Se(T,0|i[_>>2],o,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2])}if((0|k)<(0|l)&&(ee(g,_),Se(_,0|i[x>>2],o,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2])),i[C>>2]=i[x>>2],i[C+4>>2]=i[x+4>>2],i[C+8>>2]=i[x+8>>2],i[C+12>>2]=i[x+12>>2],(0|(k=k+1|0))>=(0|O)){e=3;break}}3!=(0|e)?12==(0|e)&&R(22522,22569,571,22579):L=P}}function xe(e,t,n){e|=0,t|=0,n|=0;var r,s=0,A=0,o=0,a=0,c=0;r=L,L=L+128|0,A=r,a=20240,c=(o=s=r+64|0)+60|0;do{i[o>>2]=i[a>>2],o=o+4|0,a=a+4|0}while((0|o)<(0|c));a=20304,c=(o=A)+60|0;do{i[o>>2]=i[a>>2],o=o+4|0,a=a+4|0}while((0|o)<(0|c));s=(c=0==(0|je(0|i[t>>2])))?s:A,ge(A=e+4|0),_e(A),0|je(0|i[t>>2])&&(le(A),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],te(A,s,t=n+4|0),J(t),i[n+16>>2]=i[e>>2],te(A,s+12|0,t=n+20|0),J(t),i[n+32>>2]=i[e>>2],te(A,s+24|0,t=n+36|0),J(t),i[n+48>>2]=i[e>>2],te(A,s+36|0,t=n+52|0),J(t),i[n+64>>2]=i[e>>2],te(A,s+48|0,n=n+68|0),J(n),L=r}function Pe(e,t,n,r){n|=0,r|=0;var s,A,o,a,c,l,u=0,h=0,d=0,f=0,p=0;if(l=L,L=L+32|0,c=l+12|0,A=l,p=(e|=0)+4|0,f=0|i[16960+((t|=0)<<2)>>2],f=(a=0!=(0|r))?3*f|0:f,u=0|i[p>>2],s=0|i[(o=e+8|0)>>2],a){if((0|(u=s+u+(r=0|i[(h=e+12|0)>>2])|0))==(0|f))return L=l,0|(p=1);d=h}else u=s+u+(r=0|i[(d=e+12|0)>>2])|0;if((0|u)<=(0|f))return L=l,0|(p=0);do{if((0|r)>0){if(r=0|i[e>>2],(0|s)>0){h=18640+(80*r|0)+60|0,r=e;break}r=18640+(80*r|0)+40|0,n?(Z(c,f,0,0),ne(p,c,A),de(A),te(A,c,p),h=r,r=e):(h=r,r=e)}else h=18640+(80*(0|i[e>>2])|0)+20|0,r=e}while(0);if(i[r>>2]=i[h>>2],(0|i[(u=h+16|0)>>2])>0){r=0;do{he(p),r=r+1|0}while((0|r)<(0|i[u>>2]))}return e=h+4|0,i[c>>2]=i[e>>2],i[c+4>>2]=i[e+4>>2],i[c+8>>2]=i[e+8>>2],t=0|i[16880+(t<<2)>>2],re(c,a?3*t|0:t),te(p,c,p),J(p),r=a&&((0|i[o>>2])+(0|i[p>>2])+(0|i[d>>2])|0)==(0|f)?1:2,L=l,0|(p=r)}function Me(e,t){e|=0,t|=0;var n=0;do{n=0|Pe(e,t,0,1)}while(2==(0|n));return 0|n}function Ie(e,t,n,r,A){e|=0,t|=0,n|=0,r|=0,A|=0;var o,a,c,l,u,h,d,f,p,g,_,m,E,v,y,b,w,T,S=0,C=0,x=0,P=0,M=0;if(T=L,L=L+240|0,v=T+208|0,y=T,b=T+192|0,w=T+176|0,p=T+160|0,g=T+144|0,_=T+128|0,m=T+112|0,E=T+96|0,i[(S=T+224|0)>>2]=t,i[v>>2]=i[e>>2],i[v+4>>2]=i[e+4>>2],i[v+8>>2]=i[e+8>>2],i[v+12>>2]=i[e+12>>2],Le(v,S,y),i[A>>2]=0,(0|(f=r+n+(6==(0|r)&1)|0))<=(0|n))L=T;else{a=n+6|0,c=16960+((o=0|i[S>>2])<<2)|0,l=g+8|0,u=_+8|0,h=m+8|0,d=b+4|0,C=0,x=n,r=-1;e:for(;;){if(e=y+((S=(0|x)%6|0)<<4)|0,i[b>>2]=i[e>>2],i[b+4>>2]=i[e+4>>2],i[b+8>>2]=i[e+8>>2],i[b+12>>2]=i[e+12>>2],e=C,C=0|Pe(b,o,0,1),(0|x)>(0|n)&0!=(0|je(t))&&(1!=(0|e)&&(0|i[b>>2])!=(0|r))){switch(ee(y+(((S+5|0)%6|0)<<4)+4|0,w),ee(y+(S<<4)+4|0,p),P=+(0|i[c>>2]),s[g>>3]=3*P,s[l>>3]=0,M=-1.5*P,s[_>>3]=M,s[u>>3]=2.598076211353316*P,s[m>>3]=M,s[h>>3]=-2.598076211353316*P,S=0|i[v>>2],0|i[17040+(80*S|0)+(((0|r)==(0|S)?0|i[b>>2]:r)<<2)>>2]){case 1:e=_,r=g;break;case 3:e=m,r=_;break;case 2:e=g,r=m;break;default:e=8;break e}gt(w,p,r,e,E),0|_t(w,E)||0|_t(p,E)||(Se(E,0|i[v>>2],o,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2]))}if((0|x)<(0|a)&&(ee(d,w),Se(w,0|i[b>>2],o,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2])),(0|(x=x+1|0))>=(0|f)){e=3;break}r=0|i[b>>2]}3!=(0|e)?8==(0|e)&&R(22606,22569,736,22651):L=T}}function Le(e,t,n){e|=0,t|=0,n|=0;var r,s=0,A=0,o=0,a=0,c=0;r=L,L=L+160|0,A=r,a=20368,c=(o=s=r+80|0)+72|0;do{i[o>>2]=i[a>>2],o=o+4|0,a=a+4|0}while((0|o)<(0|c));a=20448,c=(o=A)+72|0;do{i[o>>2]=i[a>>2],o=o+4|0,a=a+4|0}while((0|o)<(0|c));s=(c=0==(0|je(0|i[t>>2])))?s:A,ge(A=e+4|0),_e(A),0|je(0|i[t>>2])&&(le(A),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],te(A,s,t=n+4|0),J(t),i[n+16>>2]=i[e>>2],te(A,s+12|0,t=n+20|0),J(t),i[n+32>>2]=i[e>>2],te(A,s+24|0,t=n+36|0),J(t),i[n+48>>2]=i[e>>2],te(A,s+36|0,t=n+52|0),J(t),i[n+64>>2]=i[e>>2],te(A,s+48|0,t=n+68|0),J(t),i[n+80>>2]=i[e>>2],te(A,s+60|0,n=n+84|0),J(n),L=r}function ke(e,t){return t=0|Vt(0|(e|=0),0|(t|=0),45),S(),127&t|0}function Oe(e,t){var n=0,r=0,i=0,s=0,A=0,o=0;if(!(!0&134217728==(-16777216&(t|=0)|0)))return 0|(t=0);if(A=0|Vt(0|(e|=0),0|t,45),S(),(A&=127)>>>0>121)return 0|(t=0);n=0|Vt(0|e,0|t,52),S(),n&=15;do{if(0|n){for(i=1,r=0;;){if(s=0|Vt(0|e,0|t,3*(15-i|0)|0),S(),0!=(0|(s&=7))&(1^r)){if(1==(0|s)&0!=(0|G(A))){o=0,r=13;break}r=1}if(7==(0|s)){o=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(o=1)}if(13==(0|r))return 0|o}}while(0);for(;;){if(o=0|Vt(0|e,0|t,3*(14-n|0)|0),S(),!(7==(7&o|0)&!0)){o=0,r=13;break}if(!(n>>>0<14)){o=1,r=13;break}n=n+1|0}return 13==(0|r)?0|o:0}function Be(e,t,n,r){n|=0,r|=0;var s=0,A=0;if(A=0|Vt(0|(e|=0),0|(t|=0),52),S(),n>>>0>15)return 0|(r=4);if((0|(A&=15))<(0|n))return 0|(r=12);if((0|A)==(0|n))return i[r>>2]=e,i[r+4>>2]=t,0|(r=0);if(s=0|zt(0|n,0,52),s|=e,e=0|S()|-15728641&t,(0|A)>(0|n))do{t=0|zt(7,0,3*(14-n|0)|0),n=n+1|0,s|=t,e=0|S()|e}while((0|n)<(0|A));return i[r>>2]=s,i[r+4>>2]=e,0|(r=0)}function De(e,t,n,r){n|=0,r|=0;var s=0,A=0,o=0;if(A=0|Vt(0|(e|=0),0|(t|=0),52),S(),!((0|n)<16&(0|(A&=15))<=(0|n)))return 0|(r=4);s=n-A|0,n=0|Vt(0|e,0|t,45),S();e:do{if(0|G(127&n)){t:do{if(0|A){for(n=1;0==((o=0|zt(7,0,3*(15-n|0)|0))&e|0)&0==((0|S())&t|0);){if(!(n>>>0<A>>>0))break t;n=n+1|0}n=0|ut(7,0,s,((0|s)<0)<<31>>31),s=0|S();break e}}while(0);n=0|Lt(0|(n=0|Nt(0|(n=0|ut(7,0,s,((0|s)<0)<<31>>31)),0|S(),5,0)),0|S(),-5,-1),n=0|Lt(0|(n=0|Dt(0|n,0|S(),6,0)),0|S(),1,0),s=0|S()}else n=0|ut(7,0,s,((0|s)<0)<<31>>31),s=0|S()}while(0);return i[(o=r)>>2]=n,i[o+4>>2]=s,0|(o=0)}function Ne(e,t){var n=0,r=0,i=0;if(i=0|Vt(0|(e|=0),0|(t|=0),45),S(),!(0|G(127&i)))return 0|(i=0);i=0|Vt(0|e,0|t,52),S(),i&=15;e:do{if(i)for(r=1;;){if(n=0|Vt(0|e,0|t,3*(15-r|0)|0),S(),0|(n&=7))break e;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)}function Fe(e,t){var n=0,r=0,i=0;if(i=0|Vt(0|(e|=0),0|(t|=0),52),S(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|Vt(0|e,0|t,3*(15-r|0)|0),S(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function Ue(e,t){var n=0,r=0,i=0,s=0,A=0,o=0,a=0;if(a=0|Vt(0|(e|=0),0|(t|=0),52),S(),!(a&=15))return a=e,T(0|(o=t)),0|a;for(o=1,n=0;;){r=0|zt(7,0,0|(s=3*(15-o|0)|0)),i=0|S(),A=0|Vt(0|e,0|t,0|s),S(),e=(s=0|zt(0|fe(7&A),0,0|s))|e&~r,t=(A=0|S())|t&~i;e:do{if(!n)if(0==(s&r|0)&0==(A&i|0))n=0;else if(r=0|Vt(0|e,0|t,52),S(),r&=15){n=1;t:for(;;){switch(A=0|Vt(0|e,0|t,3*(15-n|0)|0),S(),7&A){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(i=0|Vt(0|e,0|t,0|(A=3*(15-n|0)|0)),S(),s=0|zt(7,0,0|A),t&=~(0|S()),e=e&~s|(A=0|zt(0|fe(7&i),0,0|A)),t=0|t|S(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(o>>>0<a>>>0))break;o=o+1|0}return T(0|t),0|e}function Ge(e,t){var n=0,r=0,i=0,s=0,A=0;if(r=0|Vt(0|(e|=0),0|(t|=0),52),S(),!(r&=15))return r=e,T(0|(n=t)),0|r;for(n=1;A=0|Vt(0|e,0|t,0|(s=3*(15-n|0)|0)),S(),i=0|zt(7,0,0|s),t&=~(0|S()),e=(s=0|zt(0|fe(7&A),0,0|s))|e&~i,t=0|S()|t,n>>>0<r>>>0;)n=n+1|0;return T(0|t),0|e}function Ve(e,t){var n=0,r=0,i=0,s=0,A=0,o=0,a=0;if(a=0|Vt(0|(e|=0),0|(t|=0),52),S(),!(a&=15))return a=e,T(0|(o=t)),0|a;for(o=1,n=0;;){r=0|zt(7,0,0|(s=3*(15-o|0)|0)),i=0|S(),A=0|Vt(0|e,0|t,0|s),S(),e=(s=0|zt(0|pe(7&A),0,0|s))|e&~r,t=(A=0|S())|t&~i;e:do{if(!n)if(0==(s&r|0)&0==(A&i|0))n=0;else if(r=0|Vt(0|e,0|t,52),S(),r&=15){n=1;t:for(;;){switch(A=0|Vt(0|e,0|t,3*(15-n|0)|0),S(),7&A){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(s=0|zt(7,0,0|(i=3*(15-n|0)|0)),A=t&~(0|S()),t=0|Vt(0|e,0|t,0|i),S(),e=e&~s|(t=0|zt(0|pe(7&t),0,0|i)),t=0|A|S(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(o>>>0<a>>>0))break;o=o+1|0}return T(0|t),0|e}function ze(e,t){var n=0,r=0,i=0,s=0,A=0;if(r=0|Vt(0|(e|=0),0|(t|=0),52),S(),!(r&=15))return r=e,T(0|(n=t)),0|r;for(n=1;s=0|zt(7,0,0|(A=3*(15-n|0)|0)),i=t&~(0|S()),t=0|Vt(0|e,0|t,0|A),S(),e=(t=0|zt(0|pe(7&t),0,0|A))|e&~s,t=0|S()|i,n>>>0<r>>>0;)n=n+1|0;return T(0|t),0|e}function je(e){return 0|(0|(e|=0))%2}function We(e,t,n){n|=0;var r,s=0;return r=L,L=L+16|0,s=r,(t|=0)>>>0>15?(L=r,0|(s=4)):2146435072==(2146435072&i[(e|=0)+4>>2]|0)||2146435072==(2146435072&i[e+8+4>>2]|0)?(L=r,0|(s=3)):(function(e,t,n){var r,i;r=L,L=L+16|0,Te(e|=0,t|=0,n|=0,i=r),q(i,n+4|0),L=r}(e,t,s),t=0|function(e,t){e|=0;var n,r=0,s=0,A=0,o=0,a=0,c=0,l=0,u=0;if(n=L,L=L+64|0,c=n+40|0,s=n+24|0,A=n+12|0,o=n,zt(0|(t|=0),0,52),r=134225919|S(),!t)return(0|i[e+4>>2])>2||(0|i[e+8>>2])>2||(0|i[e+12>>2])>2?(c=0,T(0|(a=0)),L=n,0|c):(zt(0|z(e),0,45),a=0|S()|r,c=-1,T(0|a),L=n,0|c);if(i[c>>2]=i[e>>2],i[c+4>>2]=i[e+4>>2],i[c+8>>2]=i[e+8>>2],i[c+12>>2]=i[e+12>>2],a=c+4|0,(0|t)>0)for(e=-1;i[s>>2]=i[a>>2],i[s+4>>2]=i[a+4>>2],i[s+8>>2]=i[a+8>>2],1&t?(oe(a),i[A>>2]=i[a>>2],i[A+4>>2]=i[a+4>>2],i[A+8>>2]=i[a+8>>2],ce(A)):(ae(a),i[A>>2]=i[a>>2],i[A+4>>2]=i[a+4>>2],i[A+8>>2]=i[a+8>>2],le(A)),ne(s,A,o),J(o),l=0|zt(7,0,0|(u=3*(15-t|0)|0)),r&=~(0|S()),e=(u=0|zt(0|ie(o),0,0|u))|e&~l,r=0|S()|r,(0|t)>1;)t=t+-1|0;else e=-1;e:do{if((0|i[a>>2])<=2&&(0|i[c+8>>2])<=2&&(0|i[c+12>>2])<=2){if(t=0|zt(0|(s=0|z(c)),0,45),t|=e,e=0|S()|-1040385&r,o=0|j(c),!(0|G(s))){if((0|o)<=0)break;for(A=0;;){if(s=0|Vt(0|t,0|e,52),S(),s&=15)for(r=1;c=0|Vt(0|t,0|e,0|(u=3*(15-r|0)|0)),S(),l=0|zt(7,0,0|u),e&=~(0|S()),t=t&~l|(u=0|zt(0|fe(7&c),0,0|u)),e=0|e|S(),r>>>0<s>>>0;)r=r+1|0;if((0|(A=A+1|0))==(0|o))break e}}A=0|Vt(0|t,0|e,52),S(),A&=15;t:do{if(A){r=1;n:for(;;){switch(u=0|Vt(0|t,0|e,3*(15-r|0)|0),S(),7&u){case 1:break n;case 0:break;default:break t}if(!(r>>>0<A>>>0))break t;r=r+1|0}if(0|W(s,0|i[c>>2]))for(r=1;l=0|zt(7,0,0|(c=3*(15-r|0)|0)),u=e&~(0|S()),e=0|Vt(0|t,0|e,0|c),S(),t=t&~l|(e=0|zt(0|pe(7&e),0,0|c)),e=0|u|S(),r>>>0<A>>>0;)r=r+1|0;else for(r=1;c=0|Vt(0|t,0|e,0|(u=3*(15-r|0)|0)),S(),l=0|zt(7,0,0|u),e&=~(0|S()),t=t&~l|(u=0|zt(0|fe(7&c),0,0|u)),e=0|e|S(),r>>>0<A>>>0;)r=r+1|0}}while(0);if((0|o)>0){r=0;do{t=0|Ue(t,e),e=0|S(),r=r+1|0}while((0|r)!=(0|o))}}else t=0,e=0}while(0);return u=t,T(0|(l=e)),L=n,0|u}(s,t),s=0|S(),i[n>>2]=t,i[n+4>>2]=s,0==(0|t)&0==(0|s)&&R(23313,22674,786,22697),L=r,0|(s=0))}function He(e,t,n){var r,s=0,A=0,o=0;if(r=(n|=0)+4|0,A=0|Vt(0|(e|=0),0|(t|=0),52),S(),A&=15,o=0|Vt(0|e,0|t,45),S(),s=0==(0|A),0|G(127&o)){if(s)return 0|(o=1);s=1}else{if(s)return 0|(o=0);s=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?ce(r):le(r),o=0|Vt(0|e,0|t,3*(15-n|0)|0),S(),ue(r,7&o),n>>>0<A>>>0;)n=n+1|0;return 0|s}function Qe(e,t,n){n|=0;var r,s,A=0,o=0,a=0,c=0,l=0,u=0;if(s=L,L=L+16|0,r=s,u=0|Vt(0|(e|=0),0|(t|=0),45),S(),(u&=127)>>>0>121)return i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,i[n+12>>2]=0,L=s,0|(u=5);e:do{if(0!=(0|G(u))&&(a=0|Vt(0|e,0|t,52),S(),0!=(0|(a&=15)))){A=1;t:for(;;){switch(l=0|Vt(0|e,0|t,3*(15-A|0)|0),S(),7&l){case 5:break t;case 0:break;default:A=t;break e}if(!(A>>>0<a>>>0)){A=t;break e}A=A+1|0}for(o=1,A=t;c=0|zt(7,0,0|(t=3*(15-o|0)|0)),l=A&~(0|S()),A=0|Vt(0|e,0|A,0|t),S(),e=e&~c|(A=0|zt(0|pe(7&A),0,0|t)),A=0|l|S(),o>>>0<a>>>0;)o=o+1|0}else A=t}while(0);if(l=7696+(28*u|0)|0,i[n>>2]=i[l>>2],i[n+4>>2]=i[l+4>>2],i[n+8>>2]=i[l+8>>2],i[n+12>>2]=i[l+12>>2],!(0|He(e,A,n)))return L=s,0|(u=0);if(c=n+4|0,i[r>>2]=i[c>>2],i[r+4>>2]=i[c+4>>2],i[r+8>>2]=i[c+8>>2],a=0|Vt(0|e,0|A,52),S(),l=15&a,1&a?(le(c),a=l+1|0):a=l,0|G(u)){e:do{if(l)for(t=1;;){if(o=0|Vt(0|e,0|A,3*(15-t|0)|0),S(),0|(o&=7)){A=o;break e}if(!(t>>>0<l>>>0)){A=0;break}t=t+1|0}else A=0}while(0);A=4==(0|A)&1}else A=0;if(0|Pe(n,a,A,0)){if(0|G(u))do{}while(0!=(0|Pe(n,a,0,0)));(0|a)!=(0|l)&&ae(c)}else(0|a)!=(0|l)&&(i[c>>2]=i[r>>2],i[c+4>>2]=i[r+4>>2],i[c+8>>2]=i[r+8>>2]);return L=s,0|(u=0)}function Xe(e,t,n){n|=0;var r,i,s=0;return i=L,L=L+16|0,0|(s=0|Qe(e|=0,t|=0,r=i))?(L=i,0|s):(s=0|Vt(0|e,0|t,52),S(),Re(r,15&s,n),L=i,0|(s=0))}function $e(e,t,n){n|=0;var r,i=0,s=0,A=0;if(r=L,L=L+16|0,0|(i=0|Qe(e|=0,t|=0,A=r)))return L=r,0|(A=i);i=0|Vt(0|e,0|t,45),S(),i=0==(0|G(127&i)),s=0|Vt(0|e,0|t,52),S(),s&=15;e:do{if(!i){if(0|s)for(i=1;;){if(!(0==((0|zt(7,0,3*(15-i|0)|0))&e|0)&0==((0|S())&t|0)))break e;if(!(i>>>0<s>>>0))break;i=i+1|0}return Ce(A,s,0,5,n),L=r,0|0}}while(0);return Ie(A,s,0,6,n),L=r,0|0}function Ye(e,t){t|=0;var n=0,r=0,s=0,A=0,o=0,a=0,c=0;if((e|=0)>>>0>15)return 0|(a=4);if(zt(0|e,0,52),a=134225919|S(),!e){n=0,r=0;do{0|G(r)&&(zt(0|r,0,45),o=0|a|S(),i[(e=t+(n<<3)|0)>>2]=-1,i[e+4>>2]=o,n=n+1|0),r=r+1|0}while(122!=(0|r));return 0|(n=0)}n=0,o=0;do{if(0|G(o)){for(zt(0|o,0,45),r=1,s=-1,A=0|a|S();s&=~(c=0|zt(7,0,3*(15-r|0)|0)),A&=~(0|S()),(0|r)!=(0|e);)r=r+1|0;i[(c=t+(n<<3)|0)>>2]=s,i[c+4>>2]=A,n=n+1|0}o=o+1|0}while(122!=(0|o));return 0|(n=0)}function Ke(e,t,n,r){e|=0,r|=0;var s=0,A=0;s=0|Vt(0|(t|=0),0|(n|=0),52),S(),0==(0|t)&0==(0|n)|(0|r)>15|(0|(s&=15))>(0|r)?(r=-1,s=-1,t=0,n=0):(A=0|function(e,t,n,r){return e|=0,t|=0,(0|(r|=0))<(0|(n|=0))?(r=e,T(0|(n=t)),0|r):(n=0|zt(-1,-1,3+(3*(r-n|0)|0)|0),r=0|zt(0|~n,0|~(0|S()),3*(15-r|0)|0),n=~(0|S())&t,r=~r&e,T(0|n),0|r)}(t,n,s+1|0,r),n=-15728641&(0|S()),t=0|zt(0|r,0,52),r=(A=0==(0|Ne(t|=A,n=0|n|S())))?-1:r),i[(A=e)>>2]=t,i[A+4>>2]=n,i[e+8>>2]=s,i[e+12>>2]=r}function Ze(e){var t,n=0,r=0,s=0,A=0,o=0,a=0,c=0,l=0;if(!(0==(0|(n=0|i[(r=e|=0)>>2]))&0==(0|(r=0|i[r+4>>2]))||(s=0|Vt(0|n,0|r,52),S(),n=0|Lt(0|(c=0|zt(1,0,3*(15^(s&=15))|0)),0|S(),0|n,0|r),r=0|S(),i[(c=e)>>2]=n,i[c+4>>2]=r,(0|s)<(0|(a=0|i[(c=e+8|0)>>2]))))){for(t=e+12|0,o=s;;){if((0|o)==(0|a)){s=5;break}if(l=(0|o)==(0|i[t>>2]),s=0|Vt(0|n,0|r,0|(A=3*(15-o|0)|0)),S(),l&1==(0|(s&=7))&!0){s=7;break}if(!(7==(0|s)&!0)){s=10;break}if(n=0|Lt(0|n,0|r,0|(l=0|zt(1,0,0|A)),0|S()),r=0|S(),i[(l=e)>>2]=n,i[l+4>>2]=r,!((0|o)>(0|a))){s=10;break}o=o+-1|0}if(5==(0|s))return i[(l=e)>>2]=0,i[l+4>>2]=0,i[c>>2]=-1,void(i[t>>2]=-1);if(7==(0|s))return a=0|Lt(0|n,0|r,0|(a=0|zt(1,0,0|A)),0|S()),c=0|S(),i[(l=e)>>2]=a,i[l+4>>2]=c,void(i[t>>2]=o+-1)}}function qe(e){var t;return t=(e=+e)<0?e+6.283185307179586:e,+(e>=6.283185307179586?t+-6.283185307179586:t)}function Je(e,t){return t|=0,+c(+(+s[(e|=0)>>3]-+s[t>>3]))<17453292519943298e-27?0|(t=+c(+(+s[e+8>>3]-+s[t+8>>3]))<17453292519943298e-27):0|(t=0)}function et(e,t){e|=0;var n,r,i,A=0;return r=+s[(t|=0)>>3],n=+s[e>>3],A=(i=+d(.5*(r-n)))*i+(A=+d(.5*(+s[t+8>>3]-+s[e+8>>3])))*(+h(+r)*+h(+n)*A),2*+m(+ +l(+A),+ +l(+(1-A)))*6371.007180918475}function tt(e,t){t|=0;var n=0;return(e|=0)>>>0>15?0|(t=4):(n=0|Nt(0|(n=0|ut(7,0,e,((0|e)<0)<<31>>31)),0|S(),120,0),e=0|S(),i[t>>2]=2|n,i[t+4>>2]=e,0|(t=0))}function nt(e,t,n){e|=0,n|=0;var r,i,A,o,a=0,c=0,u=0,p=0,g=0,E=0;return E=+s[(t|=0)>>3],A=+s[e>>3],g=+d(.5*(E-A)),u=+s[t+8>>3],i=+s[e+8>>3],p=+d(.5*(u-i)),r=+h(+A),o=+h(+E),p=2*+m(+ +l(+(p=g*g+p*(o*r*p))),+ +l(+(1-p))),g=+s[n>>3],E=+d(.5*(g-E)),a=+s[n+8>>3],u=+d(.5*(a-u)),c=+h(+g),u=2*+m(+ +l(+(u=E*E+u*(o*c*u))),+ +l(+(1-u))),g=+d(.5*(A-g)),a=+d(.5*(i-a)),a=2*+m(+ +l(+(a=g*g+a*(r*c*a))),+ +l(+(1-a))),4*+_(+ +l(+ +f(.5*(c=.5*(p+u+a)))*+f(.5*(c-p))*+f(.5*(c-u))*+f(.5*(c-a))))}function rt(e,t,n){n|=0;var r,A,o,a=0,c=0;if(o=L,L=L+192|0,A=o,0|(c=0|Xe(e|=0,t|=0,r=o+168|0)))return L=o,0|(n=c);if(0|$e(e,t,A)&&R(23313,22742,386,22751),(0|(t=0|i[A>>2]))>0){if(a=+nt(A+8|0,A+8+((1!=(0|t)&1)<<4)|0,r)+0,1!=(0|t)){e=1;do{a+=+nt(A+8+((c=e)<<4)|0,A+8+(((0|(e=e+1|0))%(0|t)|0)<<4)|0,r)}while((0|e)<(0|t))}}else a=0;return s[n>>3]=a,L=o,0|(n=0)}function it(e){e|=0;var t,n,r=0;return(t=0|It(1,12))||R(22832,22787,49,22845),0|(r=0|i[(n=e+4|0)>>2])?(i[(r=r+8|0)>>2]=t,i[n>>2]=t,0|t):(0|i[e>>2]&&R(22862,22787,61,22885),i[(r=e)>>2]=t,i[n>>2]=t,0|t)}function st(e,t){e|=0,t|=0;var n,r;return(r=0|Pt(24))||R(22899,22787,78,22913),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[r+16>>2]=0,0|(n=0|i[(t=e+4|0)>>2])?(i[n+16>>2]=r,i[t>>2]=r,0|r):(0|i[e>>2]&&R(22928,22787,82,22913),i[e>>2]=r,i[t>>2]=r,0|r)}function At(e){var t=0,n=0,r=0,s=0;if(e|=0)for(r=1;;){if(0|(t=0|i[e>>2]))do{if(0|(n=0|i[t>>2]))do{s=n,n=0|i[n+16>>2],Mt(s)}while(0!=(0|n));s=t,t=0|i[t+8>>2],Mt(s)}while(0!=(0|t));if(t=e,e=0|i[e+8>>2],r||Mt(t),!e)break;r=0}}function ot(e){var t,n,r=0,A=0,o=0,a=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0,b=0,w=0,T=0,S=0,C=0,x=0,P=0,M=0,I=0,L=0,k=0,O=0,B=0,D=0;if(0|i[(a=(e|=0)+8|0)>>2])return 0|(D=1);if(!(o=0|i[e>>2]))return 0|(D=0);r=o,A=0;do{A=A+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(A>>>0<2)return 0|(D=0);(n=0|Pt(A<<2))||R(22948,22787,317,22967),(t=0|Pt(A<<5))||R(22989,22787,321,22967),i[e>>2]=0,i[(x=e+4|0)>>2]=0,i[a>>2]=0,A=0,O=0,C=0,g=0;e:for(;;){if(p=0|i[o>>2]){l=0,u=p;do{if(d=+s[u+8>>3],r=u,u=0|i[u+16>>2],h=+s[(a=(f=0==(0|u))?p:u)+8>>3],+c(+(d-h))>3.141592653589793){D=14;break}l+=(h-d)*(+s[r>>3]+ +s[a>>3])}while(!f);if(14==(0|D)){D=0,l=0,r=p;do{S=+s[r+8>>3],L=0|i[(k=r+16|0)>>2],T=+s[(L=0==(0|L)?p:L)+8>>3],l+=(+s[r>>3]+ +s[L>>3])*((T<0?T+6.283185307179586:T)-(S<0?S+6.283185307179586:S)),r=0|i[(0==(0|r)?o:k)>>2]}while(0!=(0|r))}l>0?(i[n+(O<<2)>>2]=o,O=O+1|0,a=C,r=g):D=19}else D=19;if(19==(0|D)){D=0;do{if(!A){if(g){a=x,u=g+8|0,r=o,A=e;break}if(0|i[e>>2]){D=27;break e}a=x,u=e,r=o,A=e;break}if(0|i[(r=A+8|0)>>2]){D=21;break e}if(!(A=0|It(1,12))){D=23;break e}i[r>>2]=A,a=A+4|0,u=A,r=g}while(0);if(i[u>>2]=o,i[a>>2]=o,u=t+(C<<5)|0,f=0|i[o>>2]){for(s[(p=t+(C<<5)+8|0)>>3]=17976931348623157e292,s[(g=t+(C<<5)+24|0)>>3]=17976931348623157e292,s[u>>3]=-17976931348623157e292,s[(_=t+(C<<5)+16|0)>>3]=-17976931348623157e292,b=17976931348623157e292,w=-17976931348623157e292,a=0,m=f,d=17976931348623157e292,v=17976931348623157e292,y=-17976931348623157e292,h=-17976931348623157e292;l=+s[m>>3],S=+s[m+8>>3],m=0|i[m+16>>2],T=+s[((E=0==(0|m))?f:m)+8>>3],l<d&&(s[p>>3]=l,d=l),S<v&&(s[g>>3]=S,v=S),l>y?s[u>>3]=l:l=y,S>h&&(s[_>>3]=S,h=S),b=S>0&S<b?S:b,w=S<0&S>w?S:w,a|=+c(+(S-T))>3.141592653589793,!E;)y=l;a&&(s[_>>3]=w,s[g>>3]=b)}else i[u>>2]=0,i[u+4>>2]=0,i[u+8>>2]=0,i[u+12>>2]=0,i[u+16>>2]=0,i[u+20>>2]=0,i[u+24>>2]=0,i[u+28>>2]=0;a=C+1|0}if(o=0|i[(k=o+8|0)>>2],i[k>>2]=0,!o){D=45;break}C=a,g=r}if(21==(0|D))R(22765,22787,35,22799);else if(23==(0|D))R(22819,22787,37,22799);else if(27==(0|D))R(22862,22787,61,22885);else if(45==(0|D)){e:do{if((0|O)>0){for(k=0==(0|a),I=a<<2,L=0==(0|e),M=0,r=0;;){if(P=0|i[n+(M<<2)>>2],k)D=73;else{if(!(C=0|Pt(I))){D=50;break}if(!(x=0|Pt(I))){D=52;break}t:do{if(L)A=0;else{for(a=0,A=0,u=e;o=t+(a<<5)|0,0|at(0|i[u>>2],o,0|i[P>>2])?(i[C+(A<<2)>>2]=u,i[x+(A<<2)>>2]=o,E=A+1|0):E=A,u=0|i[u+8>>2];)a=a+1|0,A=E;if((0|E)>0)if(o=0|i[C>>2],1==(0|E))A=o;else for(_=0,m=-1,A=o,g=o;;){for(f=0|i[g>>2],o=0,u=0;p=(0|(a=0|i[i[C+(u<<2)>>2]>>2]))==(0|f)?o:o+(1&(0|at(a,0|i[x+(u<<2)>>2],0|i[f>>2])))|0,(0|(u=u+1|0))!=(0|E);)o=p;if(A=(a=(0|p)>(0|m))?g:A,(0|(o=_+1|0))==(0|E))break t;_=o,m=a?p:m,g=0|i[C+(o<<2)>>2]}else A=0}}while(0);if(Mt(C),Mt(x),A){if(o=0|i[(a=A+4|0)>>2])A=o+8|0;else if(0|i[A>>2]){D=70;break}i[A>>2]=P,i[a>>2]=P}else D=73}if(73==(0|D)){if(D=0,0|(r=0|i[P>>2]))do{x=r,r=0|i[r+16>>2],Mt(x)}while(0!=(0|r));Mt(P),r=1}if((0|(M=M+1|0))>=(0|O)){B=r;break e}}50==(0|D)?R(23004,22787,249,23023):52==(0|D)?R(23042,22787,252,23023):70==(0|D)&&R(22862,22787,61,22885)}else B=0}while(0);return Mt(n),Mt(t),0|(D=B)}return 0}function at(e,t,n){e|=0;var r=0,A=0,o=0,a=0,c=0,l=0,u=0,h=0;if(!(0|$(t|=0,n|=0)))return 0|(e=0);if(t=0|X(t),r=+s[n>>3],A=t&(A=+s[n+8>>3])<0?A+6.283185307179586:A,!(e=0|i[e>>2]))return 0|(e=0);if(t){t=0,u=A,n=e;e:for(;;){for(;a=+s[n>>3],A=+s[n+8>>3],h=0|i[(n=n+16|0)>>2],o=+s[(h=0==(0|h)?e:h)>>3],c=+s[h+8>>3],a>o?(l=a,a=c):(l=o,o=a,a=A,A=c),(r=r==o|r==l?r+2220446049250313e-31:r)<o|r>l;)if(!(n=0|i[n>>2])){n=22;break e}if(((l=(c=a<0?a+6.283185307179586:a)+(r-o)/(l-o)*((a=A<0?A+6.283185307179586:A)-c))<0?l+6.283185307179586:l)>(u=c==u|a==u?u+-2220446049250313e-31:u)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}else{t=0,u=A,n=e;e:for(;;){for(;a=+s[n>>3],A=+s[n+8>>3],h=0|i[(n=n+16|0)>>2],o=+s[(h=0==(0|h)?e:h)>>3],c=+s[h+8>>3],a>o?(l=a,a=c):(l=o,o=a,a=A,A=c),(r=r==o|r==l?r+2220446049250313e-31:r)<o|r>l;)if(!(n=0|i[n>>2])){n=22;break e}if(a+(r-o)/(l-o)*(A-a)>(u=a==u|A==u?u+-2220446049250313e-31:u)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}return 0}function ct(e,t,n,s,A){n|=0,s|=0,A|=0;var o,a,c,l,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0;if(l=L,L=L+32|0,v=l+16|0,c=l,u=0|Vt(0|(e|=0),0|(t|=0),52),S(),u&=15,_=0|Vt(0|n,0|s,52),S(),(0|u)!=(15&_|0))return L=l,0|(v=12);if(p=0|Vt(0|e,0|t,45),S(),p&=127,g=0|Vt(0|n,0|s,45),S(),p>>>0>121|(g&=127)>>>0>121)return L=l,0|(v=5);if(_=(0|p)!=(0|g)){if(7==(0|(d=0|Q(p,g))))return L=l,0|(v=1);7==(0|(f=0|Q(g,p)))?R(23066,23090,161,23100):(m=d,h=f)}else m=0,h=0;o=0|G(p),a=0|G(g),i[v>>2]=0,i[v+4>>2]=0,i[v+8>>2]=0,i[v+12>>2]=0;do{if(m){if(d=(0|(g=0|i[4272+(28*p|0)+(m<<2)>>2]))>0,a)if(d){p=0,f=n,d=s;do{f=0|Ve(f,d),d=0|S(),1==(0|(h=0|pe(h)))&&(h=0|pe(1)),p=p+1|0}while((0|p)!=(0|g));g=h,p=f,f=d}else g=h,p=n,f=s;else if(d){p=0,f=n,d=s;do{f=0|ze(f,d),d=0|S(),h=0|pe(h),p=p+1|0}while((0|p)!=(0|g));g=h,p=f,f=d}else g=h,p=n,f=s;if(He(p,f,v),_||R(23115,23090,191,23100),(d=0!=(0|o))&(h=0!=(0|a))&&R(23142,23090,192,23100),d){if(7==(0|(h=0|Fe(e,t)))){u=5;break}if(0|r[21872+(7*h|0)+m>>0]){u=1;break}p=f=0|i[21040+(28*h|0)+(m<<2)>>2]}else if(h){if(7==(0|(h=0|Fe(p,f)))){u=5;break}if(0|r[21872+(7*h|0)+g>>0]){u=1;break}p=0,f=0|i[21040+(28*g|0)+(h<<2)>>2]}else p=0,f=0;if((p|f|0)<0)u=5;else{if((0|f)>0){d=v+4|0,h=0;do{de(d),h=h+1|0}while((0|h)!=(0|f))}if(i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,ue(c,m),0|u)for(;0|je(u)?ce(c):le(c),(0|u)>1;)u=u+-1|0;if((0|p)>0){u=0;do{de(c),u=u+1|0}while((0|u)!=(0|p))}te(E=v+4|0,c,E),J(E),E=51}}else if(He(n,s,v),0!=(0|o)&0!=(0|a))if((0|g)!=(0|p)&&R(23173,23090,261,23100),7==(0|(h=0|Fe(e,t)))|7==(0|(u=0|Fe(n,s))))u=5;else if(0|r[21872+(7*h|0)+u>>0])u=1;else if((0|(h=0|i[21040+(28*h|0)+(u<<2)>>2]))>0){d=v+4|0,u=0;do{de(d),u=u+1|0}while((0|u)!=(0|h));E=51}else E=51;else E=51}while(0);return 51==(0|E)&&(u=v+4|0,i[A>>2]=i[u>>2],i[A+4>>2]=i[u+4>>2],i[A+8>>2]=i[u+8>>2],u=0),L=l,0|(v=u)}function lt(e,t,n,r){n|=0,r|=0;var s,A,o,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0;if(o=L,L=L+48|0,s=o+36|0,l=o+24|0,u=o+12|0,h=o,a=0|Vt(0|(e|=0),0|(t|=0),52),S(),a&=15,f=0|Vt(0|e,0|t,45),S(),(f&=127)>>>0>121)return L=o,0|(r=5);if(A=0|G(f),zt(0|a,0,52),_=134225919|S(),i[(c=r)>>2]=-1,i[c+4>>2]=_,!a)return 7==(0|(a=0|ie(n)))||127==(0|(a=0|H(f,a)))?(L=o,0|(_=1)):(p=0|zt(0|a,0,45),g=0|S(),g=-1040385&i[(f=r)+4>>2]|g,i[(_=r)>>2]=i[f>>2]|p,i[_+4>>2]=g,L=o,0|(_=0));for(i[s>>2]=i[n>>2],i[s+4>>2]=i[n+4>>2],i[s+8>>2]=i[n+8>>2],n=a;;){if(c=n,n=n+-1|0,i[l>>2]=i[s>>2],i[l+4>>2]=i[s+4>>2],i[l+8>>2]=i[s+8>>2],0|je(c)){if(0|(a=0|se(s))){n=13;break}i[u>>2]=i[s>>2],i[u+4>>2]=i[s+4>>2],i[u+8>>2]=i[s+8>>2],ce(u)}else{if(0|(a=0|Ae(s))){n=13;break}i[u>>2]=i[s>>2],i[u+4>>2]=i[s+4>>2],i[u+8>>2]=i[s+8>>2],le(u)}if(ne(l,u,h),J(h),E=0|i[(a=r)>>2],a=0|i[a+4>>2],m=0|zt(7,0,0|(v=3*(15-c|0)|0)),a&=~(0|S()),v=0|zt(0|ie(h),0,0|v),a=0|S()|a,i[(_=r)>>2]=v|E&~m,i[_+4>>2]=a,(0|c)<=1){n=14;break}}e:do{if(13!=(0|n)&&14==(0|n))if((0|i[s>>2])<=1&&(0|i[s+4>>2])<=1&&(0|i[s+8>>2])<=1){h=127==(0|(a=0|H(f,n=0|ie(s))))?0:0|G(a);t:do{if(n){if(A){if(7==(0|(a=0|Fe(e,t)))){a=5;break e}if((0|(c=0|i[21248+(28*a|0)+(n<<2)>>2]))>0){a=n,n=0;do{a=0|fe(a),n=n+1|0}while((0|n)!=(0|c))}else a=n;if(1==(0|a)){a=9;break e}127==(0|(n=0|H(f,a)))&&R(23200,23090,411,23230),0|G(n)?R(23245,23090,412,23230):(g=n,p=c,d=a)}else g=a,p=0,d=n;if((0|(u=0|i[4272+(28*f|0)+(d<<2)>>2]))<=-1&&R(23276,23090,419,23230),!h){if((0|p)<0){a=5;break e}if(0|p){a=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];do{n=0|Ge(n,c),c=0|S(),i[(v=r)>>2]=n,i[v+4>>2]=c,a=a+1|0}while((0|a)<(0|p))}if((0|u)<=0){a=g,n=58;break}for(a=0,n=0|i[(c=r)>>2],c=0|i[c+4>>2];;)if(n=0|Ge(n,c),c=0|S(),i[(v=r)>>2]=n,i[v+4>>2]=c,(0|(a=a+1|0))==(0|u)){a=g,n=58;break t}}if(7==(0|(l=0|Q(g,f)))&&R(23066,23090,428,23230),n=0|i[(a=r)>>2],a=0|i[a+4>>2],(0|u)>0){c=0;do{n=0|Ge(n,a),a=0|S(),i[(v=r)>>2]=n,i[v+4>>2]=a,c=c+1|0}while((0|c)!=(0|u))}if(7==(0|(a=0|Fe(n,a)))&&R(23313,23090,440,23230),n=0|V(g),(0|(n=0|i[(n?21664:21456)+(28*l|0)+(a<<2)>>2]))<0&&R(23313,23090,454,23230),n){a=0,c=0|i[(l=r)>>2],l=0|i[l+4>>2];do{c=0|Ue(c,l),l=0|S(),i[(v=r)>>2]=c,i[v+4>>2]=l,a=a+1|0}while((0|a)<(0|n));a=g,n=58}else a=g,n=58}else if(0!=(0|A)&0!=(0|h)){if(7==(0|(n=0|Fe(e,t)))|7==(0|(c=0|Fe(0|i[(c=r)>>2],0|i[c+4>>2])))){a=5;break e}if((0|(c=0|i[21248+(28*n|0)+(c<<2)>>2]))<0){a=5;break e}if(c){n=0,l=0|i[(u=r)>>2],u=0|i[u+4>>2];do{l=0|Ge(l,u),u=0|S(),i[(v=r)>>2]=l,i[v+4>>2]=u,n=n+1|0}while((0|n)<(0|c));n=58}else n=59}else n=58}while(0);if(58==(0|n)&&h&&(n=59),59==(0|n)&&1==(0|Fe(0|i[(v=r)>>2],0|i[v+4>>2]))){a=9;break}m=0|i[(v=r)>>2],v=-1040385&i[v+4>>2],E=0|zt(0|a,0,45),v=0|v|S(),i[(a=r)>>2]=m|E,i[a+4>>2]=v,a=0}else a=1}while(0);return L=o,0|(v=a)}function ut(e,t,n,r){e|=0,t|=0;var i=0,s=0,A=0;if(0==(0|(n|=0))&0==(0|(r|=0)))return s=1,T(0|(i=0)),0|s;s=e,i=t,e=1,t=0;do{e=0|Nt(0|((A=0==(1&n|0)&!0)?1:s),0|(A?0:i),0|e,0|t),t=0|S(),n=0|Gt(0|n,0|r,1),r=0|S(),s=0|Nt(0|s,0|i,0|s,0|i),i=0|S()}while(!(0==(0|n)&0==(0|r)));return T(0|t),0|e}function ht(e,t,n){e|=0;var r,A=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0;if(!(0|$(t|=0,n|=0)))return 0|(f=0);if(t=0|X(t),A=+s[n>>3],o=t&(o=+s[n+8>>3])<0?o+6.283185307179586:o,(0|(f=0|i[e>>2]))<=0)return 0|(f=0);if(r=0|i[e+4>>2],t){t=0,d=o,n=-1,e=0;e:for(;;){for(h=e;c=+s[r+(h<<4)>>3],o=+s[r+(h<<4)+8>>3],a=+s[r+((e=(n+2|0)%(0|f)|0)<<4)>>3],l=+s[r+(e<<4)+8>>3],c>a?(u=c,c=l):(u=a,a=c,c=o,o=l),(A=A==a|A==u?A+2220446049250313e-31:A)<a|A>u;){if((0|(n=h+1|0))>=(0|f)){n=22;break e}e=h,h=n,n=e}if(((u=(l=c<0?c+6.283185307179586:c)+(A-a)/(u-a)*((c=o<0?o+6.283185307179586:o)-l))<0?u+6.283185307179586:u)>(d=l==d|c==d?d+-2220446049250313e-31:d)&&(t^=1),(0|(e=h+1|0))>=(0|f)){n=22;break}n=h}if(22==(0|n))return 0|t}else{t=0,d=o,n=-1,e=0;e:for(;;){for(h=e;c=+s[r+(h<<4)>>3],o=+s[r+(h<<4)+8>>3],a=+s[r+((e=(n+2|0)%(0|f)|0)<<4)>>3],l=+s[r+(e<<4)+8>>3],c>a?(u=c,c=l):(u=a,a=c,c=o,o=l),(A=A==a|A==u?A+2220446049250313e-31:A)<a|A>u;){if((0|(n=h+1|0))>=(0|f)){n=22;break e}e=h,h=n,n=e}if(c+(A-a)/(u-a)*(o-c)>(d=c==d|o==d?d+-2220446049250313e-31:d)&&(t^=1),(0|(e=h+1|0))>=(0|f)){n=22;break}n=h}if(22==(0|n))return 0|t}return 0}function dt(e,t){t|=0;var n,r,A,o,a,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0;if(!(r=0|i[(e|=0)>>2]))return i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,void(i[t+28>>2]=0);if(s[(A=t+8|0)>>3]=17976931348623157e292,s[(o=t+24|0)>>3]=17976931348623157e292,s[t>>3]=-17976931348623157e292,s[(a=t+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[e+4>>2],_=17976931348623157e292,m=-17976931348623157e292,E=0,e=-1,d=17976931348623157e292,f=17976931348623157e292,g=-17976931348623157e292,u=-17976931348623157e292,v=0;l=+s[n+(v<<4)>>3],p=+s[n+(v<<4)+8>>3],h=+s[n+(((0|(e=e+2|0))==(0|r)?0:e)<<4)+8>>3],l<d&&(s[A>>3]=l,d=l),p<f&&(s[o>>3]=p,f=p),l>g?s[t>>3]=l:l=g,p>u&&(s[a>>3]=p,u=p),_=p>0&p<_?p:_,m=p<0&p>m?p:m,E|=+c(+(p-h))>3.141592653589793,(0|(e=v+1|0))!=(0|r);)y=v,g=l,v=e,e=y;E&&(s[a>>3]=m,s[o>>3]=_)}}function ft(e,t){t|=0;var n,r=0,A=0,o=0,a=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0,b=0,w=0,T=0,S=0,R=0;if(m=0|i[(e|=0)>>2]){if(s[(E=t+8|0)>>3]=17976931348623157e292,s[(v=t+24|0)>>3]=17976931348623157e292,s[t>>3]=-17976931348623157e292,s[(y=t+16|0)>>3]=-17976931348623157e292,(0|m)>0){for(o=0|i[e+4>>2],g=17976931348623157e292,_=-17976931348623157e292,A=0,r=-1,h=17976931348623157e292,d=17976931348623157e292,p=-17976931348623157e292,l=-17976931348623157e292,b=0;a=+s[o+(b<<4)>>3],f=+s[o+(b<<4)+8>>3],u=+s[o+(((0|(S=r+2|0))==(0|m)?0:S)<<4)+8>>3],a<h&&(s[E>>3]=a,h=a),f<d&&(s[v>>3]=f,d=f),a>p?s[t>>3]=a:a=p,f>l&&(s[y>>3]=f,l=f),g=f>0&f<g?f:g,_=f<0&f>_?f:_,A|=+c(+(f-u))>3.141592653589793,(0|(r=b+1|0))!=(0|m);)S=b,p=a,b=r,r=S;A&&(s[y>>3]=_,s[v>>3]=g)}}else i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,i[t+28>>2]=0;if(!((0|(r=0|i[(S=e+8|0)>>2]))<=0)){n=e+12|0,T=0;do{if(o=0|i[n>>2],A=T,v=t+((T=T+1|0)<<5)|0,y=0|i[o+(A<<3)>>2]){if(s[(b=t+(T<<5)+8|0)>>3]=17976931348623157e292,s[(e=t+(T<<5)+24|0)>>3]=17976931348623157e292,s[v>>3]=-17976931348623157e292,s[(w=t+(T<<5)+16|0)>>3]=-17976931348623157e292,(0|y)>0){for(m=0|i[o+(A<<3)+4>>2],g=17976931348623157e292,_=-17976931348623157e292,o=0,A=-1,E=0,h=17976931348623157e292,d=17976931348623157e292,f=-17976931348623157e292,l=-17976931348623157e292;a=+s[m+(E<<4)>>3],p=+s[m+(E<<4)+8>>3],u=+s[m+(((0|(A=A+2|0))==(0|y)?0:A)<<4)+8>>3],a<h&&(s[b>>3]=a,h=a),p<d&&(s[e>>3]=p,d=p),a>f?s[v>>3]=a:a=f,p>l&&(s[w>>3]=p,l=p),g=p>0&p<g?p:g,_=p<0&p>_?p:_,o|=+c(+(p-u))>3.141592653589793,(0|(A=E+1|0))!=(0|y);)R=E,E=A,f=a,A=R;o&&(s[w>>3]=_,s[e>>3]=g)}}else i[v>>2]=0,i[v+4>>2]=0,i[v+8>>2]=0,i[v+12>>2]=0,i[v+16>>2]=0,i[v+20>>2]=0,i[v+24>>2]=0,i[v+28>>2]=0,r=0|i[S>>2]}while((0|T)<(0|r))}}function pt(e,t,n){var r=0,s=0,A=0;if(!(0|ht(e|=0,t|=0,n|=0)))return 0|(s=0);if((0|i[(s=e+8|0)>>2])<=0)return 0|(s=1);for(r=e+12|0,e=0;;){if(A=e,e=e+1|0,0|ht((0|i[r>>2])+(A<<3)|0,t+(e<<5)|0,n)){e=0,r=6;break}if((0|e)>=(0|i[s>>2])){e=1,r=6;break}}return 6==(0|r)?0|e:0}function gt(e,t,n,r,i){t|=0,n|=0,r|=0,i|=0;var A,o,a,c,l,u,h,d=0;c=+s[(e|=0)>>3],a=+s[t>>3]-c,o=+s[e+8>>3],A=+s[t+8>>3]-o,u=+s[n>>3],d=((d=+s[r>>3]-u)*(o-(h=+s[n+8>>3]))-(c-u)*(l=+s[r+8>>3]-h))/(a*l-A*d),s[i>>3]=c+a*d,s[i+8>>3]=o+A*d}function _t(e,t){return t|=0,+c(+(+s[(e|=0)>>3]-+s[t>>3]))<1.1920928955078125e-7?0|(t=+c(+(+s[e+8>>3]-+s[t+8>>3]))<1.1920928955078125e-7):0|(t=0)}function mt(e,t){t|=0;var n,r,i;return+((i=+s[(e|=0)>>3]-+s[t>>3])*i+(r=+s[e+8>>3]-+s[t+8>>3])*r+(n=+s[e+16>>3]-+s[t+16>>3])*n)}function Et(e,t,n){n|=0;var r,s,A,o,a=0,c=0,l=0;if(o=L,L=L+32|0,l=o,0|(a=0|Qe(e|=0,t|=0,s=o+16|0)))return L=o,0|(n=a);r=0|ke(e,t),A=0|Fe(e,t),function(e,t){e=7696+(28*(e|=0)|0)|0,i[(t|=0)>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2]}(r,l),a=0|function(e,t){e|=0;var n=0,r=0;if((t|=0)>>>0>20)return-1;do{if((0|i[11120+(216*t|0)>>2])!=(0|e))if((0|i[11120+(216*t|0)+8>>2])!=(0|e))if((0|i[11120+(216*t|0)+16>>2])!=(0|e))if((0|i[11120+(216*t|0)+24>>2])!=(0|e))if((0|i[11120+(216*t|0)+32>>2])!=(0|e))if((0|i[11120+(216*t|0)+40>>2])!=(0|e))if((0|i[11120+(216*t|0)+48>>2])!=(0|e))if((0|i[11120+(216*t|0)+56>>2])!=(0|e))if((0|i[11120+(216*t|0)+64>>2])!=(0|e))if((0|i[11120+(216*t|0)+72>>2])!=(0|e))if((0|i[11120+(216*t|0)+80>>2])!=(0|e))if((0|i[11120+(216*t|0)+88>>2])!=(0|e))if((0|i[11120+(216*t|0)+96>>2])!=(0|e))if((0|i[11120+(216*t|0)+104>>2])!=(0|e))if((0|i[11120+(216*t|0)+112>>2])!=(0|e))if((0|i[11120+(216*t|0)+120>>2])!=(0|e))if((0|i[11120+(216*t|0)+128>>2])!=(0|e)){if((0|i[11120+(216*t|0)+136>>2])!=(0|e)){if((0|i[11120+(216*t|0)+144>>2])==(0|e)){e=0,n=2,r=0;break}if((0|i[11120+(216*t|0)+152>>2])==(0|e)){e=0,n=2,r=1;break}if((0|i[11120+(216*t|0)+160>>2])==(0|e)){e=0,n=2,r=2;break}if((0|i[11120+(216*t|0)+168>>2])==(0|e)){e=1,n=2,r=0;break}if((0|i[11120+(216*t|0)+176>>2])==(0|e)){e=1,n=2,r=1;break}if((0|i[11120+(216*t|0)+184>>2])==(0|e)){e=1,n=2,r=2;break}if((0|i[11120+(216*t|0)+192>>2])==(0|e)){e=2,n=2,r=0;break}if((0|i[11120+(216*t|0)+200>>2])==(0|e)){e=2,n=2,r=1;break}if((0|i[11120+(216*t|0)+208>>2])==(0|e)){e=2,n=2,r=2;break}return-1}e=2,n=1,r=2}else e=2,n=1,r=1;else e=2,n=1,r=0;else e=1,n=1,r=2;else e=1,n=1,r=1;else e=1,n=1,r=0;else e=0,n=1,r=2;else e=0,n=1,r=1;else e=0,n=1,r=0;else e=2,n=0,r=2;else e=2,n=0,r=1;else e=2,n=0,r=0;else e=1,n=0,r=2;else e=1,n=0,r=1;else e=1,n=0,r=0;else e=0,n=0,r=2;else e=0,n=0,r=1;else e=0,n=0,r=0}while(0);return 0|i[11120+(216*t|0)+(72*n|0)+(24*e|0)+(r<<3)+4>>2]}(r,0|i[s>>2]);e:do{if(0|G(r)){switch(0|r){case 4:e=0;break;case 14:e=1;break;case 24:e=2;break;case 38:e=3;break;case 49:e=4;break;case 58:e=5;break;case 63:e=6;break;case 72:e=7;break;case 83:e=8;break;case 97:e=9;break;case 107:e=10;break;case 117:e=11;break;default:a=1;break e}if(c=0|i[22e3+(24*e|0)+8>>2],t=0|i[22e3+(24*e|0)+16>>2],(0|(e=0|i[s>>2]))!=(0|i[l>>2])&&(l=0|V(r))|(0|(e=0|i[s>>2]))==(0|t)&&(a=(a+1|0)%6|0),3==(0|A)&(0|e)==(0|t)){a=(a+5|0)%6|0,c=22;break}5==(0|A)&(0|e)==(0|c)?(a=(a+1|0)%6|0,c=22):c=22}else c=22}while(0);return 22==(0|c)&&(i[n>>2]=a,a=0),L=o,0|(n=a)}function vt(e,t,n,r){n|=0,r|=0;var s,A,o,a,c,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0;if(c=L,L=L+32|0,v=c+24|0,a=c+20|0,o=c+8|0,A=c+16|0,s=c,f=(f=0==(0|Ne(e|=0,t|=0)))?6:5,g=0|Vt(0|e,0|t,52),S(),f>>>0<=n>>>0)return L=c,0|(r=2);!(_=0==(0|(g&=15)))&&0==((m=0|zt(7,0,3*(15^g)|0))&e|0)&0==((0|S())&t|0)?l=n:u=4;e:do{if(4==(0|u)){if((0|((l=0!=(0|Ne(e,t)))?4:5))<(0|n))return L=c,0|(r=1);if(0|Et(e,t,v))return L=c,0|(r=1);if(u=(0|i[v>>2])+n|0,7==(0|(m=0|i[(l=l?22288+(((0|u)%5|0)<<2)|0:22320+(((0|u)%6|0)<<2)|0)>>2])))return L=c,0|(r=1);i[a>>2]=0,l=0|N(e,t,m,a,o);do{if(!l){if(p=0|i[(d=o)>>2],u=(h=(d=0|i[d+4>>2])>>>0<t>>>0|(0|d)==(0|t)&p>>>0<e>>>0)?p:e,h=h?d:t,!_&&0==(p&(_=0|zt(7,0,3*(15^g)|0))|0)&0==(d&(0|S())|0))l=n;else{if(d=(n+-1+f|0)%(0|f)|0,l=0|Ne(e,t),(0|d)<0&&R(23313,23315,245,23324),(0|((f=0!=(0|l))?4:5))<(0|d)&&R(23313,23315,245,23324),0|Et(e,t,v)&&R(23313,23315,245,23324),l=(0|i[v>>2])+d|0,7==(0|(d=0|i[(l=f?22288+(((0|l)%5|0)<<2)|0:22320+(((0|l)%6|0)<<2)|0)>>2]))&&R(23313,23315,245,23324),i[A>>2]=0,0|(l=0|N(e,t,d,A,s)))break;f=0|i[(p=s)>>2],p=0|i[p+4>>2];do{if(p>>>0<h>>>0|(0|p)==(0|h)&f>>>0<u>>>0){if(u=0|Ne(f,p)?0|F(f,p,e,t):0|i[22384+((((0|i[A>>2])+(0|i[22352+(d<<2)>>2])|0)%6|0)<<2)>>2],l=0|Ne(f,p),(u+-1|0)>>>0>5){l=-1,u=f,h=p;break}if(1==(0|u)&(l=0!=(0|l))){l=-1,u=f,h=p;break}do{if(!(0|Et(f,p,v))){if(l){l=(5+(0|i[21936+(u<<2)>>2])-(0|i[v>>2])|0)%5|0;break}l=(6+(0|i[21968+(u<<2)>>2])-(0|i[v>>2])|0)%6|0;break}l=-1}while(0);u=f,h=p}else l=n}while(0);p=0|i[(d=o)>>2],d=0|i[d+4>>2]}if((0|u)==(0|p)&(0|h)==(0|d)){if(e=(f=0!=(0|Ne(p,d)))?0|F(p,d,e,t):0|i[22384+((((0|i[a>>2])+(0|i[22352+(m<<2)>>2])|0)%6|0)<<2)>>2],l=0|Ne(p,d),(e+-1|0)>>>0<=5&&!(1==(0|e)&(E=0!=(0|l))))do{if(!(0|Et(p,d,v))){if(E){l=(5+(0|i[21936+(e<<2)>>2])-(0|i[v>>2])|0)%5|0;break}l=(6+(0|i[21968+(e<<2)>>2])-(0|i[v>>2])|0)%6|0;break}l=-1}while(0);else l=-1;l=6==(0|(l=l+1|0))|f&5==(0|l)?0:l}t=h,e=u;break e}}while(0);return L=c,0|(r=l)}}while(0);return E=0|zt(0|l,0,56),v=0|S()|-2130706433&t|536870912,i[r>>2]=E|e,i[r+4>>2]=v,L=c,0|(r=0)}function yt(e,t,n){e|=0,n|=0;var r=0;(0|(t|=0))>0?(r=0|It(t,4),i[e>>2]=r,r||R(23337,23360,40,23374)):i[e>>2]=0,i[e+4>>2]=t,i[e+8>>2]=0,i[e+12>>2]=n}function bt(e){var t,n,r,A=0,o=0,a=0,l=0;t=(e|=0)+4|0,n=e+12|0,r=e+8|0;e:for(;;){for(o=0|i[t>>2],A=0;;){if((0|A)>=(0|o))break e;if(a=0|i[e>>2],l=0|i[a+(A<<2)>>2])break;A=A+1|0}A=a+(~~(+c(+ +u(10,+ +(15-(0|i[n>>2])|0))*(+s[l>>3]+ +s[l+8>>3]))%+(0|o))>>>0<<2)|0,o=0|i[A>>2];t:do{if(0|o){if(a=l+32|0,(0|o)==(0|l))i[A>>2]=i[a>>2];else{if(!(A=0|i[(o=o+32|0)>>2]))break;for(;(0|A)!=(0|l);)if(!(A=0|i[(o=A+32|0)>>2]))break t;i[o>>2]=i[a>>2]}Mt(l),i[r>>2]=(0|i[r>>2])-1}}while(0)}Mt(0|i[e>>2])}function wt(e){var t,n=0,r=0;for(t=0|i[(e|=0)+4>>2],r=0;;){if((0|r)>=(0|t)){n=0,r=4;break}if(n=0|i[(0|i[e>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function Tt(e,t){t|=0;var n=0,r=0,A=0,o=0;if(n=~~(+c(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+s[t>>3]+ +s[t+8>>3]))%+(0|i[e+4>>2]))>>>0,n=(0|i[e>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 0|(o=1);o=t+32|0;do{if((0|r)!=(0|t)){if(!(n=0|i[r+32>>2]))return 0|(o=1);for(A=n;;){if((0|A)==(0|t)){A=8;break}if(!(n=0|i[A+32>>2])){n=1,A=10;break}r=A,A=n}if(8==(0|A)){i[r+32>>2]=i[o>>2];break}if(10==(0|A))return 0|n}else i[n>>2]=i[o>>2]}while(0);return Mt(t),i[(o=e+8|0)>>2]=(0|i[o>>2])-1,0|(o=0)}function St(e,t,n){e|=0,t|=0,n|=0;var r,A=0,o=0,a=0;(r=0|Pt(40))||R(23390,23360,98,23403),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[(o=r+16|0)>>2]=i[n>>2],i[o+4>>2]=i[n+4>>2],i[o+8>>2]=i[n+8>>2],i[o+12>>2]=i[n+12>>2],i[r+32>>2]=0,o=~~(+c(+ +u(10,+ +(15-(0|i[e+12>>2])|0))*(+s[t>>3]+ +s[t+8>>3]))%+(0|i[e+4>>2]))>>>0,o=(0|i[e>>2])+(o<<2)|0,A=0|i[o>>2];do{if(A){for(;!(0|Je(A,t)&&0|Je(A+16|0,n));)if(o=0|i[A+32>>2],!(0|i[(A=0==(0|o)?A:o)+32>>2])){a=10;break}if(10==(0|a)){i[A+32>>2]=r;break}return Mt(r),0|(a=A)}i[o>>2]=r}while(0);return i[(a=e+8|0)>>2]=1+(0|i[a>>2]),0|(a=r)}function Rt(e,t,n){t|=0,n|=0;var r=0,A=0;if(A=~~(+c(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+s[t>>3]+ +s[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(A=0|i[(0|i[e>>2])+(A<<2)>>2]))return 0|(n=0);if(!n){for(e=A;;){if(0|Je(e,t)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}if(10==(0|r))return 0|e}for(e=A;;){if(0|Je(e,t)&&0|Je(e+16|0,n)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}return 10==(0|r)?0|e:0}function Ct(e,t){t|=0;var n=0;if(n=~~(+c(+ +u(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+s[t>>3]+ +s[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(e=0|i[(0|i[e>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|Je(e,t)){t=5;break}if(!(e=0|i[e+32>>2])){e=0,t=5;break}}return 5==(0|t)?0|e:0}function xt(e){return 0|~~+function(e){return+ +$t(+(e=+e))}(e=+e)}function Pt(e){e|=0;var t,n=0,r=0,s=0,A=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0,b=0;t=L,L=L+16|0,f=t;do{if(e>>>0<245){if(e=(u=e>>>0<11?16:e+11&-8)>>>3,3&(r=(d=0|i[5857])>>>e)|0)return s=0|i[(r=(e=23468+((n=(1&r^1)+e|0)<<1<<2)|0)+8|0)>>2],(0|(o=0|i[(A=s+8|0)>>2]))==(0|e)?i[5857]=d&~(1<<n):(i[o+12>>2]=e,i[r>>2]=o),b=n<<3,i[s+4>>2]=3|b,i[(b=s+b+4|0)>>2]=1|i[b>>2],L=t,0|(b=A);if(u>>>0>(h=0|i[5859])>>>0){if(0|r)return n=((n=r<<e&((n=2<<e)|0-n))&0-n)-1|0,o=0|i[(e=(n=23468+((s=((r=(n>>>=c=n>>>12&16)>>>5&8)|c|(o=(n>>>=r)>>>2&4)|(e=(n>>>=o)>>>1&2)|(s=(n>>>=e)>>>1&1))+(n>>>s)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|i[(c=o+8|0)>>2]))==(0|n)?(e=d&~(1<<s),i[5857]=e):(i[r+12>>2]=n,i[e>>2]=r,e=d),a=(b=s<<3)-u|0,i[o+4>>2]=3|u,i[(A=o+u|0)+4>>2]=1|a,i[o+b>>2]=a,0|h&&(s=0|i[5862],r=23468+((n=h>>>3)<<1<<2)|0,e&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=s,i[n+12>>2]=s,i[s+8>>2]=n,i[s+12>>2]=r),i[5859]=a,i[5862]=A,L=t,0|(b=c);if(o=0|i[5858]){for(r=(o&0-o)-1|0,r=l=0|i[23732+(((s=(r>>>=A=r>>>12&16)>>>5&8)|A|(a=(r>>>=s)>>>2&4)|(c=(r>>>=a)>>>1&2)|(l=(r>>>=c)>>>1&1))+(r>>>l)<<2)>>2],c=l,l=(-8&i[l+4>>2])-u|0;(e=0|i[r+16>>2])||(e=0|i[r+20>>2]);)r=e,c=(A=(a=(-8&i[e+4>>2])-u|0)>>>0<l>>>0)?e:c,l=A?a:l;if((a=c+u|0)>>>0>c>>>0){A=0|i[c+24>>2],n=0|i[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|i[(e=c+20|0)>>2])&&!(n=0|i[(e=c+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(s=n+20|0)>>2])n=r,e=s;else{if(!(r=0|i[(s=n+16|0)>>2]))break;n=r,e=s}i[e>>2]=0,r=n}else r=0|i[c+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|A){if(n=0|i[c+28>>2],(0|c)==(0|i[(e=23732+(n<<2)|0)>>2])){if(i[e>>2]=r,!r){i[5858]=o&~(1<<n);break}}else if(i[((0|i[(b=A+16|0)>>2])==(0|c)?b:A+20|0)>>2]=r,!r)break;i[r+24>>2]=A,0|(n=0|i[c+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[c+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return l>>>0<16?(b=l+u|0,i[c+4>>2]=3|b,i[(b=c+b+4|0)>>2]=1|i[b>>2]):(i[c+4>>2]=3|u,i[a+4>>2]=1|l,i[a+l>>2]=l,0|h&&(s=0|i[5862],r=23468+((n=h>>>3)<<1<<2)|0,(n=1<<n)&d?n=0|i[(e=r+8|0)>>2]:(i[5857]=n|d,n=r,e=r+8|0),i[e>>2]=s,i[n+12>>2]=s,i[s+8>>2]=n,i[s+12>>2]=r),i[5859]=l,i[5862]=a),L=t,0|(b=c+8|0)}d=u}else d=u}else d=u}else if(e>>>0<=4294967231)if(u=-8&(e=e+11|0),s=0|i[5858]){A=0-u|0,l=(e>>>=8)?u>>>0>16777215?31:u>>>((l=14-((c=((_=e<<(d=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|d|(l=((_<<=c)+245760|0)>>>16&2))+(_<<l>>>15)|0)+7|0)&1|l<<1:0,r=0|i[23732+(l<<2)>>2];e:do{if(r)for(e=0,c=u<<(31==(0|l)?0:25-(l>>>1)|0),o=0;;){if((a=(-8&i[r+4>>2])-u|0)>>>0<A>>>0){if(!a){e=r,A=0,_=65;break e}e=r,A=a}if(o=0==(0|(_=0|i[r+20>>2]))|(0|_)==(0|(r=0|i[r+16+(c>>>31<<2)>>2]))?o:_,!r){r=o,_=61;break}c<<=1}else r=0,e=0,_=61}while(0);if(61==(0|_)){if(0==(0|r)&0==(0|e)){if(!(e=((e=2<<l)|0-e)&s)){d=u;break}d=(e&0-e)-1|0,e=0,r=0|i[23732+(((o=(d>>>=a=d>>>12&16)>>>5&8)|a|(c=(d>>>=o)>>>2&4)|(l=(d>>>=c)>>>1&2)|(r=(d>>>=l)>>>1&1))+(d>>>r)<<2)>>2]}r?_=65:(c=e,a=A)}if(65==(0|_))for(o=r;;){if(A=(r=(d=(-8&i[o+4>>2])-u|0)>>>0<A>>>0)?d:A,e=r?o:e,(r=0|i[o+16>>2])||(r=0|i[o+20>>2]),!r){c=e,a=A;break}o=r}if(0!=(0|c)&&a>>>0<((0|i[5859])-u|0)>>>0&&(h=c+u|0)>>>0>c>>>0){o=0|i[c+24>>2],n=0|i[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|i[(e=c+20|0)>>2])&&!(n=0|i[(e=c+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(A=n+20|0)>>2])n=r,e=A;else{if(!(r=0|i[(A=n+16|0)>>2]))break;n=r,e=A}i[e>>2]=0}else b=0|i[c+8>>2],i[b+12>>2]=n,i[n+8>>2]=b}while(0);do{if(o){if(e=0|i[c+28>>2],(0|c)==(0|i[(r=23732+(e<<2)|0)>>2])){if(i[r>>2]=n,!n){s&=~(1<<e),i[5858]=s;break}}else if(i[((0|i[(b=o+16|0)>>2])==(0|c)?b:o+20|0)>>2]=n,!n)break;i[n+24>>2]=o,0|(e=0|i[c+16>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),(e=0|i[c+20>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);e:do{if(a>>>0<16)b=a+u|0,i[c+4>>2]=3|b,i[(b=c+b+4|0)>>2]=1|i[b>>2];else{if(i[c+4>>2]=3|u,i[h+4>>2]=1|a,i[h+a>>2]=a,n=a>>>3,a>>>0<256){r=23468+(n<<1<<2)|0,(e=0|i[5857])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=h,i[n+12>>2]=h,i[h+8>>2]=n,i[h+12>>2]=r;break}if(n=23732+((r=(n=a>>>8)?a>>>0>16777215?31:a>>>((r=14-((v=((b=n<<(y=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|y|(r=((b<<=v)+245760|0)>>>16&2))+(b<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[h+28>>2]=r,i[(e=h+16|0)+4>>2]=0,i[e>>2]=0,!(s&(e=1<<r))){i[5858]=s|e,i[n>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break}n=0|i[n>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|a)){for(s=a<<(31==(0|r)?0:25-(r>>>1)|0);e=0|i[(r=n+16+(s>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|a)){n=e;break t}s<<=1,n=e}i[r>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break e}}while(0);b=0|i[(y=n+8|0)>>2],i[b+12>>2]=h,i[y>>2]=h,i[h+8>>2]=b,i[h+12>>2]=n,i[h+24>>2]=0}}while(0);return L=t,0|(b=c+8|0)}d=u}else d=u;else d=-1}while(0);if((r=0|i[5859])>>>0>=d>>>0)return n=r-d|0,e=0|i[5862],n>>>0>15?(b=e+d|0,i[5862]=b,i[5859]=n,i[b+4>>2]=1|n,i[e+r>>2]=n,i[e+4>>2]=3|d):(i[5859]=0,i[5862]=0,i[e+4>>2]=3|r,i[(b=e+r+4|0)>>2]=1|i[b>>2]),L=t,0|(b=e+8|0);if((a=0|i[5860])>>>0>d>>>0)return v=a-d|0,i[5860]=v,y=(b=0|i[5863])+d|0,i[5863]=y,i[y+4>>2]=1|v,i[b+4>>2]=3|d,L=t,0|(b=b+8|0);if(0|i[5975]?e=0|i[5977]:(i[5977]=4096,i[5976]=4096,i[5978]=-1,i[5979]=-1,i[5980]=0,i[5968]=0,i[5975]=-16&f^1431655768,e=4096),c=d+48|0,(u=(o=e+(l=d+47|0)|0)&(A=0-e|0))>>>0<=d>>>0)return L=t,0|(b=0);if(0|(e=0|i[5967])&&(f=(h=0|i[5965])+u|0)>>>0<=h>>>0|f>>>0>e>>>0)return L=t,0|(b=0);e:do{if(4&i[5968])n=0,_=143;else{r=0|i[5863];t:do{if(r){for(s=23876;!((f=0|i[s>>2])>>>0<=r>>>0&&(f+(0|i[s+4>>2])|0)>>>0>r>>>0);){if(!(e=0|i[s+8>>2])){_=128;break t}s=e}if((n=o-a&A)>>>0<2147483647)if((0|(e=0|Yt(0|n)))==((0|i[s>>2])+(0|i[s+4>>2])|0)){if(-1!=(0|e)){a=n,o=e,_=145;break e}}else s=e,_=136;else n=0}else _=128}while(0);do{if(128==(0|_))if(-1!=(0|(r=0|Yt(0)))&&(n=r,g=(n=(0==((g=(p=0|i[5976])+-1|0)&n|0)?0:(g+n&0-p)-n|0)+u|0)+(p=0|i[5965])|0,n>>>0>d>>>0&n>>>0<2147483647)){if(0|(f=0|i[5967])&&g>>>0<=p>>>0|g>>>0>f>>>0){n=0;break}if((0|(e=0|Yt(0|n)))==(0|r)){a=n,o=r,_=145;break e}s=e,_=136}else n=0}while(0);do{if(136==(0|_)){if(r=0-n|0,!(c>>>0>n>>>0&n>>>0<2147483647&-1!=(0|s))){if(-1==(0|s)){n=0;break}a=n,o=s,_=145;break e}if((e=l-n+(e=0|i[5977])&0-e)>>>0>=2147483647){a=n,o=s,_=145;break e}if(-1==(0|Yt(0|e))){Yt(0|r),n=0;break}a=e+n|0,o=s,_=145;break e}}while(0);i[5968]=4|i[5968],_=143}}while(0);if(143==(0|_)&&u>>>0<2147483647&&!(-1==(0|(v=0|Yt(0|u)))|1^(E=(m=(g=0|Yt(0))-v|0)>>>0>(d+40|0)>>>0)|v>>>0<g>>>0&-1!=(0|v)&-1!=(0|g)^1)&&(a=E?m:n,o=v,_=145),145==(0|_)){n=(0|i[5965])+a|0,i[5965]=n,n>>>0>(0|i[5966])>>>0&&(i[5966]=n),l=0|i[5863];e:do{if(l){for(n=23876;;){if((0|o)==((e=0|i[n>>2])+(r=0|i[n+4>>2])|0)){_=154;break}if(!(s=0|i[n+8>>2]))break;n=s}if(154==(0|_)&&(y=n+4|0,0==(8&i[n+12>>2]|0))&&o>>>0>l>>>0&e>>>0<=l>>>0){i[y>>2]=r+a,y=l+(v=0==(7&(v=l+8|0)|0)?0:0-v&7)|0,v=(b=(0|i[5860])+a|0)-v|0,i[5863]=y,i[5860]=v,i[y+4>>2]=1|v,i[l+b+4>>2]=40,i[5864]=i[5979];break}for(o>>>0<(0|i[5861])>>>0&&(i[5861]=o),r=o+a|0,n=23876;;){if((0|i[n>>2])==(0|r)){_=162;break}if(!(e=0|i[n+8>>2]))break;n=e}if(162==(0|_)&&0==(8&i[n+12>>2]|0)){i[n>>2]=o,i[(h=n+4|0)>>2]=(0|i[h>>2])+a,u=(h=o+(0==(7&(h=o+8|0)|0)?0:0-h&7)|0)+d|0,c=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-h-d|0,i[h+4>>2]=3|d;t:do{if((0|l)==(0|n))b=(0|i[5860])+c|0,i[5860]=b,i[5863]=u,i[u+4>>2]=1|b;else{if((0|i[5862])==(0|n)){b=(0|i[5859])+c|0,i[5859]=b,i[5862]=u,i[u+4>>2]=1|b,i[u+b>>2]=b;break}if(1==(3&(e=0|i[n+4>>2])|0)){a=-8&e,s=e>>>3;n:do{if(e>>>0<256){if(e=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|e)){i[5857]=i[5857]&~(1<<s);break}i[e+12>>2]=r,i[r+8>>2]=e;break}o=0|i[n+24>>2],e=0|i[n+12>>2];do{if((0|e)==(0|n)){if(e=0|i[(s=(r=n+16|0)+4|0)>>2])r=s;else if(!(e=0|i[r>>2])){e=0;break}for(;;)if(s=0|i[(A=e+20|0)>>2])e=s,r=A;else{if(!(s=0|i[(A=e+16|0)>>2]))break;e=s,r=A}i[r>>2]=0}else b=0|i[n+8>>2],i[b+12>>2]=e,i[e+8>>2]=b}while(0);if(!o)break;s=23732+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[s>>2])==(0|n)){if(i[s>>2]=e,0|e)break;i[5858]=i[5858]&~(1<<r);break n}if(i[((0|i[(b=o+16|0)>>2])==(0|n)?b:o+20|0)>>2]=e,!e)break n}while(0);if(i[e+24>>2]=o,0|(s=0|i[(r=n+16|0)>>2])&&(i[e+16>>2]=s,i[s+24>>2]=e),!(r=0|i[r+4>>2]))break;i[e+20>>2]=r,i[r+24>>2]=e}while(0);n=n+a|0,A=a+c|0}else A=c;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[u+4>>2]=1|A,i[u+A>>2]=A,n=A>>>3,A>>>0<256){r=23468+(n<<1<<2)|0,(e=0|i[5857])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=u,i[n+12>>2]=u,i[u+8>>2]=n,i[u+12>>2]=r;break}n=A>>>8;do{if(n){if(A>>>0>16777215){s=31;break}s=A>>>((s=14-((v=((b=n<<(y=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|y|(s=((b<<=v)+245760|0)>>>16&2))+(b<<s>>>15)|0)+7|0)&1|s<<1}else s=0}while(0);if(n=23732+(s<<2)|0,i[u+28>>2]=s,i[(e=u+16|0)+4>>2]=0,i[e>>2]=0,!((e=0|i[5858])&(r=1<<s))){i[5858]=e|r,i[n>>2]=u,i[u+24>>2]=n,i[u+12>>2]=u,i[u+8>>2]=u;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2]|0)!=(0|A)){for(s=A<<(31==(0|s)?0:25-(s>>>1)|0);e=0|i[(r=n+16+(s>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|A)){n=e;break n}s<<=1,n=e}i[r>>2]=u,i[u+24>>2]=n,i[u+12>>2]=u,i[u+8>>2]=u;break t}}while(0);b=0|i[(y=n+8|0)>>2],i[b+12>>2]=u,i[y>>2]=u,i[u+8>>2]=b,i[u+12>>2]=n,i[u+24>>2]=0}}while(0);return L=t,0|(b=h+8|0)}for(n=23876;!((e=0|i[n>>2])>>>0<=l>>>0&&(b=e+(0|i[n+4>>2])|0)>>>0>l>>>0);)n=0|i[n+8>>2];n=(e=(e=(A=b+-47|0)+(0==(7&(e=A+8|0)|0)?0:0-e&7)|0)>>>0<(A=l+16|0)>>>0?l:e)+8|0,y=o+(v=0==(7&(v=o+8|0)|0)?0:0-v&7)|0,v=(r=a+-40|0)-v|0,i[5863]=y,i[5860]=v,i[y+4>>2]=1|v,i[o+r+4>>2]=40,i[5864]=i[5979],i[(r=e+4|0)>>2]=27,i[n>>2]=i[5969],i[n+4>>2]=i[5970],i[n+8>>2]=i[5971],i[n+12>>2]=i[5972],i[5969]=o,i[5970]=a,i[5972]=0,i[5971]=n,n=e+24|0;do{y=n,i[(n=n+4|0)>>2]=7}while((y+8|0)>>>0<b>>>0);if((0|e)!=(0|l)){if(o=e-l|0,i[r>>2]=-2&i[r>>2],i[l+4>>2]=1|o,i[e>>2]=o,n=o>>>3,o>>>0<256){r=23468+(n<<1<<2)|0,(e=0|i[5857])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=l,i[n+12>>2]=l,i[l+8>>2]=n,i[l+12>>2]=r;break}if(r=23732+((s=(n=o>>>8)?o>>>0>16777215?31:o>>>((s=14-((v=((b=n<<(y=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|y|(s=((b<<=v)+245760|0)>>>16&2))+(b<<s>>>15)|0)+7|0)&1|s<<1:0)<<2)|0,i[l+28>>2]=s,i[l+20>>2]=0,i[A>>2]=0,!((n=0|i[5858])&(e=1<<s))){i[5858]=n|e,i[r>>2]=l,i[l+24>>2]=r,i[l+12>>2]=l,i[l+8>>2]=l;break}n=0|i[r>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|o)){for(s=o<<(31==(0|s)?0:25-(s>>>1)|0);e=0|i[(r=n+16+(s>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|o)){n=e;break t}s<<=1,n=e}i[r>>2]=l,i[l+24>>2]=n,i[l+12>>2]=l,i[l+8>>2]=l;break e}}while(0);b=0|i[(y=n+8|0)>>2],i[b+12>>2]=l,i[y>>2]=l,i[l+8>>2]=b,i[l+12>>2]=n,i[l+24>>2]=0}}else 0==(0|(b=0|i[5861]))|o>>>0<b>>>0&&(i[5861]=o),i[5969]=o,i[5970]=a,i[5972]=0,i[5866]=i[5975],i[5865]=-1,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,i[5906]=23612,i[5905]=23612,i[5908]=23620,i[5907]=23620,i[5910]=23628,i[5909]=23628,i[5912]=23636,i[5911]=23636,i[5914]=23644,i[5913]=23644,i[5916]=23652,i[5915]=23652,i[5918]=23660,i[5917]=23660,i[5920]=23668,i[5919]=23668,i[5922]=23676,i[5921]=23676,i[5924]=23684,i[5923]=23684,i[5926]=23692,i[5925]=23692,i[5928]=23700,i[5927]=23700,i[5930]=23708,i[5929]=23708,i[5932]=23716,i[5931]=23716,y=o+(v=0==(7&(v=o+8|0)|0)?0:0-v&7)|0,v=(b=a+-40|0)-v|0,i[5863]=y,i[5860]=v,i[y+4>>2]=1|v,i[o+b+4>>2]=40,i[5864]=i[5979]}while(0);if((n=0|i[5860])>>>0>d>>>0)return v=n-d|0,i[5860]=v,y=(b=0|i[5863])+d|0,i[5863]=y,i[y+4>>2]=1|v,i[b+4>>2]=3|d,L=t,0|(b=b+8|0)}return i[(b=23424)>>2]=12,L=t,0|(b=0)}function Mt(e){var t=0,n=0,r=0,s=0,A=0,o=0,a=0,c=0;if(e|=0){n=e+-8|0,s=0|i[5861],c=n+(t=-8&(e=0|i[e+-4>>2]))|0;do{if(1&e)a=n,o=n;else{if(r=0|i[n>>2],!(3&e))return;if(A=r+t|0,(o=n+(0-r)|0)>>>0<s>>>0)return;if((0|i[5862])==(0|o)){if(3!=(3&(t=0|i[(e=c+4|0)>>2])|0)){a=o,t=A;break}return i[5859]=A,i[e>>2]=-2&t,i[o+4>>2]=1|A,void(i[o+A>>2]=A)}if(n=r>>>3,r>>>0<256){if(e=0|i[o+8>>2],(0|(t=0|i[o+12>>2]))==(0|e)){i[5857]=i[5857]&~(1<<n),a=o,t=A;break}i[e+12>>2]=t,i[t+8>>2]=e,a=o,t=A;break}s=0|i[o+24>>2],e=0|i[o+12>>2];do{if((0|e)==(0|o)){if(e=0|i[(n=(t=o+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){e=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0}else a=0|i[o+8>>2],i[a+12>>2]=e,i[e+8>>2]=a}while(0);if(s){if(t=0|i[o+28>>2],(0|i[(n=23732+(t<<2)|0)>>2])==(0|o)){if(i[n>>2]=e,!e){i[5858]=i[5858]&~(1<<t),a=o,t=A;break}}else if(i[((0|i[(a=s+16|0)>>2])==(0|o)?a:s+20|0)>>2]=e,!e){a=o,t=A;break}i[e+24>>2]=s,0|(n=0|i[(t=o+16|0)>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),(t=0|i[t+4>>2])?(i[e+20>>2]=t,i[t+24>>2]=e,a=o,t=A):(a=o,t=A)}else a=o,t=A}}while(0);if(!(o>>>0>=c>>>0)&&1&(r=0|i[(e=c+4|0)>>2])){if(2&r)i[e>>2]=-2&r,i[a+4>>2]=1|t,i[o+t>>2]=t,s=t;else{if((0|i[5863])==(0|c)){if(c=(0|i[5860])+t|0,i[5860]=c,i[5863]=a,i[a+4>>2]=1|c,(0|a)!=(0|i[5862]))return;return i[5862]=0,void(i[5859]=0)}if((0|i[5862])==(0|c))return c=(0|i[5859])+t|0,i[5859]=c,i[5862]=o,i[a+4>>2]=1|c,void(i[o+c>>2]=c);s=(-8&r)+t|0,n=r>>>3;do{if(r>>>0<256){if(t=0|i[c+8>>2],(0|(e=0|i[c+12>>2]))==(0|t)){i[5857]=i[5857]&~(1<<n);break}i[t+12>>2]=e,i[e+8>>2]=t;break}A=0|i[c+24>>2],e=0|i[c+12>>2];do{if((0|e)==(0|c)){if(e=0|i[(n=(t=c+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){n=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0,n=e}else n=0|i[c+8>>2],i[n+12>>2]=e,i[e+8>>2]=n,n=e}while(0);if(0|A){if(e=0|i[c+28>>2],(0|i[(t=23732+(e<<2)|0)>>2])==(0|c)){if(i[t>>2]=n,!n){i[5858]=i[5858]&~(1<<e);break}}else if(i[((0|i[(r=A+16|0)>>2])==(0|c)?r:A+20|0)>>2]=n,!n)break;i[n+24>>2]=A,0|(t=0|i[(e=c+16|0)>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),0|(e=0|i[e+4>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);if(i[a+4>>2]=1|s,i[o+s>>2]=s,(0|a)==(0|i[5862]))return void(i[5859]=s)}if(e=s>>>3,s>>>0<256)return n=23468+(e<<1<<2)|0,(t=0|i[5857])&(e=1<<e)?e=0|i[(t=n+8|0)>>2]:(i[5857]=t|e,e=n,t=n+8|0),i[t>>2]=a,i[e+12>>2]=a,i[a+8>>2]=e,void(i[a+12>>2]=n);e=23732+((r=(e=s>>>8)?s>>>0>16777215?31:s>>>((r=14-((A=((c=e<<(o=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|o|(r=((c<<=A)+245760|0)>>>16&2))+(c<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[a+28>>2]=r,i[a+20>>2]=0,i[a+16>>2]=0,t=0|i[5858],n=1<<r;e:do{if(t&n){e=0|i[e>>2];t:do{if((-8&i[e+4>>2]|0)!=(0|s)){for(r=s<<(31==(0|r)?0:25-(r>>>1)|0);t=0|i[(n=e+16+(r>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|s)){e=t;break t}r<<=1,e=t}i[n>>2]=a,i[a+24>>2]=e,i[a+12>>2]=a,i[a+8>>2]=a;break e}}while(0);c=0|i[(o=e+8|0)>>2],i[c+12>>2]=a,i[o>>2]=a,i[a+8>>2]=c,i[a+12>>2]=e,i[a+24>>2]=0}else i[5858]=t|n,i[e>>2]=a,i[a+24>>2]=e,i[a+12>>2]=a,i[a+8>>2]=a}while(0);if(c=(0|i[5865])-1|0,i[5865]=c,!(0|c)){for(e=23884;e=0|i[e>>2];)e=e+8|0;i[5865]=-1}}}}function It(e,t){t|=0;var n=0;return(e|=0)?(n=0|v(t,e),(t|e)>>>0>65535&&(n=(0|(n>>>0)/(e>>>0))==(0|t)?n:-1)):n=0,(e=0|Pt(n))&&3&i[e+-4>>2]?(Xt(0|e,0,0|n),0|e):0|e}function Lt(e,t,n,r){return 0|(T((t|=0)+(r|=0)+((n=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0|0),0|n)}function kt(e,t,n,r){return 0|(T(0|(r=(t|=0)-(r|=0)-((n|=0)>>>0>(e|=0)>>>0|0)>>>0)),e-n>>>0|0)}function Ot(e){return 0|((e|=0)?31-(0|w(e^e-1))|0:32)}function Bt(e,t,n,r,s){s|=0;var A=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0;if(u=e|=0,o=n|=0,a=d=r|=0,!(l=c=t|=0))return A=0!=(0|s),a?A?(i[s>>2]=0|e,i[s+4>>2]=0&t,s=0,0|(T(0|(d=0)),s)):(s=0,0|(T(0|(d=0)),s)):(A&&(i[s>>2]=(u>>>0)%(o>>>0),i[s+4>>2]=0),s=(u>>>0)/(o>>>0)>>>0,0|(T(0|(d=0)),s));A=0==(0|a);do{if(o){if(!A){if((A=(0|w(0|a))-(0|w(0|l))|0)>>>0<=31){o=h=A+1|0,e=u>>>(h>>>0)&(t=A-31>>31)|l<<(a=31-A|0),t&=l>>>(h>>>0),A=0,a=u<<a;break}return s?(i[s>>2]=0|e,i[s+4>>2]=c|0&t,s=0,0|(T(0|(d=0)),s)):(s=0,0|(T(0|(d=0)),s))}if((A=o-1|0)&o|0){o=a=33+(0|w(0|o))-(0|w(0|l))|0,e=(h=32-a|0)-1>>31&l>>>((f=a-32|0)>>>0)|(l<<h|u>>>(a>>>0))&(t=f>>31),t&=l>>>(a>>>0),A=u<<(p=64-a|0)&(c=h>>31),a=(l<<p|u>>>(f>>>0))&c|u<<h&a-33>>31;break}return 0|s&&(i[s>>2]=A&u,i[s+4>>2]=0),1==(0|o)?(p=0|e,0|(T(0|(f=c|0&t)),p)):(f=l>>>((p=0|Ot(0|o))>>>0)|0,p=l<<32-p|u>>>(p>>>0)|0,0|(T(0|f),p))}if(A)return 0|s&&(i[s>>2]=(l>>>0)%(o>>>0),i[s+4>>2]=0),p=(l>>>0)/(o>>>0)>>>0,0|(T(0|(f=0)),p);if(!u)return 0|s&&(i[s>>2]=0,i[s+4>>2]=(l>>>0)%(a>>>0)),p=(l>>>0)/(a>>>0)>>>0,0|(T(0|(f=0)),p);if(!((A=a-1|0)&a))return 0|s&&(i[s>>2]=0|e,i[s+4>>2]=A&l|0&t),f=0,p=l>>>((0|Ot(0|a))>>>0),0|(T(0|f),p);if((A=(0|w(0|a))-(0|w(0|l))|0)>>>0<=30){o=t=A+1|0,e=l<<(a=31-A|0)|u>>>(t>>>0),t=l>>>(t>>>0),A=0,a=u<<a;break}return s?(i[s>>2]=0|e,i[s+4>>2]=c|0&t,p=0,0|(T(0|(f=0)),p)):(p=0,0|(T(0|(f=0)),p))}while(0);if(o){l=0|Lt(0|(h=0|n),0|(u=d|0&r),-1,-1),n=0|S(),c=a,a=0;do{r=c,c=A>>>31|c<<1,A=a|A<<1,kt(0|l,0|n,0|(r=e<<1|r>>>31|0),0|(d=e>>>31|t<<1|0)),a=1&(f=(p=0|S())>>31|((0|p)<0?-1:0)<<1),e=0|kt(0|r,0|d,f&h|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&u|0),t=0|S(),o=o-1|0}while(0!=(0|o));l=c,c=0}else l=a,c=0,a=0;return o=0,0|s&&(i[s>>2]=e,i[s+4>>2]=t),p=-2&(A<<1|0)|a,0|(T(0|(f=(0|A)>>>31|(l|o)<<1|0&(o<<1|A>>>31)|c)),p)}function Dt(e,t,n,r){n|=0;var i,s,A,o,a;return s=(r|=0)>>31|((0|r)<0?-1:0)<<1,i=((0|r)<0?-1:0)>>31|((0|r)<0?-1:0)<<1,A=0|kt((a=(t|=0)>>31|((0|t)<0?-1:0)<<1)^(e|=0)|0,(o=((0|t)<0?-1:0)>>31|((0|t)<0?-1:0)<<1)^t|0,0|a,0|o),e=s^a,t=i^o,0|kt((0|Bt(A,0|S(),0|kt(s^n|0,i^r|0,0|s,0|i),0|S(),0))^e|0,(0|S())^t|0,0|e,0|t)}function Nt(e,t,n,r){t|=0,r|=0;var i,s;return n=0|function(e,t){var n,r,i,s=0;return e=((n=0|v(s=65535&(t|=0),i=65535&(e|=0)))>>>16)+(0|v(s,r=e>>>16))|0,t=0|v(s=t>>>16,i),0|(T((e>>>16)+(0|v(s,r))+(((65535&e)+t|0)>>>16)|0),e+t<<16|65535&n|0)}(i=e|=0,s=n|=0),e=0|S(),0|(T((0|v(t,s))+(0|v(r,i))+e|0&e|0),0|n)}function Ft(e,t,n,r){n|=0;var s,A,o,a,c,l;return s=L,L=L+16|0,a=0|s,l=(r|=0)>>31|((0|r)<0?-1:0)<<1,c=((0|r)<0?-1:0)>>31|((0|r)<0?-1:0)<<1,Bt(e=0|kt((o=(t|=0)>>31|((0|t)<0?-1:0)<<1)^(e|=0)|0,(A=((0|t)<0?-1:0)>>31|((0|t)<0?-1:0)<<1)^t|0,0|o,0|A),t=0|S(),0|kt(l^n|0,c^r|0,0|l,0|c),0|S(),a),r=0|kt(i[a>>2]^o|0,i[a+4>>2]^A|0,0|o,0|A),n=0|S(),L=s,0|(T(0|n),r)}function Ut(e,t,n,r){var s,A;return A=L,L=L+16|0,Bt(e|=0,t|=0,n|=0,r|=0,s=0|A),L=A,0|(T(0|i[s+4>>2]),0|i[s>>2])}function Gt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(T(t>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(T(0|((0|t)<0?-1:0)),t>>n-32|0)}function Vt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(T(t>>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(T(0),t>>>n-32|0)}function zt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(T(t<<n|(e&(1<<n)-1<<32-n)>>>32-n|0),e<<n):(T(e<<n-32|0),0)}function jt(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+b(+e,+t)}function Wt(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+y(+e,+t)}function Ht(e){return(e=+e)>=0?+a(e+.5):+E(e-.5)}function Qt(e,t,n){e|=0,t|=0;var s,A,o=0;if((0|(n|=0))>=8192)return P(0|e,0|t,0|n),0|e;if(A=0|e,s=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|A;r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(o=(n=-4&s|0)-64|0;(0|e)<=(0|o);)i[e>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2],i[e+16>>2]=i[t+16>>2],i[e+20>>2]=i[t+20>>2],i[e+24>>2]=i[t+24>>2],i[e+28>>2]=i[t+28>>2],i[e+32>>2]=i[t+32>>2],i[e+36>>2]=i[t+36>>2],i[e+40>>2]=i[t+40>>2],i[e+44>>2]=i[t+44>>2],i[e+48>>2]=i[t+48>>2],i[e+52>>2]=i[t+52>>2],i[e+56>>2]=i[t+56>>2],i[e+60>>2]=i[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|n);)i[e>>2]=i[t>>2],e=e+4|0,t=t+4|0}else for(n=s-4|0;(0|e)<(0|n);)r[e>>0]=0|r[t>>0],r[e+1>>0]=0|r[t+1>>0],r[e+2>>0]=0|r[t+2>>0],r[e+3>>0]=0|r[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|s);)r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0;return 0|A}function Xt(e,t,n){t|=0;var s,A=0,o=0,a=0;if(s=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)r[e>>0]=t,e=e+1|0;for(a=t|t<<8|t<<16|t<<24,o=(A=-4&s|0)-64|0;(0|e)<=(0|o);)i[e>>2]=a,i[e+4>>2]=a,i[e+8>>2]=a,i[e+12>>2]=a,i[e+16>>2]=a,i[e+20>>2]=a,i[e+24>>2]=a,i[e+28>>2]=a,i[e+32>>2]=a,i[e+36>>2]=a,i[e+40>>2]=a,i[e+44>>2]=a,i[e+48>>2]=a,i[e+52>>2]=a,i[e+56>>2]=a,i[e+60>>2]=a,e=e+64|0;for(;(0|e)<(0|A);)i[e>>2]=a,e=e+4|0}for(;(0|e)<(0|s);)r[e>>0]=t,e=e+1|0;return s-n|0}function $t(e){return(e=+e)>=0?+a(e+.5):+E(e-.5)}function Yt(e){e|=0;var t,n,r;return r=0|x(),(0|e)>0&(0|(t=(n=0|i[o>>2])+e|0))<(0|n)|(0|t)<0?(I(0|t),C(12),-1):(0|t)>(0|r)&&!(0|M(0|t))?(C(12),-1):(i[o>>2]=t,0|n)}return{___divdi3:Dt,___muldi3:Nt,___remdi3:Ft,___uremdi3:Ut,_areNeighborCells:function(e,t,n,r,s){s|=0;var A,o,a,c=0,l=0,u=0,h=0;if(a=L,L=L+64|0,o=a,A=a+56|0,!(!0&134217728==(2013265920&(t|=0)|0)&!0&134217728==(2013265920&(r|=0)|0)))return L=a,0|(s=5);if((0|(e|=0))==(0|(n|=0))&(0|t)==(0|r))return i[s>>2]=0,L=a,0|(s=0);if(l=0|Vt(0|e,0|t,52),S(),l&=15,h=0|Vt(0|n,0|r,52),S(),(0|l)!=(15&h|0))return L=a,0|(s=12);if(c=l+-1|0,l>>>0>1){Be(e,t,c,o),Be(n,r,c,A),u=0|i[(h=o)>>2],h=0|i[h+4>>2];e:do{if((0|u)==(0|i[A>>2])&&(0|h)==(0|i[A+4>>2])){c=0|Vt(0|e,0|t,0|(l=3*(15^l)|0)),S(),c&=7,l=0|Vt(0|n,0|r,0|l),S(),l&=7;do{if(0==(0|c)|0==(0|l))i[s>>2]=1,c=0;else if(7==(0|c))c=5;else{if(1==(0|c)|1==(0|l)&&0|Ne(u,h)){c=5;break}if((0|i[15536+(c<<2)>>2])!=(0|l)&&(0|i[15568+(c<<2)>>2])!=(0|l))break e;i[s>>2]=1,c=0}}while(0);return L=a,0|(s=c)}}while(0)}l=(c=o)+56|0;do{i[c>>2]=0,c=c+4|0}while((0|c)<(0|l));return k(e,t,1,o),c=(0|i[(t=o)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=o+8|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=o+16|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=o+24|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=o+32|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=o+40|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)?1:1&((0|i[(c=o+48|0)>>2])==(0|n)?(0|i[c+4>>2])==(0|r):0),i[s>>2]=c,L=a,0|(s=0)},_bitshift64Ashr:Gt,_bitshift64Lshr:Vt,_bitshift64Shl:zt,_calloc:It,_cellAreaKm2:function(e,t,n){return 0|(e=0|rt(e|=0,t|=0,n|=0))||(s[n>>3]=6371.007180918475*+s[n>>3]*6371.007180918475),0|e},_cellAreaM2:function(e,t,n){return 0|(e=0|rt(e|=0,t|=0,n|=0))||(s[n>>3]=6371.007180918475*+s[n>>3]*6371.007180918475*1e3*1e3),0|e},_cellAreaRads2:rt,_cellToBoundary:$e,_cellToCenterChild:function(e,t,n,r){n|=0,r|=0;var s=0;return s=0|Vt(0|(e|=0),0|(t|=0),52),S(),(0|n)<16&(0|(s&=15))<=(0|n)?((0|s)<(0|n)&&(s=0|zt(-1,-1,3+(3*(n+-1-s|0)|0)|0),s=0|zt(0|~s,0|~(0|S()),3*(15-n|0)|0),t=~(0|S())&t,e&=~s),s=0|zt(0|n,0,52),n=-15728641&t|0|S(),i[r>>2]=e|s,i[r+4>>2]=n,0|(r=0)):0|(r=4)},_cellToChildPos:function(e,t,n,r){n|=0,r|=0;var s,A=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0;if(s=L,L=L+16|0,m=s,E=0|Vt(0|(e|=0),0|(t|=0),52),S(),E&=15,n>>>0>15)return L=s,0|(E=4);if((0|E)<(0|n))return L=s,0|(E=12);if((0|E)!=(0|n))if(o=0|zt(0|n,0,52),o|=e,c=0|S()|-15728641&t,(0|E)>(0|n)){l=n;do{_=0|zt(7,0,3*(14-l|0)|0),l=l+1|0,o|=_,c=0|S()|c}while((0|l)<(0|E));_=o}else _=o;else _=e,c=t;g=0|Vt(0|_,0|c,45),S();e:do{if(0|G(127&g)){if(l=0|Vt(0|_,0|c,52),S(),0|(l&=15))for(o=1;;){if(!(0==((g=0|zt(7,0,3*(15-o|0)|0))&_|0)&0==((0|S())&c|0))){u=33;break e}if(!(o>>>0<l>>>0))break;o=o+1|0}if(i[(g=r)>>2]=0,i[g+4>>2]=0,(0|E)>(0|n)){for(g=-15728641&t,p=E;;){if(f=p,(p=p+-1|0)>>>0>15|(0|E)<(0|p)){u=19;break}if((0|E)!=(0|p))if(o=0|zt(0|p,0,52),o|=e,l=0|S()|g,(0|E)<(0|f))d=o;else{u=p;do{d=0|zt(7,0,3*(14-u|0)|0),u=u+1|0,o|=d,l=0|S()|l}while((0|u)<(0|E));d=o}else d=e,l=t;if(h=0|Vt(0|d,0|l,45),S(),0|G(127&h)){h=0|Vt(0|d,0|l,52),S(),h&=15;t:do{if(h)for(u=1;;){if(o=0|Vt(0|d,0|l,3*(15-u|0)|0),S(),0|(o&=7))break t;if(!(u>>>0<h>>>0)){o=0;break}u=u+1|0}else o=0}while(0);o=0==(0|o)&1}else o=0;if(l=0|Vt(0|e,0|t,3*(15-f|0)|0),S(),7==(0|(l&=7))){A=5,u=42;break}if(1==(0|l)&(o=0!=(0|o))){A=5,u=42;break}if(0|(d=l+((0!=(0|l)&o)<<31>>31)|0)&&(u=0|ut(7,0,u=E-f|0,((0|u)<0)<<31>>31),h=0|S(),o?(o=0|Lt(0|(o=0|Nt(0|u,0|h,5,0)),0|S(),-5,-1),o=0|Lt(0|(o=0|Dt(0|o,0|S(),6,0)),0|S(),1,0),l=0|S()):(o=u,l=h),f=0|Lt(0|o,0|l,0|(f=0|Nt(0|u,0|h,0|(f=d+-1|0),((0|f)<0)<<31>>31|0)),0|S()),h=0|Lt(0|f,0|(d=0|S()),0|i[(h=r)>>2],0|i[h+4>>2]),d=0|S(),i[(f=r)>>2]=h,i[f+4>>2]=d),(0|p)<=(0|n)){u=37;break}}if(19==(0|u))R(23313,22674,1099,22710);else{if(37==(0|u)){A=0|i[(a=r)+4>>2],a=0|i[a>>2];break}if(42==(0|u))return L=s,0|A}}else A=0,a=0}else u=33}while(0);e:do{if(33==(0|u)){if(i[(g=r)>>2]=0,i[g+4>>2]=0,(0|E)>(0|n)){for(o=E;;){if(A=0|Vt(0|e,0|t,3*(15-o|0)|0),S(),7==(0|(A&=7))){A=5;break}if(A=0|Nt(0|(a=0|ut(7,0,a=E-o|0,((0|a)<0)<<31>>31)),0|S(),0|A,0),a=0|S(),a=0|Lt(0|i[(g=r)>>2],0|i[g+4>>2],0|A,0|a),A=0|S(),i[(g=r)>>2]=a,i[g+4>>2]=A,(0|(o=o+-1|0))<=(0|n))break e}return L=s,0|A}A=0,a=0}}while(0);return 0|De(_,c,E,m)&&R(23313,22674,1063,22725),((0|A)>-1|-1==(0|A)&a>>>0>4294967295)&((0|(m=0|i[(E=m)+4>>2]))>(0|A)|((0|m)==(0|A)?(0|i[E>>2])>>>0>a>>>0:0))?(L=s,0|(E=0)):(R(23313,22674,1139,22710),0)},_cellToChildren:function(e,t,n,r){r|=0;var s,A,o=0,a=0;if(A=L,L=L+16|0,Ke(s=A,e|=0,t|=0,n|=0),0==(0|(e=0|i[(t=s)>>2]))&0==(0|(t=0|i[t+4>>2])))return L=A,0;o=0,n=0;do{i[(a=r+(o<<3)|0)>>2]=e,i[a+4>>2]=t,o=0|Lt(0|o,0|n,1,0),n=0|S(),Ze(s),e=0|i[(a=s)>>2],t=0|i[a+4>>2]}while(!(0==(0|e)&0==(0|t)));return L=A,0},_cellToChildrenSize:De,_cellToLatLng:Xe,_cellToLocalIj:function(e,t,n,r,i,s){var A,o;return e|=0,t|=0,n|=0,r|=0,s|=0,o=L,L=L+16|0,A=o,(i|=0)?e=15:(e=0|ct(e,t,n,r,A))||(Ee(A,s),e=0),L=o,0|e},_cellToParent:Be,_cellToVertex:vt,_cellToVertexes:function(e,t,n){n|=0;var r,s=0,A=0;return A=0==(0|Ne(e|=0,t|=0)),r=0==(0|(s=0|vt(e,t,0,n))),A?r?0|(s=0|vt(e,t,1,n+8|0))||0|(s=0|vt(e,t,2,n+16|0))||0|(s=0|vt(e,t,3,n+24|0))||(s=0|vt(e,t,4,n+32|0))?0|(A=s):0|vt(e,t,5,n+40|0):0|(A=s):r?0|(s=0|vt(e,t,1,n+8|0))||0|(s=0|vt(e,t,2,n+16|0))||0|(s=0|vt(e,t,3,n+24|0))||0|(s=0|vt(e,t,4,n+32|0))?0|(A=s):(i[(A=n+40|0)>>2]=0,i[A+4>>2]=0,0|(A=0)):0|(A=s)},_cellsToDirectedEdge:function(e,t,n,r,s){return s|=0,7==(0|(n=0|F(e|=0,t|=0,n|=0,r|=0)))?0|(s=11):(r=0|zt(0|n,0,56),t=-2130706433&t|0|S()|268435456,i[s>>2]=e|r,i[s+4>>2]=t,0|(s=0))},_cellsToLinkedMultiPolygon:function(e,t,n){n|=0;var r,s,A,o=0;if(A=L,L=L+32|0,r=A,e=0|function(e,t,n){e|=0,n|=0;var r,s,A=0,o=0,a=0,c=0,l=0,u=0;if(s=L,L=L+176|0,r=s,(0|(t|=0))<1)return yt(n,0,0),L=s,0;for(l=0|Vt(0|i[(l=e)>>2],0|i[l+4>>2],52),S(),yt(n,(0|t)>6?t:6,15&l),l=0;!(0|(A=0|$e(0|i[(A=e+(l<<3)|0)>>2],0|i[A+4>>2],r)));){if((0|(A=0|i[r>>2]))>0){c=0;do{a=r+8+(c<<4)|0,(o=0|Rt(n,A=r+8+(((0|(c=c+1|0))%(0|A)|0)<<4)|0,a))?Tt(n,o):St(n,a,A),A=0|i[r>>2]}while((0|c)<(0|A))}if((0|(l=l+1|0))>=(0|t)){A=0,u=13;break}}return 13==(0|u)?(L=s,0|A):(bt(n),L=s,0|(u=A))}(e|=0,t|=0,s=A+16|0),0|e)return L=A,0|(n=e);if(i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,0|(e=0|wt(s)))do{t=0|it(n);do{st(t,e),o=e+16|0,i[r>>2]=i[o>>2],i[r+4>>2]=i[o+4>>2],i[r+8>>2]=i[o+8>>2],i[r+12>>2]=i[o+12>>2],Tt(s,e),e=0|Ct(s,r)}while(0!=(0|e));e=0|wt(s)}while(0!=(0|e));return bt(s),(e=0|ot(n))?(At(n),L=A,0|(o=e)):(L=A,0|(o=0))},_childPosToCell:function(e,t,n,r,s,A){e|=0,t|=0,A|=0;var o,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0;if(o=L,L=L+16|0,a=o,(s|=0)>>>0>15)return L=o,0|(A=4);if(c=0|Vt(0|(n|=0),0|(r|=0),52),S(),(0|(c&=15))>(0|s))return L=o,0|(A=12);if(0|De(n,r,s,a)&&R(23313,22674,1063,22725),!(((0|t)>-1|-1==(0|t)&e>>>0>4294967295)&((0|(u=0|i[(h=a)+4>>2]))>(0|t)|((0|u)==(0|t)?(0|i[h>>2])>>>0>e>>>0:0))))return L=o,0|(A=2);h=s-c|0,s=0|zt(0|s,0,52),l=0|S()|-15728641&r,i[(u=A)>>2]=s|n,i[u+4>>2]=l,u=0|Vt(0|n,0|r,45),S();e:do{if(0|G(127&u)){if(0|c)for(a=1;;){if(!(0==((u=0|zt(7,0,3*(15-a|0)|0))&n|0)&0==((0|S())&r|0)))break e;if(!(a>>>0<c>>>0))break;a=a+1|0}if((0|h)<1)return L=o,0|(A=0);for(u=15^c,r=-1,l=1,a=1;;){c=0|ut(7,0,c=h-l|0,((0|c)<0)<<31>>31),n=0|S();do{if(a){if(a=0|Dt(0|(a=0|Lt(0|(a=0|Nt(0|c,0|n,5,0)),0|S(),-5,-1)),0|S(),6,0),(0|t)>(0|(s=0|S()))|(0|t)==(0|s)&e>>>0>a>>>0){t=0|kt(0|(t=0|Lt(0|e,0|t,-1,-1)),0|S(),0|a,0|s),a=0|S(),p=0|i[(d=A)>>2],d=0|i[d+4>>2],f=0|zt(7,0,0|(g=3*(u+r|0)|0)),d&=~(0|S()),g=0|zt(0|(s=0|Lt(0|(r=0|Dt(0|t,0|a,0|c,0|n)),0|(e=0|S()),2,0)),0|S(),0|g),d=0|S()|d,i[(s=A)>>2]=g|p&~f,i[s+4>>2]=d,e=0|kt(0|t,0|a,0|(e=0|Nt(0|r,0|e,0|c,0|n)),0|S()),a=0,t=0|S();break}f=0|i[(g=A)>>2],g=0|i[g+4>>2],p=0|zt(7,0,3*(u+r|0)|0),g&=~(0|S()),i[(a=A)>>2]=f&~p,i[a+4>>2]=g,a=1;break}s=0|i[(f=A)>>2],f=0|i[f+4>>2],d=0|zt(7,0,0|(r=3*(u+r|0)|0)),f&=~(0|S()),r=0|zt(0|(g=0|Dt(0|e,0|t,0|c,0|n)),0|(a=0|S()),0|r),f=0|S()|f,i[(p=A)>>2]=r|s&~d,i[p+4>>2]=f,e=0|kt(0|e,0|t,0|(a=0|Nt(0|g,0|a,0|c,0|n)),0|S()),a=0,t=0|S()}while(0);if(!((0|h)>(0|l))){t=0;break}r=~l,l=l+1|0}return L=o,0|t}}while(0);if((0|h)<1)return L=o,0|(g=0);for(s=15^c,a=1;;){if(p=0|ut(7,0,p=h-a|0,((0|p)<0)<<31>>31),g=0|S(),n=0|i[(l=A)>>2],l=0|i[l+4>>2],r=0|zt(7,0,0|(c=3*(s-a|0)|0)),l&=~(0|S()),c=0|zt(0|(d=0|Dt(0|e,0|t,0|p,0|g)),0|(f=0|S()),0|c),l=0|S()|l,i[(u=A)>>2]=c|n&~r,i[u+4>>2]=l,e=0|kt(0|e,0|t,0|(g=0|Nt(0|d,0|f,0|p,0|g)),0|S()),t=0|S(),(0|h)<=(0|a)){t=0;break}a=a+1|0}return L=o,0|t},_compactCells:function(e,t,n,r){t|=0;var s,A=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0,b=0,w=0,T=0,C=0;if(0==(0|(n|=0))&0==(0|(r|=0)))return 0|(T=0);if(o=0|i[(A=e|=0)>>2],!0&0==(15728640&(A=0|i[A+4>>2])|0)){if(!((0|r)>0|0==(0|r)&n>>>0>0))return 0|(T=0);if(i[(T=t)>>2]=o,i[T+4>>2]=A,1==(0|n)&0==(0|r))return 0|(T=0);A=1;do{w=0|i[(b=e+(A<<3)|0)+4>>2],i[(T=t+(A<<3)|0)>>2]=i[b>>2],i[T+4>>2]=w,A=A+1|0}while(0<(0|r)|0==(0|r)&A>>>0<n>>>0);return 0|(A=0)}if(!(w=0|Pt(s=n<<3)))return 0|(T=13);if(Qt(0|w,0|e,0|s),!(b=0|It(n,8)))return Mt(w),0|(T=13);e:do{if(0|n){t:for(;;){v=0|Vt(0|(E=0|i[(A=w)>>2]),0|(A=0|i[A+4>>2]),52),S(),y=(v&=15)+-1|0,m=(0|n)>0;n:do{if(0!=(0|v)&m){if(p=((0|n)<0)<<31>>31,g=0|zt(0|y,0,52),_=0|S(),y>>>0>15){if(!(0==(0|E)&0==(0|A))){T=17;break t}for(o=0;;){if((0|(o=o+1|0))>=(0|n))break n;if(!(0==(0|(_=0|i[(r=w+(o<<3)|0)>>2]))&0==(0|(r=0|i[r+4>>2])))){A=r,T=17;break t}}}for(o=0,e=E,r=A;;){if(!(0==(0|e)&0==(0|r))){if(!(!0&0==(117440512&r|0))){T=22;break t}if(c=0|Vt(0|e,0|r,52),S(),(0|(c&=15))<(0|y)){A=12,T=28;break t}if((0|c)!=(0|y)&&(e|=g,r=-15728641&r|_,c>>>0>=v>>>0)){a=y;do{f=0|zt(7,0,3*(14-a|0)|0),a=a+1|0,e|=f,r=0|S()|r}while(a>>>0<c>>>0)}if(a=0|Ut(0|e,0|r,0|n,0|p),S(),0==(0|(l=0|i[(c=u=b+(a<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2])))a=u;else for(f=0;;){if((0|f)>(0|n)){T=32;break t}if((0|l)==(0|e)&(-117440513&c|0)==(0|r)){h=0|Vt(0|l,0|c,56),S(),d=(h&=7)+1|0,C=0|Vt(0|l,0|c,45),S();r:do{if(0|G(127&C)){if(l=0|Vt(0|l,0|c,52),S(),!(l&=15)){c=6;break}for(c=1;;){if(!(0==((C=0|zt(7,0,3*(15-c|0)|0))&e|0)&0==((0|S())&r|0))){c=7;break r}if(!(c>>>0<l>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((h+2|0)>>>0>c>>>0){T=42;break t}C=0|zt(0|d,0,56),r=0|S()|-117440513&r,i[(d=u)>>2]=0,i[d+4>>2]=0,e|=C}else a=(a+1|0)%(0|n)|0;if(0==(0|(l=0|i[(c=u=b+(a<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2]))){a=u;break}f=f+1|0}i[(C=a)>>2]=e,i[C+4>>2]=r}if((0|(o=o+1|0))>=(0|n))break n;e=0|i[(r=w+(o<<3)|0)>>2],r=0|i[r+4>>2]}}}while(0);if((n+5|0)>>>0<11){T=85;break}if(!(_=0|It((0|n)/6|0,8))){T=49;break}n:do{if(m){f=0,d=0;do{if(!(0==(0|(o=0|i[(r=c=b+(f<<3)|0)>>2]))&0==(0|(r=0|i[r+4>>2])))){l=0|Vt(0|o,0|r,56),S(),e=(l&=7)+1|0,u=-117440513&r,C=0|Vt(0|o,0|r,45),S();r:do{if(0|G(127&C)){if(h=0|Vt(0|o,0|r,52),S(),0|(h&=15))for(a=1;;){if(!(0==(o&(C=0|zt(7,0,3*(15-a|0)|0))|0)&0==(u&(0|S())|0)))break r;if(!(a>>>0<h>>>0))break;a=a+1|0}o|=r=0|zt(0|e,0,56),r=0|S()|u,i[(e=c)>>2]=o,i[e+4>>2]=r,e=l+2|0}}while(0);7==(0|e)&&(i[(C=_+(d<<3)|0)>>2]=o,i[C+4>>2]=-117440513&r,d=d+1|0)}f=f+1|0}while((0|f)!=(0|n));if(m){if(f=((0|n)<0)<<31>>31,p=0|zt(0|y,0,52),g=0|S(),y>>>0>15){if(!(0==(0|E)&0==(0|A))){A=4,T=84;break t}for(A=0;;){if((0|(A=A+1|0))>=(0|n)){o=0,A=d;break n}if(!(0==(0|i[(C=w+(A<<3)|0)>>2])&0==(0|i[C+4>>2]))){A=4,T=84;break t}}}for(h=0,o=0,u=E;;){do{if(!(0==(0|u)&0==(0|A))){if(c=0|Vt(0|u,0|A,52),S(),(0|(c&=15))<(0|y)){A=12,T=84;break t}do{if((0|c)==(0|y))r=u,c=A;else{if(r=u|p,e=-15728641&A|g,c>>>0<v>>>0){c=e;break}a=y;do{C=0|zt(7,0,3*(14-a|0)|0),a=a+1|0,r|=C,e=0|S()|e}while(a>>>0<c>>>0);c=e}}while(0);for(a=0|Ut(0|r,0|c,0|n,0|f),S(),e=0;;){if((0|e)>(0|n)){T=77;break t}if((-117440513&(l=0|i[(C=b+(a<<3)|0)+4>>2])|0)==(0|c)&&(0|i[C>>2])==(0|r)){T=79;break}if((0|i[(C=b+((a=(a+1|0)%(0|n)|0)<<3)|0)>>2])==(0|r)&&(0|i[C+4>>2])==(0|c))break;e=e+1|0}if(79==(0|T)&&(T=0,!0&100663296==(117440512&l|0)))break;i[(C=t+(o<<3)|0)>>2]=u,i[C+4>>2]=A,o=o+1|0}}while(0);if((0|(A=h+1|0))>=(0|n)){A=d;break n}h=A,u=0|i[(C=w+(A<<3)|0)>>2],A=0|i[C+4>>2]}}else o=0,A=d}else o=0,A=0}while(0);if(Xt(0|b,0,0|s),Qt(0|w,0|_,A<<3|0),Mt(_),!A)break e;t=t+(o<<3)|0,n=A}if(17==(0|T))!0&0==(117440512&A|0)?(A=4,T=28):T=22;else if(32==(0|T))R(23313,22674,362,22684);else{if(42==(0|T))return Mt(w),Mt(b),0|(C=10);if(49==(0|T))return Mt(w),Mt(b),0|(C=13);if(77==(0|T))R(23313,22674,462,22684);else{if(84==(0|T))return Mt(_),Mt(w),Mt(b),0|(C=A);if(85==(0|T)){Qt(0|t,0|w,n<<3|0);break}}}if(22==(0|T))return Mt(w),Mt(b),0|(C=5);if(28==(0|T))return Mt(w),Mt(b),0|(C=A)}}while(0);return Mt(w),Mt(b),0|(C=0)},_destroyLinkedMultiPolygon:At,_directedEdgeToBoundary:we,_directedEdgeToCells:function(e,t,n){e|=0;var r,s,A,o=0;return r=L,L=L+16|0,o=r,!0&268435456==(2013265920&(t|=0)|0)?(s=-2130706433&t|134217728,i[(A=n|=0)>>2]=e,i[A+4>>2]=s,i[o>>2]=0,t=0|Vt(0|e,0|t,56),S(),o=0|N(e,s,7&t,o,n+8|0),L=r,0|o):(L=r,0|(o=6))},_edgeLengthKm:function(e,t,n){n|=0;var r,A=0,o=0,a=0,c=0,u=0,f=0,p=0;if(r=L,L=L+176|0,0|(e=0|we(e|=0,t|=0,c=r)))return c=e,a=+s[n>>3],a*=6371.007180918475,s[n>>3]=a,L=r,0|c;if(s[n>>3]=0,(0|(e=0|i[c>>2]))<=1)return c=0,a=0,a*=6371.007180918475,s[n>>3]=a,L=r,0|c;t=e+-1|0,e=0,A=+s[c+8>>3],o=+s[c+16>>3],a=0;do{f=A,A=+s[c+8+((e=e+1|0)<<4)>>3],p=+d(.5*(A-f)),u=o,o=+s[c+8+(e<<4)+8>>3],u=p*p+(u=+d(.5*(o-u)))*(+h(+f)*+h(+A)*u),a+=2*+m(+ +l(+u),+ +l(+(1-u)))}while((0|e)!=(0|t));return s[n>>3]=a,c=0,p=a,p*=6371.007180918475,s[n>>3]=p,L=r,0|c},_edgeLengthM:function(e,t,n){n|=0;var r,A=0,o=0,a=0,c=0,u=0,f=0,p=0;if(r=L,L=L+176|0,0|(e=0|we(e|=0,t|=0,c=r)))return c=e,a=+s[n>>3],a*=6371.007180918475,a*=1e3,s[n>>3]=a,L=r,0|c;if(s[n>>3]=0,(0|(e=0|i[c>>2]))<=1)return c=0,a=0,a*=6371.007180918475,a*=1e3,s[n>>3]=a,L=r,0|c;t=e+-1|0,e=0,A=+s[c+8>>3],o=+s[c+16>>3],a=0;do{f=A,A=+s[c+8+((e=e+1|0)<<4)>>3],p=+d(.5*(A-f)),u=o,o=+s[c+8+(e<<4)+8>>3],u=p*p+(u=+d(.5*(o-u)))*(+h(+f)*+h(+A)*u),a+=2*+m(+ +l(+u),+ +l(+(1-u)))}while((0|e)!=(0|t));return s[n>>3]=a,c=0,p=a,p*=6371.007180918475,p*=1e3,s[n>>3]=p,L=r,0|c},_edgeLengthRads:function(e,t,n){n|=0;var r,A=0,o=0,a=0,c=0,u=0,f=0,p=0;if(r=L,L=L+176|0,0|(e=0|we(e|=0,t|=0,c=r)))return L=r,0|(c=e);if(s[n>>3]=0,(0|(e=0|i[c>>2]))<=1)return L=r,0|(c=0);t=e+-1|0,e=0,A=+s[c+8>>3],o=+s[c+16>>3],a=0;do{f=A,A=+s[c+8+((e=e+1|0)<<4)>>3],p=+d(.5*(A-f)),u=o,o=+s[c+8+(e<<4)+8>>3],u=p*p+(u=+d(.5*(o-u)))*(+h(+A)*+h(+f)*u),a+=2*+m(+ +l(+u),+ +l(+(1-u)))}while((0|e)<(0|t));return s[n>>3]=a,L=r,0|(c=0)},_emscripten_replace_memory:function(e){return r=new Int8Array(e),new Uint8Array(e),i=new Int32Array(e),new Float32Array(e),s=new Float64Array(e),n=e,!0},_free:Mt,_getBaseCellNumber:ke,_getDirectedEdgeDestination:function(e,t,n){e|=0,t|=0,n|=0;var r,s,A=0;return r=L,L=L+16|0,i[(A=r)>>2]=0,!0&268435456==(2013265920&t|0)?(s=0|Vt(0|e,0|t,56),S(),A=0|N(e,-2130706433&t|134217728,7&s,A,n),L=r,0|A):(L=r,0|(A=6))},_getDirectedEdgeOrigin:function(e,t,n){return e|=0,n|=0,!0&268435456==(2013265920&(t|=0)|0)?(i[n>>2]=e,i[n+4>>2]=-2130706433&t|134217728,0|(n=0)):0|(n=6)},_getHexagonAreaAvgKm2:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(s[t>>3]=+s[20528+(e<<3)>>3],0|(t=0))},_getHexagonAreaAvgM2:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(s[t>>3]=+s[20656+(e<<3)>>3],0|(t=0))},_getHexagonEdgeLengthAvgKm:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(s[t>>3]=+s[20784+(e<<3)>>3],0|(t=0))},_getHexagonEdgeLengthAvgM:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(s[t>>3]=+s[20912+(e<<3)>>3],0|(t=0))},_getIcosahedronFaces:function e(t,n,r){r|=0;var s,A=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0;s=L,L=L+128|0,h=s+112|0,a=s+96|0,d=s,o=0|Vt(0|(t|=0),0|(n|=0),52),S(),l=15&o,i[h>>2]=l,c=0|Vt(0|t,0|n,45),S(),c&=127;e:do{if(0|G(c)){if(0|l)for(A=1;;){if(!(0==((u=0|zt(7,0,3*(15-A|0)|0))&t|0)&0==((0|S())&n|0))){o=0;break e}if(!(A>>>0<l>>>0))break;A=A+1|0}if(!(1&o))return u=0|zt(l+1|0,0,52),d=0|S()|-15728641&n,d=0|e((u|t)&~(h=0|zt(7,0,3*(14-l|0)|0)),d&~(0|S()),r),L=s,0|d;o=1}else o=0}while(0);if(!(A=0|Qe(t,n,a))){o?(xe(a,h,d),u=5):(Le(a,h,d),u=6);e:do{if(0|G(c))if(l)for(A=1;;){if(!(0==((c=0|zt(7,0,3*(15-A|0)|0))&t|0)&0==((0|S())&n|0))){t=2;break e}if(!(A>>>0<l>>>0)){t=5;break}A=A+1|0}else t=5;else t=2}while(0);Xt(0|r,-1,t<<2|0);e:do{if(o)for(a=0;;){if(Me(c=d+(a<<4)|0,0|i[h>>2]),c=0|i[c>>2],-1==(0|(l=0|i[r>>2]))|(0|l)==(0|c))A=r;else{o=0;do{if((o=o+1|0)>>>0>=t>>>0){A=1;break e}l=0|i[(A=r+(o<<2)|0)>>2]}while(!(-1==(0|l)|(0|l)==(0|c)))}if(i[A>>2]=c,(a=a+1|0)>>>0>=u>>>0){A=0;break}}else for(a=0;;){if(Pe(c=d+(a<<4)|0,0|i[h>>2],0,1),c=0|i[c>>2],-1==(0|(l=0|i[r>>2]))|(0|l)==(0|c))A=r;else{o=0;do{if((o=o+1|0)>>>0>=t>>>0){A=1;break e}l=0|i[(A=r+(o<<2)|0)>>2]}while(!(-1==(0|l)|(0|l)==(0|c)))}if(i[A>>2]=c,(a=a+1|0)>>>0>=u>>>0){A=0;break}}}while(0)}return L=s,0|(d=A)},_getNumCells:tt,_getPentagons:Ye,_getRes0Cells:function(e){e|=0;var t=0,n=0,r=0;t=0;do{zt(0|t,0,45),r=134225919|S(),i[(n=e+(t<<3)|0)>>2]=-1,i[n+4>>2]=r,t=t+1|0}while(122!=(0|t));return 0},_getResolution:function(e,t){return t=0|Vt(0|(e|=0),0|(t|=0),52),S(),15&t|0},_greatCircleDistanceKm:et,_greatCircleDistanceM:function(e,t){e|=0;var n,r,i,A=0;return r=+s[(t|=0)>>3],n=+s[e>>3],A=(i=+d(.5*(r-n)))*i+(A=+d(.5*(+s[t+8>>3]-+s[e+8>>3])))*(+h(+r)*+h(+n)*A),2*+m(+ +l(+A),+ +l(+(1-A)))*6371.007180918475*1e3},_greatCircleDistanceRads:function(e,t){e|=0;var n,r,i,A=0;return r=+s[(t|=0)>>3],n=+s[e>>3],A=(i=+d(.5*(r-n)))*i+(A=+d(.5*(+s[t+8>>3]-+s[e+8>>3])))*(+h(+r)*+h(+n)*A),2*+m(+ +l(+A),+ +l(+(1-A)))},_gridDisk:k,_gridDiskDistances:O,_gridDistance:function(e,t,n,r,s){n|=0,r|=0,s|=0;var A,o,a=0,c=0;return o=L,L=L+32|0,c=o,0|(A=0|ct(e|=0,t|=0,e,t,a=o+12|0))?(L=o,0|(c=A)):0|(e=0|ct(e,t,n,r,c))?(L=o,0|(c=e)):(a=0|me(a,c),i[(c=s)>>2]=a,i[c+4>>2]=((0|a)<0)<<31>>31,L=o,0|(c=0))},_gridPathCells:function(e,t,n,r,s){n|=0,r|=0,s|=0;var A,o=0,a=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0,b=0,w=0,T=0,C=0,x=0;if(A=L,L=L+48|0,l=A+12|0,C=A,!(o=0|ct(e|=0,t|=0,e,t,a=A+24|0))&&!(o=0|ct(e,t,n,r,l))){T=((0|(w=0|me(a,l)))<0)<<31>>31,i[a>>2]=0,i[a+4>>2]=0,i[a+8>>2]=0,i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,0|ct(e,t,e,t,a)&&R(23313,23090,691,23299),0|ct(e,t,n,r,l)&&R(23313,23090,696,23299),ye(a),ye(l),w?(_=+(0|w),b=a,r=f=0|i[a>>2],o=p=0|i[(v=a+4|0)>>2],n=g=0|i[(y=a+8|0)>>2],m=+((0|i[l>>2])-f|0)/_,E=+((0|i[l+4>>2])-p|0)/_,_=+((0|i[l+8>>2])-g|0)/_):(v=o=a+4|0,y=n=a+8|0,b=a,r=0|i[a>>2],o=0|i[o>>2],n=0|i[n>>2],m=0,E=0,_=0),i[C>>2]=r,i[(g=C+4|0)>>2]=o,i[(p=C+8|0)>>2]=n;e:do{if((0|w)<0)o=0;else for(d=0,f=0,o=r;;){x=m*(h=+(f>>>0)+4294967296*+(0|d))+ +(0|o),u=E*h+ +(0|i[v>>2]),h=_*h+ +(0|i[y>>2]),n=~~+Ht(+x),a=~~+Ht(+u),o=~~+Ht(+h),x=+c(+(+(0|n)-x)),u=+c(+(+(0|a)-u)),h=+c(+(+(0|o)-h));do{if(!(x>u&x>h)){if(l=0-n|0,u>h){r=l-o|0;break}r=a,o=l-a|0;break}n=0-(a+o)|0,r=a}while(0);if(i[C>>2]=n,i[g>>2]=r,i[p>>2]=o,be(C),0|(o=0|lt(e,t,C,s+(f<<3)|0)))break e;if(!((0|d)<(0|T)|(0|d)==(0|T)&f>>>0<w>>>0)){o=0;break e}o=0|Lt(0|f,0|d,1,0),d=l=0|S(),f=o,o=0|i[b>>2]}}while(0);return L=A,0|(C=o)}return L=A,0|(C=o)},_gridPathCellsSize:function(e,t,n,r,s){n|=0,r|=0,s|=0;var A,o=0,a=0,c=0;return A=L,L=L+32|0,c=A,(o=0|ct(e|=0,t|=0,e,t,a=A+12|0))||(o=0|ct(e,t,n,r,c))?(L=A,0|(c=o)):(r=0|Lt(0|(r=0|me(a,c)),((0|r)<0)<<31>>31|0,1,0),a=0|S(),i[(c=s)>>2]=r,i[c+4>>2]=a,L=A,0|(c=0))},_gridRingUnsafe:function(e,t,n,r){e|=0,t|=0,n|=0,r|=0;var s,A,o=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0;if(A=L,L=L+16|0,p=A+8|0,i[(f=s=A)>>2]=e,i[f+4>>2]=t,!n)return i[(p=r)>>2]=e,i[p+4>>2]=t,L=A,0|(p=0);i[p>>2]=0;e:do{if(0|Ne(e,t))e=9;else{if(a=(0|n)>0){o=0,f=e;do{if(0|(e=0|N(f,t,4,p,s)))break e;if(o=o+1|0,0|Ne(f=0|i[(t=s)>>2],t=0|i[t+4>>2])){e=9;break e}}while((0|o)<(0|n));if(i[(d=r)>>2]=f,i[d+4>>2]=t,d=n+-1|0,a){h=0,e=1;do{if(o=22384+(h<<2)|0,5==(0|h))for(c=0|i[o>>2],a=0,o=e;;){if(0|(e=0|N(0|i[(e=s)>>2],0|i[e+4>>2],c,p,s)))break e;if((0|a)!=(0|d)){if(l=0|i[(u=s)>>2],u=0|i[u+4>>2],i[(e=r+(o<<3)|0)>>2]=l,i[e+4>>2]=u,0|Ne(l,u)){e=9;break e}e=o+1|0}else e=o;if((0|(a=a+1|0))>=(0|n))break;o=e}else for(c=s,u=0|i[o>>2],l=0,o=e,a=0|i[c>>2],c=0|i[c+4>>2];;){if(0|(e=0|N(a,c,u,p,s)))break e;if(a=0|i[(c=s)>>2],c=0|i[c+4>>2],i[(e=r+(o<<3)|0)>>2]=a,i[e+4>>2]=c,e=o+1|0,0|Ne(a,c)){e=9;break e}if((0|(l=l+1|0))>=(0|n))break;o=e}h=h+1|0}while(h>>>0<6);c=f,o=0|i[(e=s)>>2],a=t,e=0|i[e+4>>2]}else c=f,o=f,a=t,e=t}else i[(c=r)>>2]=e,i[c+4>>2]=t,c=e,o=e,a=t,e=t;e=(0|c)==(0|o)&(0|a)==(0|e)?0:9}}while(0);return L=A,0|(p=e)},_i64Add:Lt,_i64Subtract:kt,_isPentagon:Ne,_isResClassIII:function(e,t){return t=0|Vt(0|(e|=0),0|(t|=0),52),S(),1&t|0},_isValidCell:Oe,_isValidDirectedEdge:function(e,t){var n=0;switch(n=0|Vt(0|(e|=0),0|(t|=0),56),S(),7&n){case 0:case 7:return 0|(n=0)}return n=-2130706433&t|134217728,!0&268435456==(2013265920&t|0)?!0&16777216==(117440512&t|0)&0!=(0|Ne(e,n))?0|(n=0):0|(n=0|Oe(e,n)):0|(n=0)},_isValidVertex:function(e,t){e|=0;var n,r,s=0,A=0;return r=L,L=L+16|0,n=r,!0&536870912==(2013265920&(t|=0)|0)&&0|Oe(e,s=-2130706433&t|134217728)?(A=0|Vt(0|e,0|t,56),S(),s=(A=0==(0|vt(e,s,7&A,n)))&((0|i[(s=n)>>2])==(0|e)?(0|i[s+4>>2])==(0|t):0)&1,L=r,0|s):(L=r,0|(s=0))},_latLngToCell:We,_llvm_maxnum_f64:jt,_llvm_minnum_f64:Wt,_llvm_round_f64:Ht,_localIjToCell:function(e,t,n,r,i){var s,A;return e|=0,t|=0,n|=0,i|=0,A=L,L=L+16|0,s=A,(r|=0)?n=15:(n=0|ve(n,s))||(n=0|lt(e,t,s,i)),L=A,0|n},_malloc:Pt,_maxFaceCount:function(e,t,n){n|=0;var r=0,s=0;if(s=0|Vt(0|(e|=0),0|(t|=0),45),S(),!(0|G(127&s)))return s=2,i[n>>2]=s,0;if(s=0|Vt(0|e,0|t,52),S(),!(s&=15))return s=5,i[n>>2]=s,0;for(r=1;;){if(!(0==((0|zt(7,0,3*(15-r|0)|0))&e|0)&0==((0|S())&t|0))){r=2,e=6;break}if(!(r>>>0<s>>>0)){r=5,e=6;break}r=r+1|0}return 6==(0|e)?(i[n>>2]=r,0):0},_maxGridDiskSize:function(e,t){t|=0;var n=0,r=0,s=0;return(0|(e|=0))<0?0|(t=2):(0|e)>13780509?0|(t=0|tt(15,t)):(s=0|Nt(0|e,0|(n=((0|e)<0)<<31>>31),3,0),r=0|S(),n=0|Lt(0|e,0|n,1,0),n=0|Lt(0|(n=0|Nt(0|s,0|r,0|n,0|S())),0|S(),1,0),e=0|S(),i[t>>2]=n,i[t+4>>2]=e,0|(t=0))},_maxPolygonToCellsSize:function(e,t,n,r){t|=0,r|=0;var s,A=0,o=0,a=0,c=0,l=0;if(s=L,L=L+48|0,A=s+16|0,o=s+8|0,a=s,0|(n|=0))return L=s,0|(a=15);if(c=0|i[(l=e|=0)+4>>2],i[(n=o)>>2]=i[l>>2],i[n+4>>2]=c,dt(o,A),!(t=0|Y(A,t,a))){if(n=0|i[o>>2],(0|(o=0|i[e+8>>2]))>0){A=0|i[e+12>>2],t=0;do{n=(0|i[A+(t<<3)>>2])+n|0,t=t+1|0}while((0|t)<(0|o))}A=0|i[(t=a)>>2],(0|(t=0|i[t+4>>2]))<(0|(o=((0|n)<0)<<31>>31))|(0|t)==(0|o)&A>>>0<n>>>0?(i[(t=a)>>2]=n,i[t+4>>2]=o,t=o):n=A,c=0|Lt(0|n,0|t,12,0),l=0|S(),i[(t=a)>>2]=c,i[t+4>>2]=l,i[(t=r)>>2]=c,i[t+4>>2]=l,t=0}return L=s,0|(l=t)},_memcpy:Qt,_memset:Xt,_originToDirectedEdges:function(e,t,n){n|=0;var r,s=0;return r=0==(0|Ne(e|=0,t|=0)),t&=-2130706433,i[(s=n)>>2]=r?e:0,i[s+4>>2]=r?285212672|t:0,i[(s=n+8|0)>>2]=e,i[s+4>>2]=301989888|t,i[(s=n+16|0)>>2]=e,i[s+4>>2]=318767104|t,i[(s=n+24|0)>>2]=e,i[s+4>>2]=335544320|t,i[(s=n+32|0)>>2]=e,i[s+4>>2]=352321536|t,i[(n=n+40|0)>>2]=e,i[n+4>>2]=369098752|t,0},_pentagonCount:function(){return 12},_polygonToCells:function(e,t,n,r){t|=0,r|=0;var s,A,o,a,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,_=0,m=0,E=0,v=0,y=0,b=0,w=0,T=0,R=0,C=0,x=0,P=0,M=0,I=0,k=0,O=0,N=0,F=0,G=0;if(a=L,L=L+112|0,s=a+80|0,d=a+72|0,A=a,o=a+56|0,0|(n|=0))return L=a,0|(G=15);if(!(G=0|Pt(32+(i[(f=(e|=0)+8|0)>>2]<<5)|0)))return L=a,0|(G=13);if(ft(e,G),F=0|i[(N=e)+4>>2],i[(n=d)>>2]=i[N>>2],i[n+4>>2]=F,dt(d,s),n=0|Y(s,t,A))N=0,F=0;else{if(n=0|i[d>>2],(0|(l=0|i[f>>2]))>0){u=0|i[e+12>>2],c=0;do{n=(0|i[u+(c<<3)>>2])+n|0,c=c+1|0}while((0|c)!=(0|l));c=n}else c=n;l=0|i[(n=A)>>2],(0|(n=0|i[n+4>>2]))<(0|(u=((0|c)<0)<<31>>31))|(0|n)==(0|u)&l>>>0<c>>>0?(i[(n=A)>>2]=c,i[n+4>>2]=u,n=u):c=l,N=0|Lt(0|c,0|n,12,0),F=0|S(),i[(n=A)>>2]=N,i[n+4>>2]=F,n=0}if(0|n)return Mt(G),L=a,0|(G=n);if(!(c=0|It(N,8)))return Mt(G),L=a,0|(G=13);if(!(h=0|It(N,8)))return Mt(G),Mt(c),L=a,0|(G=13);i[(k=s)>>2]=0,i[k+4>>2]=0,O=0|i[(k=e)+4>>2],i[(n=d)>>2]=i[k>>2],i[n+4>>2]=O,n=0|U(d,N,F,t,s,c,h);e:do{if(n)Mt(c),Mt(h),Mt(G);else{t:do{if((0|i[f>>2])>0){for(u=e+12|0,l=0;n=0|U((0|i[u>>2])+(l<<3)|0,N,F,t,s,c,h),l=l+1|0,!(0|n);)if((0|l)>=(0|i[f>>2]))break t;Mt(c),Mt(h),Mt(G);break e}}while(0);(0|F)>0|0==(0|F)&N>>>0>0&&Xt(0|h,0,N<<3|0),k=0|i[(O=s)+4>>2];t:do{if((0|k)>0|0==(0|k)&(0|i[O>>2])>>>0>0){P=c,M=h,I=c,k=h,O=c,n=c,R=c,C=h,x=h,c=h;n:for(;;){for(y=0,b=0,w=0,T=0,l=0,u=0;;){d=(h=A)+56|0;do{i[h>>2]=0,h=h+4|0}while((0|h)<(0|d));if(0|B(f=0|i[(t=P+(y<<3)|0)>>2],t=0|i[t+4>>2],1,A,0)){d=(h=A)+56|0;do{i[h>>2]=0,h=h+4|0}while((0|h)<(0|d));0|(h=0|It(7,4))&&(D(f,t,1,A,h,7,0,0),Mt(h))}for(v=0;;){m=0|i[(E=A+(v<<3)|0)>>2],E=0|i[E+4>>2];r:do{if(0==(0|m)&0==(0|E))h=l,d=u;else{if(p=0|Ut(0|m,0|E,0|N,0|F),f=0|S(),!(0==(0|(d=0|i[(t=h=r+(p<<3)|0)>>2]))&0==(0|(t=0|i[t+4>>2])))){g=0,_=0;do{if((0|g)>(0|F)|(0|g)==(0|F)&_>>>0>N>>>0)break n;if((0|d)==(0|m)&(0|t)==(0|E)){h=l,d=u;break r}p=0|Ft(0|(h=0|Lt(0|p,0|f,1,0)),0|S(),0|N,0|F),f=0|S(),_=0|Lt(0|_,0|g,1,0),g=0|S(),d=0|i[(t=h=r+(p<<3)|0)>>2],t=0|i[t+4>>2]}while(!(0==(0|d)&0==(0|t)))}0==(0|m)&0==(0|E)?(h=l,d=u):(Xe(m,E,o),0|pt(e,G,o)&&(_=0|Lt(0|l,0|u,1,0),u=0|S(),i[(g=h)>>2]=m,i[g+4>>2]=E,i[(l=M+(l<<3)|0)>>2]=m,i[l+4>>2]=E,l=_),h=l,d=u)}}while(0);if((v=v+1|0)>>>0>=7)break;l=h,u=d}if(y=0|Lt(0|y,0|b,1,0),b=0|S(),w=0|Lt(0|w,0|T,1,0),T=0|S(),l=0|i[(u=s)>>2],!((0|T)<(0|(u=0|i[u+4>>2]))|(0|T)==(0|u)&w>>>0<l>>>0))break;l=h,u=d}if((0|u)>0|0==(0|u)&l>>>0>0){l=0,u=0;do{i[(T=P+(l<<3)|0)>>2]=0,i[T+4>>2]=0,l=0|Lt(0|l,0|u,1,0),u=0|S(),w=0|i[(T=s)+4>>2]}while((0|u)<(0|w)|((0|u)==(0|w)?l>>>0<(0|i[T>>2])>>>0:0))}if(i[(T=s)>>2]=h,i[T+4>>2]=d,!((0|d)>0|0==(0|d)&h>>>0>0))break t;v=c,y=x,b=O,w=C,T=M,c=R,x=n,C=I,R=v,n=y,O=k,k=b,I=w,M=P,P=T}Mt(I),Mt(k),Mt(G),n=1;break e}n=h}while(0);Mt(G),Mt(c),Mt(n),n=0}}while(0);return L=a,0|(G=n)},_readInt64AsDoubleFromPointer:function(e){return+(+((0|i[(e|=0)>>2])>>>0)+4294967296*+(0|i[e+4>>2]))},_res0CellCount:function(){return 122},_round:$t,_sbrk:Yt,_sizeOfCellBoundary:function(){return 168},_sizeOfCoordIJ:function(){return 8},_sizeOfGeoLoop:function(){return 8},_sizeOfGeoPolygon:function(){return 16},_sizeOfH3Index:function(){return 8},_sizeOfLatLng:function(){return 16},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompactCells:function(e,t,n,r,s,A,o){e|=0,r|=0,s|=0,A|=0;var a,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0;if(a=L,L=L+16|0,g=a,!((0|(n|=0))>0|0==(0|n)&(t|=0)>>>0>0))return L=a,0|(g=0);if((0|(o|=0))>=16)return L=a,0|(g=12);f=0,p=0,d=0,c=0;e:for(;;){if(h=0|Vt(0|(l=0|i[(u=e+(f<<3)|0)>>2]),0|(u=0|i[u+4>>2]),52),S(),(15&h|0)>(0|o)){c=12,l=11;break}if(Ke(g,l,u,o),0==(0|(u=0|i[(h=g)>>2]))&0==(0|(h=0|i[h+4>>2])))l=d;else{l=d;do{if(!((0|c)<(0|A)|(0|c)==(0|A)&l>>>0<s>>>0)){l=10;break e}i[(d=r+(l<<3)|0)>>2]=u,i[d+4>>2]=h,l=0|Lt(0|l,0|c,1,0),c=0|S(),Ze(g),u=0|i[(d=g)>>2],h=0|i[d+4>>2]}while(!(0==(0|u)&0==(0|h)))}if(f=0|Lt(0|f,0|p,1,0),!((0|(p=0|S()))<(0|n)|(0|p)==(0|n)&f>>>0<t>>>0)){c=0,l=11;break}d=l}return 10==(0|l)?(L=a,0|(g=14)):11==(0|l)?(L=a,0|c):0},_uncompactCellsSize:function(e,t,n,r,s){e|=0,t|=0,n|=0,r|=0,s|=0;var A,o,a=0,c=0,l=0,u=0,h=0,d=0;o=L,L=L+16|0,A=o;e:do{if((0|n)>0|0==(0|n)&t>>>0>0){for(h=0,c=0,a=0,d=0;;){if(!(0==(0|(l=0|i[(u=e+(h<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2]))||(u=0==(0|De(l,u,r,A)),c=0|Lt(0|i[(l=A)>>2],0|i[l+4>>2],0|c,0|a),a=0|S(),u))){a=12;break}if(h=0|Lt(0|h,0|d,1,0),!((0|(d=0|S()))<(0|n)|(0|d)==(0|n)&h>>>0<t>>>0))break e}return L=o,0|a}c=0,a=0}while(0);return i[s>>2]=c,i[s+4>>2]=a,L=o,0|(s=0)},_vertexToLatLng:function(e,t,n){n|=0;var r,s,A,o,a=0,c=0;return o=L,L=L+192|0,s=o,A=o+168|0,a=0|Vt(0|(e|=0),0|(t|=0),56),S(),a&=7,0|(r=0|Qe(e,c=-2130706433&t|134217728,A))?(L=o,0|(c=r)):(t=0|Vt(0|e,0|t,52),S(),t&=15,0|Ne(e,c)?Ce(A,t,a,1,s):Ie(A,t,a,1,s),c=s+8|0,i[n>>2]=i[c>>2],i[n+4>>2]=i[c+4>>2],i[n+8>>2]=i[c+8>>2],i[n+12>>2]=i[c+12>>2],L=o,0|(c=0))},establishStackSpace:function(e,t){L=e|=0},stackAlloc:function(e){var t;return t=L,L=(L=L+(e|=0)|0)+15&-16,0|t},stackRestore:function(e){L=e|=0},stackSave:function(){return 0|L}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:oe,b:function(e){c=e},c:function(){return c},d:function(e,t,n,r){oe("Assertion failed: "+f(e)+", at: "+[t?f(t):"unknown filename",n,r?f(r):"unknown function"])},e:function(e){return n.___errno_location&&(E[n.___errno_location()>>2]=e),e},f:H,g:function(e,t,n){_.set(_.subarray(t,t+n),e)},h:function(e){var t=H(),n=16777216,r=2130706432;if(e>r)return!1;for(var i=Math.max(t,16777216);i<e;)i=i<=536870912?b(2*i,n):Math.min(b((3*i+2147483648)/4,n),r);return!!Q(i)},i:function(e){oe("OOM")},j:z,k:j,l:Q,m:W,n:function(){var e=W();return n.extraStackTrace&&(e+="\n"+n.extraStackTrace()),j(e)},o:24144,p:24128},p),q=(n.___divdi3=Z.___divdi3,n.___muldi3=Z.___muldi3,n.___remdi3=Z.___remdi3,n.___uremdi3=Z.___uremdi3,n._areNeighborCells=Z._areNeighborCells,n._bitshift64Ashr=Z._bitshift64Ashr,n._bitshift64Lshr=Z._bitshift64Lshr,n._bitshift64Shl=Z._bitshift64Shl,n._calloc=Z._calloc,n._cellAreaKm2=Z._cellAreaKm2,n._cellAreaM2=Z._cellAreaM2,n._cellAreaRads2=Z._cellAreaRads2,n._cellToBoundary=Z._cellToBoundary,n._cellToCenterChild=Z._cellToCenterChild,n._cellToChildPos=Z._cellToChildPos,n._cellToChildren=Z._cellToChildren,n._cellToChildrenSize=Z._cellToChildrenSize,n._cellToLatLng=Z._cellToLatLng,n._cellToLocalIj=Z._cellToLocalIj,n._cellToParent=Z._cellToParent,n._cellToVertex=Z._cellToVertex,n._cellToVertexes=Z._cellToVertexes,n._cellsToDirectedEdge=Z._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=Z._cellsToLinkedMultiPolygon,n._childPosToCell=Z._childPosToCell,n._compactCells=Z._compactCells,n._destroyLinkedMultiPolygon=Z._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=Z._directedEdgeToBoundary,n._directedEdgeToCells=Z._directedEdgeToCells,n._edgeLengthKm=Z._edgeLengthKm,n._edgeLengthM=Z._edgeLengthM,n._edgeLengthRads=Z._edgeLengthRads,n._emscripten_replace_memory=Z._emscripten_replace_memory),J=(n._free=Z._free,n._getBaseCellNumber=Z._getBaseCellNumber,n._getDirectedEdgeDestination=Z._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=Z._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=Z._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=Z._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=Z._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=Z._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=Z._getIcosahedronFaces,n._getNumCells=Z._getNumCells,n._getPentagons=Z._getPentagons,n._getRes0Cells=Z._getRes0Cells,n._getResolution=Z._getResolution,n._greatCircleDistanceKm=Z._greatCircleDistanceKm,n._greatCircleDistanceM=Z._greatCircleDistanceM,n._greatCircleDistanceRads=Z._greatCircleDistanceRads,n._gridDisk=Z._gridDisk,n._gridDiskDistances=Z._gridDiskDistances,n._gridDistance=Z._gridDistance,n._gridPathCells=Z._gridPathCells,n._gridPathCellsSize=Z._gridPathCellsSize,n._gridRingUnsafe=Z._gridRingUnsafe,n._i64Add=Z._i64Add,n._i64Subtract=Z._i64Subtract,n._isPentagon=Z._isPentagon,n._isResClassIII=Z._isResClassIII,n._isValidCell=Z._isValidCell,n._isValidDirectedEdge=Z._isValidDirectedEdge,n._isValidVertex=Z._isValidVertex,n._latLngToCell=Z._latLngToCell,n._llvm_maxnum_f64=Z._llvm_maxnum_f64,n._llvm_minnum_f64=Z._llvm_minnum_f64,n._llvm_round_f64=Z._llvm_round_f64,n._localIjToCell=Z._localIjToCell,n._malloc=Z._malloc,n._maxFaceCount=Z._maxFaceCount,n._maxGridDiskSize=Z._maxGridDiskSize,n._maxPolygonToCellsSize=Z._maxPolygonToCellsSize,n._memcpy=Z._memcpy,n._memset=Z._memset,n._originToDirectedEdges=Z._originToDirectedEdges,n._pentagonCount=Z._pentagonCount,n._polygonToCells=Z._polygonToCells,n._readInt64AsDoubleFromPointer=Z._readInt64AsDoubleFromPointer,n._res0CellCount=Z._res0CellCount,n._round=Z._round,n._sbrk=Z._sbrk,n._sizeOfCellBoundary=Z._sizeOfCellBoundary,n._sizeOfCoordIJ=Z._sizeOfCoordIJ,n._sizeOfGeoLoop=Z._sizeOfGeoLoop,n._sizeOfGeoPolygon=Z._sizeOfGeoPolygon,n._sizeOfH3Index=Z._sizeOfH3Index,n._sizeOfLatLng=Z._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=Z._sizeOfLinkedGeoPolygon,n._uncompactCells=Z._uncompactCells,n._uncompactCellsSize=Z._uncompactCellsSize,n._vertexToLatLng=Z._vertexToLatLng,n.establishStackSpace=Z.establishStackSpace,n.stackAlloc=Z.stackAlloc),ee=n.stackRestore=Z.stackRestore,te=n.stackSave=Z.stackSave;if(n.asm=Z,n.cwrap=function(e,t,n,r){var i=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!r?u(e):function(){return h(e,t,n,arguments)}},n.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":g[e>>0]=t;break;case"i16":m[e>>1]=t;break;case"i32":E[e>>2]=t;break;case"i64":F=[t>>>0,(N=t,+M(N)>=1?N>0?(0|k(+L(N/4294967296),4294967295))>>>0:~~+I((N-+(~~N>>>0))/4294967296)>>>0:0)],E[e>>2]=F[0],E[e+4>>2]=F[1];break;case"float":v[e>>2]=t;break;case"double":y[e>>3]=t;break;default:oe("invalid type for setValue: "+n)}},n.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return g[e>>0];case"i16":return m[e>>1];case"i32":case"i64":return E[e>>2];case"float":return v[e>>2];case"double":return y[e>>3];default:oe("invalid type for getValue: "+t)}return null},U){V(U)||(Y=U,U=n.locateFile?n.locateFile(Y,A):A+Y),O++,n.monitorRunDependencies&&n.monitorRunDependencies(O);var ne=function(e){e.byteLength&&(e=new Uint8Array(e)),_.set(e,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(e){if(O--,n.monitorRunDependencies&&n.monitorRunDependencies(O),0==O&&(null!==B&&(clearInterval(B),B=null),D)){var t=D;D=null,t()}}()},re=function(){i(U,ne,(function(){throw"could not load memory initializer "+U}))},ie=$(U);if(ie)ne(ie.buffer);else if(n.memoryInitializerRequest){var se=function(){var e=n.memoryInitializerRequest,t=e.response;if(200!==e.status&&0!==e.status){var r=$(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+U),void re();t=r.buffer}ne(t)};n.memoryInitializerRequest.response?setTimeout(se,0):n.memoryInitializerRequest.addEventListener("load",se)}else re()}function Ae(e){function t(){K||(K=!0,l||(S(C),S(x),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),P.unshift(e);var e;S(P)}()))}e=e||s,O>0||(!function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),R.unshift(e);var e;S(R)}(),O>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}function oe(e){throw n.onAbort&&n.onAbort(e),o(e+=""),a(e),l=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(D=function e(){K||Ae(),K||(D=e)},n.run=Ae,n.abort=oe,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Ae(),e}("object"==typeof r?r:{}),i="number",s={0:"Success",1:"The operation failed but a more specific error is not available",2:"Argument was outside of acceptable range",3:"Latitude or longitude arguments were outside of acceptable range",4:"Resolution argument was outside of acceptable range",5:"Cell argument was not valid",6:"Directed edge argument was not valid",7:"Undirected edge argument was not valid",8:"Vertex argument was not valid",9:"Pentagon distortion was encountered",10:"Duplicate input",11:"Cell arguments were not neighbors",12:"Cell arguments had incompatible resolutions",13:"Memory allocation failed",14:"Bounds of provided memory were insufficient",15:"Mode or flags argument was not valid"},A=1e3,o={1e3:"Unknown unit",1001:"Array length out of bounds",1002:"Got unexpected null value for H3 index"};function a(e,t,n){var r=n&&"value"in n,i=new Error((e[t]||"Unknown error")+" (code: "+t+(r?", value: "+n.value:"")+")");return i.code=t,i}function c(e,t){var n=2===arguments.length?{value:t}:{};return a(s,e,n)}function l(e,t){var n=2===arguments.length?{value:t}:{};return a(o,e,n)}function u(e){if(0!==e)throw c(e)}var h={};[["sizeOfH3Index",i],["sizeOfLatLng",i],["sizeOfCellBoundary",i],["sizeOfGeoLoop",i],["sizeOfGeoPolygon",i],["sizeOfLinkedGeoPolygon",i],["sizeOfCoordIJ",i],["readInt64AsDoubleFromPointer",i],["isValidCell",i,[i,i]],["latLngToCell",i,[i,i,i,i]],["cellToLatLng",i,[i,i,i]],["cellToBoundary",i,[i,i,i]],["maxGridDiskSize",i,[i,i]],["gridDisk",i,[i,i,i,i]],["gridDiskDistances",i,[i,i,i,i,i]],["gridRingUnsafe",i,[i,i,i,i]],["maxPolygonToCellsSize",i,[i,i,i,i]],["polygonToCells",i,[i,i,i,i]],["cellsToLinkedMultiPolygon",i,[i,i,i]],["destroyLinkedMultiPolygon",null,[i]],["compactCells",i,[i,i,i,i]],["uncompactCells",i,[i,i,i,i,i,i]],["uncompactCellsSize",i,[i,i,i,i,i]],["isPentagon",i,[i,i]],["isResClassIII",i,[i,i]],["getBaseCellNumber",i,[i,i]],["getResolution",i,[i,i]],["maxFaceCount",i,[i,i,i]],["getIcosahedronFaces",i,[i,i,i]],["cellToParent",i,[i,i,i,i]],["cellToChildren",i,[i,i,i,i]],["cellToCenterChild",i,[i,i,i,i]],["cellToChildrenSize",i,[i,i,i,i]],["cellToChildPos",i,[i,i,i,i]],["childPosToCell",i,[i,i,i,i,i,i]],["areNeighborCells",i,[i,i,i,i,i]],["cellsToDirectedEdge",i,[i,i,i,i,i]],["getDirectedEdgeOrigin",i,[i,i,i]],["getDirectedEdgeDestination",i,[i,i,i]],["isValidDirectedEdge",i,[i,i]],["directedEdgeToCells",i,[i,i,i]],["originToDirectedEdges",i,[i,i,i]],["directedEdgeToBoundary",i,[i,i,i]],["gridDistance",i,[i,i,i,i,i]],["gridPathCells",i,[i,i,i,i,i]],["gridPathCellsSize",i,[i,i,i,i,i]],["cellToLocalIj",i,[i,i,i,i,i,i]],["localIjToCell",i,[i,i,i,i,i]],["getHexagonAreaAvgM2",i,[i,i]],["getHexagonAreaAvgKm2",i,[i,i]],["getHexagonEdgeLengthAvgM",i,[i,i]],["getHexagonEdgeLengthAvgKm",i,[i,i]],["greatCircleDistanceM",i,[i,i]],["greatCircleDistanceKm",i,[i,i]],["greatCircleDistanceRads",i,[i,i]],["cellAreaM2",i,[i,i,i]],["cellAreaKm2",i,[i,i,i]],["cellAreaRads2",i,[i,i,i]],["edgeLengthM",i,[i,i,i]],["edgeLengthKm",i,[i,i,i]],["edgeLengthRads",i,[i,i,i]],["getNumCells",i,[i,i]],["getRes0Cells",i,[i]],["res0CellCount",i],["getPentagons",i,[i,i]],["pentagonCount",i],["cellToVertex",i,[i,i,i,i]],["cellToVertexes",i,[i,i,i]],["vertexToLatLng",i,[i,i,i]],["isValidVertex",i,[i,i]]].forEach((function(e){h[e[0]]=r.cwrap.apply(r,e)}));var d=16,f=h.sizeOfH3Index(),p=h.sizeOfLatLng(),g=h.sizeOfCellBoundary(),_=(h.sizeOfGeoPolygon(),h.sizeOfGeoLoop(),h.sizeOfLinkedGeoPolygon(),h.sizeOfCoordIJ(),{m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"});function m(e){if("number"!=typeof e||e<0||e>15||Math.floor(e)!==e)throw c(4,e);return e}function E(e){if(!e)throw l(1002);return e}var v=Math.pow(2,32)-1;function y(e){if(e>v)throw l(1001,e);return e}var b=/[^0-9a-fA-F]/;function w(e){if(Array.isArray(e)&&2===e.length&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if("string"!=typeof e||b.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),d);return[parseInt(e.substring(e.length-8),d),t]}function T(e){if(e>=0)return e.toString(d);var t=S(8,(e&=2147483647).toString(d));return t=(parseInt(t[0],d)+8).toString(d)+t.substring(1)}function S(e,t){for(var n=e-t.length,r="",i=0;i<n;i++)r+="0";return r+=t}Math.pow(2,32);function R(e,t){void 0===t&&(t=0);var n=r.getValue(e+f*t,"i32"),i=r.getValue(e+f*t+4,"i32");return i?function(e,t){return T(t)+S(8,T(e))}(n,i):null}function C(e,t){return void 0===t&&(t=0),r.getValue(e+8*t,"double")}function x(e){return h.readInt64AsDoubleFromPointer(e)}function P(e,t,n){r.HEAPU32.set(w(e),t/4+2*n)}function M(e,t){for(var n=[],r=0;r<t;r++){var i=R(e,r);null!==i&&n.push(i)}return n}function I(e,t){for(var n=t.length,r=0;r<n;r++)P(t[r],e,r)}function L(e){return 180*r.getValue(e,"double")/Math.PI}function k(e){return[L(e),L(e+8)]}function O(e){return[L(e+8),L(e)]}function B(e,t,n){for(var i=r.getValue(e,"i32"),s=e+8,A=[],o=t?O:k,a=0;a<2*i;a+=2)A.push(o(s+8*a));return n&&A.push(A[0]),A}function D(e){var t=w(e),n=t[0],r=t[1];return Boolean(h.isValidCell(n,r))}function N(e){var t=w(e),n=t[0],r=t[1];return Boolean(h.isPentagon(n,r))}function F(e){var t=w(e),n=t[0],r=t[1];return h.getBaseCellNumber(n,r)}function U(e){var t=w(e),n=t[0],i=t[1],s=r._malloc(4);try{u(h.maxFaceCount(n,i,s));var A=r.getValue(s,"i32"),o=r._malloc(4*A);try{return u(h.getIcosahedronFaces(n,i,o)),function(e,t){for(var n=[],i=0;i<t;i++){var s=r.getValue(e+4*i,"i32");s>=0&&n.push(s)}return n}(o,A)}finally{r._free(o)}}finally{r._free(s)}}function G(e){var t=w(e),n=t[0],r=t[1];return h.isValidCell(n,r)?h.getResolution(n,r):-1}function V(e,t,n){var i=r._malloc(p);r.HEAPF64.set([e,t].map(ee),i/8);var s=r._malloc(f);try{return u(h.latLngToCell(i,n,s)),E(R(s))}finally{r._free(s),r._free(i)}}function z(e){var t=r._malloc(p),n=w(e),i=n[0],s=n[1];try{return u(h.cellToLatLng(i,s,t)),k(t)}finally{r._free(t)}}function j(e,t){var n=r._malloc(g),i=w(e),s=i[0],A=i[1];try{return u(h.cellToBoundary(s,A,n)),B(n,t,t)}finally{r._free(n)}}function W(e,t){var n=w(e),i=n[0],s=n[1],A=r._malloc(f);try{return u(h.cellToParent(i,s,t,A)),E(R(A))}finally{r._free(A)}}function H(e,t){if(!D(e))return[];var n=w(e),i=n[0],s=n[1],A=y(function(e,t){if(!D(e))throw c(5);var n=w(e),i=n[0],s=n[1],A=r._malloc(8);try{return u(h.cellToChildrenSize(i,s,t,A)),x(A)}finally{r._free(A)}}(e,t)),o=r._calloc(A,f);try{return u(h.cellToChildren(i,s,t,o)),M(o,A)}finally{r._free(o)}}function Q(e,t){var n=w(e),i=n[0],s=n[1],A=r._malloc(8);try{u(h.maxGridDiskSize(t,A));var o=y(x(A)),a=r._calloc(o,f);try{return u(h.gridDisk(i,s,t,a)),M(a,o)}finally{r._free(a)}}finally{r._free(A)}}function X(e,t){if(m(t),!e||!e.length)return[];var n=e.length,i=r._calloc(n,f);I(i,e);var s=r._malloc(8);try{u(h.uncompactCellsSize(i,n,0,t,s));var A=y(x(s)),o=r._calloc(A,f);try{return u(h.uncompactCells(i,n,0,o,A,0,t)),M(o,A)}finally{r._free(i),r._free(o)}}finally{r._free(s)}}function $(e){var t=w(e),n=t[0],i=t[1],s=r._calloc(6,f);try{return u(h.originToDirectedEdges(n,i,s)),M(s,6)}finally{r._free(s)}}function Y(e,t){var n=w(e),i=n[0],s=n[1],A=w(t),o=A[0],a=A[1],c=r._malloc(8);try{return u(h.gridDistance(i,s,o,a,c)),x(c)}finally{r._free(c)}}function K(e,t){var n=w(e),i=n[0],s=n[1],o=r._malloc(8);try{switch(t){case _.m2:u(h.cellAreaM2(i,s,o));break;case _.km2:u(h.cellAreaKm2(i,s,o));break;case _.rads2:u(h.cellAreaRads2(i,s,o));break;default:throw l(A,t)}return C(o)}finally{r._free(o)}}function Z(e,t){var n=w(e),i=n[0],s=n[1],o=r._malloc(8);try{switch(t){case _.m:u(h.edgeLengthM(i,s,o));break;case _.km:u(h.edgeLengthKm(i,s,o));break;case _.rads:u(h.edgeLengthRads(i,s,o));break;default:throw l(A,t)}return C(o)}finally{r._free(o)}}function q(e,t){m(e);var n=r._malloc(8);try{switch(t){case _.m:u(h.getHexagonEdgeLengthAvgM(e,n));break;case _.km:u(h.getHexagonEdgeLengthAvgKm(e,n));break;default:throw l(A,t)}return C(n)}finally{r._free(n)}}function J(){var e=h.res0CellCount(),t=r._malloc(f*e);try{return u(h.getRes0Cells(t)),M(t,e)}finally{r._free(t)}}function ee(e){return e*Math.PI/180}},7168:(e,t,n)=>{var r;!function(i,s,A,o){"use strict";var a,c=["","webkit","Moz","MS","ms","o"],l=s.createElement("div"),u=Math.round,h=Math.abs,d=Date.now;function f(e,t,n){return setTimeout(y(e,n),t)}function p(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==o)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function _(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=i.console&&(i.console.warn||i.console.log);return s&&s.call(i.console,r,n),e.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===o||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==o&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var m=_((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&e[r[i]]===o)&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),E=_((function(e,t){return m(e,t,!0)}),"merge","Use `assign`.");function v(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&a(r,n)}function y(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return"function"==typeof e?e.apply(t&&t[0]||o,t):e}function w(e,t){return e===o?t:e}function T(e,t,n){g(x(t),(function(t){e.addEventListener(t,n,!1)}))}function S(e,t,n){g(x(t),(function(t){e.removeEventListener(t,n,!1)}))}function R(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return e.indexOf(t)>-1}function x(e){return e.trim().split(/\s+/g)}function P(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function M(e){return Array.prototype.slice.call(e,0)}function I(e,t,n){for(var r=[],i=[],s=0;s<e.length;){var A=t?e[s][t]:e[s];P(i,A)<0&&r.push(e[s]),i[s]=A,s++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function L(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),s=0;s<c.length;){if((r=(n=c[s])?n+i:t)in e)return r;s++}return o}var k=1;function O(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var B="ontouchstart"in i,D=L(i,"PointerEvent")!==o,N=B&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",U="mouse",G=24,V=["x","y"],z=["clientX","clientY"];function j(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){b(e.options.enable,[e])&&n.handler(t)},this.init()}function W(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=1&t&&r-i==0,A=12&t&&r-i==0;n.isFirst=!!s,n.isFinal=!!A,s&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=H(t));i>1&&!n.firstMultiple?n.firstMultiple=H(t):1===i&&(n.firstMultiple=!1);var s=n.firstInput,A=n.firstMultiple,a=A?A.center:s.center,c=t.center=Q(r);t.timeStamp=d(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=K(a,c),t.distance=Y(a,c),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};1!==t.eventType&&4!==s.eventType||(i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=$(t.deltaX,t.deltaY);var l=X(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=h(l.x)>h(l.y)?l.x:l.y,t.scale=A?(u=A.pointers,f=r,Y(f[0],f[1],z)/Y(u[0],u[1],z)):1,t.rotation=A?function(e,t){return K(t[1],t[0],z)+K(e[1],e[0],z)}(A.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,s,A=e.lastInterval||t,a=t.timeStamp-A.timeStamp;if(8!=t.eventType&&(a>25||A.velocity===o)){var c=t.deltaX-A.deltaX,l=t.deltaY-A.deltaY,u=X(a,c,l);r=u.x,i=u.y,n=h(u.x)>h(u.y)?u.x:u.y,s=$(c,l),e.lastInterval=t}else n=A.velocity,r=A.velocityX,i=A.velocityY,s=A.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=s}(n,t);var u,f;var p=e.element;R(t.srcEvent.target,p)&&(p=t.srcEvent.target);t.target=p}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function H(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:u(e.pointers[n].clientX),clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:t,center:Q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Q(e){var t=e.length;if(1===t)return{x:u(e[0].clientX),y:u(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:u(n/t),y:u(r/t)}}function X(e,t,n){return{x:t/e||0,y:n/e||0}}function $(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function Y(e,t,n){n||(n=V);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function K(e,t,n){n||(n=V);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}j.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(O(this.element),this.evWin,this.domHandler)}};var Z={mousedown:1,mousemove:2,mouseup:4},q="mousedown",J="mousemove mouseup";function ee(){this.evEl=q,this.evWin=J,this.pressed=!1,j.apply(this,arguments)}v(ee,j,{handler:function(e){var t=Z[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:U,srcEvent:e}))}});var te={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ne={2:F,3:"pen",4:U,5:"kinect"},re="pointerdown",ie="pointermove pointerup pointercancel";function se(){this.evEl=re,this.evWin=ie,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(re="MSPointerDown",ie="MSPointerMove MSPointerUp MSPointerCancel"),v(se,j,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=te[r],s=ne[e.pointerType]||e.pointerType,A=s==F,o=P(t,e.pointerId,"pointerId");1&i&&(0===e.button||A)?o<0&&(t.push(e),o=t.length-1):12&i&&(n=!0),o<0||(t[o]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:s,srcEvent:e}),n&&t.splice(o,1))}});var Ae={touchstart:1,touchmove:2,touchend:4,touchcancel:8},oe="touchstart",ae="touchstart touchmove touchend touchcancel";function ce(){this.evTarget=oe,this.evWin=ae,this.started=!1,j.apply(this,arguments)}function le(e,t){var n=M(e.touches),r=M(e.changedTouches);return 12&t&&(n=I(n.concat(r),"identifier",!0)),[n,r]}v(ce,j,{handler:function(e){var t=Ae[e.type];if(1===t&&(this.started=!0),this.started){var n=le.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:e})}}});var ue={touchstart:1,touchmove:2,touchend:4,touchcancel:8},he="touchstart touchmove touchend touchcancel";function de(){this.evTarget=he,this.targetIds={},j.apply(this,arguments)}function fe(e,t){var n=M(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,s,A=M(e.changedTouches),o=[],a=this.target;if(s=n.filter((function(e){return R(e.target,a)})),1===t)for(i=0;i<s.length;)r[s[i].identifier]=!0,i++;for(i=0;i<A.length;)r[A[i].identifier]&&o.push(A[i]),12&t&&delete r[A[i].identifier],i++;return o.length?[I(s.concat(o),"identifier",!0),o]:void 0}v(de,j,{handler:function(e){var t=ue[e.type],n=fe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:e})}});function pe(){j.apply(this,arguments);var e=y(this.handler,this);this.touch=new de(this.manager,e),this.mouse=new ee(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ge(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,_e.call(this,t)):12&e&&_e.call(this,t)}function _e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function me(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],s=Math.abs(t-i.x),A=Math.abs(n-i.y);if(s<=25&&A<=25)return!0}return!1}v(pe,j,{handler:function(e,t,n){var r=n.pointerType==F,i=n.pointerType==U;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ge.call(this,t,n);else if(i&&me.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ee=L(l.style,"touchAction"),ve=Ee!==o,ye="compute",be="auto",we="manipulation",Te="none",Se="pan-x",Re="pan-y",Ce=function(){if(!ve)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function xe(e,t){this.manager=e,this.set(t)}xe.prototype={set:function(e){e==ye&&(e=this.compute()),ve&&this.manager.element.style&&Ce[e]&&(this.manager.element.style[Ee]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){b(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(C(e,Te))return Te;var t=C(e,Se),n=C(e,Re);if(t&&n)return Te;if(t||n)return t?Se:Re;if(C(e,we))return we;return be}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=C(r,Te)&&!Ce.none,s=C(r,Re)&&!Ce["pan-y"],A=C(r,Se)&&!Ce["pan-x"];if(i){var o=1===e.pointers.length,a=e.distance<2,c=e.deltaTime<250;if(o&&a&&c)return}if(!A||!s)return i||s&&6&n||A&&n&G?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Pe=32;function Me(e){this.options=a({},this.defaults,e||{}),this.id=k++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ie(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Le(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ke(e,t){var n=t.manager;return n?n.get(e):e}function Oe(){Me.apply(this,arguments)}function Be(){Oe.apply(this,arguments),this.pX=null,this.pY=null}function De(){Oe.apply(this,arguments)}function Ne(){Me.apply(this,arguments),this._timer=null,this._input=null}function Fe(){Oe.apply(this,arguments)}function Ue(){Oe.apply(this,arguments)}function Ge(){Me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ve(e,t){return(t=t||{}).recognizers=w(t.recognizers,Ve.defaults.preset),new ze(e,t)}Me.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(p(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ke(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return p(e,"dropRecognizeWith",this)||(e=ke(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(p(e,"requireFailure",this))return this;var t=this.requireFail;return-1===P(t,e=ke(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(p(e,"dropRequireFailure",this))return this;e=ke(e,this);var t=P(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+Ie(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+Ie(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Pe},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=Pe);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},v(Oe,Me,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:Pe}}),v(Be,Oe,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Re),e&G&&t.push(Se),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,A=e.deltaY;return i&t.direction||(6&t.direction?(i=0===s?1:s<0?2:4,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=0===A?1:A<0?8:16,n=A!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return Oe.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Le(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),v(De,Oe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),v(Ne,Me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[be]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Pe},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),v(Fe,Oe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Te]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),v(Ue,Oe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Be.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&G&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&h(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Le(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),v(Ge,Me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[we]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,A=!this.pCenter||Y(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,A&&s?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Pe},failTimeout:function(){return this._timer=f((function(){this.state=Pe}),this.options.interval,this),Pe},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ve.VERSION="2.0.7",Ve.defaults={domEvents:!1,touchAction:ye,enable:!0,inputTarget:null,inputClass:null,preset:[[Fe,{enable:!1}],[De,{enable:!1},["rotate"]],[Ue,{direction:6}],[Be,{direction:6},["swipe"]],[Ge],[Ge,{event:"doubletap",taps:2},["tap"]],[Ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ze(e,t){var n;this.options=a({},Ve.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(D?se:N?de:B?pe:ee))(n,W),this.touchAction=new xe(this,this.options.touchAction),je(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function je(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,(function(i,s){n=L(r.style,s),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}ze.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var s=0;s<r.length;)n=r[s],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),s++}},get:function(e){if(e instanceof Me)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(p(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(p(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=P(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==o&&t!==o){var n=this.handlers;return g(x(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==o){var n=this.handlers;return g(x(e),(function(e){t?n[e]&&n[e].splice(P(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=s.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&je(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Ve,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Pe,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:G,DIRECTION_ALL:30,Manager:ze,Input:j,TouchAction:xe,TouchInput:de,MouseInput:ee,PointerEventInput:se,TouchMouseInput:pe,SingleTouchInput:ce,Recognizer:Me,AttrRecognizer:Oe,Tap:Ge,Pan:Be,Swipe:Ue,Pinch:De,Rotate:Fe,Press:Ne,on:T,off:S,each:g,merge:E,extend:m,assign:a,inherit:v,bindFn:y,prefixed:L}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Ve,(r=function(){return Ve}.call(t,n,t,e))===o||(e.exports=r)}(window,document)},8929:(e,t,n)=>{"use strict";n.d(t,{T5:()=>I});var r=n(6540);const i=r.createContext(null);function s(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){if(!t.hasOwnProperty(i))return!1;if(!s(e[i],t[i]))return!1}return!0}return!1}function A(e,t){if(!e.getProjection)return;const n=e.getProjection();s(n,t.getProjection())||t.setProjection(n)}function o(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function a(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const t=e.center;e.center=new t.constructor(n.longitude,n.latitude),r=r||t!==e.center}if("zoom"in n){const t=e.zoom;e.zoom=n.zoom,r=r||t!==e.zoom}if("bearing"in n){const t=e.bearing;e.bearing=n.bearing,r=r||t!==e.bearing}if("pitch"in n){const t=e.pitch;e.pitch=n.pitch,r=r||t!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const c=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function l(e){if(!e)return null;if("string"==typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map((e=>{let n=null;"interactive"in e&&(n=Object.assign({},e),delete n.interactive);const r=t[e.ref];if(r){n=n||Object.assign({},e),delete n.ref;for(const e of c)e in r&&(n[e]=r[e])}return n||e}));return{...e,layers:n}}const u={version:8,sources:{},layers:[]},h={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},d={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},f={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},p=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],g=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class _{constructor(e,t,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=e=>{const t=this.props[f[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=e=>{"mousemove"!==e.type&&"mouseout"!==e.type||this._updateHover(e);const t=this.props[h[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=e=>{if(!this._internalUpdate){const t=this.props[d[e.type]];t&&t(e)}e.type in this._deferredEvents&&(this._deferredEvents[e.type]=!1)},this._MapClass=e,this.props=t,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const t=this.props;this.props=e;const n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);const r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){const n=_.savedMaps.pop();if(!n)return null;const r=n.map,i=r.getContainer();for(t.className=i.className;i.childNodes.length>0;)t.appendChild(i.childNodes[0]);r._container=t;const s=r._resizeObserver;s&&(s.disconnect(),s.observe(t)),n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:A}=e;return A&&(A.bounds?r.fitBounds(A.bounds,{...A.fitBoundsOptions,duration:0}):n._updateViewState(A,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",(()=>r.fire("load"))),r._update(),n}_initialize(e){const{props:t}=this,{mapStyle:n=u}=t,r={...t,...t.initialViewState,accessToken:t.mapboxAccessToken||m()||null,container:e,style:l(n)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),t.gl){const e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}const s=new this._MapClass(r);i.padding&&s.setPadding(i.padding),t.cursor&&(s.getCanvas().style.cursor=t.cursor),this._createShadowTransform(s);const o=s._render;s._render=e=>{this._inRender=!0,o.call(s,e),this._inRender=!1};const a=s._renderTaskQueue.run;s._renderTaskQueue.run=e=>{a.call(s._renderTaskQueue,e),this._onBeforeRepaint()},s.on("render",(()=>this._onAfterRepaint()));const c=s.fire;s.fire=this._fireEvent.bind(this,c),s.on("resize",(()=>{this._renderTransform.resize(s.transform.width,s.transform.height)})),s.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),A(s.transform,this._renderTransform)})),s.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const A in h)s.on(A,this._onPointerEvent);for(const A in d)s.on(A,this._onCameraEvent);for(const A in f)s.on(A,this._onEvent);this._map=s}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");null==e||e.remove(),_.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const t=function(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}_updateSize(e){const{viewState:t}=e;if(t){const e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e,t){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:i,pitch:s,bearing:A}=r,c=n.isMoving();c&&(r.cameraElevationReference="sea");const l=a(r,{...o(n.transform),...e});if(c&&(r.cameraElevationReference="ground"),l&&t){const e=this._deferredEvents;e.move=!0,e.zoom||(e.zoom=i!==r.zoom),e.rotate||(e.rotate=A!==r.bearing),e.pitch||(e.pitch=s!==r.pitch)}return c||a(n.transform,e),l}_updateSettings(e,t){const n=this._map;let r=!1;for(const i of p)if(i in e&&!s(e[i],t[i])){r=!0;const t=n[`set${i[0].toUpperCase()}${i.slice(1)}`];null==t||t.call(n,e[i])}return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){const{mapStyle:t=u,styleDiffing:n=!0}=e,r={diff:n};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(l(t),r),!0}return!1}_updateStyleComponents(e,t){const n=this._map;let r=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!s(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!s(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!s(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}_updateHandlers(e,t){var n,r;const i=this._map;let A=!1;for(const o of g){const a=null===(n=e[o])||void 0===n||n;s(a,null===(r=t[o])||void 0===r||r)||(A=!0,a?i[o].enable(a):i[o].disable())}return A}_queryRenderedFeatures(e){const t=this._map,n=t.transform,{interactiveLayerIds:r=[]}=this.props;try{return t.transform=this._renderTransform,t.queryRenderedFeatures(e,{layers:r.filter(t.getLayer.bind(t))})}catch(i){return[]}finally{t.transform=n}}_updateHover(e){var t;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=e.type,r=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,i=this._queryRenderedFeatures(e.point),s=i.length>0;!s&&r&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=i,s&&!r&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=n}else this._hoveredFeatures=null}_fireEvent(e,t,n){const r=this._map,i=r.transform,s="string"==typeof t?t:t.type;return"move"===s&&this._updateViewState(this.props,!1),s in d&&("object"==typeof t&&(t.viewState=o(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const t=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{A(this._renderTransform,t),e.transform=t}}}function m(){let e=null;if("undefined"!=typeof location){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||process.env.MapboxAccessToken}catch(t){}try{e=e||process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(n){}return e}_.savedMaps=[];const E=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function v(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const r=t.transform;t.transform=e.transform;const i=t.project(n);return t.transform=r,i},unproject:n=>{const r=t.transform;t.transform=e.transform;const i=t.unproject(n);return t.transform=r,i},queryTerrainElevation:(n,r)=>{const i=t.transform;t.transform=e.transform;const s=t.queryTerrainElevation(n,r);return t.transform=i,s},queryRenderedFeatures:(n,r)=>{const i=t.transform;t.transform=e.transform;const s=t.queryRenderedFeatures(n,r);return t.transform=i,s}};for(const r of function(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))"_"!==r[0]&&"function"==typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}(t))r in n||E.includes(r)||(n[r]=t[r].bind(t));return n}const y="undefined"!=typeof document?r.useLayoutEffect:r.useEffect,b=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const w=r.createContext(null);function T(e,t,n){const s=(0,r.useContext)(i),[A,o]=(0,r.useState)(null),a=(0,r.useRef)(),{current:c}=(0,r.useRef)({mapLib:null,map:null});(0,r.useEffect)((()=>{const t=e.mapLib;let r,i=!0;return Promise.resolve(t||n).then((t=>{if(!i)return;if(!t)throw new Error("Invalid mapLib");const n="Map"in t?t:t.default;if(!n.Map)throw new Error("Invalid mapLib");if(function(e,t){for(const r of b)r in t&&(e[r]=t[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(n,(e=>{e&&console.error(e)}),!0)}(n,e),n.supported&&!n.supported(e))throw new Error("Map is not supported by this browser");e.reuseMaps&&(r=_.reuse(e,a.current)),r||(r=new _(n.Map,e,a.current)),c.map=v(r),c.mapLib=n,o(r),null==s||s.onMapMount(c.map,e.id)})).catch((t=>{const{onError:n}=e;n?n({type:"error",target:null,originalEvent:null,error:t}):console.error(t)})),()=>{i=!1,r&&(null==s||s.onMapUnmount(e.id),e.reuseMaps?r.recycle():r.destroy())}}),[]),y((()=>{A&&A.setProps(e)})),(0,r.useImperativeHandle)(t,(()=>c.map),[A]);const l=(0,r.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...e.style})),[e.style]);return r.createElement("div",{id:e.id,ref:a,style:l},A&&r.createElement(w.Provider,{value:c},r.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))}var S=n(961);const R=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function C(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const e=t[r];Number.isFinite(e)&&!R.test(r)?n[r]=`${e}px`:n[r]=e}}(0,r.memo)((0,r.forwardRef)((function(e,t){const{map:n,mapLib:i}=(0,r.useContext)(w),s=(0,r.useRef)({props:e});s.current.props=e;const A=(0,r.useMemo)((()=>{let t=!1;r.Children.forEach(e.children,(e=>{e&&(t=!0)}));const n={...e,element:t?document.createElement("div"):null},o=new i.Marker(n);return o.setLngLat([e.longitude,e.latitude]),o.getElement().addEventListener("click",(e=>{var t,n;null===(n=(t=s.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:o,originalEvent:e})})),o.on("dragstart",(e=>{var t,n;const r=e;r.lngLat=A.getLngLat(),null===(n=(t=s.current.props).onDragStart)||void 0===n||n.call(t,r)})),o.on("drag",(e=>{var t,n;const r=e;r.lngLat=A.getLngLat(),null===(n=(t=s.current.props).onDrag)||void 0===n||n.call(t,r)})),o.on("dragend",(e=>{var t,n;const r=e;r.lngLat=A.getLngLat(),null===(n=(t=s.current.props).onDragEnd)||void 0===n||n.call(t,r)})),o}),[]);(0,r.useEffect)((()=>(A.addTo(n.getMap()),()=>{A.remove()})),[]);const{longitude:o,latitude:a,offset:c,style:l,draggable:u=!1,popup:h=null,rotation:d=0,rotationAlignment:f="auto",pitchAlignment:p="auto"}=e;return(0,r.useEffect)((()=>{C(A.getElement(),l)}),[l]),(0,r.useImperativeHandle)(t,(()=>A),[]),A.getLngLat().lng===o&&A.getLngLat().lat===a||A.setLngLat([o,a]),c&&!function(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===s}(A.getOffset(),c)&&A.setOffset(c),A.isDraggable()!==u&&A.setDraggable(u),A.getRotation()!==d&&A.setRotation(d),A.getRotationAlignment()!==f&&A.setRotationAlignment(f),A.getPitchAlignment()!==p&&A.setPitchAlignment(p),A.getPopup()!==h&&A.setPopup(h),(0,S.createPortal)(e.children,A.getElement())})));function x(e){return new Set(e?e.trim().split(/\s+/):[])}(0,r.memo)((0,r.forwardRef)((function(e,t){const{map:n,mapLib:i}=(0,r.useContext)(w),A=(0,r.useMemo)((()=>document.createElement("div")),[]),o=(0,r.useRef)({props:e});o.current.props=e;const a=(0,r.useMemo)((()=>{const t={...e},n=new i.Popup(t);return n.setLngLat([e.longitude,e.latitude]),n.once("open",(e=>{var t,n;null===(n=(t=o.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,r.useEffect)((()=>{const e=e=>{var t,n;null===(n=(t=o.current.props).onClose)||void 0===n||n.call(t,e)};return a.on("close",e),a.setDOMContent(A).addTo(n.getMap()),()=>{a.off("close",e),a.isOpen()&&a.remove()}}),[]),(0,r.useEffect)((()=>{C(a.getElement(),e.style)}),[e.style]),(0,r.useImperativeHandle)(t,(()=>a),[]),a.isOpen()&&(a.getLngLat().lng===e.longitude&&a.getLngLat().lat===e.latitude||a.setLngLat([e.longitude,e.latitude]),e.offset&&!s(a.options.offset,e.offset)&&a.setOffset(e.offset),a.options.anchor===e.anchor&&a.options.maxWidth===e.maxWidth||(a.options.anchor=e.anchor,a.setMaxWidth(e.maxWidth)),a.options.className!==e.className)){const t=x(a.options.className),n=x(e.className);for(const e of t)n.has(e)||a.removeClassName(e);for(const e of n)t.has(e)||a.addClassName(e);a.options.className=e.className}return(0,S.createPortal)(e.children,A)})));const P=function(e,t,n,i){const s=(0,r.useContext)(w),A=(0,r.useMemo)((()=>e(s)),[]);return(0,r.useEffect)((()=>{const e=i||n||t,r="function"==typeof t&&"function"==typeof n?t:null,o="function"==typeof n?n:"function"==typeof t?t:null,{map:a}=s;return a.hasControl(A)||(a.addControl(A,null==e?void 0:e.position),r&&r(s)),()=>{o&&o(s),a.hasControl(A)&&a.removeControl(A)}}),[]),A};(0,r.memo)((function(e){const t=P((({mapLib:t})=>new t.AttributionControl(e)),{position:e.position});return(0,r.useEffect)((()=>{C(t._container,e.style)}),[e.style]),null}));(0,r.memo)((function(e){const t=P((({mapLib:t})=>new t.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})),{position:e.position});return(0,r.useEffect)((()=>{C(t._controlContainer,e.style)}),[e.style]),null}));(0,r.memo)((0,r.forwardRef)((function(e,t){const n=(0,r.useRef)({props:e}),i=P((({mapLib:t})=>{const r=new t.GeolocateControl(e),i=r._setupUI;return r._setupUI=e=>{r._container.hasChildNodes()||i(e)},r.on("geolocate",(e=>{var t,r;null===(r=(t=n.current.props).onGeolocate)||void 0===r||r.call(t,e)})),r.on("error",(e=>{var t,r;null===(r=(t=n.current.props).onError)||void 0===r||r.call(t,e)})),r.on("outofmaxbounds",(e=>{var t,r;null===(r=(t=n.current.props).onOutOfMaxBounds)||void 0===r||r.call(t,e)})),r.on("trackuserlocationstart",(e=>{var t,r;null===(r=(t=n.current.props).onTrackUserLocationStart)||void 0===r||r.call(t,e)})),r.on("trackuserlocationend",(e=>{var t,r;null===(r=(t=n.current.props).onTrackUserLocationEnd)||void 0===r||r.call(t,e)})),r}),{position:e.position});return n.current.props=e,(0,r.useImperativeHandle)(t,(()=>i),[]),(0,r.useEffect)((()=>{C(i._container,e.style)}),[e.style]),null})));(0,r.memo)((function(e){const t=P((({mapLib:t})=>new t.NavigationControl(e)),{position:e.position});return(0,r.useEffect)((()=>{C(t._container,e.style)}),[e.style]),null}));(0,r.memo)((function(e){const t=P((({mapLib:t})=>new t.ScaleControl(e)),{position:e.position}),n=(0,r.useRef)(e),i=n.current;n.current=e;const{style:s}=e;return void 0!==e.maxWidth&&e.maxWidth!==i.maxWidth&&(t.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==i.unit&&t.setUnit(e.unit),(0,r.useEffect)((()=>{C(t._container,s)}),[s]),null}));const M=n.e(842).then(n.t.bind(n,8461,23)),I=r.forwardRef((function(e,t){return T(e,t,M)}))},3540:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>Wt});var r=function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.create;function i(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var s=n(6540),A=n(2833),o=n.n(A),a="-ms-",c="-moz-",l="-webkit-",u="comm",h="rule",d="decl",f="@keyframes",p=Math.abs,g=String.fromCharCode,_=Object.assign;function m(e){return e.trim()}function E(e,t){return(e=t.exec(e))?e[0]:e}function v(e,t,n){return e.replace(t,n)}function y(e,t,n){return e.indexOf(t,n)}function b(e,t){return 0|e.charCodeAt(t)}function w(e,t,n){return e.slice(t,n)}function T(e){return e.length}function S(e){return e.length}function R(e,t){return t.push(e),e}function C(e,t){return e.filter((function(e){return!E(e,t)}))}var x=1,P=1,M=0,I=0,L=0,k="";function O(e,t,n,r,i,s,A,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:x,column:P,length:A,return:"",siblings:o}}function B(e,t){return _(O("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function D(e){for(;e.root;)e=B(e.root,{children:[e]});R(e,e.siblings)}function N(){return L=I>0?b(k,--I):0,P--,10===L&&(P=1,x--),L}function F(){return L=I<M?b(k,I++):0,P++,10===L&&(P=1,x++),L}function U(){return b(k,I)}function G(){return I}function V(e,t){return w(k,e,t)}function z(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function j(e){return x=P=1,M=T(k=e),I=0,[]}function W(e){return k="",e}function H(e){return m(V(I-1,$(91===e?e+2:40===e?e+1:e)))}function Q(e){for(;(L=U())&&L<33;)F();return z(e)>2||z(L)>3?"":" "}function X(e,t){for(;--t&&F()&&!(L<48||L>102||L>57&&L<65||L>70&&L<97););return V(e,G()+(t<6&&32==U()&&32==F()))}function $(e){for(;F();)switch(L){case e:return I;case 34:case 39:34!==e&&39!==e&&$(L);break;case 40:41===e&&$(e);break;case 92:F()}return I}function Y(e,t){for(;F()&&e+L!==57&&(e+L!==84||47!==U()););return"/*"+V(t,I-1)+"*"+g(47===e?e:F())}function K(e){for(;!z(U());)F();return V(e,I)}function Z(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function q(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case d:return e.return=e.return||e.value;case u:return"";case f:return e.return=e.value+"{"+Z(e.children,r)+"}";case h:if(!T(e.value=e.props.join(",")))return""}return T(n=Z(e.children,r))?e.return=e.value+"{"+n+"}":""}function J(e,t,n){switch(function(e,t){return 45^b(e,0)?(((t<<2^b(e,0))<<2^b(e,1))<<2^b(e,2))<<2^b(e,3):0}(e,t)){case 5103:return l+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return l+e+e;case 4789:return c+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return l+e+c+e+a+e+e;case 5936:switch(b(e,t+11)){case 114:return l+e+a+v(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return l+e+a+v(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return l+e+a+v(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return l+e+a+e+e;case 6165:return l+e+a+"flex-"+e+e;case 5187:return l+e+v(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return l+e+a+"flex-item-"+v(e,/flex-|-self/g,"")+(E(e,/flex-|baseline/)?"":a+"grid-row-"+v(e,/flex-|-self/g,""))+e;case 4675:return l+e+a+"flex-line-pack"+v(e,/align-content|flex-|-self/g,"")+e;case 5548:return l+e+a+v(e,"shrink","negative")+e;case 5292:return l+e+a+v(e,"basis","preferred-size")+e;case 6060:return l+"box-"+v(e,"-grow","")+l+e+a+v(e,"grow","positive")+e;case 4554:return l+v(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return v(v(v(e,/(zoom-|grab)/,l+"$1"),/(image-set)/,l+"$1"),e,"")+e;case 5495:case 3959:return v(e,/(image-set\([^]*)/,l+"$1$`$1");case 4968:return v(v(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+l+e+e;case 4200:if(!E(e,/flex-|baseline/))return a+"grid-column-align"+w(e,t)+e;break;case 2592:case 3360:return a+v(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,E(e.props,/grid-\w+-end/)}))?~y(e+(n=n[t].value),"span",0)?e:a+v(e,"-start","")+e+a+"grid-row-span:"+(~y(n,"span",0)?E(n,/\d+/):+E(n,/\d+/)-+E(e,/\d+/))+";":a+v(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return E(e.props,/grid-\w+-start/)}))?e:a+v(v(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return v(e,/(.+)-inline(.+)/,l+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(T(e)-1-t>6)switch(b(e,t+1)){case 109:if(45!==b(e,t+4))break;case 102:return v(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+c+(108==b(e,t+3)?"$3":"$2-$3"))+e;case 115:return~y(e,"stretch",0)?J(v(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return v(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,i,s,A,o){return a+n+":"+r+o+(i?a+n+"-span:"+(s?A:+A-+r)+o:"")+e}));case 4949:if(121===b(e,t+6))return v(e,":",":"+l)+e;break;case 6444:switch(b(e,45===b(e,14)?18:11)){case 120:return v(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+l+(45===b(e,14)?"inline-":"")+"box$3$1"+l+"$2$3$1"+a+"$2box$3")+e;case 100:return v(e,":",":"+a)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return v(e,"scroll-","scroll-snap-")+e}return e}function ee(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case d:return void(e.return=J(e.value,e.length,n));case f:return Z([B(e,{value:v(e.value,"@","@"+l)})],r);case h:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(E(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":D(B(e,{props:[v(t,/:(read-\w+)/,":-moz-$1")]})),D(B(e,{props:[t]})),_(e,{props:C(n,r)});break;case"::placeholder":D(B(e,{props:[v(t,/:(plac\w+)/,":-webkit-input-$1")]})),D(B(e,{props:[v(t,/:(plac\w+)/,":-moz-$1")]})),D(B(e,{props:[v(t,/:(plac\w+)/,a+"input-$1")]})),D(B(e,{props:[t]})),_(e,{props:C(n,r)})}return""}))}}function te(e){return W(ne("",null,null,null,[""],e=j(e),0,[0],e))}function ne(e,t,n,r,i,s,A,o,a){for(var c=0,l=0,u=A,h=0,d=0,f=0,_=1,m=1,E=1,w=0,S="",C=i,x=s,P=r,M=S;m;)switch(f=w,w=F()){case 40:if(108!=f&&58==b(M,u-1)){-1!=y(M+=v(H(w),"&","&\f"),"&\f",p(c?o[c-1]:0))&&(E=-1);break}case 34:case 39:case 91:M+=H(w);break;case 9:case 10:case 13:case 32:M+=Q(f);break;case 92:M+=X(G()-1,7);continue;case 47:switch(U()){case 42:case 47:R(ie(Y(F(),G()),t,n,a),a);break;default:M+="/"}break;case 123*_:o[c++]=T(M)*E;case 125*_:case 59:case 0:switch(w){case 0:case 125:m=0;case 59+l:-1==E&&(M=v(M,/\f/g,"")),d>0&&T(M)-u&&R(d>32?se(M+";",r,n,u-1,a):se(v(M," ","")+";",r,n,u-2,a),a);break;case 59:M+=";";default:if(R(P=re(M,t,n,c,l,i,o,S,C=[],x=[],u,s),s),123===w)if(0===l)ne(M,t,P,P,C,s,u,o,x);else switch(99===h&&110===b(M,3)?100:h){case 100:case 108:case 109:case 115:ne(e,P,P,r&&R(re(e,P,P,0,0,i,o,S,i,C=[],u,x),x),i,x,u,o,r?C:x);break;default:ne(M,P,P,P,[""],x,0,o,x)}}c=l=d=0,_=E=1,S=M="",u=A;break;case 58:u=1+T(M),d=f;default:if(_<1)if(123==w)--_;else if(125==w&&0==_++&&125==N())continue;switch(M+=g(w),w*_){case 38:E=l>0?1:(M+="\f",-1);break;case 44:o[c++]=(T(M)-1)*E,E=1;break;case 64:45===U()&&(M+=H(F())),h=U(),l=u=T(S=M+=K(G())),w++;break;case 45:45===f&&2==T(M)&&(_=0)}}return s}function re(e,t,n,r,i,s,A,o,a,c,l,u){for(var d=i-1,f=0===i?s:[""],g=S(f),_=0,E=0,y=0;_<r;++_)for(var b=0,T=w(e,d+1,d=p(E=A[_])),R=e;b<g;++b)(R=m(E>0?f[b]+" "+T:v(T,/&\f/g,f[b])))&&(a[y++]=R);return O(e,t,n,0===i?h:o,a,c,l,u)}function ie(e,t,n,r){return O(e,t,n,u,g(L),w(e,2,-2),0,r)}function se(e,t,n,r,i){return O(e,t,n,d,w(e,0,r),w(e,r+1,-1),r,i)}var Ae={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oe="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",ae="active",ce="data-styled-version",le="6.1.11",ue="/*!sc*/\n",he="undefined"!=typeof window&&"HTMLElement"in window,de=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&("false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY)),fe=(new Set,Object.freeze([])),pe=Object.freeze({});function ge(e,t,n){return void 0===n&&(n=pe),e.theme!==n.theme&&e.theme||t||n.theme}var _e=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),me=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ee=/(^-|-$)/g;function ve(e){return e.replace(me,"-").replace(Ee,"")}var ye=/(a)(d)/gi,be=function(e){return String.fromCharCode(e+(e>25?39:97))};function we(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=be(t%52)+n;return(be(t%52)+n).replace(ye,"$1-$2")}var Te,Se=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Re=function(e){return Se(5381,e)};function Ce(e){return we(Re(e)>>>0)}function xe(e){return e.displayName||e.name||"Component"}function Pe(e){return"string"==typeof e&&!0}var Me="function"==typeof Symbol&&Symbol.for,Ie=Me?Symbol.for("react.memo"):60115,Le=Me?Symbol.for("react.forward_ref"):60112,ke={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Oe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Be={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},De=((Te={})[Le]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Te[Ie]=Be,Te);function Ne(e){return("type"in(t=e)&&t.type.$$typeof)===Ie?Be:"$$typeof"in e?De[e.$$typeof]:ke;var t}var Fe=Object.defineProperty,Ue=Object.getOwnPropertyNames,Ge=Object.getOwnPropertySymbols,Ve=Object.getOwnPropertyDescriptor,ze=Object.getPrototypeOf,je=Object.prototype;function We(e,t,n){if("string"!=typeof t){if(je){var r=ze(t);r&&r!==je&&We(e,r,n)}var i=Ue(t);Ge&&(i=i.concat(Ge(t)));for(var s=Ne(e),A=Ne(t),o=0;o<i.length;++o){var a=i[o];if(!(a in Oe||n&&n[a]||A&&a in A||s&&a in s)){var c=Ve(t,a);try{Fe(e,a,c)}catch(e){}}}}return e}function He(e){return"function"==typeof e}function Qe(e){return"object"==typeof e&&"styledComponentId"in e}function Xe(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function $e(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=t?t+e[r]:e[r];return n}function Ye(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Ke(e,t,n){if(void 0===n&&(n=!1),!n&&!Ye(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Ke(e[r],t[r]);else if(Ye(t))for(var r in t)e[r]=Ke(e[r],t[r]);return e}function Ze(e,t){Object.defineProperty(e,"toString",{value:t})}function qe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var Je=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)if((i<<=1)<0)throw qe(16,"".concat(e));this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var s=r;s<i;s++)this.groupSizes[s]=0}for(var A=this.indexOfGroup(e+1),o=(s=0,t.length);s<o;s++)this.tag.insertRule(A,t[s])&&(this.groupSizes[e]++,A++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,s=r;s<i;s++)t+="".concat(this.tag.getRule(s)).concat(ue);return t},e}(),et=new Map,tt=new Map,nt=1,rt=function(e){if(et.has(e))return et.get(e);for(;tt.has(nt);)nt++;var t=nt++;return et.set(e,t),tt.set(t,e),t},it=function(e,t){nt=t+1,et.set(e,t),tt.set(t,e)},st="style[".concat(oe,"][").concat(ce,'="').concat(le,'"]'),At=new RegExp("^".concat(oe,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),ot=function(e,t,n){for(var r,i=n.split(","),s=0,A=i.length;s<A;s++)(r=i[s])&&e.registerName(t,r)},at=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(ue),i=[],s=0,A=r.length;s<A;s++){var o=r[s].trim();if(o){var a=o.match(At);if(a){var c=0|parseInt(a[1],10),l=a[2];0!==c&&(it(l,c),ot(e,l,a[3]),e.getTag().insertRules(c,i)),i.length=0}else i.push(o)}}};function ct(){return n.nc}var lt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){var t=Array.from(e.querySelectorAll("style[".concat(oe,"]")));return t[t.length-1]}(n),s=void 0!==i?i.nextSibling:null;r.setAttribute(oe,ae),r.setAttribute(ce,le);var A=ct();return A&&r.setAttribute("nonce",A),n.insertBefore(r,s),r},ut=function(){function e(e){this.element=lt(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}throw qe(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),ht=function(){function e(e){this.element=lt(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),dt=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),ft=he,pt={isServer:!he,useCSSOMInjection:!de},gt=function(){function e(e,t,n){void 0===e&&(e=pe),void 0===t&&(t={});var i=this;this.options=r(r({},pt),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&he&&ft&&(ft=!1,function(e){for(var t=document.querySelectorAll(st),n=0,r=t.length;n<r;n++){var i=t[n];i&&i.getAttribute(oe)!==ae&&(at(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this)),Ze(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=function(n){var i=function(e){return tt.get(e)}(n);if(void 0===i)return"continue";var s=e.names.get(i),A=t.getGroup(n);if(void 0===s||0===A.length)return"continue";var o="".concat(oe,".g").concat(n,'[id="').concat(i,'"]'),a="";void 0!==s&&s.forEach((function(e){e.length>0&&(a+="".concat(e,","))})),r+="".concat(A).concat(o,'{content:"').concat(a,'"}').concat(ue)},s=0;s<n;s++)i(s);return r}(i)}))}return e.registerId=function(e){return rt(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(r(r({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new dt(n):t?new ut(n):new ht(n)}(this.options),new Je(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(rt(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(rt(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(rt(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),_t=/&/g,mt=/^\s*\/\/.*$/gm;function Et(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Et(e.children,t)),e}))}function vt(e){var t,n,r,i=void 0===e?pe:e,s=i.options,A=void 0===s?pe:s,o=i.plugins,a=void 0===o?fe:o,c=function(e,r,i){return i.startsWith(n)&&i.endsWith(n)&&i.replaceAll(n,"").length>0?".".concat(t):e},l=a.slice();l.push((function(e){e.type===h&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(_t,n).replace(r,c))})),A.prefix&&l.push(ee),l.push(q);var u=function(e,i,s,o){void 0===i&&(i=""),void 0===s&&(s=""),void 0===o&&(o="&"),t=o,n=i,r=new RegExp("\\".concat(n,"\\b"),"g");var a=e.replace(mt,""),c=te(s||i?"".concat(s," ").concat(i," { ").concat(a," }"):a);A.namespace&&(c=Et(c,A.namespace));var u,h,d,f=[];return Z(c,(u=l.concat((d=function(e){return f.push(e)},function(e){e.root||(e=e.return)&&d(e)})),h=S(u),function(e,t,n,r){for(var i="",s=0;s<h;s++)i+=u[s](e,t,n,r)||"";return i})),f};return u.hash=a.length?a.reduce((function(e,t){return t.name||qe(15),Se(e,t.name)}),5381).toString():"",u}var yt=new gt,bt=vt(),wt=s.createContext({shouldForwardProp:void 0,styleSheet:yt,stylis:bt}),Tt=(wt.Consumer,s.createContext(void 0));function St(){return(0,s.useContext)(wt)}function Rt(e){var t=(0,s.useState)(e.stylisPlugins),n=t[0],r=t[1],i=St().styleSheet,A=(0,s.useMemo)((function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,i]),a=(0,s.useMemo)((function(){return vt({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:n})}),[e.enableVendorPrefixes,e.namespace,n]);(0,s.useEffect)((function(){o()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]);var c=(0,s.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:A,stylis:a}}),[e.shouldForwardProp,A,a]);return s.createElement(wt.Provider,{value:c},s.createElement(Tt.Provider,{value:a},e.children))}var Ct=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=bt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Ze(this,(function(){throw qe(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=bt),this.name+e.hash},e}(),xt=function(e){return e>="A"&&e<="Z"};function Pt(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;xt(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var Mt=function(e){return null==e||!1===e||""===e},It=function(e){var t,n,r=[];for(var s in e){var A=e[s];e.hasOwnProperty(s)&&!Mt(A)&&(Array.isArray(A)&&A.isCss||He(A)?r.push("".concat(Pt(s),":"),A,";"):Ye(A)?r.push.apply(r,i(i(["".concat(s," {")],It(A),!1),["}"],!1)):r.push("".concat(Pt(s),": ").concat((t=s,null==(n=A)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Ae||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Lt(e,t,n,r){return Mt(e)?[]:Qe(e)?[".".concat(e.styledComponentId)]:He(e)?!He(i=e)||i.prototype&&i.prototype.isReactComponent||!t?[e]:Lt(e(t),t,n,r):e instanceof Ct?n?(e.inject(n,r),[e.getName(r)]):[e]:Ye(e)?It(e):Array.isArray(e)?Array.prototype.concat.apply(fe,e.map((function(e){return Lt(e,t,n,r)}))):[e.toString()];var i}function kt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(He(n)&&!Qe(n))return!1}return!0}var Ot=Re(le),Bt=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&kt(e),this.componentId=t,this.baseHash=Se(Ot,t),this.baseStyle=n,gt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=Xe(r,this.staticRulesId);else{var i=$e(Lt(this.rules,e,t,n)),s=we(Se(this.baseHash,i)>>>0);if(!t.hasNameForId(this.componentId,s)){var A=n(i,".".concat(s),void 0,this.componentId);t.insertRules(this.componentId,s,A)}r=Xe(r,s),this.staticRulesId=s}else{for(var o=Se(this.baseHash,n.hash),a="",c=0;c<this.rules.length;c++){var l=this.rules[c];if("string"==typeof l)a+=l;else if(l){var u=$e(Lt(l,e,t,n));o=Se(o,u+c),a+=u}}if(a){var h=we(o>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(a,".".concat(h),void 0,this.componentId)),r=Xe(r,h)}}return r},e}(),Dt=s.createContext(void 0);Dt.Consumer;var Nt={};new Set;function Ft(e,t,n){var i=Qe(e),A=e,o=!Pe(e),a=t.attrs,c=void 0===a?fe:a,l=t.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":ve(e);Nt[n]=(Nt[n]||0)+1;var r="".concat(n,"-").concat(Ce(le+n+Nt[n]));return t?"".concat(t,"-").concat(r):r}(t.displayName,t.parentComponentId):l,h=t.displayName,d=void 0===h?function(e){return Pe(e)?"styled.".concat(e):"Styled(".concat(xe(e),")")}(e):h,f=t.displayName&&t.componentId?"".concat(ve(t.displayName),"-").concat(t.componentId):t.componentId||u,p=i&&A.attrs?A.attrs.concat(c).filter(Boolean):c,g=t.shouldForwardProp;if(i&&A.shouldForwardProp){var _=A.shouldForwardProp;if(t.shouldForwardProp){var m=t.shouldForwardProp;g=function(e,t){return _(e,t)&&m(e,t)}}else g=_}var E=new Bt(n,f,i?A.componentStyle:void 0);function v(e,t){return function(e,t,n){var i=e.attrs,A=e.componentStyle,o=e.defaultProps,a=e.foldedComponentIds,c=e.styledComponentId,l=e.target,u=s.useContext(Dt),h=St(),d=e.shouldForwardProp||h.shouldForwardProp,f=ge(t,u,o)||pe,p=function(e,t,n){for(var i,s=r(r({},t),{className:void 0,theme:n}),A=0;A<e.length;A+=1){var o=He(i=e[A])?i(s):i;for(var a in o)s[a]="className"===a?Xe(s[a],o[a]):"style"===a?r(r({},s[a]),o[a]):o[a]}return t.className&&(s.className=Xe(s.className,t.className)),s}(i,t,f),g=p.as||l,_={};for(var m in p)void 0===p[m]||"$"===m[0]||"as"===m||"theme"===m&&p.theme===f||("forwardedAs"===m?_.as=p.forwardedAs:d&&!d(m,g)||(_[m]=p[m]));var E=function(e,t){var n=St();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(A,p),v=Xe(a,c);return E&&(v+=" "+E),p.className&&(v+=" "+p.className),_[Pe(g)&&!_e.has(g)?"class":"className"]=v,_.ref=n,(0,s.createElement)(g,_)}(y,e,t)}v.displayName=d;var y=s.forwardRef(v);return y.attrs=p,y.componentStyle=E,y.displayName=d,y.shouldForwardProp=g,y.foldedComponentIds=i?Xe(A.foldedComponentIds,A.styledComponentId):"",y.styledComponentId=f,y.target=i?A.target:e,Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)Ke(e,i[r],!0);return e}({},A.defaultProps,e):e}}),Ze(y,(function(){return".".concat(y.styledComponentId)})),o&&We(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),y}function Ut(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n}var Gt=function(e){return Object.assign(e,{isCss:!0})};function Vt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(He(e)||Ye(e))return Gt(Lt(Ut(fe,i([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?Lt(r):Gt(Lt(Ut(r,t)))}function zt(e,t,n){if(void 0===n&&(n=pe),!t)throw qe(1,t);var s=function(r){for(var s=[],A=1;A<arguments.length;A++)s[A-1]=arguments[A];return e(t,n,Vt.apply(void 0,i([r],s,!1)))};return s.attrs=function(i){return zt(e,t,r(r({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},s.withConfig=function(i){return zt(e,t,r(r({},n),i))},s}var jt=function(e){return zt(Ft,e)},Wt=jt;_e.forEach((function(e){Wt[e]=jt(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=kt(e),gt.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,r){var i=r($e(Lt(this.rules,t,n,r)),""),s=this.componentId+e;n.insertRules(s,s,i)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,r){e>2&&gt.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=ct(),r=$e([n&&'nonce="'.concat(n,'"'),"".concat(oe,'="true"'),"".concat(ce,'="').concat(le,'"')].filter(Boolean)," ");return"<style ".concat(r,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw qe(2);return e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)throw qe(2);var n=((t={})[oe]="",t[ce]=le,t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=ct();return i&&(n.nonce=i),[s.createElement("style",r({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new gt({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw qe(2);return s.createElement(Rt,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw qe(3)}})(),"__sc-".concat(oe,"__")},3681:(e,t,n)=>{"use strict";n.d(t,{ZA:()=>_});var r=n(6540);function i(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var s="[\xa0]";function A(e){var t,n={};return new URLSearchParams((void 0===(t=e)&&(t=""),!t||0!==t.indexOf("?")&&0!==t.indexOf("#")?t:t.slice(1))).forEach((function(e,t){if(t in n.constructor.prototype)return console.warn('parseQueryState | invalid key "'.concat(t,'" will be ignored'));if(t in n){var r=n[t];Array.isArray(r)?r.push(e):n[t]=[r,e]}else n[t]=e})),Object.keys(n).length?n:null}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object.assign.apply(Object,i([{}],e,!1)),r=new URLSearchParams;return Object.entries(n).forEach((function(e){var t=e[0],n=e[1];null!=n&&(Array.isArray(n)?n.length?n.forEach((function(e){r.append(t,e||"")})):r.append(t,s):r.append(t,n))})),r.sort(),r.toString()}function a(e){if(Array.isArray(e))return e.map((function(e){return e.toString()}));if(e||""===e||!1===e||0===e){if(e instanceof Date)return e.toJSON();switch(typeof e){case"string":case"number":case"boolean":return e.toString()}}return null}function c(e,t){var n,r=typeof t;if(Array.isArray(t))return e===s?[]:[].concat(e);if("string"!=typeof e&&!Array.isArray(e))return null;if(t instanceof Date){var i=new Date(e.toString());if(!isNaN(i.valueOf()))return i}switch(r){case"string":return e.toString();case"number":return(n=Number(e))||0===n?n:null;case"boolean":if("true"===e)return!0;if("false"===e)return!1}return null}var l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)},u="undefined"!=typeof window&&"location"in window&&"history"in window;function h(e){var t=(void 0===e?{}:e).disabled,n=!(void 0!==t&&t)&&u,i=(0,r.useMemo)((function(){return{getQueryString:function(){return n?window.location.hash:""},setQueryString:function(e,t){var r=t.method,i=void 0===r?"replace":r;if(n){window.history["replace"===i?"replaceState":"pushState"](window.history.state,"","#"+e);var A=document.createEvent("CustomEvent");A.initEvent("hashchange",!1,!1),window.dispatchEvent(A),s((function(e){return e+1}))}}}}),[n]),s=(0,r.useState)(0)[1];return(0,r.useEffect)((function(){if(n){var e=function(){s((function(e){return e+1}))};return window.addEventListener("hashchange",e,!1),function(){return window.removeEventListener("hashchange",e,!1)}}}),[n]),i}var d="undefined"==typeof window||"undefined"==typeof document?r.useEffect:r.useLayoutEffect;function f(e){var t=(0,r.useRef)(e);return d((function(){t.current=e}),[e]),t}var p=Object.freeze({});function g(e,t,n,i,s){var u,d,g=Object.assign({},p,s,"object"==typeof i?i:null),_=g.queryStringInterface,m=h(_?{disabled:!0}:void 0),E=_||m,v=(0,r.useState)((function(){return i&&"function"==typeof i?i(n):n}))[0];if(d=v,null===(0,r.useMemo)((function(){return a(d)}),[d]))throw new Error("unsupported defaultValue");var y=f({activeQSI:E,defaultValue:v,mergedQueryStateOpts:g,reducer:t}),b=(0,r.useCallback)((function(t){var n,r=y.current.activeQSI,i=A(r.getQueryString())||{},s=l(l({},i),((n={})[e]=null,n));r.setQueryString(o(s),t),w((function(e){return e+1}))}),[e,y]),w=(0,r.useState)(0)[1],T=(0,r.useCallback)((function(t,n){var r;void 0===n&&(n={});var i=y.current,s=i.activeQSI,u=i.defaultValue,h=i.mergedQueryStateOpts,d=i.reducer,f=h.stripDefaults,p=void 0===f||f,g=A(s.getQueryString())||{},_=e in g?c(g[e],u):u;if(null===t)return b(n);var m,E,v=d(null!=_?_:u,t);if(null===a(v)&&console.warn("value of "+JSON.stringify(v)+' is not supported. "'+e+'" will reset to default value of:',u),p){if(Array.isArray(u)&&(m=v,E=u,JSON.stringify(m)===JSON.stringify(E)))return b(n);if(v===u)return b(n)}s.setQueryString(o(l(l({},g),((r={})[e]=a(v),r))),n),w((function(e){return e+1}))}),[e,y,b]),S=A(E.getQueryString())||{};return[null!==(u=e in S?c(S[e],v):v)&&void 0!==u?u:v,T]}function _(e,t,n){void 0===n&&(n={});var i=(0,r.useCallback)((function(e,t){return t&&"function"==typeof t?t(e):t}),[]);return"function"==typeof t?g(e,i,void 0,t,n):g(e,i,t,n)}"undefined"!=typeof window&&window;Object.freeze({});Object.freeze({})},5276:(e,t,n)=>{"use strict";function r(e,t){return t||(t=e.slice(0)),e.raw=t,e}n.d(t,{A:()=>r})},7277:(e,t,n)=>{"use strict";n.d(t,{A:()=>A,k:()=>s});var r=n(8277);let i={};function s(e){i=e}function A(e,t,n,s){r.A.level>0&&i[e]&&i[e].call(null,t,n,s)}},6704:(e,t,n)=>{"use strict";n.d(t,{Kx:()=>s,p5:()=>A,qY:()=>o,rf:()=>i});var r=n(8277);const i={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(i,"IDENTITY",{get:()=>(r.A.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const s={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},A={common:0,meters:1,pixels:2},o={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}}},1420:(e,t,n)=>{"use strict";n.d(t,{A:()=>We});var r=n(6049),i=n(6704),s=n(3912);const A=s.UE;function o(e,t){return{attribute:e,format:t.size>1?`${t.type}x${t.size}`:t.type,byteOffset:t.offset||0}}function a(e){return e.stride||e.size*e.bytesPerElement}var c=n(8457),l=n(453),u=n(8277);function h(e,t){t.offset&&u.A.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=a(e),r=(void 0!==t.vertexOffset?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0);return{...t,offset:r,stride:n}}var d=n(1829),f=n(1729),p=n(5801);const g=[],_=[[0,1/0]];const m={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function E(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const n=e.type||"interpolation";return{...m[n],...t,...e,type:n}}class v extends class{constructor(e,t,n){this._buffer=null,this.device=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,i="float64"===r;let A,{defaultValue:o}=t;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),A=i?"float32":!r&&t.isIndexed?"uint32":r||"float32";let a=function(e){switch(e){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return(0,s.Y0)(e)}}(r||A);this.doublePrecision=i,i&&!1===t.fp64&&(a=Float32Array),this.value=null,this.settings={...t,defaultType:a,defaultValue:o,logicalType:r,type:A,normalized:A.includes("norm"),size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*a(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),c.A.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,t=null){const n={};if(this.state.constant){const r=this.value;if(t){const i=h(this.getAccessor(),t),s=i.offset/r.BYTES_PER_ELEMENT,A=i.size||this.size;n[e]=r.subarray(s,s+A)}else n[e]=r}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${e}64Low`]=n[e]:n[`${e}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(e=this.id,t=null){const n=this.getAccessor(),r=[],i={name:this.id,byteStride:a(n),attributes:r};if(this.doublePrecision){const i=function(e,t){const n=h(e,t);return{high:n,low:{...n,offset:n.offset+4*e.size}}}(n,t||{});r.push(o(e,{...n,...i.high}),o(`${e}64Low`,{...n,...i.low}))}else if(t){const i=h(n,t);r.push(o(e,{...n,...i}))}else r.push(o(e,n));return i}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:n,size:r}=this,i=n*r;if(t&&i&&t.length>=i){const n=new Array(r).fill(1/0),s=new Array(r).fill(-1/0);for(let e=0;e<i;)for(let i=0;i<r;i++){const r=t[e++];r<n[i]&&(n[i]=r),r>s[i]&&(s[i]=r)}e=[n,s]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let n;n=ArrayBuffer.isView(e)?{value:e}:e instanceof r.h?{buffer:e}:e;const i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type){if(this.doublePrecision&&n.value instanceof Float64Array)i.type="float32";else{const e=A(n.value);i.type=i.normalized?e.replace("int","norm"):e}}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=a(i)}if(t.bounds=null,n.constant){let e=n.value;e=this._normalizeValue(e,[],0),this.settings.normalized&&(e=this.normalizeConstant(e));if(!(!t.constant||!this._areValuesEqual(e,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=ArrayBuffer.isView(e)?e:new Float32Array(e)}else if(n.buffer){const e=n.buffer;t.externalBuffer=e,t.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let e=n.value;t.externalBuffer=null,t.constant=!1,this.value=e;let{buffer:r}=this;const s=a(i),A=(i.vertexOffset||0)*s;if(this.doublePrecision&&e instanceof Float64Array&&(e=(0,l.cT)(e,i)),this.settings.isIndexed){const t=this.settings.defaultType;e.constructor!==t&&(e=new t(e))}const o=e.byteLength+A+2*s;(!r||r.byteLength<o)&&(r=this._createBuffer(o)),r.write(e,A)}return this.setAccessor(i),!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:n=0,endOffset:r}=e;this.buffer.write(this.doublePrecision&&t instanceof Float64Array?(0,l.cT)(t,{size:this.size,startIndex:n,endIndex:r}):t.subarray(n,r),n*t.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,t=!1){const{state:n}=this,r=n.allocatedValue,i=c.A.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=i;const{byteOffset:s}=this;let{buffer:A}=this;return(!A||A.byteLength<i.byteLength+s)&&(A=this._createBuffer(i.byteLength+s),t&&r&&A.write(r instanceof Float64Array?(0,l.cT)(r,this):r,s)),n.allocatedValue=i,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error(`Attribute ${this.id} does not support ${t.constructor.name}`);t instanceof n||!this.settings.normalized||"normalized"in e||u.A.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map((e=>(e+128)/255*2-1));case"snorm16":return new Float32Array(e).map((e=>(e+32768)/65535*2-1));case"unorm8":return new Float32Array(e).map((e=>e/255));case"unorm16":return new Float32Array(e).map((e=>e/65535));default:return e}}_normalizeValue(e,t,n){const{defaultValue:r,size:i}=this.settings;if(Number.isFinite(e))return t[n]=e,t;if(!e){let e=i;for(;--e>=0;)t[n+e]=r[e];return t}switch(i){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let s=i;for(;--s>=0;)t[n+s]=Number.isFinite(e[s])?e[s]:r[s]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}_createBuffer(e){this._buffer&&this._buffer.destroy();const{isIndexed:t,type:n}=this.settings;return this._buffer=this.device.createBuffer({...this._buffer?.props,id:this.id,usage:t?r.h.INDEX:r.h.VERTEX,indexType:t?n:void 0,byteLength:e}),this._buffer}}{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:_}),this.constant=!1,this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var t,n;this.state.layoutChanged||=(t=e,n=this.getAccessor(),!(t.type===n.type&&t.size===n.size&&a(t)===a(n)&&(t.offset||0)===(n.offset||0))),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,n=this.settings.transition;return E(Array.isArray(t)?e[t.find((t=>e[t]))]:e[t],n)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:e=0,endRow:n=1/0}=t;this.state.updateRanges=function(e,t){if(e===_)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;const n=[],r=e.length;let i=0;for(let s=0;s<r;s++){const r=e[s];r[1]<t[0]?(n.push(r),i=s+1):r[0]>t[1]?n.push(r):t=[Math.min(r[0],t[0]),Math.max(r[1],t[1])]}return n.splice(i,0,t),n}(this.state.updateRanges,[e,n])}else this.state.updateRanges=_}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=g}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(e,t.updateRanges!==_),!0))}updateBuffer({numInstances:e,data:t,props:n,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:i},settings:{update:s,noAlloc:A}}=this;let o=!0;if(s){for(const[A,o]of i)s.call(r,this,{data:t,startRow:A,endRow:o,props:n,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[t,n]of i){const r=Number.isFinite(t)?this.getVertexOffset(t):0,i=Number.isFinite(n)?this.getVertexOffset(n):A||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:r,endOffset:i})}else;this._checkAttributeArray()}else o=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),o}setConstantValue(e){if(void 0===e||"function"==typeof e)return!1;return this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:n,settings:r}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw();if(r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const i=e;(0,d.A)(ArrayBuffer.isView(i.value),`invalid ${r.accessor}`);const s=Boolean(i.size)&&i.size!==this.size;return n.binaryAccessor=(0,f.I)(i.value,{size:i.size||this.size,stride:i.stride,offset:i.offset,startIndices:t,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,t=super.getValue();if(!e)return t;for(const n in e)Object.assign(t,super.getValue(n,e[n]));return t}getBufferLayout(e){this.state.layoutChanged=!1;const t=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:r}=this.settings;if(n.stepMode="dynamic"===r?e?e.isInstanced?"instance":"vertex":"instance":r??"vertex",!t)return n;for(const i in t){const e=super._getBufferLayout(i,t[i]);n.attributes.push(...e.attributes)}return n}_autoUpdater(e,{data:t,startRow:n,endRow:r,props:i,numInstances:s}){if(e.constant)return;const{settings:A,state:o,value:a,size:c,startIndices:l}=e,{accessor:u,transform:h}=A,g=o.binaryAccessor||("function"==typeof u?u:i[u]);(0,d.A)("function"==typeof g,`accessor "${u}" is not a function`);let _=e.getVertexOffset(n);const{iterable:m,objectInfo:E}=(0,f.X)(t,n,r);for(const d of m){E.index++;let t=g(d,E);if(h&&(t=h.call(this,t)),l){const n=(E.index<l.length-1?l[E.index+1]:s)-l[E.index];if(t&&Array.isArray(t[0])){let n=_;for(const r of t)e._normalizeValue(r,a,n),n+=c}else t&&t.length>c?a.set(t,_):(e._normalizeValue(t,E.target,0),(0,p.R)({target:a,source:E.target,start:_,count:n}));_+=n*c}else e._normalizeValue(t,a,_),_+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||"function"==typeof e.update))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}var y=n(251),b=n(7277),w=n(290);function T(e){const{input:t,inputChannels:n,output:r}=e||{};if(!t)return"#version 300 es\nout vec4 transform_output;\nvoid main() {\ntransform_output = vec4(0);\n}";if(!n)throw new Error("inputChannels");return`#version 300 es\nin ${function(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${e}`)}}(n)} ${t};\nout vec4 ${r};\nvoid main() {\n  ${r} = ${function(e,t){switch(t){case 1:return`vec4(${e}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${e}, 0.0, 1.0)`;case 3:return`vec4(${e}, 1.0)`;case 4:return e;default:throw new Error(`invalid channels: ${t}`)}}(t,n)};\n}`}var S=n(457);class R{device;model;transformFeedback;static isSupported(e){return"webgl"===e?.info?.type}constructor(e,t=S.K.defaultProps){(0,w.v)(R.isSupported(e),"BufferTransform not yet implemented on WebGPU"),this.device=e,this.model=new S.K(this.device,{id:t.id||"buffer-transform-model",fs:t.fs||T(),topology:t.topology||"point-list",...t}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:t.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){const t=this.device.beginRenderPass(e);this.model.draw(t),t.end()}update(...e){console.warn("TextureTransform#update() not implemented")}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const t=this.getBuffer(e);if(t instanceof r.h)return t.readAsync();const{buffer:n,byteOffset:i=0,byteLength:s=n.byteLength}=t;return n.readAsync(i,s)}}function C(e,t=[],n=0){const r=Math.fround(e),i=e-r;return t[n]=r,t[n+1]=i,t}function x(e){return e-Math.fround(e)}function P(e){const t=new Float32Array(32);for(let n=0;n<4;++n)for(let r=0;r<4;++r){const i=4*n+r;C(e[4*r+n],t,2*i)}return t}const M={ONE:1};const I={name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\nconst float SPLIT = 4097.0;\nfloat t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat a_hi = t * ONE - (t - a);\nfloat a_lo = a * ONE - a_hi;\n#else\nfloat a_hi = t - (t - a);\nfloat a_lo = a - a_hi;\n#endif\nreturn vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\nvec2 b = split(a.x);\nb.y += a.y;\nreturn b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat sum = (a + b) * ONE;\nfloat err = b - (sum - a) * ONE;\n#else\nfloat sum = a + b;\nfloat err = b - (sum - a);\n#endif\nreturn vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\nfloat s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) + (b - v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSub(float a, float b) {\nfloat s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) - (b + v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSqr(float a) {\nfloat prod = a * a;\nvec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\na_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\nfloat err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\nreturn vec2(prod, err);\n}\nvec2 twoProd(float a, float b) {\nfloat prod = a * b;\nvec2 a_fp64 = split(a);\nvec2 b_fp64 = split(b);\nfloat err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\na_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\nreturn vec2(prod, err);\n}\nvec2 sum_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSum(a.x, b.x);\nt = twoSum(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 sub_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSub(a.x, b.x);\nt = twoSub(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 mul_fp64(vec2 a, vec2 b) {\nvec2 prod = twoProd(a.x, b.x);\nprod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nprod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nreturn prod;\n}\nvec2 div_fp64(vec2 a, vec2 b) {\nfloat xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nvec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\nvec2 yn = a * xn;\n#endif\nfloat diff = (sub_fp64(a, mul_fp64(b, yn))).x;\nvec2 prod = twoProd(xn, diff);\nreturn sum_fp64(yn, prod);\n}\nvec2 sqrt_fp64(vec2 a) {\nif (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\nif (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\nfloat x = 1.0 / sqrt(a.x);\nfloat yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nvec2 yn_sqr = twoSqr(yn) * ONE;\n#else\nvec2 yn_sqr = twoSqr(yn);\n#endif\nfloat diff = sub_fp64(a, yn_sqr).x;\nvec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nreturn sum_fp64(split(yn), prod);\n#else\nreturn sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",getUniforms:function(){return M},fp64ify:C,fp64LowPart:x,fp64ifyMatrix4:P};function L(e){const{source:t,target:n,start:r=0,size:i,getData:s}=e,A=e.end||n.length,o=t.length,a=A-r;if(o>a)return void n.set(t.subarray(0,a),r);if(n.set(t,r),!s)return;let c=o;for(;c<a;){const e=s(c,t);for(let t=0;t<i;t++)n[r+c]=e[t]||0,c++}}function k(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${e}"`)}}function O(e){switch(e){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function B(e){e.push(e.shift())}function D({device:e,source:t,target:n}){return(!n||n.byteLength<t.byteLength)&&(n?.destroy(),n=e.createBuffer({byteLength:t.byteLength,usage:t.usage})),n}function N({device:e,buffer:t,attribute:n,fromLength:r,toLength:i,fromStartIndices:s,getData:A=(e=>e)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,c=n.byteOffset,l=n.settings.bytesPerElement<4?c/n.settings.bytesPerElement*4:c,u=n.startIndices,h=s&&u,d=n.isConstant;if(!h&&t&&r>=i)return t;const f=n.value instanceof Float64Array?Float32Array:n.value.constructor,p=d?n.value:new f(n.getBuffer().readSyncWebGL(c,i*f.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!d){const e=A;A=(t,r)=>n.normalizeConstant(e(t,r))}const g=d?(e,t)=>A(p,t):(e,t)=>A(p.subarray(e+c,e+c+a),t),_=t?new Float32Array(t.readSyncWebGL(l,4*r).buffer):new Float32Array(0),m=new Float32Array(i);return function({source:e,target:t,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!i||!s)return L({source:e,target:t,size:n,getData:r}),t;let A=0,o=0;const a=r&&((e,t)=>r(e+o,t)),c=Math.min(i.length,s.length);for(let l=1;l<c;l++){const r=i[l]*n,c=s[l]*n;L({source:e.subarray(A,r),target:t,start:o,end:c,size:n,getData:a}),A=r,o=c}o<t.length&&L({source:[],target:t,start:o,size:n,getData:a})}({source:_,target:m,sourceStartIndices:s,targetStartIndices:u,size:a,getData:g}),(!t||t.byteLength<m.byteLength+l)&&(t?.destroy(),t=e.createBuffer({byteLength:m.byteLength+l,usage:35050})),t.write(m,l),t}var F=n(707);class U{constructor({device:e,attribute:t,timeline:n}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new F.A(n),this.attribute=t,this.attributeInTransition=function(e){const{device:t,settings:n,value:r}=e,i=new v(t,n);return i.setData({value:r instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),i}(t),this.currentStartIndices=t.startIndices}get inProgress(){return this.transition.inProgress}start(e,t,n=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=function(e,t){const{doublePrecision:n,settings:r,value:i,size:s}=e,A=n&&i instanceof Float64Array?2:1;let o=0;const{shaderAttributes:a}=e.settings;if(a)for(const c of Object.values(a))o=Math.max(o,c.vertexOffset??0);return(r.noAlloc?i.length:(t+o)*s)*A}(this.attribute,t),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}const G="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",V="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n";function z(e){return e.doublePrecision&&e.value instanceof Float64Array}const j="#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",W="#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}";const H={interpolation:class extends U{constructor({device:e,attribute:t,timeline:n}){super({device:e,attribute:t,timeline:n}),this.type="interpolation",this.transform=function(e,t){const n=t.size,r=k(n),i=O(n),s=t.getBufferLayout();if(z(t))return new R(e,{vs:V,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*n}]}],modules:[I],defines:{ATTRIBUTE_TYPE:r,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0});return new R(e,{vs:G,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:s.attributes[0].format}],defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"],disableWarnings:!0})}(e,t)}start(e,t){const n=this.currentLength,r=this.currentStartIndices;if(super.start(e,t,e.duration),e.duration<=0)return void this.transition.cancel();const{buffers:i,attribute:s}=this;B(i),i[0]=N({device:this.device,buffer:i[0],attribute:s,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter}),i[1]=D({device:this.device,source:i[0],target:i[1]}),this.setBuffer(i[1]);const{transform:A}=this,o=A.model;let a=Math.floor(this.currentLength/s.size);z(s)&&(a/=2),o.setVertexCount(a),s.isConstant?(o.setAttributes({aFrom:i[0]}),o.setConstantAttributes({aTo:s.value})):o.setAttributes({aFrom:i[0],aTo:s.getBuffer()}),A.transformFeedback.setBuffers({vCurrent:i[1]})}onUpdate(){const{duration:e,easing:t}=this.settings,{time:n}=this.transition;let r=n/e;t&&(r=t(r));const{model:i}=this.transform;i.setUniforms({time:r}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}},spring:class extends U{constructor({device:e,attribute:t,timeline:n}){super({device:e,attribute:t,timeline:n}),this.type="spring",this.texture=function(e){return e.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}(e),this.framebuffer=function(e,t){return e.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[t]})}(e,this.texture),this.transform=function(e,t){const n=k(t.size),r=O(t.size);return new R(e,{vs:j,fs:W,bufferLayout:[{name:"aPrev",format:r},{name:"aCur",format:r},{name:"aTo",format:t.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}(e,t)}start(e,t){const n=this.currentLength,r=this.currentStartIndices;super.start(e,t);const{buffers:i,attribute:s}=this;for(let o=0;o<2;o++)i[o]=N({device:this.device,buffer:i[o],attribute:s,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter});i[2]=D({device:this.device,source:i[0],target:i[2]}),this.setBuffer(i[1]);const{model:A}=this.transform;A.setVertexCount(Math.floor(this.currentLength/s.size)),s.isConstant?A.setConstantAttributes({aTo:s.value}):A.setAttributes({aTo:s.getBuffer()})}onUpdate(){const{buffers:e,transform:t,framebuffer:n,transition:r}=this,i=this.settings;t.model.setAttributes({aPrev:e[0],aCur:e[1]}),t.transformFeedback.setBuffers({vNext:e[2]}),t.model.setUniforms({stiffness:i.stiffness,damping:i.damping}),t.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),B(e),this.setBuffer(e[1]);this.device.readPixelsToArrayWebGL(n)[0]>0||r.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}};class Q{constructor(e,{id:t,timeline:n}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=t,this.device=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:n}){this.numInstances=n||1;for(const r in e){const n=e[r],i=n.getTransitionSetting(t);i&&this._updateAttribute(r,n,i)}for(const r in this.transitions){const n=e[r];n&&n.getTransitionSetting(t)||this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}run(){if(0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,t,n){const r=this.transitions[e];let i=!r||r.type!==n.type;if(i){r&&this._removeTransition(e);const s=H[n.type];s?this.transitions[e]=new s({attribute:t,timeline:this.timeline,device:this.device}):(u.A.error(`unsupported transition type '${n.type}'`)(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const X="attributeManager.invalidate";class ${constructor(e,{id:t="attribute-manager",stats:n,timeline:r}={}){this.mergeBoundsMemoized=(0,y.A)(l._Z),this.id=t,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new Q(e,{id:`${t}-transitions`,timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const n=this._invalidateTrigger(e,t);(0,b.A)(X,this,e,n)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);(0,b.A)(X,this,"all")}update({data:e,numInstances:t,startIndices:n=null,transitions:r,props:i={},buffers:s={},context:A={}}){let o=!1;(0,b.A)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const a in this.attributes){const r=this.attributes[a],c=r.settings.accessor;r.startIndices=n,r.numInstances=t,i[a]&&u.A.removed(`props.${a}`,`data.attributes.${a}`)(),r.setExternalBuffer(s[a])||r.setBinaryValue("string"==typeof c?s[c]:void 0,e.startIndices)||"string"==typeof c&&!s[c]&&r.setConstantValue(i[c])||r.needsUpdate()&&(o=!0,this._updateAttribute({attribute:r,numInstances:t,data:e,props:i,context:A})),this.needsRedraw=this.needsRedraw||r.needsRedraw()}o&&(0,b.A)("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const t=e.map((e=>this.attributes[e]?.getBounds()));return this.mergeBoundsMemoized(t)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const i in t){const s=t[i];s.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=s)}return r}getBufferLayouts(e){return Object.values(this.getAttributes()).map((t=>t.getBufferLayout(e)))}_add(e,t){for(const n in e){const r=e[n],i={...r,id:n,size:(r.isIndexed?1:r.size)||1,...t};this.attributes[n]=new v(this.device,i)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes){this.attributes[t].getUpdateTriggers().forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)}))}this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:n,updateTriggers:r}=this,i=r[e];return i&&i.forEach((e=>{const r=n[e];r&&r.setNeedsUpdate(r.id,t)})),i}_updateAttribute(e){const{attribute:t,numInstances:n}=e;if((0,b.A)("attribute.updateStart",t),t.constant)return void t.setConstantValue(t.value);t.allocate(n)&&(0,b.A)("attribute.allocate",t,n);t.updateBuffer(e)&&(this.needsRedraw=!0,(0,b.A)("attribute.updateEnd",t,n))}}var Y=n(4315);class K extends F.A{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:n,duration:r,easing:i}}=this,s=i(e/r);this._value=(0,Y.Cc)(t,n,s)}}const Z=1e-5;function q(e,t,n,r,i){const s=t-e;return(n-t)*i+-s*r+s+t}function J(e,t){if(Array.isArray(e)){let n=0;for(let r=0;r<e.length;r++){const i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}class ee extends F.A{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:n,stiffness:r}=this.settings,{_prevValue:i=e,_currValue:s=e}=this;let A=function(e,t,n,r,i){if(Array.isArray(n)){const s=[];for(let A=0;A<n.length;A++)s[A]=q(e[A],t[A],n[A],r,i);return s}return q(e,t,n,r,i)}(i,s,t,n,r);const o=J(A,t),a=J(A,s);o<Z&&a<Z&&(A=t,this.end()),this._prevValue=s,this._currValue=A}}const te={interpolation:K,spring:ee};class ne{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,n,r){const{transitions:i}=this;if(i.has(e)){const n=i.get(e),{value:r=n.settings.fromValue}=n;t=r,this.remove(e)}if(!(r=E(r)))return;const s=te[r.type];if(!s)return void u.A.error(`unsupported transition type '${r.type}'`)();const A=new s(this.timeline);A.start({...r,fromValue:t,toValue:n}),i.set(e,A)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,n]of this.transitions)n.update(),e[t]=n.value,n.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}var re=n(8427);function ie(e,t){const n=Ae({newProps:e,oldProps:t,propTypes:e[re.fW],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=e;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t);let i=!1;return r||(i=function(e,t){if(null===t)return{all:!0};if("all"in e.updateTriggers){if(ce(e,t,"all"))return{all:!0}}const n={};let r=!1;for(const i in e.updateTriggers)if("all"!==i){ce(e,t,i)&&(n[i]=!0,r=!0)}return!!r&&n}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:ae(e,t),transitionsChanged:se(e,t)}}function se(e,t){if(!e.transitions)return!1;const n={},r=e[re.fW];let i=!1;for(const s in e.transitions){const A=r[s],o=A&&A.type;("number"===o||"color"===o||"array"===o)&&oe(e[s],t[s],A)&&(n[s]=!0,i=!0)}return!!i&&n}function Ae({newProps:e,oldProps:t,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(t===e)return!1;if("object"!=typeof e||null===e)return`${i} changed shallowly`;if("object"!=typeof t||null===t)return`${i} changed shallowly`;for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return`${i}.${s} added`;const n=oe(e[s],t[s],r[s]);if(n)return`${i}.${s} ${n}`}for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return`${i}.${s} dropped`;if(!Object.hasOwnProperty.call(e,s)){const n=oe(e[s],t[s],r[s]);if(n)return`${i}.${s} ${n}`}}return!1}function oe(e,t,n){let r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||(r=e&&t&&e.equals,!r||r.call(e,t))?r||t===e?null:"changed shallowly":"changed deeply"}function ae(e,t){if(null===t)return!0;const n=t.extensions,{extensions:r}=e;if(r===n)return!1;if(!n||!r)return!0;if(r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function ce(e,t,n){let r=e.updateTriggers[n];r=null==r?{}:r;let i=t.updateTriggers[n];i=null==i?{}:i;return Ae({oldProps:i,newProps:r,triggerName:n})}function le(e){if(null===(t=e)||"object"!=typeof t)throw new Error("count(): argument not an object");var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"==typeof e&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}var ue=n(6938),he=n(8624),de=n(6992),fe=n(7964),pe=n(6425),ge=n(9451);const _e=[0,0,0];function me(e,t,n=!1){const r=t.projectPosition(e);if(n&&t instanceof de.A){const[n,i,s=0]=e,A=t.getDistanceScales([n,i]);r[2]=s*A.unitsPerMeter[2]}return r}function Ee(e,{viewport:t,modelMatrix:n,coordinateSystem:r,coordinateOrigin:s,offsetMode:A}){let[o,a,c=0]=e;switch(n&&([o,a,c]=fe.Z0([],[o,a,c,1],n)),r){case i.rf.LNGLAT:return me([o,a,c],t,A);case i.rf.LNGLAT_OFFSETS:return me([o+s[0],a+s[1],c+(s[2]||0)],t,A);case i.rf.METER_OFFSETS:return me((0,ge.dT)(s,[o,a,c]),t,A);case i.rf.CARTESIAN:default:return t.isGeospatial?[o+s[0],a+s[1],c+s[2]]:t.projectPosition([o,a,c])}}function ve(e,t){const{viewport:n,coordinateSystem:r,coordinateOrigin:s,modelMatrix:A,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function(e){const{viewport:t,modelMatrix:n,coordinateOrigin:r}=e;let{coordinateSystem:s,fromCoordinateSystem:A,fromCoordinateOrigin:o}=e;return s===i.rf.DEFAULT&&(s=t.isGeospatial?i.rf.LNGLAT:i.rf.CARTESIAN),void 0===A&&(A=s),void 0===o&&(o=r),{viewport:t,coordinateSystem:s,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:A,fromCoordinateOrigin:o}}(t),{autoOffset:c=!0}=t,{geospatialOrigin:l=_e,shaderCoordinateOrigin:u=_e,offsetMode:h=!1}=c?(0,he.o)(n,r,s):{},d=Ee(e,{viewport:n,modelMatrix:A,coordinateSystem:o,coordinateOrigin:a,offsetMode:h});if(h){const e=n.projectPosition(l||u);pe.jb(d,d,e)}return d}var ye=n(5428);const be={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},we={};var Te=n(688);const Se={boolean:{validate:(e,t)=>!0,equal:(e,t,n)=>Boolean(e)===Boolean(t)},number:{validate:(e,t)=>Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)},color:{validate:(e,t)=>t.optional&&!e||xe(e)&&(3===e.length||4===e.length),equal:(e,t,n)=>(0,Te.b)(e,t,1)},accessor:{validate(e,t){const n=Pe(e);return"function"===n||n===Pe(t.value)},equal:(e,t,n)=>"function"==typeof t||(0,Te.b)(e,t,1)},array:{validate:(e,t)=>t.optional&&!e||xe(e),equal(e,t,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?(0,Te.b)(e,t,i):e===t}},object:{equal(e,t,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?(0,Te.b)(e,t,i):e===t}},function:{validate:(e,t)=>t.optional&&!e||"function"==typeof e,equal:(e,t,n)=>!n.compare&&!1!==n.ignore||e===t},data:{transform:(e,t,n)=>{if(!e)return e;const{dataTransform:r}=n.props;return r?r(e):"string"==typeof e.shape&&e.shape.endsWith("-table")&&Array.isArray(e.data)?e.data:e}},image:{transform:(e,t,n)=>{const r=n.context;return r&&r.device?function(e,t,n,r){if(n instanceof ye.g)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let i=null;n.compressed&&(i={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const s=t.createTexture({...n,sampler:{...be,...i,...r}});return we[s.id]=e,s}(n.id,r.device,e,{...t.parameters,...n.props.textureParameters}):null},release:(e,t,n)=>{var r,i;r=n.id,(i=e)&&i instanceof ye.g&&we[i.id]===r&&(i.delete(),delete we[i.id])}}};function Re(e,t){switch(Pe(t)){case"object":return Ce(e,t);case"array":return Ce(e,{type:"array",value:t,compare:!1});case"boolean":return Ce(e,{type:"boolean",value:t});case"number":return Ce(e,{type:"number",value:t});case"function":return Ce(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Ce(e,t){return"type"in t?{name:e,...Se[t.type],...t}:"value"in t?{name:e,type:Pe(t.value),...t}:{name:e,type:"object",value:t}}function xe(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function Pe(e){return xe(e)?"array":null===e?"null":typeof e}function Me(e,t){let n="_mergedDefaultProps";if(t)for(const i of t){const e=i.constructor;e&&(n+=`:${e.extensionName||e.name}`)}const r=ke(e,n);return r||(e[n]=function(e,t){if(!e.prototype)return null;const n=Me(Object.getPrototypeOf(e)),r=function(e){const t={},n={},r={};for(const[i,s]of Object.entries(e)){const e=s?.deprecatedFor;if(e)r[i]=Array.isArray(e)?e:[e];else{const e=Re(i,s);t[i]=e,n[i]=e.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(ke(e,"defaultProps")||{}),i=Object.assign(Object.create(null),n,r.defaultProps),s=Object.assign(Object.create(null),n?.[re.fW],r.propTypes),A=Object.assign(Object.create(null),n?.[re.uH],r.deprecatedProps);for(const o of t){const e=Me(o.constructor);e&&(Object.assign(i,e),Object.assign(s,e[re.fW]),Object.assign(A,e[re.uH]))}(function(e,t){const n=function(e){const t=e.componentName;t||u.A.warn(`${e.name}.componentName not specified`)();return t||e.name}(t);Object.defineProperties(e,{id:{writable:!0,value:n}})})(i,e),function(e,t){const n={},r={};for(const i in t){const e=t[i],{name:s,value:A}=e;e.async&&(n[s]=A,r[s]=Ie(s))}e[re.jA]=n,e[re.YN]={},Object.defineProperties(e,r)}(i,s),function(e,t){for(const n in t)Object.defineProperty(e,n,{enumerable:!1,set(e){const r=`${this.id}: ${n}`;for(const i of t[n])Le(this,i)||(this[i]=e);u.A.deprecated(r,t[n].join("/"))()}})}(i,A),i[re.fW]=s,i[re.uH]=A,0!==t.length||Le(e,"_propTypes")||(e._propTypes=s);return i}(e,t||[]))}function Ie(e){return{enumerable:!0,set(t){"string"==typeof t||t instanceof Promise||(0,f.Td)(t)?this[re.YN][e]=t:this[re.vf][e]=t},get(){if(this[re.vf]){if(e in this[re.vf]){return this[re.vf][e]||this[re.jA][e]}if(e in this[re.YN]){const t=this[re.r3]&&this[re.r3].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[re.jA][e]}}return this[re.jA][e]}}}function Le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ke(e,t){return Le(e,t)&&e[t]}let Oe=0;class Be{static{this.componentName="Component"}static{this.defaultProps={}}constructor(...e){this.props=function(e,t){let n;for(let s=t.length-1;s>=0;s--){const e=t[s];"extensions"in e&&(n=e.extensions)}const r=Me(e.constructor,n),i=Object.create(r);i[re.r3]=e,i[re.YN]={},i[re.vf]={};for(let s=0;s<t.length;++s){const e=t[s];for(const t in e)i[t]=e[t]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=Oe++}clone(e){const{props:t}=this,n={};for(const r in t[re.jA])r in t[re.vf]?n[r]=t[re.vf][r]:r in t[re.YN]&&(n[r]=t[re.YN][r]);return new this.constructor({...t,...n,...e})}}const De=Object.freeze({});class Ne extends class{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||De}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){this.component=e[re.r3]||this.component;const t=e[re.vf]||{},n=e[re.YN]||e,r=e[re.jA]||{};for(const i in t){const e=t[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,e),t[i]=this.getAsyncProp(i)}for(const i in n){const e=n[i];this._createAsyncPropData(i,r[i]),this._updateAsyncProp(i,e)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){this._didAsyncInputValueChange(e,t)&&("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise?this._watchPromise(e,t):(0,f.Td)(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const n=this.asyncProps[e];return t!==n.resolvedValue&&t!==n.lastValue&&(n.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(t=this._postProcessValue(n,t),n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,t,n){const r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;t.then((t=>{this.component&&(t=this._postProcessValue(n,t),this._setAsyncPropValue(e,t,r),this._onResolve(e,t))})).catch((t=>{this._onError(e,t)}))}}async _resolveAsyncIterable(e,t){if("data"!==e)return void this._setPropValue(e,t);const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let i=[],s=0;for await(const A of t){if(!this.component)return;const{dataTransform:t}=this.component.props;i=t?t(A,i):i.concat(A),Object.defineProperty(i,"__diff",{enumerable:!1,value:[{startRow:s,endRow:i.length}]}),s=i.length,this._setAsyncPropValue(e,i,r)}this._onResolve(e,i)}_postProcessValue(e,t){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(t,n,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const n=this.component&&this.component.props[re.fW];this.asyncProps[e]={type:n&&n[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}{constructor({attributeManager:e,layer:t}){super(t),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,t){const n=this.layer,r=n?.props.fetch;return r?r(t,{propName:e,layer:n}):super._fetch(e,t)}_onResolve(e,t){const n=this.layer;if(n){const r=n.props.onDataLoad;"data"===e&&r&&r(t,{propName:e,layer:n})}}_onError(e,t){const n=this.layer;n&&n.raiseError(t,`loading ${e} of ${this.layer}`)}}var Fe=n(2240);const Ue=2**24-1,Ge=Object.freeze([]),Ve=(0,y.A)((({oldViewport:e,viewport:t})=>e.equals(t)));let ze=new Uint8ClampedArray(0);const je={data:{type:"data",value:Ge,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:A}=n.context;i=i||n.getLoadOptions(),r=r||n.props.loaders,s&&(i={...i,fetch:{...i?.fetch,signal:s}});let o=A.contains(e);return o||i||(A.add({resourceId:e,data:(0,Fe.H)(e,r),persistent:!1}),o=!0),o?A.subscribe({resourceId:e,onChange:e=>n.internalState?.reloadAsyncProp(t,e),consumerId:n.id,requestId:t}):(0,Fe.H)(e,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:i.rf.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,100*-e]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class We extends Be{constructor(){super(...arguments),this.internalState=null,this.lifecycle=re.VD.NO_STATE,this.parent=null}static{this.defaultProps=je}static{this.layerName="Layer"}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){(0,d.A)(this.internalState);const t=this.internalState.viewport||this.context.viewport,n=Ee(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,i,s]=(0,ge.VJ)(n,t.pixelProjectionMatrix);return 2===e.length?[r,i]:[r,i,s]}unproject(e){(0,d.A)(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){(0,d.A)(this.internalState);return ve(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}setShaderModuleProps(...e){for(const t of this.getModels())t.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===i.rf.DEFAULT||e===i.rf.LNGLAT||e===i.rf.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){(0,d.A)(e instanceof Uint8Array);const[t,n,r]=e;return t+256*n+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:le(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){return this.getAttributeManager()?.getBounds(["positions","instancePositions"])}getShaders(e){e=(0,ue.n)(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const t of this.props.extensions)e=(0,ue.n)(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&t)if(Array.isArray(n))for(const r of n)t.invalidateAll(r);else t.invalidateAll();if(t){const{props:n}=e,r=this.internalState.hasPickingBuffer,i=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((e=>e.getNeedsPickingBuffer.call(this,e)));if(r!==i){this.internalState.hasPickingBuffer=i;const{pickingColors:e,instancePickingColors:n}=t.attributes,r=e||n;r&&(i&&r.constant&&(r.constant=!1,t.invalidate(r.id)),r.value||i||(r.constant=!0,r.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e,mode:t,sourceLayer:n}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){t&&(e=new Error(`${t}: ${e.message}`,{cause:e})),this.props.onError?.(e)||this.context?.onError?.(e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){return this.internalState?.uniformTransitions.active||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,t&&Ve({oldViewport:t,viewport:e})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){let t=!1;for(const n in e)e[n].layoutChanged()&&(t=!0);for(const n of this.getModels())this._setModelAttributes(n,e,t)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,n=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:n,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const i=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),n=Object.create(this.props);for(const e in t)Object.defineProperty(n,e,{value:t[e]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const n=Math.floor(ze.length/4);if(this.internalState.usesPickingColorCache=!0,n<t){t>Ue&&u.A.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ze=c.A.allocate(ze,t,{size:4,copy:!0,maxCount:Math.max(t,Ue)});const e=Math.floor(ze.length/4),r=[];for(let t=n;t<e;t++)this.encodePickingColor(t,r),ze[4*t+0]=r[0],ze[4*t+1]=r[1],ze[4*t+2]=r[2]}e.value=ze.subarray(0,4*t)}_setModelAttributes(e,t,n=!1){if(!Object.keys(t).length)return;if(n){const n=this.getAttributeManager();e.setBufferLayout(n.getBufferLayouts(e)),t=n.getAttributes()}const i=e.userData?.excludeAttributes||{},s={},A={};for(const o in t){if(i[o])continue;const n=t[o].getValue();for(const i in n){const a=n[i];a instanceof r.h?t[o].settings.isIndexed?e.setIndexBuffer(a):s[i]=a:a&&(A[i]=a)}}e.setAttributes(s),e.setConstantAttributes(A)}disablePickingIndex(e){const t=this.props.data;if(!("attributes"in t))return void this._disablePickingIndex(e);const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,s=i&&t.attributes&&t.attributes[i.id];if(s&&s.value){const n=s.value,r=this.encodePickingColor(e);for(let e=0;e<t.length;e++){const t=i.getVertexOffset(e);n[t]===r[0]&&n[t+1]===r[1]&&n[t+2]===r[2]&&this._disablePickingIndex(e)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:n}=this.getAttributeManager().attributes,r=t||n;if(!r)return;const i=r.getVertexOffset(e),s=r.getVertexOffset(e+1);r.buffer.write(new Uint8Array(s-i),i)}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,n=e||t;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==ze.buffer&&(n.value=ze.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){(0,d.A)(!this.internalState),(0,d.A)(Number.isFinite(this.props.coordinateSystem)),(0,b.A)("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Ne({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(u.A.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new ne(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){(0,b.A)("layer.matched",this,this===e);const{state:t,internalState:n}=e;this!==e&&(this.internalState=n,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if((0,b.A)("layer.update",this,e),!e)return;const t=this.props,n=this.context,r=this.internalState,i=n.viewport,s=this._updateUniformTransition();r.propsInTransition=s,n.viewport=r.viewport||i,this.props=s;try{const e=this._getUpdateParams(),s=this.getModels();if(n.device)this.updateState(e);else try{this.updateState(e)}catch(A){}for(const t of this.props.extensions)t.updateState.call(this,e,t);const o=this.getModels()[0]!==s[0];this._postUpdate(e,o)}finally{n.viewport=i,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){(0,b.A)("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,moduleParameters:t=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const A=this.props.opacity;n.opacity=Math.pow(A,1/2.2);try{if(t){const{isActive:e,isAttribute:n}=t.picking;this.setModuleParameters(t),this.setShaderModuleProps({picking:{isActive:e,isAttribute:n}})}const{getPolygonOffset:A}=this.props,o=A&&A(n)||[0,0];s.device.setParametersWebGL({polygonOffset:o});for(const e of this.getModels())e.setParameters(r);s.device.withParametersWebGL(r,(()=>{const i={renderPass:e,moduleParameters:t,uniforms:n,parameters:r,context:s};for(const e of this.props.extensions)e.draw.call(this,i,e);this.draw(i)}))}finally{this.props=i}}getChangeFlags(){return this.internalState?.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let n=!1;if("dataChanged"===r){const i=e[r],s=t[r];i&&Array.isArray(s)&&(t.dataChanged=Array.isArray(i)?s.concat(i):i,n=!0)}t[r]||(t[r]=e[r],n=!0),n&&(0,b.A)("layer.changeFlag",this,r,e)}const n=Boolean(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=n,t.somethingChanged=n||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const n=ie(e,t);if(n.updateTriggersChanged)for(const r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(const r in n.transitionsChanged)this.internalState.uniformTransitions.add(r,t[r],e[r],e.transitions?.[r]);return this.setChangeFlags(n)}validateProps(){!function(e){const t=e[re.fW];for(const n in t){const r=t[n],{validate:i}=r;if(i&&!i(e[n],r))throw new Error(`Invalid prop ${n}: ${e[n]}`)}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&"function"==typeof n&&(t.highlightColor=n(e)),this.setShaderModuleProps({picking:t}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new $(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:n,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const i=this.state.model;i?.isInstanced&&i.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:A,highlightColor:o}=n;if(t||r.autoHighlight!==s||r.highlightedObjectIndex!==A||r.highlightColor!==o){const e={};s||(e.highlightedObjectColor=null),Array.isArray(o)&&(e.highlightColor=o),(t||A!==r.highlightedObjectIndex)&&(e.highlightedObjectColor=Number.isFinite(A)&&A>=0?this.encodePickingColor(A):null),this.setShaderModuleProps({picking:e})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=!!n&&n.getNeedsRedraw(e);if(t=t||r,t)for(const i of this.props.extensions)i.onNeedsRedraw.call(this,i);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}},8427:(e,t,n)=>{"use strict";n.d(t,{VD:()=>r,YN:()=>a,fW:()=>s,jA:()=>o,r3:()=>i,uH:()=>A,vf:()=>c});const r={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},i=Symbol.for("component"),s=Symbol.for("propTypes"),A=Symbol.for("deprecatedProps"),o=Symbol.for("asyncPropDefaults"),a=Symbol.for("asyncPropOriginal"),c=Symbol.for("asyncPropResolved")},6690:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});const r={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\nfloat sin_taylor_fp32(float a) {\nfloat r, s, t, x;\nif (a == 0.0) {\nreturn 0.0;\n}\nx = -a * a;\ns = a;\nr = a;\nr = r * x;\nt = r * INVERSE_FACTORIAL_3;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_5;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_7;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_9;\ns = s + t;\nreturn s;\n}\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\nif (a == 0.0) {\nsin_t = 0.0;\ncos_t = 1.0;\n}\nsin_t = sin_taylor_fp32(a);\ncos_t = sqrt(1.0 - sin_t * sin_t);\n}\nfloat tan_taylor_fp32(float a) {\nfloat sin_a;\nfloat cos_a;\nif (a == 0.0) {\nreturn 0.0;\n}\nfloat z = floor(a / TWO_PI);\nfloat r = a - TWO_PI * z;\nfloat t;\nfloat q = floor(r / PI_2 + 0.5);\nint j = int(q);\nif (j < -2 || j > 2) {\nreturn 1.0 / 0.0;\n}\nt = r - PI_2 * q;\nq = floor(t / PI_16 + 0.5);\nint k = int(q);\nint abs_k = int(abs(float(k)));\nif (abs_k > 4) {\nreturn 1.0 / 0.0;\n} else {\nt = t - PI_16 * q;\n}\nfloat u = 0.0;\nfloat v = 0.0;\nfloat sin_t, cos_t;\nfloat s, c;\nsincos_taylor_fp32(t, sin_t, cos_t);\nif (k == 0) {\ns = sin_t;\nc = cos_t;\n} else {\nif (abs(float(abs_k) - 1.0) < 0.5) {\nu = COS_TABLE_0;\nv = SIN_TABLE_0;\n} else if (abs(float(abs_k) - 2.0) < 0.5) {\nu = COS_TABLE_1;\nv = SIN_TABLE_1;\n} else if (abs(float(abs_k) - 3.0) < 0.5) {\nu = COS_TABLE_2;\nv = SIN_TABLE_2;\n} else if (abs(float(abs_k) - 4.0) < 0.5) {\nu = COS_TABLE_3;\nv = SIN_TABLE_3;\n}\nif (k > 0) {\ns = u * sin_t + v * cos_t;\nc = u * cos_t - v * sin_t;\n} else {\ns = u * sin_t - v * cos_t;\nc = u * cos_t + v * sin_t;\n}\n}\nif (j == 0) {\nsin_a = s;\ncos_a = c;\n} else if (j == 1) {\nsin_a = c;\ncos_a = -s;\n} else if (j == -1) {\nsin_a = -c;\ncos_a = s;\n} else {\nsin_a = -s;\ncos_a = -c;\n}\nreturn sin_a / cos_a;\n}\n#endif\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nreturn tan_taylor_fp32(a);\n#else\nreturn tan(a);\n#endif\n}\n"},i="#define SMOOTH_EDGE_RADIUS 0.5",s={name:"geometry",vs:`\n${i}\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n`,fs:`\n${i}\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`};var A=n(6704);const o=`${Object.keys(A.rf).map((e=>`const int COORDINATE_SYSTEM_${e} = ${A.rf[e]};`)).join("")}\n${Object.keys(A.Kx).map((e=>`const int PROJECTION_MODE_${e} = ${A.Kx[e]};`)).join("")}\n${Object.keys(A.p5).map((e=>`const int UNIT_${e.toUpperCase()} = ${A.p5[e]};`)).join("")}\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject_uPseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project_uCommonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project_uWrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project_uModelMatrix * position;\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project_uCoordinateOrigin;\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project_uCommonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project_uCoordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\nreturn offset * project_uFocalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project_uScale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project_uScale;\n}\n`;var a=n(8624);const c={};const l={name:"project",dependencies:[r,s],vs:o,getUniforms:function(e=c){return"viewport"in e?(0,a.a)(e):{}}}},8624:(e,t,n)=>{"use strict";n.d(t,{a:()=>f,o:()=>d});var r=n(7964),i=n(3348),s=n(6704),A=n(251);const o=[0,0,0,0],a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=[0,0,0],u=[0,0,0],h=(0,A.A)((function({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:A}){const{projectionCenter:u,viewProjectionMatrix:h,originCommon:f,cameraPosCommon:p,shaderCoordinateOrigin:g,geospatialOrigin:_}=function(e,t,n){const{viewMatrixUncentered:s,projectionMatrix:A}=e;let{viewMatrix:c,viewProjectionMatrix:l}=e,u=o,h=o,f=e.cameraPosition;const{geospatialOrigin:p,shaderCoordinateOrigin:g,offsetMode:_}=d(e,t,n);_&&(h=e.projectPosition(p||g),f=[f[0]-h[0],f[1]-h[1],f[2]-h[2]],h[3]=1,u=r.Z0([],h,l),c=s||c,l=i.lw([],A,c),l=i.lw([],l,a));return{viewMatrix:c,viewProjectionMatrix:l,projectionCenter:u,originCommon:h,cameraPosCommon:f,shaderCoordinateOrigin:g,geospatialOrigin:p}}(e,n,A),m=e.getDistanceScales(),E=[e.width*t,e.height*t],v=r.Z0([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,y={project_uCoordinateSystem:n,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:g,project_uCommonOrigin:f.slice(0,3),project_uCenter:u,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:E,project_uDevicePixelRatio:t,project_uFocalDistance:v,project_uCommonUnitsPerMeter:m.unitsPerMeter,project_uCommonUnitsPerWorldUnit:m.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:l,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:h,project_uModelMatrix:c,project_uCameraPosition:p};if(_){const t=e.getDistanceScales(_);switch(n){case s.rf.METER_OFFSETS:y.project_uCommonUnitsPerWorldUnit=t.unitsPerMeter,y.project_uCommonUnitsPerWorldUnit2=t.unitsPerMeter2;break;case s.rf.LNGLAT:case s.rf.LNGLAT_OFFSETS:e._pseudoMeters||(y.project_uCommonUnitsPerMeter=t.unitsPerMeter),y.project_uCommonUnitsPerWorldUnit=t.unitsPerDegree,y.project_uCommonUnitsPerWorldUnit2=t.unitsPerDegree2;break;case s.rf.CARTESIAN:y.project_uCommonUnitsPerWorldUnit=[1,1,t.unitsPerMeter[2]],y.project_uCommonUnitsPerWorldUnit2=[0,0,t.unitsPerMeter2[2]]}}return y}));function d(e,t,n=u){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,A=!0;switch(r=t===s.rf.LNGLAT_OFFSETS||t===s.rf.METER_OFFSETS?n:e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case s.Kx.WEB_MERCATOR:t!==s.rf.LNGLAT&&t!==s.rf.CARTESIAN||(r=[0,0,0],A=!1);break;case s.Kx.WEB_MERCATOR_AUTO_OFFSET:t===s.rf.LNGLAT?i=r:t===s.rf.CARTESIAN&&(i=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],r=e.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case s.Kx.IDENTITY:i=e.position.map(Math.fround),i[2]=i[2]||0;break;case s.Kx.GLOBE:A=!1,r=null;break;default:A=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:A}}function f({viewport:e,devicePixelRatio:t=1,modelMatrix:n=null,coordinateSystem:r=s.rf.DEFAULT,coordinateOrigin:i=u,autoWrapLongitude:A=!1}){r===s.rf.DEFAULT&&(r=e.isGeospatial?s.rf.LNGLAT:s.rf.CARTESIAN);const o=h({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=A,o.project_uModelMatrix=n||c,o}},4299:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(9873),i=n(4315),s=n(9451);const A={bearing:0,pitch:0,position:[0,0,0]},o={speed:1.2,curve:1.414};class a extends r.A{constructor(e={}){super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),this.opts={...o,...e}}interpolateProps(e,t,n){const r=(0,s.rj)(e,t,n,this.opts);for(const s in A)r[s]=(0,i.Cc)(e[s]||A[s],t[s]||A[s],n);return r}getDuration(e,t){let{transitionDuration:n}=t;return"auto"===n&&(n=(0,s.v7)(e,t,this.opts)),n}}},9873:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(4315),i=n(1829);class s{constructor(e){const{compare:t,extract:n,required:r}=e;this._propsToCompare=t,this._propsToExtract=n||t,this._requiredProps=r}arePropsEqual(e,t){for(const n of this._propsToCompare)if(!(n in e)||!(n in t)||!(0,r.aI)(e[n],t[n]))return!1;return!0}initializeProps(e,t){const n={},r={};for(const i of this._propsToExtract)(i in e||i in t)&&(n[i]=e[i],r[i]=t[i]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach((t=>{const n=e[t];(0,i.A)(Number.isFinite(n)||Array.isArray(n),`${t} is required for transition`)}))}}},707:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class r{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=e,this._inProgress=!0,this.settings.onStart?.(this)}end(){this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd?.(this))}cancel(){this._inProgress&&(this.settings.onInterrupt?.(this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:e,settings:t}=this;this._handle=e.addChannel({delay:e.getTime(),duration:t.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate?.(this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}},1829:(e,t,n)=>{"use strict";function r(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}n.d(t,{A:()=>r})},688:(e,t,n)=>{"use strict";function r(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!r(e[i],t[i],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const A of i){if(!t.hasOwnProperty(A))return!1;if(!r(e[A],t[A],n-1))return!1}return!0}return!1}n.d(t,{b:()=>r})},5801:(e,t,n)=>{"use strict";function r(e,t=(()=>!0)){return Array.isArray(e)?i(e,t,[]):t(e)?[e]:[]}function i(e,t,n){let r=-1;for(;++r<e.length;){const s=e[r];Array.isArray(s)?i(s,t,n):t(s)&&n.push(s)}return n}function s({target:e,source:t,start:n=0,count:r=1}){const i=t.length,s=r*i;let A=0;for(let o=n;A<i;A++)e[o++]=t[A];for(;A<s;)A<s-A?(e.copyWithin(n+A,n,n+A),A*=2):(e.copyWithin(n+A,n,n+s-A),A=s);return e}n.d(t,{B:()=>r,R:()=>s})},1729:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,Td:()=>A,X:()=>s});const r=[],i=[];function s(e,t=0,n=1/0){let s=r;const A={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?s=e:e.length>0&&(i.length=e.length,s=i):s=r,(t>0||Number.isFinite(n))&&(s=(Array.isArray(s)?s:Array.from(s)).slice(t,n),A.index=t-1),{iterable:s,objectInfo:A}}function A(e){return e&&e[Symbol.asyncIterator]}function o(e,t){const{size:n,stride:r,offset:i,startIndices:s,nested:A}=t,o=e.BYTES_PER_ELEMENT,a=r?r/o:n,c=i?i/o:0,l=Math.floor((e.length-c)/a);return(t,{index:r,target:i})=>{if(!s){const t=r*a+c;for(let r=0;r<n;r++)i[r]=e[t+r];return i}const o=s[r],u=s[r+1]||l;let h;if(A){h=new Array(u-o);for(let t=o;t<u;t++){const r=t*a+c;i=new Array(n);for(let t=0;t<n;t++)i[t]=e[r+t];h[t-o]=i}}else if(a===n)h=e.subarray(o*n+c,u*n+c);else{h=new e.constructor((u-o)*n);let t=0;for(let r=o;r<u;r++){const i=r*a+c;for(let r=0;r<n;r++)h[t++]=e[i+r]}}return h}}},8277:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=new(n(5335).t)({id:"deck"})},453:(e,t,n)=>{"use strict";n.d(t,{$M:()=>s,Vl:()=>A,_Z:()=>h,cT:()=>u,on:()=>o});var r=n(8457),i=n(5427);function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function A(e){return[e[12],e[13],e[14]]}function o(e){return{left:c(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:c(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:c(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:c(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:c(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:c(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const a=new i.P;function c(e,t,n,r){a.set(e,t,n);const s=a.len();return{distance:r/s,normal:new i.P(-e/s,-t/s,-n/s)}}let l;function u(e,t){const{size:n=1,startIndex:i=0}=t,s=void 0!==t.endIndex?t.endIndex:e.length,A=(s-i)/n;l=r.A.allocate(l,A,{type:Float32Array,size:2*n});let o=i,a=0;for(;o<s;){for(let t=0;t<n;t++){const r=e[o++];l[a+t]=r,l[a+t+n]=(c=r)-Math.fround(c)}a+=2*n}var c;return l.subarray(0,A*n*2)}function h(e){let t=null,n=!1;for(const r of e)r&&(t?(n||(t=[[t[0][0],t[0][1]],[t[1][0],t[1][1]]],n=!0),t[0][0]=Math.min(t[0][0],r[0][0]),t[0][1]=Math.min(t[0][1],r[0][1]),t[1][0]=Math.max(t[1][0],r[1][0]),t[1][1]=Math.max(t[1][1],r[1][1])):t=r);return t}},251:(e,t,n)=>{"use strict";function r(e,t){if(e===t)return!0;if(Array.isArray(e)){const n=e.length;if(!t||t.length!==n)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function i(e){let t,n={};return i=>{for(const s in i)if(!r(i[s],n[s])){t=e(i),n=i;break}return t}}n.d(t,{A:()=>i})},6938:(e,t,n)=>{"use strict";function r(e,t){if(!t)return e;const n={...e,...t};if("defines"in t&&(n.defines={...e.defines,...t.defines}),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((e=>"project64"===e.name)))){const e=n.modules.findIndex((e=>"project32"===e.name));e>=0&&n.modules.splice(e,1)}if("inject"in t)if(e.inject){const r={...e.inject};for(const e in t.inject)r[e]=(r[e]||"")+t.inject[e];n.inject=r}else n.inject=t.inject;return n}n.d(t,{n:()=>r})},8457:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=new class{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:n=1,type:r,padding:i=0,copy:s=!1,initialize:A=!1,maxCount:o}){const a=r||e&&e.constructor||Float32Array,c=t*n+i;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new a(e.buffer,0,c)}let l=1/0;o&&(l=o*n+i);const u=this._allocate(a,c,A,l);return e&&s?u.set(e):A||u.fill(0,0,4),this._release(e),u}release(e){this._release(e)}_allocate(e,t,n,r){let i=Math.max(Math.ceil(t*this.opts.overAlloc),1);i>r&&(i=r);const s=this._pool,A=e.BYTES_PER_ELEMENT*i,o=s.findIndex((e=>e.byteLength>=A));if(o>=0){const t=new e(s.splice(o,1)[0],0,i);return n&&t.fill(0),t}return new e(i)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:n}=e,{byteLength:r}=n,i=t.findIndex((e=>e.byteLength>=r));i<0?t.push(n):(i>0||t.length<this.opts.poolSize)&&t.splice(i,0,n),t.length>this.opts.poolSize&&t.shift()}}},5775:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(8277),i=n(453),s=n(2879),A=n(4315),o=n(5427),a=n(3348),c=n(9451),l=n(6704);const u=Math.PI/180,h=(0,i.$M)(),d=[0,0,0],f={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class p{static{this.displayName="Viewport"}constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||f,this.focalDistance=e.focalDistance||1,this.position=e.position||d,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?l.Kx.WEB_MERCATOR:l.Kx.WEB_MERCATOR_AUTO_OFFSET:l.Kx.IDENTITY}equals(e){return e instanceof p&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&(0,A.aI)(e.projectionMatrix,this.projectionMatrix)&&(0,A.aI)(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const n=this.projectPosition(e),r=(0,c.VJ)(n,this.pixelProjectionMatrix),[i,s]=r,A=t?s:this.height-s;return 2===e.length?[i,A]:[i,A,r[2]]}unproject(e,{topLeft:t=!0,targetZ:n}={}){const[r,i,s]=e,A=t?i:this.height-i,o=n&&n*this.distanceScales.unitsPerMeter[2],a=(0,c.xJ)([r,A,s],this.pixelUnprojectionMatrix,o),[l,u,h]=this.unprojectPosition(a);return Number.isFinite(s)?[l,u,h]:Number.isFinite(n)?[l,u,n]:[l,u]}projectPosition(e){const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=(0,c.Gw)(e);return t[1]=(0,A.qE)(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?(0,c.iV)(e):e}getBounds(e={}){const t={targetZ:e.z||0},n=this.unproject([0,0],t),r=this.unproject([this.width,0],t),i=this.unproject([0,this.height],t),s=this.unproject([this.width,this.height],t);return[Math.min(n[0],r[0],i[0],s[0]),Math.min(n[1],r[1],i[1],s[1]),Math.max(n[0],r[0],i[0],s[0]),Math.max(n[1],r[1],i[1],s[1])]}getDistanceScales(e){return e?(0,c.nI)({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:n=1,height:r=1}){return e<this.x+this.width&&this.x<e+n&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(0,i.on)(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=(0,c.fO)({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||(0,c.nI)({latitude:n,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:i,modelMatrix:A}=e;let a=d;if(i&&(a=A?new s.k(A).transformAsVector(i,[]):i),this.isGeospatial){const e=this.projectPosition([t,n,0]);this.center=new o.P(a).scale(this.distanceScales.unitsPerMeter).add(e)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=h,projectionMatrix:n=null,orthographic:c=!1,fovyRadians:l,fovy:d=75,near:f=.1,far:p=1e3,padding:g=null,focalDistance:_=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new s.k).multiplyRight(t).translate(new o.P(this.center).negate()),this.projectionMatrix=n||function({width:e,height:t,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:a,far:c}){const l=e/t,u=n?(new s.k).orthographic({fovy:r,aspect:l,focalDistance:i,near:a,far:c}):(new s.k).perspective({fovy:r,aspect:l,near:a,far:c});if(o){const{left:n=0,right:r=0,top:i=0,bottom:s=0}=o,a=(0,A.qE)((n+e-r)/2,0,e)-e/2,c=(0,A.qE)((i+t-s)/2,0,t)-t/2;u[8]-=2*a/e,u[9]+=2*c/t}return u}({width:this.width,height:this.height,orthographic:c,fovyRadians:l||d*u,focalDistance:_,padding:g,near:f,far:p});const m=(0,i.$M)();a.lw(m,m,this.projectionMatrix),a.lw(m,m,this.viewMatrix),this.viewProjectionMatrix=m,this.viewMatrixInverse=a.B8([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,i.Vl)(this.viewMatrixInverse);const E=(0,i.$M)(),v=(0,i.$M)();a.hs(E,E,[this.width/2,-this.height/2,1]),a.Tl(E,E,[1,-1,0]),a.lw(v,E,this.viewProjectionMatrix),this.pixelProjectionMatrix=v,this.pixelUnprojectionMatrix=a.B8((0,i.$M)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||r.A.warn("Pixel project matrix not invertible")()}}},6992:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(5775),i=n(9451),s=n(4315),A=n(2879),o=n(9210);class a extends r.A{static{this.displayName="WebMercatorViewport"}constructor(e={}){const{latitude:t=0,longitude:n=0,zoom:r=0,pitch:o=0,bearing:a=0,nearZMultiplier:c=.1,farZMultiplier:l=1.01,nearZ:u,farZ:h,orthographic:d=!1,projectionMatrix:f,repeat:p=!1,worldOffset:g=0,position:_,padding:m,legacyMeterSizes:E=!1}=e;let{width:v,height:y,altitude:b=1.5}=e;const w=Math.pow(2,r);let T;v=v||1,y=y||1;let S=null;if(f)b=f[5]/2,T=(0,i.Os)(b);else{let n;if(e.fovy?(T=e.fovy,b=(0,i.wZ)(T)):T=(0,i.Os)(b),m){const{top:e=0,bottom:t=0}=m;n=[0,(0,s.qE)((e+y-t)/2,0,y)-y/2]}S=(0,i.om)({width:v,height:y,scale:w,center:_&&[0,0,_[2]*(0,i.mY)(t)],offset:n,pitch:o,fovy:T,nearZMultiplier:c,farZMultiplier:l}),Number.isFinite(u)&&(S.near=u),Number.isFinite(h)&&(S.far=h)}let R=(0,i.rY)({height:y,pitch:o,bearing:a,scale:w,altitude:b});if(g){R=(new A.k).translate([512*g,0,0]).multiplyLeft(R)}super({...e,width:v,height:y,viewMatrix:R,longitude:n,latitude:t,zoom:r,...S,fovy:T,focalDistance:b}),this.latitude=t,this.longitude=n,this.zoom=r,this.pitch=o,this.bearing=a,this.altitude=b,this.fovy=T,this.orthographic=d,this._subViewports=p?[]:null,this._pseudoMeters=E,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let r=t;r<=n;r++){const e=r?new a({...this,worldOffset:r}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,n]=this.projectFlat(e);return[t,n,(e[2]||0)*(0,i.mY)(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,n]=this.unprojectFlat(e);return[t,n,(e[2]||0)/(0,i.mY)(n)]}addMetersToLngLat(e,t){return(0,i.dT)(e,t)}panByPosition(e,t){const n=(0,i.xJ)(t,this.pixelUnprojectionMatrix),r=this.projectFlat(e),s=o.WQ([],r,o.ze([],n)),A=o.WQ([],this.center,s),[a,c]=this.unprojectFlat(A);return{longitude:a,latitude:c}}getBounds(e={}){const t=(0,i.gW)(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:n,height:r}=this,{longitude:s,latitude:A,zoom:o}=(0,i.Fe)({width:n,height:r,bounds:e,...t});return new a({width:n,height:r,longitude:s,latitude:A,zoom:o})}}},3485:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(688);class i{static{this.defaultProps={}}static{this.extensionName="LayerExtension"}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){e&&(this.opts=e)}equals(e){return this===e||this.constructor===e.constructor&&(0,r.b)(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:t}=e.constructor,n={updateTriggers:{}};for(const r in t)if(r in this.props){const e=t[r],i=this.props[r];n[r]=i,e&&"accessor"===e.type&&(n.updateTriggers[r]=this.props.updateTriggers[r],"function"==typeof i&&(n[r]=this.getSubLayerAccessor(i)))}return n}initializeState(e,t){}updateState(e,t){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,t){}finalizeState(e,t){}}var s=n(6938),A=n(6425);const o={inject:{"vs:#decl":"\nin vec2 instanceDashArrays;\nin float instanceDashOffsets;\nout vec2 vDashArray;\nout float vDashOffset;\n","vs:#main-end":"\nvDashArray = instanceDashArrays;\nvDashOffset = instanceDashOffsets / width.x;\n","fs:#decl":"\nuniform float dashAlignMode;\nuniform float capType;\nuniform bool dashGapPickable;\nin vec2 vDashArray;\nin float vDashOffset;\n","fs:#main-start":"\nfloat solidLength = vDashArray.x;\nfloat gapLength = vDashArray.y;\nfloat unitLength = solidLength + gapLength;\nfloat offset;\nif (unitLength > 0.0) {\nif (dashAlignMode == 0.0) {\noffset = vDashOffset;\n} else {\nunitLength = vPathLength / round(vPathLength / unitLength);\noffset = solidLength / 2.0;\n}\nfloat unitOffset = mod(vPathPosition.y + offset, unitLength);\nif (gapLength > 0.0 && unitOffset > solidLength) {\nif (capType <= 0.5) {\nif (!(dashGapPickable && bool(picking.isActive))) {\ndiscard;\n}\n} else {\nfloat distToEnd = length(vec2(\nmin(unitOffset - solidLength, unitLength - unitOffset),\nvPathPosition.x\n));\nif (distToEnd > 1.0) {\nif (!(dashGapPickable && bool(picking.isActive))) {\ndiscard;\n}\n}\n}\n}\n}\n"}},a={inject:{"vs:#decl":"\nin float instanceOffsets;\n","vs:DECKGL_FILTER_SIZE":"\nfloat offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\nsize *= offsetWidth;\n","vs:#main-end":"\nfloat offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\nfloat offsetDir = sign(instanceOffsets);\nvPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;\nvPathPosition.y *= offsetWidth;\nvPathLength *= offsetWidth;\n","fs:#main-start":"\nfloat isInside;\nisInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);\nif (isInside == 0.0) {\ndiscard;\n}\n"}},c={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};class l extends i{static{this.defaultProps=c}static{this.extensionName="PathStyleExtension"}constructor({dash:e=!1,offset:t=!1,highPrecisionDash:n=!1}={}){super({dash:e||n,offset:t,highPrecisionDash:n})}isEnabled(e){return"pathTesselator"in e.state}getShaders(e){if(!e.isEnabled(this))return null;let t={};return e.opts.dash&&(t=(0,s.n)(t,o)),e.opts.offset&&(t=(0,s.n)(t,a)),t}initializeState(e,t){const n=this.getAttributeManager();n&&t.isEnabled(this)&&(t.opts.dash&&n.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"},instanceDashOffsets:t.opts.highPrecisionDash?{size:1,accessor:"getPath",transform:t.getDashOffsets.bind(this)}:{size:1,update:e=>{e.constant=!0,e.value=[0]}}}),t.opts.offset&&n.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(e,t){if(!t.isEnabled(this))return;const n={};t.opts.dash&&(n.dashAlignMode=this.props.dashJustified?1:0,n.dashGapPickable=Boolean(this.props.dashGapPickable)),this.state.model?.setUniforms(n)}getDashOffsets(e){const t=[0],n="XY"===this.props.positionFormat?2:3,r=Array.isArray(e[0]),i=r?e.length:e.length/n;let s,o;for(let a=0;a<i-1;a++)s=r?e[a]:e.slice(a*n,a*n+n),s=this.projectPosition(s),a>0&&(t[a]=t[a-1]+A.xg(o,s)),o=s;return t[i-1]=0,t}}},2420:(e,t,n)=>{"use strict";n.d(t,{A:()=>Fe});var r=n(7304),i=n(1420),s=n(7277),A=n(5801),o=n(8427);class a extends i.A{static{this.layerName="CompositeLayer"}get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((e=>e.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id?(e.object=t.__source.object,e.index=t.__source.index,e):e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||t}getSubLayerRow(e,t,n){return e.__source={parent:this,object:t,index:n},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(t.index=n.__source.index,e(n.__source.object,t)):e(n,r)}return e}getSubLayerProps(e={}){const{opacity:t,pickable:n,visible:r,parameters:i,getPolygonOffset:s,highlightedObjectIndex:A,autoHighlight:a,highlightColor:c,coordinateSystem:l,coordinateOrigin:u,wrapLongitude:h,positionFormat:d,modelMatrix:f,extensions:p,fetch:g,operation:_,_subLayerProps:m}=this.props,E={id:"",updateTriggers:{},opacity:t,pickable:n,visible:r,parameters:i,getPolygonOffset:s,highlightedObjectIndex:A,autoHighlight:a,highlightColor:c,coordinateSystem:l,coordinateOrigin:u,wrapLongitude:h,positionFormat:d,modelMatrix:f,extensions:p,fetch:g,operation:_},v=m&&e.id&&m[e.id],y=v&&v.updateTriggers,b=e.id||"sublayer";if(v){const t=this.props[o.fW],n=e.type?e.type._propTypes:{};for(const e in v){const r=n[e]||t[e];r&&"accessor"===r.type&&(v[e]=this.getSubLayerAccessor(v[e]))}}Object.assign(E,e,v),E.id=`${this.props.id}-${b}`,E.updateTriggers={all:this.props.updateTriggers?.all,...e.updateTriggers,...y};for(const o of p){const e=o.getSubLayerProps.call(this,o);e&&Object.assign(E,e,{updateTriggers:Object.assign(E.updateTriggers,e.updateTriggers)})}return E}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){const e=this.renderLayers();n=(0,A.B)(e,Boolean),this.internalState.subLayers=n}(0,s.A)("compositeLayer.renderLayers",this,r,n);for(const i of n)i.parent=this}}var c=n(1729),l=n(8277);const u={name:"project32",dependencies:[n(6690).A],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},h="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\nvec3 color;\n};\nstruct PointLight {\nvec3 color;\nvec3 position;\nvec3 attenuation;\n};\nstruct DirectionalLight {\nvec3 color;\nvec3 direction;\n};\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\nuniform bool lighting_uEnabled;\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\nreturn pointLight.attenuation.x\n+ pointLight.attenuation.y * distance\n+ pointLight.attenuation.z * distance * distance;\n}\n#endif\n",d={lightSources:{}};function f(e={}){const{color:t=[0,0,0],intensity:n=1}=e;return t.map((e=>e*n/255))}const p={name:"lights",vs:h,fs:h,getUniforms:function e(t=d){if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},function({ambientLight:e,pointLights:t=[],directionalLights:n=[]}){const r={};return r["lighting_uAmbientLight.color"]=e?f(e):[0,0,0],t.forEach(((e,t)=>{r[`lighting_uPointLight[${t}].color`]=f(e),r[`lighting_uPointLight[${t}].position`]=e.position,r[`lighting_uPointLight[${t}].attenuation`]=e.attenuation||[1,0,0]})),r.lighting_uPointLightCount=t.length,n.forEach(((e,t)=>{r[`lighting_uDirectionalLight[${t}].color`]=f(e),r[`lighting_uDirectionalLight[${t}].direction`]=e.direction})),r.lighting_uDirectionalLightCount=n.length,r}({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const n={pointLights:[],directionalLights:[]};for(const e of t.lights||[])switch(e.type){case"ambient":n.ambientLight=e;break;case"directional":n.directionalLights?.push(e);break;case"point":n.pointLights?.push(e)}return e({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},g="uniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\nvec3 halfway_direction = normalize(light_direction + view_direction);\nfloat lambertian = dot(light_direction, normal_worldspace);\nfloat specular = 0.0;\nif (lambertian > 0.0) {\nfloat specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\nspecular = pow(specular_angle, lighting_uShininess);\n}\nlambertian = max(lambertian, 0.0);\nreturn (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\nvec3 lightColor = surfaceColor;\nif (lighting_uEnabled) {\nvec3 view_direction = normalize(cameraPosition - position_worldspace);\nlightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uPointLightCount) {\nbreak;\n}\nPointLight pointLight = lighting_uPointLight[i];\nvec3 light_position_worldspace = pointLight.position;\nvec3 light_direction = normalize(light_position_worldspace - position_worldspace);\nlightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n}\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uDirectionalLightCount) {\nbreak;\n}\nDirectionalLight directionalLight = lighting_uDirectionalLight[i];\nlightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n}\n}\nreturn lightColor;\n}\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\nvec3 lightColor = vec3(0, 0, 0);\nvec3 surfaceColor = vec3(0, 0, 0);\nif (lighting_uEnabled) {\nvec3 view_direction = normalize(cameraPosition - position_worldspace);\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uPointLightCount) {\nbreak;\n}\nPointLight pointLight = lighting_uPointLight[i];\nvec3 light_position_worldspace = pointLight.position;\nvec3 light_direction = normalize(light_position_worldspace - position_worldspace);\nlightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n}\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uDirectionalLightCount) {\nbreak;\n}\nDirectionalLight directionalLight = lighting_uDirectionalLight[i];\nlightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n}\n}\nreturn lightColor;\n}\n",_={};function m(e=_){if(!("material"in e))return{};const{material:t}=e;return t?function(e){const{ambient:t=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map((e=>e/255))}}(t):{lighting_uEnabled:!1}}const E={name:"gouraud-lighting",dependencies:[p],vs:g,defines:{LIGHTING_VERTEX:1},getUniforms:m},v={name:"phong-lighting",dependencies:[p],fs:g,defines:{LIGHTING_FRAGMENT:1},getUniforms:m},y=new Float32Array([0,1,1,1]),b={name:"picking",vs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nout vec4 picking_vRGBcolor_Avalid;\nvec3 picking_normalizeColor(vec3 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nvec4 picking_normalizeColor(vec4 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nbool picking_isColorZero(vec3 color) {\nreturn dot(color, vec3(1.0)) < 0.00001;\n}\nbool picking_isColorValid(vec3 color) {\nreturn dot(color, vec3(1.0)) > 0.00001;\n}\nbool isVertexHighlighted(vec3 vertexColor) {\nvec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\nreturn\nbool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\nvoid picking_setPickingColor(vec3 pickingColor) {\npickingColor = picking_normalizeColor(pickingColor);\nif (bool(picking.isActive)) {\npicking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\nif (!bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = pickingColor;\n}\n} else {\npicking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n}\n}\nvoid picking_setPickingAttribute(float value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.r = value;\n}\n}\nvoid picking_setPickingAttribute(vec2 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rg = value;\n}\n}\nvoid picking_setPickingAttribute(vec3 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = value;\n}\n}\n",fs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\nif (picking.isActive > 0.5) {\nreturn color;\n}\nbool selected = bool(picking_vRGBcolor_Avalid.a);\nif (selected) {\nfloat highLightAlpha = picking.highlightColor.a;\nfloat blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\nfloat highLightRatio = highLightAlpha / blendedAlpha;\nvec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\nreturn vec4(blendedRGB, blendedAlpha);\n} else {\nreturn color;\n}\n}\nvec4 picking_filterPickingColor(vec4 color) {\nif (bool(picking.isActive)) {\nif (picking_vRGBcolor_Avalid.a == 0.0) {\ndiscard;\n}\nreturn picking_vRGBcolor_Avalid;\n}\nreturn color;\n}\nvec4 picking_filterColor(vec4 color) {\nvec4 highlightColor = picking_filterHighlightColor(color);\nreturn picking_filterPickingColor(highlightColor);\n}\n",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:new Float32Array([0,0,0]),highlightColor:y},getUniforms:function(e={},t){const n={};if(void 0===e.highlightedObjectColor);else if(null===e.highlightedObjectColor)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const t=e.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=t}if(e.highlightColor){const t=Array.from(e.highlightColor,(e=>e/255));Number.isFinite(t[3])||(t[3]=1),n.highlightColor=t}void 0!==e.isActive&&(n.isActive=Boolean(e.isActive),n.isAttribute=Boolean(e.isAttribute));void 0!==e.useFloatColors&&(n.useFloatColors=Boolean(e.useFloatColors));return n}};const w={...b,defaultUniforms:{...b.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}};var T=n(6704),S=n(457),R=n(9038),C=n(290);class x{id;topology;vertexCount;indices;attributes;userData={};constructor(e){const{attributes:t={},indices:n=null,vertexCount:r=null}=e;this.id=e.id||(0,R.L)("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[i,s]of Object.entries(t)){const e=ArrayBuffer.isView(s)?{value:s}:s;(0,C.v)(ArrayBuffer.isView(e.value),`${this._print(i)}: must be typed array or object with value as typed array`),"POSITION"!==i&&"positions"!==i||e.size||(e.size=3),"indices"===i?((0,C.v)(!this.indices),this.indices=e):this.attributes[i]=e}this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=r||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,t){return this}_calculateVertexCount(e,t){if(t)return t.value.length;let n=1/0;for(const r of Object.values(e)){const{value:e,size:t,constant:i}=r;!i&&e&&t>=1&&(n=Math.min(n,e.length/t))}return(0,C.v)(Number.isFinite(n)),n}}var P=n(6570);const M=1,I=-1;function L(e,t,n={}){const r=function(e,t={}){return Math.sign(function(e,t={}){const{start:n=0,end:r=e.length,plane:i="xy"}=t,s=t.size||2;let A=0;const o=k[i[0]],a=k[i[1]];for(let c=n,l=r-s;c<r;c+=s)A+=(e[c+o]-e[l+o])*(e[c+a]+e[l+a]),l=c;return A/2}(e,t))}(e,n);return r!==t&&(function(e,t){const{start:n=0,end:r=e.length,size:i=2}=t,s=(r-n)/i,A=Math.floor(s/2);for(let o=0;o<A;++o){const t=n+o*i,r=n+(s-1-o)*i;for(let n=0;n<i;++n){const i=e[t+n];e[t+n]=e[r+n],e[r+n]=i}}}(e,n),!0)}const k={x:0,y:1,z:2};function O(e,t,n,r,i=[]){let s,A;if(8&n)s=(r[3]-e[1])/(t[1]-e[1]),A=3;else if(4&n)s=(r[1]-e[1])/(t[1]-e[1]),A=1;else if(2&n)s=(r[2]-e[0])/(t[0]-e[0]),A=2;else{if(!(1&n))return null;s=(r[0]-e[0])/(t[0]-e[0]),A=0}for(let o=0;o<e.length;o++)i[o]=(1&A)===o?r[A]:s*(t[o]-e[o])+e[o];return i}function B(e,t){let n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function D(e,t){const n=t.length,r=e.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(e[r-n+s]!==t[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)e[r+i]=t[i];return!0}function N(e,t){const n=t.length;for(let r=0;r<n;r++)e[r]=t[r]}function F(e,t,n,r,i=[]){const s=r+t*n;for(let A=0;A<n;A++)i[A]=e[s+A];return i}function U(e,t){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:A=0,endIndex:o=e.length}=t||{},a=(o-A)/n;let c=[];const l=[c],u=F(e,0,n,A);let h,d;const f=z(u,i,s,[]),p=[];D(c,u);for(let g=1;g<a;g++){for(h=F(e,g,n,A,h),d=B(h,f);d;){O(u,h,d,f,p);const e=B(p,f);e&&(O(u,p,e,f,p),d=e),D(c,p),N(u,p),j(f,i,d),r&&c.length>n&&(c=[],l.push(c),D(c,u)),d=B(h,f)}D(c,h),N(u,h)}return r?l:l[0]}function G(e,t=null,n){if(!e.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:A=!1}=n||{},o=[],a=[{pos:e,types:A?new Array(e.length/r).fill(1):null,holes:t||[]}],c=[[],[]];let l=[];for(;a.length;){const{pos:e,types:t,holes:n}=a.shift();W(e,r,n[0]||e.length,c),l=z(c[0],i,s,l);const u=B(c[1],l);if(u){let i=V(e,t,r,0,n[0]||e.length,l,u);const s={pos:i[0].pos,types:i[0].types,holes:[]},o={pos:i[1].pos,types:i[1].types,holes:[]};a.push(s,o);for(let a=0;a<n.length;a++)i=V(e,t,r,n[a],n[a+1]||e.length,l,u),i[0]&&(s.holes.push(s.pos.length),s.pos=H(s.pos,i[0].pos),A&&(s.types=H(s.types,i[0].types))),i[1]&&(o.holes.push(o.pos.length),o.pos=H(o.pos,i[1].pos),A&&(o.types=H(o.types,i[1].types)))}else{const r={positions:e};A&&(r.edgeTypes=t),n.length&&(r.holeIndices=n),o.push(r)}}return o}function V(e,t,n,r,i,s,A){const o=(i-r)/n,a=[],c=[],l=[],u=[],h=[];let d,f,p;const g=F(e,o-1,n,r);let _=Math.sign(8&A?g[1]-s[3]:g[0]-s[2]),m=t&&t[o-1],E=0,v=0;for(let y=0;y<o;y++)d=F(e,y,n,r,d),f=Math.sign(8&A?d[1]-s[3]:d[0]-s[2]),p=t&&t[r/n+y],f&&_&&_!==f&&(O(g,d,A,s,h),D(a,h)&&l.push(m),D(c,h)&&u.push(m)),f<=0?(D(a,d)&&l.push(p),E-=f):l.length&&(l[l.length-1]=0),f>=0?(D(c,d)&&u.push(p),v+=f):u.length&&(u[u.length-1]=0),N(g,d),_=f,m=p;return[E?{pos:a,types:t&&l}:null,v?{pos:c,types:t&&u}:null]}function z(e,t,n,r){const i=Math.floor((e[0]-n[0])/t)*t+n[0],s=Math.floor((e[1]-n[1])/t)*t+n[1];return r[0]=i,r[1]=s,r[2]=i+t,r[3]=s+t,r}function j(e,t,n){8&n?(e[1]+=t,e[3]+=t):4&n?(e[1]-=t,e[3]-=t):2&n?(e[0]+=t,e[2]+=t):1&n&&(e[0]-=t,e[2]-=t)}function W(e,t,n,r){let i=1/0,s=-1/0,A=1/0,o=-1/0;for(let a=0;a<n;a+=t){const t=e[a],n=e[a+1];i=t<i?t:i,s=t>s?t:s,A=n<A?n:A,o=n>o?n:o}return r[0][0]=i,r[0][1]=A,r[1][0]=s,r[1][1]=o,r}function H(e,t){for(let n=0;n<t.length;n++)e.push(t[n]);return e}function Q(e,t,n,r){let i=-1,s=-1;for(let A=n+1;A<r;A+=t){const t=Math.abs(e[A]);t>i&&(i=t,s=A-1)}return s}function X(e,t,n,r,i=85.051129){const s=e[n],A=e[r-t];if(Math.abs(s-A)>180){const r=F(e,0,t,n);r[0]+=360*Math.round((A-s)/360),D(e,r),r[1]=Math.sign(r[1])*i,D(e,r),r[0]=s,D(e,r)}}function $(e,t,n,r){let i,s=e[0];for(let A=n;A<r;A+=t){i=e[A];const t=i-s;(t>180||t<-180)&&(i-=360*Math.round(t/360)),e[A]=s=i}}function Y(e,t){let n;const r=e.length/t;for(let s=0;s<r&&(n=e[s*t],(n+180)%360==0);s++);const i=360*-Math.round(n/360);if(0!==i)for(let s=0;s<r;s++)e[s*t]+=i}const K=M,Z=I,q={isClosed:!0};function J(e){return"positions"in e?e.positions:e}function ee(e){return"holeIndices"in e?e.holeIndices:null}function te(e,t,n,r,i){let s=t;const A=n.length;for(let o=0;o<A;o++)for(let t=0;t<r;t++)e[s++]=n[o][t]||0;if(!function(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}(n))for(let o=0;o<r;o++)e[s++]=n[0][o]||0;return q.start=t,q.end=s,q.size=r,L(e,i,q),s}function ne(e,t,n,r,i=0,s,A){const o=(s=s||n.length)-i;if(o<=0)return t;let a=t;for(let c=0;c<o;c++)e[a++]=n[i+c];if(!function(e,t,n,r){for(let i=0;i<t;i++)if(e[n+i]!==e[r-t+i])return!1;return!0}(n,r,i,s))for(let c=0;c<r;c++)e[a++]=n[i+c];return q.start=t,q.end=a,q.size=r,L(e,A,q),a}function re(e,t){!function(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}(e);const n=[],r=[];if("positions"in e){const{positions:i,holeIndices:s}=e;if(s){let e=0;for(let A=0;A<=s.length;A++)e=ne(n,e,i,t,s[A-1],s[A],0===A?K:Z),r.push(e);return r.pop(),{positions:n,holeIndices:r}}e=i}if(!function(e){return Array.isArray(e[0])}(e))return ne(n,0,e,t,0,n.length,K),n;if(!function(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}(e)){let i=0;for(const[s,A]of e.entries())i=te(n,i,A,t,0===s?K:Z),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return te(n,0,e,t,K),n}function ie(e,t,n){const r=e.length/3;let i=0;for(let s=0;s<r;s++){const A=(s+1)%r;i+=e[3*s+t]*e[3*A+n],i-=e[3*A+t]*e[3*s+n]}return Math.abs(i/2)}function se(e,t,n,r){const i=e.length/3;for(let s=0;s<i;s++){const i=3*s,A=e[i+0],o=e[i+1],a=e[i+2];e[i+t]=A,e[i+n]=o,e[i+r]=a}}var Ae=n(8457),oe=n(1829),ae=n(6049);class ce{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:t={}}=e;this.typedArrayManager=Ae.A,this.attributes={},this._attributeDefs=t,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:t,buffers:n={},getGeometry:r,geometryBuffer:i,positionFormat:s,dataChanged:A,normalize:o=!0}=this.opts;if(this.data=t,this.getGeometry=r,this.positionSize=i&&i.size||("XY"===s?2:3),this.buffers=n,this.normalize=o,i&&((0,oe.A)(t.startIndices),this.getGeometry=this.getGeometryFromBuffer(i),o||(n.vertexPositions=i)),this.geometryBuffer=n.vertexPositions,Array.isArray(A))for(const a of A)this._rebuildGeometry(a);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:t}){this._rebuildGeometry({startRow:e,endRow:t})}getGeometryFromBuffer(e){const t=e.value||e;return ArrayBuffer.isView(t)?(0,c.I)(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,t){const{attributes:n,buffers:r,_attributeDefs:i,typedArrayManager:s}=this;for(const A in i)if(A in r)s.release(n[A]),n[A]=null;else{const r=i[A];r.copy=t,n[A]=s.allocate(n[A],e,r)}}_forEachGeometry(e,t,n){const{data:r,getGeometry:i}=this,{iterable:s,objectInfo:A}=(0,c.X)(r,t,n);for(const o of s){A.index++;e(i?i(o,A):null,A.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:t,vertexStarts:n,instanceCount:r}=this;const{data:i,geometryBuffer:s}=this,{startRow:A=0,endRow:o=1/0}=e||{},a={};if(e||(t=[0],n=[0]),this.normalize||!s)this._forEachGeometry(((e,t)=>{const r=e&&this.normalizeGeometry(e);a[t]=r,n[t+1]=n[t]+(r?this.getGeometrySize(r):0)}),A,o),r=n[n.length-1];else if(n=i.startIndices,r=n[i.length]||0,ArrayBuffer.isView(s))r=r||s.length/this.positionSize;else if(s instanceof ae.h){const e=4*this.positionSize;r=r||s.byteLength/e}else if(s.buffer){const e=s.stride||4*this.positionSize;r=r||s.buffer.byteLength/e}else if(s.value){const e=s.value,t=s.stride/e.BYTES_PER_ELEMENT||this.positionSize;r=r||e.length/t}this._allocate(r,Boolean(e)),this.indexStarts=t,this.vertexStarts=n,this.instanceCount=r;const c={};this._forEachGeometry(((e,i)=>{const s=a[i]||e;c.vertexStart=n[i],c.indexStart=t[i];const A=i<n.length-1?n[i+1]:r;c.geometrySize=A-n[i],c.geometryIndex=i,this.updateGeometryAttributes(s,c)}),A,o),this.vertexCount=t[t.length-1]}}class le extends ce{constructor(e){const{fp64:t,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:t?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:t}=this;return"indices"===e?t.indices&&t.indices.subarray(0,this.vertexCount):t[e]}updateGeometry(e){super.updateGeometry(e);const t=this.buffers.indices;if(t)this.vertexCount=(t.value||t).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const t=re(e,this.positionSize);return this.opts.resolution?G(J(t),ee(t),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(e,t=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};t=t||[];const A=[],o=[];let a=0,c=0;for(let u=0;u<=t.length;u++){const i=t[u]||e.length,s=c,l=Q(e,r,a,i);for(let t=l;t<i;t++)A[c++]=e[t];for(let t=a;t<l;t++)A[c++]=e[t];$(A,r,s,c),X(A,r,s,c,n?.maxLatitude),a=i,o[u]=c}o.pop();const l=G(A,o,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const u of l)Y(u.positions,r);return l}(J(t),ee(t),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):t}return e}getGeometrySize(e){if(ue(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}return J(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,t){if(e&&ue(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e,t.indexStart=this.indexStarts[t.geometryIndex+1]}else{const n=e;this._updateIndices(n,t),this._updatePositions(n,t),this._updateVertexValid(n,t)}}_updateIndices(e,{geometryIndex:t,vertexStart:n,indexStart:r}){const{attributes:i,indexStarts:s,typedArrayManager:A}=this;let o=i.indices;if(!o||!e)return;let a=r;const c=function(e,t,n,r){let i=ee(e);i&&(i=i.map((e=>e/t)));let s=J(e);const A=r&&3===t;if(n){const e=s.length;s=s.slice();const r=[];for(let i=0;i<e;i+=t){r[0]=s[i],r[1]=s[i+1],A&&(r[2]=s[i+2]);const e=n(r);s[i]=e[0],s[i+1]=e[1],A&&(s[i+2]=e[2])}}if(A){const e=ie(s,0,1),t=ie(s,0,2),r=ie(s,1,2);if(!e&&!t&&!r)return[];e>t&&e>r||(t>r?(n||(s=s.slice()),se(s,0,2,1)):(n||(s=s.slice()),se(s,2,0,1)))}return P(s,i,t)}(e,this.positionSize,this.opts.preproject,this.opts.full3d);o=A.allocate(o,r+c.length,{copy:!0});for(let l=0;l<c.length;l++)o[a++]=c[l]+n;s[t+1]=r+c.length,i.indices=o}_updatePositions(e,{vertexStart:t,geometrySize:n}){const{attributes:{positions:r},positionSize:i}=this;if(!r||!e)return;const s=J(e);for(let A=t,o=0;o<n;A++,o++){const e=s[o*i],t=s[o*i+1],n=i>2?s[o*i+2]:0;r[3*A]=e,r[3*A+1]=t,r[3*A+2]=n}}_updateVertexValid(e,{vertexStart:t,geometrySize:n}){const{positionSize:r}=this,i=this.attributes.vertexValid,s=e&&ee(e);if(e&&e.edgeTypes?i.set(e.edgeTypes,t):i.fill(1,t,t+n),s)for(let A=0;A<s.length;A++)i[t+s[A]/r-1]=0;i[t+n-1]=0}}function ue(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const he="uniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\nin vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project_uCommonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (extruded) {\npos.z += props.elevations * elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",de=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${he}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`,fe=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${he}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`,pe=[0,0,0,255],ge={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:pe},getLineColor:{type:"accessor",value:pe},material:!0},_e={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class me extends i.A{static{this.defaultProps=ge}static{this.layerName="SolidPolygonLayer"}getShaders(e){return super.getShaders({vs:"top"===e?de:fe,fs:"#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[u,E,w]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:t}=this.props;const{_full3d:n}=this.props;let r;e.isGeospatial&&t===T.rf.DEFAULT&&(t=T.rf.LNGLAT),t===T.rf.LNGLAT&&(r=n?e.projectPosition.bind(e):e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new le({preproject:r,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const i=this.getAttributeManager(),s=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:s},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:_e,accessor:"getPolygon",update:this.calculatePositions,noAlloc:s,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:s},elevations:{size:1,stepMode:"dynamic",transition:_e,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:_e,accessor:"getFillColor",defaultValue:pe},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:_e,accessor:"getLineColor",defaultValue:pe},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n)}})}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,r=this.props.data;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:t,filled:n,wireframe:r,elevationScale:i}=this.props,{topModel:s,sideModel:A,wireframeModel:o,polygonTesselator:a}=this.state,c={...e,extruded:Boolean(t),elevationScale:i};o&&r&&(o.setInstanceCount(a.instanceCount-1),o.setUniforms(c),o.draw(this.context.renderPass)),A&&n&&(A.setInstanceCount(a.instanceCount-1),A.setUniforms(c),A.draw(this.context.renderPass)),s&&n&&(s.setVertexCount(a.vertexCount),s.setUniforms(c),s.draw(this.context.renderPass))}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:t,oldProps:n,changeFlags:r}=e,i=this.getAttributeManager();(r.extensionsChanged||t.filled!==n.filled||t.extruded!==n.extruded)&&(this.state.models?.forEach((e=>e.destroy())),this.setState(this._getModels()),i.invalidateAll())}updateGeometry({props:e,oldProps:t,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:t}=this.state,r=e.data.attributes||{};t.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:r.getPolygon,buffers:r,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:t,extruded:n}=this.props;let r,i,s;if(t){const t=this.getShaders("top");t.defines.NON_INSTANCED_MODEL=1;const n=this.getAttributeManager().getBufferLayouts({isInstanced:!1});r=new S.K(this.context.device,{...t,id:`${e}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:n,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const t=this.getAttributeManager().getBufferLayouts({isInstanced:!0});i=new S.K(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:t,uniforms:{isWireframe:!1},geometry:new x({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),s=new S.K(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:t,uniforms:{isWireframe:!0},geometry:new x({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[i,s,r].filter(Boolean),topModel:r,sideModel:i,wireframeModel:s}}calculateIndices(e){const{polygonTesselator:t}=this.state;e.startIndices=t.indexStarts,e.value=t.get("indices")}calculatePositions(e){const{polygonTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}function Ee(e,t,n,r){let i;if(Array.isArray(e[0])){const n=e.length*t;i=new Array(n);for(let r=0;r<e.length;r++)for(let n=0;n<t;n++)i[r*t+n]=e[r][n]||0}else i=e;return n?U(i,{size:t,gridResolution:n}):r?function(e,t){const{size:n=2,startIndex:r=0,endIndex:i=e.length,normalize:s=!0}=t||{},A=e.slice(r,i);$(A,n,0,i-r);const o=U(A,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const a of o)Y(a,n);return o}(i,{size:t}):i}class ve extends ce{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?Ee(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(ye(e)){let t=0;for(const n of e)t+=this.getGeometrySize(n);return t}const t=this.getPathLength(e);return t<2?0:this.isClosed(e)?t<3?0:t+2:t}updateGeometryAttributes(e,t){if(0!==t.geometrySize)if(e&&ye(e))for(const n of e){const e=this.getGeometrySize(n);t.geometrySize=e,this.updateGeometryAttributes(n,t),t.vertexStart+=e}else this._updateSegmentTypes(e,t),this._updatePositions(e,t)}_updateSegmentTypes(e,t){const n=this.attributes.segmentTypes,r=!!e&&this.isClosed(e),{vertexStart:i,geometrySize:s}=t;n.fill(0,i,i+s),r?(n[i]=4,n[i+s-2]=4):(n[i]+=1,n[i+s-2]+=2),n[i+s-1]=4}_updatePositions(e,t){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:r,geometrySize:i}=t,s=new Array(3);for(let A=r,o=0;o<i;A++,o++)this.getPointOnPath(e,o,s),n[3*A]=s[0],n[3*A+1]=s[1],n[3*A+2]=s[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,t,n=[]){const{positionSize:r}=this;t*r>=e.length&&(t+=1-e.length/r);const i=t*r;return n[0]=e[i],n[1]=e[i+1],n[2]=3===r&&e[i+2]||0,n}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:t}=this,n=e.length-t;return e[0]===e[n]&&e[1]===e[n+1]&&(2===t||e[2]===e[n+2])}}function ye(e){return Array.isArray(e[0])}const be=[0,0,0,255],we={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:be},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Te={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class Se extends i.A{static{this.defaultProps=we}static{this.layerName="PathLayer"}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = capType;\n} else {\nvJointType = jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\nwidthMinPixels, widthMaxPixels) / 2.0);\nvec3 width;\nif (billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nuniform float miterLimit;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[u,w]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:Te,accessor:"getPath",update:this.calculatePositions,noAlloc:true,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:true},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Te,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:Te,defaultValue:be},instancePickingColors:{size:4,type:"uint8",accessor:(e,{index:t,target:n})=>this.encodePickingColor(e&&e.__source?e.__source.index:t,n)}}),this.setState({pathTesselator:new ve({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:t,changeFlags:n}=e,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:e}=this.state,i=t.data.attributes||{};e.updateGeometry({data:t.data,geometryBuffer:i.getPath,buffers:i,normalize:!t._pathType,loop:"loop"===t._pathType,getGeometry:t.getPath,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||r.invalidateAll()}n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),r.invalidateAll())}getPickingInfo(e){const t=super.getPickingInfo(e),{index:n}=t,r=this.props.data;return r[0]&&r[0].__source&&(t.object=r.find((e=>e.__source.index===n))),t}disablePickingIndex(e){const t=this.props.data;if(t[0]&&t[0].__source)for(let n=0;n<t.length;n++)t[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:t,capRounded:n,billboard:r,miterLimit:i,widthUnits:s,widthScale:A,widthMinPixels:o,widthMaxPixels:a}=this.props,c=this.state.model;c.setUniforms(e),c.setUniforms({jointType:Number(t),capType:Number(n),billboard:r,widthUnits:T.p5[s],widthScale:A,miterLimit:i,widthMinPixels:o,widthMaxPixels:a}),c.draw(this.context.renderPass)}_getModel(){return new S.K(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new x({topology:"triangle-list",attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("positions")}calculateSegmentTypes(e){const{pathTesselator:t}=this.state;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}const Re=[0,0,0,255],Ce={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:e=>e.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:Re},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class xe extends a{static{this.layerName="PolygonLayer"}static{this.defaultProps=Ce}initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&l.A.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const t=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(t&&Array.isArray(e.dataChanged)){const t=this.state.paths.slice(),n=e.dataChanged.map((e=>function({data:e,getIndex:t,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,A=e.length;let o=A,a=A;for(let u=0;u<A;u++){const n=t(e[u]);if(o>u&&n>=i&&(o=u),n>=s){a=u;break}}let c=o;const l=a-o!==r.length?e.slice(a):void 0;for(let u=0;u<r.length;u++)e[c++]=r[u];if(l){for(let t=0;t<l.length;t++)e[c++]=l[t];e.length=c}return{startRow:o,endRow:o+r.length}}({data:t,getIndex:e=>e.__source.index,dataRange:e,replace:this._getPaths(e)})));this.setState({paths:t,pathsDiff:n})}else t&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:t,getPolygon:n,positionFormat:r,_normalize:i}=this.props,s=[],A="XY"===r?2:3,{startRow:o,endRow:a}=e,{iterable:l,objectInfo:u}=(0,c.X)(t,o,a);for(const c of l){u.index++;let e=n(c,u);i&&(e=re(e,A));const{holeIndices:t}=e,r=e.positions||e;if(t)for(let n=0;n<=t.length;n++){const e=r.slice(t[n-1]||0,t[n]||r.length);s.push(this.getSubLayerRow({path:e},c,u.index))}else s.push(this.getSubLayerRow({path:r},c,u.index))}return s}renderLayers(){const{data:e,_dataDiff:t,stroked:n,filled:r,extruded:i,wireframe:s,_normalize:A,_windingOrder:o,elevationScale:a,transitions:c,positionFormat:l}=this.props,{lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:d,lineWidthMaxPixels:f,lineJointRounded:p,lineMiterLimit:g,lineDashJustified:_}=this.props,{getFillColor:m,getLineColor:E,getLineWidth:v,getLineDashArray:y,getElevation:b,getPolygon:w,updateTriggers:T,material:S}=this.props,{paths:R,pathsDiff:C}=this.state,x=this.getSubLayerClass("fill",me),P=this.getSubLayerClass("stroke",Se),M=this.shouldRenderSubLayer("fill",R)&&new x({_dataDiff:t,extruded:i,elevationScale:a,filled:r,wireframe:s,_normalize:A,_windingOrder:o,getElevation:b,getFillColor:m,getLineColor:i&&s?E:Re,material:S,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:T&&{getPolygon:T.getPolygon,getElevation:T.getElevation,getFillColor:T.getFillColor,lineColors:i&&s,getLineColor:T.getLineColor}}),{data:e,positionFormat:l,getPolygon:w});return[!i&&M,!i&&n&&this.shouldRenderSubLayer("stroke",R)&&new P({_dataDiff:C&&(()=>C),widthUnits:u,widthScale:h,widthMinPixels:d,widthMaxPixels:f,jointRounded:p,miterLimit:g,dashJustified:_,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(E),getWidth:this.getSubLayerAccessor(v),getDashArray:this.getSubLayerAccessor(y)},this.getSubLayerProps({id:"stroke",updateTriggers:T&&{getWidth:T.getLineWidth,getColor:T.getLineColor,getDashArray:T.getLineDashArray}}),{data:R,positionFormat:l,getPath:e=>e.path}),i&&M]}}class Pe extends x{constructor(e){const{indices:t,attributes:n}=function(e){const{radius:t,height:n=1,nradial:r=10}=e;let{vertices:i}=e;i&&(l.A.assert(i.length>=r),i=i.flatMap((e=>[e[0],e[1]])),L(i,I));const s=n>0,A=r+1,o=s?3*A+1:r,a=2*Math.PI/r,c=new Uint16Array(s?3*r*2:0),u=new Float32Array(3*o),h=new Float32Array(3*o);let d=0;if(s){for(let e=0;e<A;e++){const s=e*a,A=e%r,o=Math.sin(s),c=Math.cos(s);for(let e=0;e<2;e++)u[d+0]=i?i[2*A]:c*t,u[d+1]=i?i[2*A+1]:o*t,u[d+2]=(.5-e)*n,h[d+0]=i?i[2*A]:c,h[d+1]=i?i[2*A+1]:o,d+=3}u[d+0]=u[d-3],u[d+1]=u[d-2],u[d+2]=u[d-1],d+=3}for(let l=s?0:1;l<A;l++){const e=Math.floor(l/2)*Math.sign(.5-l%2),s=e*a,A=(e+r)%r,o=Math.sin(s),c=Math.cos(s);u[d+0]=i?i[2*A]:c*t,u[d+1]=i?i[2*A+1]:o*t,u[d+2]=n/2,h[d+2]=1,d+=3}if(s){let e=0;for(let t=0;t<r;t++)c[e++]=2*t+0,c[e++]=2*t+2,c[e++]=2*t+0,c[e++]=2*t+1,c[e++]=2*t+1,c[e++]=2*t+3}return{indices:c,attributes:{POSITION:{size:3,value:u},NORMAL:{size:3,value:h}}}}(e);super({...e,indices:t,attributes:n})}}const Me=[0,0,0,255],Ie={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,flatShading:!1,getPosition:{type:"accessor",value:e=>e.position},getFillColor:{type:"accessor",value:Me},getLineColor:{type:"accessor",value:Me},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Le extends i.A{static{this.layerName="ColumnLayer"}static{this.defaultProps=Ie}getShaders(){const e={},{flatShading:t}=this.props;return t&&(e.FLAT_SHADING=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME column-layer-vertex-shader\nin vec3 positions;\nin vec3 normals;\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool stroked;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform int radiusUnits;\nuniform int widthUnits;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec4 position_commonspace;\n#endif\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nvec4 color = isStroke ? instanceLineColors : instanceFillColors;\nmat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\nfloat elevation = 0.0;\nfloat strokeOffsetRatio = 1.0;\nif (extruded) {\nelevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n} else if (stroked) {\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\nwidthMinPixels, widthMaxPixels) / 2.0;\nfloat halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\nif (isStroke) {\nstrokeOffsetRatio -= sign(positions.z) * halfOffset;\n} else {\nstrokeOffsetRatio -= halfOffset;\n}\n}\nfloat shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\nfloat dotRadius = radius * coverage * shouldRender;\ngeometry.pickingColor = instancePickingColors;\nvec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\nvec3 centroidPosition64Low = instancePositions64Low;\nvec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\nif (radiusUnits == UNIT_METERS) {\noffset = project_size(offset);\n}\nvec3 pos = vec3(offset, 0.);\nDECKGL_FILTER_SIZE(pos, geometry);\ngl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\ngeometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (extruded && !isStroke) {\n#ifdef FLAT_SHADING\nposition_commonspace = geometry.position;\nvColor = vec4(color.rgb, color.a * opacity);\n#else\nvec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, color.a * opacity);\n#endif\n} else {\nvColor = vec4(color.rgb, color.a * opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\nprecision highp float;\nuniform vec3 project_uCameraPosition;\nuniform bool extruded;\nuniform bool isStroke;\nout vec4 fragColor;\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec4 position_commonspace;\n#endif\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\n#ifdef FLAT_SHADING\nif (extruded && !isStroke && !bool(picking.isActive)) {\nvec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\nfragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);\n}\n#endif\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:e,modules:[u,t?v:E,w]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getFillColor",defaultValue:Me},instanceLineColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getLineColor",defaultValue:Me},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){super.updateState(e);const{props:t,oldProps:n,changeFlags:r}=e,i=r.extensionsChanged||t.flatShading!==n.flatShading;i&&(this.state.models?.forEach((e=>e.destroy())),this.setState(this._getModels()),this.getAttributeManager().invalidateAll());const s=this.getNumInstances();this.state.fillModel.setInstanceCount(s),this.state.wireframeModel.setInstanceCount(s),(i||t.diskResolution!==n.diskResolution||t.vertices!==n.vertices||(t.extruded||t.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(t)}getGeometry(e,t,n){const r=new Pe({radius:1,height:n?2:0,vertices:t,nradial:e});let i=0;if(t)for(let s=0;s<e;s++){const n=t[s];i+=Math.sqrt(n[0]*n[0]+n[1]*n[1])/e}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*i}),r}_getModels(){const e=this.getShaders(),t=this.getAttributeManager().getBufferLayouts(),n=new S.K(this.context.device,{...e,id:`${this.props.id}-fill`,bufferLayout:t,isInstanced:!0}),r=new S.K(this.context.device,{...e,id:`${this.props.id}-wireframe`,bufferLayout:t,isInstanced:!0});return{fillModel:n,wireframeModel:r,models:[r,n]}}_updateGeometry({diskResolution:e,vertices:t,extruded:n,stroked:r}){const i=this.getGeometry(e,t,n||r);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3});const s=this.state.fillModel,A=this.state.wireframeModel;s.setGeometry(i),s.setTopology("triangle-strip"),s.setIndexBuffer(null),A.setGeometry(i),A.setTopology("line-list")}draw({uniforms:e}){const{lineWidthUnits:t,lineWidthScale:n,lineWidthMinPixels:r,lineWidthMaxPixels:i,radiusUnits:s,elevationScale:A,extruded:o,filled:a,stroked:c,wireframe:l,offset:u,coverage:h,radius:d,angle:f}=this.props,p=this.state.fillModel,g=this.state.wireframeModel,{fillVertexCount:_,edgeDistance:m}=this.state,E={...e,radius:d,angle:f/180*Math.PI,offset:u,extruded:o,stroked:c,coverage:h,elevationScale:A,edgeDistance:m,radiusUnits:T.p5[s],widthUnits:T.p5[t],widthScale:n,widthMinPixels:r,widthMaxPixels:i};o&&l&&(g.setUniforms(E),g.setUniforms({isStroke:!0}),g.draw(this.context.renderPass)),p.setUniforms(E),a&&(p.setVertexCount(_),p.setUniforms({isStroke:!1}),p.draw(this.context.renderPass)),!o&&c&&(p.setVertexCount(2*_/3),p.setUniforms({isStroke:!0}),p.draw(this.context.renderPass))}}var ke=n(4315);function Oe(e,t){t=void 0===t?e[0][0]:t;for(const n of e){const e=n[0]-t;e>180?n[0]-=360:e<-180&&(n[0]+=360)}}function Be(e,t,n){const i=e(t,n),[s,A]=(0,r._k)(i);return[A,s]}function De(e,t=1){const n=(0,r.u$)(e,!0);return 1!==t?function(e,t,n){const[i,s]=(0,r._k)(e),A=t.length;Oe(t,s);const o=t[0]===t[A-1]?A-1:A;for(let r=0;r<o;r++)t[r][0]=(0,ke.Cc)(s,t[r][0],n),t[r][1]=(0,ke.Cc)(i,t[r][1],n)}(e,n,t):Oe(n),n}const Ne={...xe.defaultProps,highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:e=>e.hexagon},extruded:!0};class Fe extends a{static{this.defaultProps=Ne}static{this.layerName="H3HexagonLayer"}static{this._checkH3Lib=()=>{}}initializeState(){Fe._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState({changeFlags:e}){return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}updateState({props:e,changeFlags:t}){if(!0!==e.highPrecision&&(t.dataChanged||t.updateTriggersChanged&&t.updateTriggersChanged.getHexagon)){const e=this._calculateH3DataProps();this.setState(e)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let e=-1,t=!1,n=!1;const{iterable:i,objectInfo:s}=(0,c.X)(this.props.data);for(const A of i){s.index++;const i=this.props.getHexagon(A,s),o=(0,r.Hn)(i);if(e<0){if(e=o,!this.props.highPrecision)break}else if(e!==o){n=!0;break}if((0,r.PB)(i)){t=!0;break}}return{resolution:e,edgeLengthKM:e>=0?(0,r.a0)(e,"km"):0,hasMultipleRes:n,hasPentagon:t}}_shouldUseHighPrecision(){if("auto"===this.props.highPrecision){const{resolution:e,hasPentagon:t,hasMultipleRes:n}=this.state,{viewport:r}=this.context;return Boolean(r?.resolution)||n||t||e>=0&&e<=5}return this.props.highPrecision}_updateVertices(e){if(this._shouldUseHighPrecision())return;const{resolution:t,edgeLengthKM:n,centerHex:i}=this.state;if(t<0)return;const s=this.props.centerHexagon||(0,r.Sg)(e.latitude,e.longitude,t);if(i===s)return;if(i)try{if((0,r.QO)(i,s)*n<10)return}catch{}const{unitsPerMeter:A}=e.distanceScales;let o=De(s);const[a,c]=(0,r._k)(s),[l,u]=e.projectFlat([c,a]);o=o.map((t=>{const n=e.projectFlat(t);return[(n[0]-l)/A[0],(n[1]-u)/A[1]]})),this.setState({centerHex:s,vertices:o})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:e,material:t,coverage:n,extruded:r,wireframe:i,stroked:s,filled:A,lineWidthUnits:o,lineWidthScale:a,lineWidthMinPixels:c,lineWidthMaxPixels:l,getFillColor:u,getElevation:h,getLineColor:d,getLineWidth:f,transitions:p,updateTriggers:g}=this.props;return{elevationScale:e,extruded:r,coverage:n,wireframe:i,stroked:s,filled:A,lineWidthUnits:o,lineWidthScale:a,lineWidthMinPixels:c,lineWidthMaxPixels:l,material:t,getElevation:h,getFillColor:u,getLineColor:d,getLineWidth:f,transitions:p,updateTriggers:{getFillColor:g.getFillColor,getElevation:g.getElevation,getLineColor:g.getLineColor,getLineWidth:g.getLineWidth}}}_renderPolygonLayer(){const{data:e,getHexagon:t,updateTriggers:n,coverage:r}=this.props,i=this.getSubLayerClass("hexagon-cell-hifi",xe),s=this._getForwardProps();return s.updateTriggers.getPolygon=function(e,t){let n;return n=null==e?t:"object"==typeof e?{...e,coverage:t}:{getHexagon:e,coverage:t},n}(n.getHexagon,r),new i(s,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:s.updateTriggers}),{data:e,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(e,n)=>function(e){const t=new Float64Array(2*e.length);let n=0;for(const r of e)t[n++]=r[0],t[n++]=r[1];return t}(De(t(e,n),r))})}_renderColumnLayer(){const{data:e,getHexagon:t,updateTriggers:n}=this.props,r=this.getSubLayerClass("hexagon-cell",Le),i=this._getForwardProps();return i.updateTriggers.getPosition=n.getHexagon,new r(i,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:i.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:Be.bind(null,t)})}}},724:(e,t,n)=>{"use strict";n.d(t,{A:()=>Ps});var r=n(6540);let i=1,s=1;class A{time=0;channels=new Map;animations=new Map;playing=!1;lastEngineTime=-1;constructor(){}addChannel(e){const{delay:t=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,A=i++,o={time:0,delay:t,duration:n,rate:r,repeat:s};return this._setChannelTime(o,this.time),this.channels.set(A,o),A}removeChannel(e){this.channels.delete(e);for(const[t,n]of this.animations)n.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:e,channel:t}=r;e.setTime(this.getTime(t))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const n=s++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}var o=n(9404),a=n(6690);const c=[a.A],l=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function u(){const e=o._.getDefaultShaderAssembler();for(const t of c)e.addDefaultModule(t);for(const t of l)e.addShaderHook(t);return e}var h=n(8427),d=n(8277),f=n(7277),p=n(5801);function g(){let e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if("undefined"!=typeof process&&process.hrtime){const t=process.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}class _{constructor(e,t){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=t,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=g(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(g()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class m{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,t="count"){return this._getOrCreate({name:e,type:t})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const t of Object.values(this.stats))e(t)}getTable(){const e={};return this.forEach((t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}_initializeStats(e=[]){e.forEach((e=>this._getOrCreate(e)))}_getOrCreate(e){const{name:t,type:n}=e;let r=this.stats[t];return r||(r=e instanceof _?e:new _(t,n),this.stats[t]=r),r}}var E=n(2240);class v{constructor(e,t,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(e,t){if(e===this._data&&!t)return;this._data=e;const n=++this._loadCount;let r=e;"string"==typeof e&&(r=(0,E.H)(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=e)})).catch((e=>{this._loadCount===n&&(this.isLoaded=!0,this._error=e||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const i of this._subscribers)i.onChange(this.getData())}}class y{constructor(e){this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:e.device?.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:n=!1,persistent:r=!0}){let i=this._resources[e];i?i.setData(t,n):(i=new v(e,t,this._context),this._resources[e]=i),i.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const e in t){const n=t[e],r=this._resources[n.resourceId];r&&r.unsubscribe(n)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:n,requestId:r="default"}){const{_resources:i,protocol:s}=this;e.startsWith(s)&&(i[e=e.replace(s,"")]||this.add({resourceId:e,data:null,persistent:!1}));const A=i[e];if(this._track(n,r,A,t),A)return A.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,n,r){const i=this._consumers,s=i[e]=i[e]||{};let A=s[t];const o=A&&A.resourceId&&this._resources[A.resourceId];o&&(o.unsubscribe(A),this.prune()),n&&(A?(A.onChange=r,A.resourceId=n.id):A={onChange:r,resourceId:n.id},s[t]=A,n.subscribe(A))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];t.persistent||t.inUse()||(t.delete(),delete this._resources[e])}}}var b=n(5775);class w{constructor(e,t){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=e=>{(0,f.A)("layerManager.activateViewport",this,e),e&&(this.context.viewport=e)};const{deck:n,stats:r,viewport:i,timeline:s}=t||{};this.layers=[],this.resourceManager=new y({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e?.gl,deck:n,shaderAssembler:u(),defaultShaderModules:[],renderPass:void 0,stats:r||new m({id:"deck.gl"}),viewport:i||new b.A({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new A,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter((t=>e.find((e=>0===t.id.indexOf(e))))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){(0,f.A)("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const n=(0,p.B)(e,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:t}=this.context;t.find((t=>t.name===e.name))||(t.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:t}=this.context,n=t.findIndex((t=>t.name===e.name));n>=0&&(t.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,t,n){n.raiseError(t,`${e} of ${n}`)}_updateLayers(e,t){const n={};for(const s of e)n[s.id]?d.A.warn(`Multiple old layers with same id ${s.id}`)():n[s.id]=s;if(this._defaultShaderModulesChanged){for(const t of e)t.setNeedsUpdate(),t.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const r=[];this._updateSublayersRecursively(t,n,r),this._finalizeOldLayers(n);let i=!1;for(const s of r)if(s.hasUniformTransition()){i=`Uniform transition in ${s}`;break}this._needsUpdate=i,this.layers=r}_updateSublayersRecursively(e,t,n){for(const i of e){i.context=this.context;const e=t[i.id];null===e&&d.A.warn(`Multiple new layers with same id ${i.id}`)(),t[i.id]=null;let s=null;try{this._debug&&e!==i&&i.validateProps(),e?(this._transferLayerState(e,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),s=i.isComposite?i.getSubLayers():null}catch(r){this._handleError("matching",r,i)}s&&this._updateSublayersRecursively(s,t,n)}}_finalizeOldLayers(e){for(const t in e){const n=e[t];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=h.VD.INITIALIZED}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle=h.VD.MATCHED,t!==e&&(e.lifecycle=h.VD.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=h.VD.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=h.VD.FINALIZED}catch(t){this._handleError("finalization",t,e)}}}var T=n(688);class S{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter((t=>t.containsPixel(e))):this._viewports}getViews(){const e={};return this.views.forEach((t=>{e[t.id]=t})),e}getView(e){return this.views.find((t=>t.id===e))}getViewState(e){const t="string"==typeof e?this.getView(e):e,n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,t){const n=this.getViewports(),r={x:e[0],y:e[1]};for(let i=n.length-1;i>=0;--i){const s=n[i];if(s.containsPixel(r)){const n=e.slice();return n[0]-=s.x,n[1]-=s.y,s.unproject(n,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=(0,p.B)(e,Boolean);this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){if(e){!(0,T.b)(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e}else d.A.warn("missing `viewState` or `initialViewState`")()}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:t=>this.getView(e.id)?.makeViewport({viewState:t,width:this.width,height:this.height})})}_updateController(e,t,n,r){const i=e.controller;if(i&&n){const s={...t,...i,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return r&&r.constructor===i.type||(r=this._createController(e,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=e.length;r--;){const i=e[r],s=this.getViewState(i),A=i.makeViewport({viewState:s,width:this.width,height:this.height});let o=t[i.id];const a=Boolean(i.controller);a&&!o&&(n=!0),!n&&a||!o||(o.finalize(),o=null),this.controllers[i.id]=this._updateController(i,s,A,o),A&&this._viewports.unshift(A)}for(const r in t){const e=t[r];e&&!this.controllers[r]&&e.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)}))}_diffViews(e,t){return e.length!==t.length||e.some(((n,r)=>!e[r].equals(t[r])))}}const R=/([0-9]+\.?[0-9]*)(%|px)/;function C(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=R.exec(e);if(t&&t.length>=3){const e="%"===t[2],n=parseFloat(t[1]);return{position:e?n/100:n,relative:e}}default:throw new Error(`Could not parse position string ${e}`)}}function x(e,t){return e.relative?Math.round(e.position*t):e.position}class P{constructor(e){const{id:t,x:n=0,y:r=0,width:i="100%",height:s="100%",padding:A=null}=e;this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=C(n),this._y=C(r),this._width=C(i),this._height=C(s),this._padding=A&&{left:C(A.left||0),right:C(A.right||0),top:C(A.top||0),bottom:C(A.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||this.ViewportType===e.ViewportType&&(0,T.b)(this.props,e.props,2)}makeViewport({width:e,height:t,viewState:n}){n=this.filterViewState(n);const r=this.getDimensions({width:e,height:t});return r.height&&r.width?new this.ViewportType({...n,...this.props,...r}):null}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const e in this.props.viewState)"id"!==e&&(t[e]=this.props.viewState[e]);return t}return e}getDimensions({width:e,height:t}){const n={x:x(this._x,e),y:x(this._y,t),width:x(this._width,e),height:x(this._height,t)};return this._padding&&(n.padding={left:x(this._padding.left,e),top:x(this._padding.top,t),right:x(this._padding.right,e),bottom:x(this._padding.bottom,t)}),n}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}var M=n(6992),I=n(4315),L=n(707);const k=()=>{},O=2,B=3,D=e=>e,N=1;class F{constructor(e){this._onTransitionUpdate=e=>{const{time:t,settings:{interpolator:n,startProps:r,endProps:i,duration:s,easing:A}}=e,o=A(t/s),a=n.interpolateProps(r,i,o);this.propsInTransition=this.getControllerState({...this.props,...a}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new L.A(e.timeline),this.onViewStateChange=e.onViewStateChange||k,this.onStateChange=e.onStateChange||k}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let r=n;if(this.transition.inProgress){const{interruption:e,endProps:t}=this.transition.settings;r={...n,...e===O?t:this.propsInTransition||n}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:n}=e;return(t>0||"auto"===t)&&Boolean(n)}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){if(this.transition.inProgress){return this.transition.settings.interruption===B||this._isUpdateDueToCurrentTransition(t)}return!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const n=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator,s=i.getDuration?i.getDuration(e,t):t.transitionDuration;if(0===s)return;const A=i.initializeProps(e,r);this.propsInTransition={};const o={duration:s,easing:t.transitionEasing||D,interpolator:i,interruption:t.transitionInterruption||N,startProps:A.start,endProps:A.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(o),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}var U=n(9873);const G=["longitude","latitude","zoom","bearing","pitch"],V=["longitude","latitude","zoom"];class z extends U.A{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:G,required:V},super(n.transitionProps),this.opts=n}initializeProps(e,t){const n=super.initializeProps(e,t),{makeViewport:r,around:i}=this.opts;if(r&&i){const s=r(e),A=r(t),o=s.unproject(i);n.start.around=i,Object.assign(n.end,{around:A.project(o),aroundPosition:o,width:t.width,height:t.height})}return n}interpolateProps(e,t,n){const r={};for(const i of this._propsToExtract)r[i]=(0,I.Cc)(e[i]||0,t[i]||0,n);if(t.aroundPosition&&this.opts.makeViewport){const i=this.opts.makeViewport({...t,...r});Object.assign(r,i.panByPosition(t.aroundPosition,(0,I.Cc)(e.around,t.around,n)))}return r}}const j={transitionDuration:0},W=e=>1-(1-e)*(1-e),H=["wheel"],Q=["panstart","panmove","panend"],X=["pinchstart","pinchmove","pinchend"],$=["tripanstart","tripanmove","tripanend"],Y=["doubletap"],K=["keydown"],Z={};var q=n(9451),J=n(1829);class ee extends class{constructor(e,t){this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}{constructor(e){const{width:t,height:n,latitude:r,longitude:i,zoom:s,bearing:A=0,pitch:o=0,altitude:a=1.5,position:c=[0,0,0],maxZoom:l=20,minZoom:u=0,maxPitch:h=60,minPitch:d=0,startPanLngLat:f,startZoomLngLat:p,startRotatePos:g,startBearing:_,startPitch:m,startZoom:E,normalize:v=!0}=e;(0,J.A)(Number.isFinite(i)),(0,J.A)(Number.isFinite(r)),(0,J.A)(Number.isFinite(s)),super({width:t,height:n,latitude:r,longitude:i,zoom:s,bearing:A,pitch:o,altitude:a,maxZoom:l,minZoom:u,maxPitch:h,minPitch:d,normalize:v,position:c},{startPanLngLat:f,startZoomLngLat:p,startRotatePos:g,startBearing:_,startPitch:m,startZoom:E}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const n=this.getState().startPanLngLat||this._unproject(t);if(!n)return this;const r=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:n=0}){const{startRotatePos:r,startBearing:i,startPitch:s}=this.getState();if(!r||void 0===i||void 0===s)return this;let A;return A=e?this._getNewRotation(e,r,s,i):{bearing:i+t,pitch:s+n},this._getUpdatedState(A)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:n}){let{startZoom:r,startZoomLngLat:i}=this.getState();if(i||(r=this.getViewportProps().zoom,i=this._unproject(t)||this._unproject(e)),!i)return this;const{maxZoom:s,minZoom:A}=this.getViewportProps();let o=r+Math.log2(n);o=(0,I.qE)(o,A,s);const a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(i,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:i}=n;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}applyConstraints(e){const{maxZoom:t,minZoom:n,zoom:r}=e;e.zoom=(0,I.qE)(r,n,t);const{maxPitch:i,minPitch:s,pitch:A}=e;e.pitch=(0,I.qE)(A,s,i);const{normalize:o=!0}=e;return o&&Object.assign(e,(0,q.CK)(e)),e}_zoomFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.zoom({pos:[t/2,n/2],scale:e})}_panFromCenter(e){const{width:t,height:n}=this.getViewportProps();return this.pan({startPos:[t/2,n/2],pos:[t/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,n,r){const i=e[0]-t[0],s=e[1]-t[1],A=e[1],o=t[1],{width:a,height:c}=this.getViewportProps(),l=i/a;let u=0;s>0?Math.abs(c-o)>5&&(u=s/(o-c)*1.2):s<0&&o>5&&(u=1-A/o),u=(0,I.qE)(u,-1,1);const{minPitch:h,maxPitch:d}=this.getViewportProps();let f=n;return u>0?f=n+u*(d-n):u<0&&(f=n-u*(h-n)),{pitch:f,bearing:r+180*l}}}class te extends class{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new F({...e,getControllerState:e=>new this.ControllerState(e),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager?.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:n}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-n]}isPointInBounds(e,t){const{width:n,height:r}=this.props;if(t&&t.handled)return!1;const i=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r;return i&&t&&t.stopPropagation(),i}isFunctionKeyPressed(e){const{srcEvent:t}=e;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout((()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)}),e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:i=!0,doubleClickZoom:s=!0,touchZoom:A=!0,touchRotate:o=!1,keyboard:a=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(H,c&&n),this.toggleEvents(Q,c),this.toggleEvents(X,c&&(A||o)),this.toggleEvents($,c&&o),this.toggleEvents(Y,c&&s),this.toggleEvents(K,c&&a),this.scrollZoom=n,this.dragPan=r,this.dragRotate=i,this.doubleClickZoom=s,this.touchZoom=A,this.touchRotate=o,this.keyboard=a}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach((e=>{this._events[e]!==t&&(this._events[e]=t,t?this.eventManager.on(e,this.handleEvent):this.eventManager.off(e,this.handleEvent))}))}updateViewport(e,t=null,n={}){const r={...e.getViewportProps(),...t},i=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),i){const e=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:e,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:t});return this._panMove=n,this.updateViewport(r,j,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,j,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:W},{isDragging:!1,isPanning:!0})}else{const e=this.controllerState.panEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),n=this.controllerState.rotate({pos:t});return this.updateViewport(n,j,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*t/2,n[1]+e.velocityY*t/2],i=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:W},{isDragging:!1,isRotating:!0})}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:i}=e;let s=2/(1+Math.exp(-Math.abs(i*n)));i<0&&0!==s&&(s=1/s);const A=this.controllerState.zoom({pos:t,scale:s});return this.updateViewport(A,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.rotateStart({pos:t});return this.updateViewport(n,j,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const n=this.controllerState.rotate({pos:t});return this.updateViewport(n,j,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*t/2],i=this.controllerState.rotate({pos:r});this.updateViewport(i,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:W},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const e=this.controllerState.rotateEnd();this.updateViewport(e,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return Z._startPinchRotation=e.rotation,Z._lastPinchEvent=e,this.updateViewport(n,j,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:n}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=e;t=t.rotate({deltaAngleX:Z._startPinchRotation-n})}return this.updateViewport(t,j,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Z._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:n}=Z;if(this.touchZoom&&t&&n&&e.scale!==n.scale){const r=this.getCenter(e);let i=this.controllerState.rotateEnd();const s=Math.log2(e.scale),A=(s-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),o=Math.pow(2,s+A*t/2);i=i.zoom({pos:r,scale:o}).zoomEnd(),this.updateViewport(i,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:W},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const e=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(e,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Z._startPinchRotation=null,Z._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:i,rotateSpeedY:s}=!0===this.keyboard?{}:this.keyboard,{controllerState:A}=this;let o;const a={};switch(e.srcEvent.code){case"Minus":o=t?A.zoomOut(n).zoomOut(n):A.zoomOut(n),a.isZooming=!0;break;case"Equal":o=t?A.zoomIn(n).zoomIn(n):A.zoomIn(n),a.isZooming=!0;break;case"ArrowLeft":t?(o=A.rotateLeft(i),a.isRotating=!0):(o=A.moveLeft(r),a.isPanning=!0);break;case"ArrowRight":t?(o=A.rotateRight(i),a.isRotating=!0):(o=A.moveRight(r),a.isPanning=!0);break;case"ArrowUp":t?(o=A.rotateUp(s),a.isRotating=!0):(o=A.moveUp(r),a.isPanning=!0);break;case"ArrowDown":t?(o=A.rotateDown(s),a.isRotating=!0):(o=A.moveDown(r),a.isPanning=!0);break;default:return!1}return this.updateViewport(o,this._getTransitionProps(),a),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new z({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:j}}{constructor(){super(...arguments),this.ControllerState=ee,this.transition={transitionDuration:300,transitionInterpolator:new z({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e);(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class ne extends P{static{this.displayName="MapView"}constructor(e={}){super(e)}get ViewportType(){return M.A}get ControllerType(){return te}}const re=[255,255,255],ie=1;let se=0;class Ae{constructor(e={}){this.type="ambient";const{color:t=re}=e,{intensity:n=ie}=e;this.id=e.id||"ambient-"+se++,this.color=t,this.intensity=n}}var oe=n(5427);const ae=[255,255,255],ce=1,le=[0,0,-1];let ue=0;class he{constructor(e={}){this.type="directional";const{color:t=ae}=e,{intensity:n=ce}=e,{direction:r=le}=e,{_shadow:i=!1}=e;this.id=e.id||"directional-"+ue++,this.color=t,this.intensity=n,this.type="directional",this.direction=new oe.P(r).normalize().toArray(),this.shadow=i}getProjectedLight(e){return this}}var de=n(2879);class fe extends class{constructor(e,t={id:"pass"}){const{id:n}=t;this.id=n,this.device=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[t,n]=this.device.canvasContext.getDrawingBufferSize(),r=e.clearCanvas??!0,i=e.clearColor??(!!r&&[0,0,0,0]),s=!!r&&1,A=!!r&&0,o=e.colorMask??15,a={viewport:[0,0,t,n]};e.colorMask&&(a.colorMask=o),e.scissorRect&&(a.scissorRect=e.scissorRect);const c=this.device.beginRenderPass({framebuffer:e.target,parameters:a,clearColor:i,clearDepth:s,clearStencil:A});try{return this._drawLayers(c,e)}finally{c.end()}}_drawLayers(e,t){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:A,clearStack:o=!0}=t;t.pass=t.pass||"unknown",o&&(this._lastRenderIndex=-1);const a=[];for(const c of i){const i=s&&s[c.id];A?.(c);const o=this._getDrawLayerParams(c,t),l=c.subViewports||[c];for(const s of l){const A=this._drawLayersInViewport(e,{target:n,moduleParameters:r,viewport:s,view:i,pass:t.pass,layers:t.layers},o);a.push(A)}}return a}_getDrawLayerParams(e,{layers:t,pass:n,isPicking:r=!1,layerFilter:i,cullRect:s,effects:A,moduleParameters:o},a=!1){const c=[],l=pe(this._lastRenderIndex+1),u={layer:t[0],viewport:e,isPicking:r,renderPass:n,cullRect:s},h={};for(let d=0;d<t.length;d++){const r=t[d],s=this._shouldDrawLayer(r,u,i,h),f={shouldDrawLayer:s};s&&!a&&(f.layerRenderIndex=l(r,s),f.moduleParameters=this._getModuleParameters(r,A,n,o),f.layerParameters={...r.context.deck?.props.parameters,...this.getLayerParameters(r,d,e)}),c[d]=f}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:n,pass:r,target:i,viewport:s,view:A},o){const a=function(e,{moduleParameters:t,target:n,viewport:r}){const i=t&&t.devicePixelRatio||e.canvasContext.cssToDeviceRatio(),[,s]=e.canvasContext.getDrawingBufferSize(),A=n?n.height:s,o=r;return[o.x*i,A-(o.y+o.height)*i,o.width*i,o.height*i]}(this.device,{moduleParameters:n,target:i,viewport:s});if(A&&A.props.clear){const e=!0===A.props.clear?{color:!0,depth:!0}:A.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:a},(()=>this.device.clearWebGL(e)))}const c={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:a});for(let u=0;u<t.length;u++){const n=t[u],{shouldDrawLayer:i,layerRenderIndex:A,moduleParameters:a,layerParameters:h}=o[u];if(i&&n.props.pickable&&c.pickableCount++,n.isComposite)c.compositeCount++;else if(i){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,A),a.viewport=s,n.context.renderPass=e;try{n._drawLayer({renderPass:e,moduleParameters:a,uniforms:{layerIndex:A},parameters:h})}catch(l){n.raiseError(l,`drawing ${n} to ${r}`)}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,n){return e.props.parameters}_shouldDrawLayer(e,t,n,r){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;t.layer=e;let i=e.parent;for(;i;){if(!i.props.visible||!i.filterSubLayer(t))return!1;t.layer=i,i=i.parent}if(n){const e=t.layer.id;if(e in r||(r[e]=n(t)),!r[e])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,n,r){const i=this.device.canvasContext.cssToDeviceRatio(),s=Object.assign(Object.create(e.internalState?.propsInTransition||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,picking:{isActive:0},devicePixelRatio:i});if(t)for(const A of t)Object.assign(s,A.getModuleParameters?.(e));return Object.assign(s,this.getModuleParameters(e,t),r)}}function pe(e=0,t={}){const n={},r=(i,s)=>{const A=i.props._offset,o=i.id,a=i.parent&&i.parent.id;let c;if(a&&!(a in t)&&r(i.parent,!1),a in n){const e=n[a]=n[a]||pe(t[a],t);c=e(i,s),n[o]=e}else Number.isFinite(A)?(c=A+(t[a]||0),n[o]=null):c=e;return s&&c>=e&&(e=c+1),t[o]=c,c};return r}class ge extends fe{constructor(e,t){super(e,t),this.shadowMap=e.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(e){const t=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),r=e.viewports[0],i=r.width*n,s=r.height*n;i===t.width&&s===t.height||t.resize({width:i,height:s}),super.render({...e,clearColor:[1,1,1,1],target:t,pass:"shadow"})}getLayerParameters(e,t,n){return{...e.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}var _e=n(6704),me=n(251);const Ee=(0,me.A)((function({viewport:e,center:t}){return new de.k(e.viewProjectionMatrix).invert().transform(t)})),ve=(0,me.A)((function({viewport:e,shadowMatrices:t}){const n=[],r=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,s=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map((e=>function(e,t){const[n,r,i]=e,s=(0,q.xJ)([n,r,i],t);if(Number.isFinite(i))return s;return[s[0],s[1],0]}(e,r)));for(const A of t){const t=A.clone().translate(new oe.P(e.center).negate()),r=s.map((e=>t.transform(e))),i=(new de.k).ortho({left:Math.min(...r.map((e=>e[0]))),right:Math.max(...r.map((e=>e[0]))),bottom:Math.min(...r.map((e=>e[1]))),top:Math.max(...r.map((e=>e[1]))),near:Math.min(...r.map((e=>-e[2]))),far:Math.max(...r.map((e=>-e[2])))});n.push(i.multiplyRight(A))}return n})),ye=[0,0,0,1],be=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const we={name:"shadow",dependencies:[a.A],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nout vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nin vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?function(e,t){const{shadowEnabled:n=!0}=e;if(!n||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:e.dummyShadowMap,shadow_uShadowMap1:e.dummyShadowMap};const r={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||ye,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=Ee({viewport:e.viewport,center:t.project_uCenter}),s=[],A=ve({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let o=0;o<e.shadowMatrices.length;o++){const n=A[o],r=n.clone().translate(new oe.P(e.viewport.center).negate());t.project_uCoordinateSystem===_e.rf.LNGLAT&&t.project_uProjectionMode===_e.Kx.WEB_MERCATOR?(A[o]=r,s[o]=i):(A[o]=n.clone().multiplyRight(be),s[o]=r.transform(i))}for(let o=0;o<A.length;o++)r[`shadow_uViewProjectionMatrices[${o}]`]=A[o],r[`shadow_uProjectCenters[${o}]`]=s[o];for(let o=0;o<2;o++)r[`shadow_uShadowMap${o}`]=e.shadowMaps&&e.shadowMaps[o]||e.dummyShadowMap;return r}(e,t):{}},Te={color:[255,255,255],intensity:1},Se=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Re=[0,0,0,200/255];class Ce{constructor(e={}){this.id="lighting-effect",this.shadowColor=Re,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:t,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(t),n._addDefaultShaderModule(we),this.dummyShadowMap=t.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const t in e){const n=e[t];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((e=>e.shadow)),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:t,viewports:n,onViewportActive:r,views:i}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:e,layerFilter:t,viewports:n,onViewportActive:r,views:i,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((t=>t.getProjectedLight({layer:e}))),pointLights:this.pointLights.map((t=>t.getProjectedLight({layer:e})))},t}cleanup(e){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(we))}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const n=(new de.k).lookAt({eye:new oe.P(t.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const n=new ge(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:n}=this;e||0!==t.length||0!==n.length||(this.ambientLight=new Ae(Te),this.directionalLights.push(new he(Se[0]),new he(Se[1])))}}const xe=new Ce;class Pe{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const t=this._defaultEffects;if(!t.find((t=>t.id===e.id))){const n=t.findIndex((t=>{return n=e,(t.order??1/0)-(n.order??1/0)>0;var n}));n<0?t.push(e):t.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&((0,T.b)(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._resolvedEffects}_setEffects(e){const t={};for(const r of this.effects)t[r.id]=r;const n=[];for(const r of e){const e=t[r.id];let i=r;e&&e!==r?e.setProps?(e.setProps(r.props),i=e):e.cleanup(this._context):e||r.setup(this._context),n.push(i),delete t[r.id]}for(const r in t)t[r].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some((e=>e instanceof Ce))||this._resolvedEffects.push(xe),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Me extends fe{shouldDrawLayer(e){const{operation:t}=e.props;return t.includes("draw")||t.includes("terrain")}}const Ie={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class Le extends fe{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:n,viewports:r,onViewportActive:i,pickingFBO:s,deviceRect:{x:A,y:o,width:a,height:c},cullRect:l,effects:u,pass:h="picking",pickZ:d,moduleParameters:f}){this.pickZ=d;const p=this._resetColorEncoder(d),g=[A,o,a,c],_=super.render({target:s,layers:e,layerFilter:t,views:n,viewports:r,onViewportActive:i,cullRect:l,effects:u?.filter((e=>e.useInPicking)),pass:h,isPicking:!0,moduleParameters:f,clearColor:[0,0,0,0],colorMask:15,scissorRect:g});this._colorEncoderState=null;return{decodePickingColor:p&&ke.bind(null,p),stats:_}}shouldDrawLayer(e){const{pickable:t,operation:n}=e.props;return t&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(e,t,n){const r={depthMask:!0,depthTest:!0,depthRange:[0,1],...e.props.parameters},{pickable:i,operation:s}=e.props;return!this._colorEncoderState||s.includes("terrain")?r.blend=!1:i&&s.includes("draw")&&(Object.assign(r,Ie),r.blend=!0,r.blendColor=function(e,t,n){const{byLayer:r,byAlpha:i}=e;let s,A=r.get(t);A?(A.viewports.push(n),s=A.a):(s=r.size+1,s<=255?(A={a:s,layer:t,viewports:[n]},r.set(t,A),i[s]=A):(d.A.warn("Too many pickable layers, only picking the first 255")(),s=0));return[0,0,0,s/255]}(this._colorEncoderState,e,n)),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function ke(e,t){const n=e.byAlpha[t[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(t)}}class Oe{constructor(e){this.device=e,this.gl=e.gl,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Me(e),this.pickLayersPass=new Le(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const i=t.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,(0,f.A)("deckRenderer.renderLayers",this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){this.lastPostProcessEffect=null,t.preRenderStats=t.preRenderStats||{};for(const n of e)t.preRenderStats[n.id]=n.preRender(t),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,t=this.device.canvasContext.getDrawingBufferSize();0===e.length&&[0,1].map((t=>{const n=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${t}`,colorAttachments:[n]}))}));for(const n of e)n.resize(t)}_postRender(e,t){const{renderBuffers:n}=this,r={...t,inputBuffer:n[0],swapBuffer:n[1]};for(const i of e)if(i.postRender){r.target=i.id===this.lastPostProcessEffect?t.target:void 0;const e=i.postRender(r);r.inputBuffer=e,r.swapBuffer=e===n[0]?n[1]:n[0]}}}const Be={pickedColor:null,pickedObjectIndex:-1};function De({pickedColors:e,decodePickingColor:t,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:A,y:o,width:a,height:c}=s;let l=i*i,u=-1,h=0;for(let d=0;d<c;d++){const t=d+o-r,i=t*t;if(i>l)h+=4*a;else for(let r=0;r<a;r++){if(e[h+3]-1>=0){const e=r+A-n,t=e*e+i;t<=l&&(l=t,u=h)}h+=4}}if(u>=0){const n=e.slice(u,u+4),r=t(n);if(r){const e=Math.floor(u/4/a),t=u/4-e*a;return{...r,pickedColor:n,pickedX:A+t,pickedY:o+e}}d.A.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Be}function Ne({pickInfo:e,viewports:t,pixelRatio:n,x:r,y:i,z:s}){let A,o=t[0];if(t.length>1&&(o=function(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.containsPixel(t))return r}return e[0]}(e?.pickedViewports||t,{x:r,y:i})),o){const e=[r-o.x,i-o.y];void 0!==s&&(e[2]=s),A=o.unproject(e)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:A,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:n}}function Fe(e){const{pickInfo:t,lastPickedInfo:n,mode:r,layers:i}=e,{pickedColor:s,pickedLayer:A,pickedObjectIndex:o}=t,a=A?[A]:[];if("hover"===r){const e=n.index,t=n.layerId,r=A?A.props.id:null;if(r!==t||o!==e){if(r!==t){const e=i.find((e=>e.props.id===t));e&&a.unshift(e)}n.layerId=r,n.index=o,n.info=null}}const c=Ne(e),l=new Map;return l.set(null,c),a.forEach((e=>{let t={...c};e===A&&(t.color=s,t.index=o,t.picked=!0),t=Ue({layer:e,info:t,mode:r});const i=t.layer;e===A&&"hover"===r&&(n.info=t),l.set(i.id,t),"hover"===r&&i.updateAutoHighlight(t)})),l}function Ue({layer:e,info:t,mode:n}){for(;e&&t;){const r=t.layer||null;t.sourceLayer=r,t.layer=e,t=e.getPickingInfo({info:t,mode:n,sourceLayer:r}),e=e.parent}return t}class Ge{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new Le(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:n,viewports:r},i=this.lastPickedInfo.info){const s=i&&i.layer&&i.layer.id,A=i&&i.viewport&&i.viewport.id,o=s?n.find((e=>e.id===s)):null,a=A&&r.find((e=>e.id===A))||r[0],c=a&&a.unproject([e-a.x,t-a.y]),l={x:e,y:t,viewport:a,coordinate:c,layer:o};return{...i,...l}}_resizeBuffer(){if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const e=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=e}const e=this.device.gl;this.pickingFBO?.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO?.resize({width:e.canvas.width,height:e.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter((e=>this.pickLayersPass.shouldDrawLayer(e)&&!e.isComposite));return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:n,x:r,y:i,radius:s=0,depth:A=1,mode:o="query",unproject3D:a,onViewportActive:c,effects:l}){const u=this.device.canvasContext.cssToDeviceRatio(),h=this._getPickable(e);if(!h||0===n.length)return{result:[],emptyInfo:Ne({viewports:n,x:r,y:i,pixelRatio:u})};this._resizeBuffer();const d=this.device.canvasContext.cssToDevicePixels([r,i],!0),f=[d.x+Math.floor(d.width/2),d.y+Math.floor(d.height/2)],p=Math.round(s*u),{width:g,height:_}=this.pickingFBO,m=this._getPickingRect({deviceX:f[0],deviceY:f[1],deviceRadius:p,deviceWidth:g,deviceHeight:_}),E={x:r-s,y:i-s,width:2*s+1,height:2*s+1};let v;const y=[],b=new Set;for(let w=0;w<A;w++){let e,s;if(m){e=De({...this._drawAndSample({layers:h,views:t,viewports:n,onViewportActive:c,deviceRect:m,cullRect:E,effects:l,pass:`picking:${o}`}),deviceX:f[0],deviceY:f[1],deviceRadius:p,deviceRect:m})}else e={pickedColor:null,pickedObjectIndex:-1};if(e.pickedLayer&&a&&this.depthFBO){const{pickedColors:r}=this._drawAndSample({layers:[e.pickedLayer],views:t,viewports:n,onViewportActive:c,deviceRect:{x:e.pickedX,y:e.pickedY,width:1,height:1},cullRect:E,effects:l,pass:`picking:${o}:z`},!0);r[3]&&(s=r[0])}e.pickedLayer&&w+1<A&&(b.add(e.pickedLayer),e.pickedLayer.disablePickingIndex(e.pickedObjectIndex)),v=Fe({pickInfo:e,lastPickedInfo:this.lastPickedInfo,mode:o,layers:h,viewports:n,x:r,y:i,z:s,pixelRatio:u});for(const t of v.values())t.layer&&y.push(t);if(!e.pickedColor)break}for(const w of b)w.restorePickingColors();return{result:y,emptyInfo:v.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:n,x:r,y:i,width:s=1,height:A=1,mode:o="query",maxObjects:a=null,onViewportActive:c,effects:l}){const u=this._getPickable(e);if(!u||0===n.length)return[];this._resizeBuffer();const h=this.device.canvasContext.cssToDeviceRatio(),f=this.device.canvasContext.cssToDevicePixels([r,i],!0),p=f.x,g=f.y+f.height,_=this.device.canvasContext.cssToDevicePixels([r+s,i+A],!0),m=_.x+_.width,E=_.y,v={x:p,y:E,width:m-p,height:g-E},y=function({pickedColors:e,decodePickingColor:t}){const n=new Map;if(e)for(let r=0;r<e.length;r+=4)if(e[r+3]-1>=0){const i=e.slice(r,r+4),s=i.join(",");if(!n.has(s)){const e=t(i);e?n.set(s,{...e,color:i}):d.A.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:u,views:t,viewports:n,onViewportActive:c,deviceRect:v,cullRect:{x:r,y:i,width:s,height:A},effects:l,pass:`picking:${o}`})),b=new Map,w=[],T=Number.isFinite(a);for(let d=0;d<y.length&&!(T&&w.length>=a);d++){const e=y[d];let t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:i,pixelRatio:h};t=Ue({layer:e.pickedLayer,info:t,mode:o});const n=t.layer.id;b.has(n)||b.set(n,new Set);const s=b.get(n),A=t.object??t.index;s.has(A)||(s.add(A),w.push(t))}return w}_drawAndSample({layers:e,views:t,viewports:n,onViewportActive:r,deviceRect:i,cullRect:s,effects:A,pass:o},a=!1){const c=a?this.depthFBO:this.pickingFBO,l={layers:e,layerFilter:this.layerFilter,views:t,viewports:n,onViewportActive:r,pickingFBO:c,deviceRect:i,cullRect:s,effects:A,pass:o,pickZ:a,preRenderStats:{}};for(const _ of A)_.useInPicking&&(l.preRenderStats[_.id]=_.preRender(l));const{decodePickingColor:u}=this.pickLayersPass.render(l),{x:h,y:d,width:f,height:p}=i,g=new(a?Float32Array:Uint8Array)(f*p*4);return this.device.readPixelsToArrayWebGL(c,{sourceX:h,sourceY:d,sourceWidth:f,sourceHeight:p,target:g}),{pickedColors:g,decodePickingColor:u}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:n,deviceWidth:r,deviceHeight:i}){const s=Math.max(0,e-n),A=Math.max(0,t-n),o=Math.min(r,e+n+1)-s,a=Math.min(i,t+n+1)-A;return o<=0||a<=0?null:{x:s,y:A,width:o,height:a}}}const Ve={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},ze="top-left",je="__root";class We{constructor({deck:e,parentElement:t}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=t}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!(0,T.b)(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find((t=>t.id===e.id))||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const t={};for(const n of this.resolvedWidgets)t[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)t[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){const e=t[n.id];e?e.viewId!==n.viewId||e.placement!==n.placement?(this._remove(e),this._add(n)):n!==e&&(e.setProps(n.props),n=e):this._add(n),t[n.id]=null,this.resolvedWidgets.push(n)}for(const n in t){const e=t[n];e&&this._remove(e)}this.widgets=e}_add(e){const{viewId:t=null,placement:n=ze}=e,r=e.onAdd({deck:this.deck,viewId:t});r&&this._getContainer(t,n).append(r),e._element=r}_remove(e){e.onRemove(),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,t){const n=e||je;let r=this.containers[n];r||(r=document.createElement("div"),r.style.pointerEvents="none",r.style.position="absolute",r.style.overflow="hidden",this.parentElement?.append(r),this.containers[n]=r);let i=r.querySelector(`.${t}`);return i||(i=document.createElement("div"),i.className=t,i.style.position="absolute",i.style.zIndex="2",Object.assign(i.style,Ve[t]),r.append(i)),i}_updateContainers(){const e=this.deck.width,t=this.deck.height;for(const n in this.containers){const r=this.lastViewports[n]||null,i=n===je||r,s=this.containers[n];i?(s.style.display="block",s.style.left=`${r?r.x:0}px`,s.style.top=`${r?r.y:0}px`,s.style.width=`${r?r.width:e}px`,s.style.height=`${r?r.height:t}px`):s.style.display="none"}}onRedraw({viewports:e,layers:t}){const n=e.reduce(((e,t)=>(e[t.id]=t,e)),{}),{lastViewports:r}=this;for(const i of this.getWidgets()){const{viewId:s}=i;if(s){const e=n[s];e&&(i.onViewportChange&&!e.equals(r[s])&&i.onViewportChange(e),i.onRedraw?.({viewports:[e],layers:t}))}else{if(i.onViewportChange)for(const t of e)t.equals(r[t.id])||i.onViewportChange(t);i.onRedraw?.({viewports:e,layers:t})}}this.lastViewports=n,this._updateContainers()}onHover(e,t){for(const n of this.getWidgets()){const{viewId:r}=n;r&&r!==e.viewport?.id||n.onHover?.(e,t)}}onEvent(e,t){const n=_e.qY[t.type];if(n)for(const r of this.getWidgets()){const{viewId:i}=r;i&&i!==e.viewport?.id||r[n.handler]?.(e,t)}}}const He={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Qe{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const t=document.createElement("div");return t.className="deck-tooltip",Object.assign(t.style,He),this.deck=e,this.element=t,t}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){this.isVisible&&e.id===this.lastViewport?.id&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:t}=this,n=t&&t.props.getTooltip;if(!n)return;const r=n(e);this.lastViewport=e.viewport,this.setTooltip(r,e.x,e.y)}setTooltip(e,t,n){const r=this.element;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className)}this.isVisible=!0,r.style.display="block",r.style.transform=`translate(${t}px, ${n}px)`,e&&"object"==typeof e&&"style"in e&&Object.assign(r.style,e.style)}}}var Xe=n(8457),$e=n(1469);var Ye=n(5018),Ke=n(4177);const Ze=globalThis.loaders?.parseImageNode,qe="undefined"!=typeof Image,Je="undefined"!=typeof ImageBitmap,et=Boolean(Ze),tt=!!Ke.Bd||et;function nt(e){const t=it(e);if(!t)throw new Error("Not an image");return t}function rt(e){switch(nt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("getImageData");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function it(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&e instanceof Image?"image":e&&"object"==typeof e&&e.data&&e.width&&e.height?"data":null}const st=/^data:image\/svg\+xml/,At=/\.svg((\?|#).*)?$/;function ot(e){return e&&(st.test(e)||At.test(e))}function at(e,t){if(ot(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function ct(e,t,n){const r=function(e,t){if(ot(t)){let t=(new TextDecoder).decode(e);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(t=unescape(encodeURIComponent(t)))}catch(n){throw new Error(n.message)}return`data:image/svg+xml;base64,${btoa(t)}`}return at(e,t)}(e,n),i=self.URL||self.webkitURL,s="string"!=typeof r&&i.createObjectURL(r);try{return await async function(e,t){const n=new Image;if(n.src=e,t.image&&t.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((e,t)=>{try{n.onload=()=>e(n),n.onerror=e=>{const n=e instanceof Error?e.message:"error";t(new Error(n))}}catch(r){t(r)}}))}(s||r,t)}finally{s&&i.revokeObjectURL(s)}}const lt={};let ut=!0;async function ht(e,t,n){let r;if(ot(n)){r=await ct(e,t,n)}else r=at(e,n);const i=t&&t.imagebitmap;return await async function(e,t=null){!function(e){for(const t in e||lt)return!1;return!0}(t)&&ut||(t=null);if(t)try{return await createImageBitmap(e,t)}catch(n){console.warn(n),ut=!1}return await createImageBitmap(e)}(r,i)}function dt(e){return function(e,t,n=0){const r=(i=t,[...i].map((e=>e.charCodeAt(0))));var i;for(let s=0;s<r.length;++s)if(r[s]!==e[s+n])return!1;return!0}(e,"ftyp",4)?0==(96&e[8])?null:function(e){switch((t=e,n=8,r=12,String.fromCharCode(...t.slice(n,r))).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}var t,n,r}(e):null}const ft=!1,pt=!0;function gt(e){const t=_t(e);return function(e){const t=_t(e);if(!(t.byteLength>=24&&2303741511===t.getUint32(0,ft)))return null;return{mimeType:"image/png",width:t.getUint32(16,ft),height:t.getUint32(20,ft)}}(t)||function(e){const t=_t(e);if(!(t.byteLength>=3&&65496===t.getUint16(0,ft)&&255===t.getUint8(2)))return null;const{tableMarkers:n,sofMarkers:r}=function(){const e=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)e.add(n);const t=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:t}}();let i=2;for(;i+9<t.byteLength;){const e=t.getUint16(i,ft);if(r.has(e))return{mimeType:"image/jpeg",height:t.getUint16(i+5,ft),width:t.getUint16(i+7,ft)};if(!n.has(e))return null;i+=2,i+=t.getUint16(i,ft)}return null}(t)||function(e){const t=_t(e);if(!(t.byteLength>=10&&1195984440===t.getUint32(0,ft)))return null;return{mimeType:"image/gif",width:t.getUint16(6,pt),height:t.getUint16(8,pt)}}(t)||function(e){const t=_t(e);if(!(t.byteLength>=14&&16973===t.getUint16(0,ft)&&t.getUint32(2,pt)===t.byteLength))return null;return{mimeType:"image/bmp",width:t.getUint32(18,pt),height:t.getUint32(22,pt)}}(t)||function(e){const t=dt(new Uint8Array(e instanceof DataView?e.buffer:e));if(!t)return null;return{mimeType:t.mimeType,width:0,height:0}}(t)}function _t(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}const mt={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.2.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(e,t,n){const r=((t=t||{}).image||{}).type||"auto",{url:i}=n||{};let s;switch(function(e){switch(e){case"auto":case"data":return function(){if(Je)return"imagebitmap";if(qe)return"image";if(tt)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(e){switch(e){case"auto":return Je||qe||tt;case"imagebitmap":return Je;case"image":return qe;case"data":return tt;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}(e),e}}(r)){case"imagebitmap":s=await ht(e,t,i);break;case"image":s=await ct(e,t,i);break;case"data":s=await async function(e,t){const{mimeType:n}=gt(e)||{},r=globalThis.loaders?.parseImageNode;return(0,Ye.v)(r),await r(e,n)}(e);break;default:(0,Ye.v)(!1)}return"data"===r&&(s=rt(s)),s},tests:[e=>Boolean(gt(new DataView(e)))],options:{image:{type:"auto",decode:!0}}};const Et={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(e){const t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse};const vt=function(){const e="9.0.20",t=globalThis.deck&&globalThis.deck.VERSION;if(t&&t!==e)throw new Error(`deck.gl - multiple versions detected: ${t} vs 9.0.20`);return t||(d.A.log(1,"deck.gl 9.0.20")(),globalThis.deck={...globalThis.deck,VERSION:e,version:e,log:d.A,_registerLoggers:f.k},(0,$e.mk)([Et,[mt,{imagebitmap:{premultiplyAlpha:"none"}}]])),e}();var yt=n(4003),bt=n(9749);const wt=new class{stats=new Map;getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new m({id:e})),this.stats.get(e)}};const Tt=function(){const e="9.0.14";if(globalThis.luma&&globalThis.luma.VERSION!==e)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs 9.0.14`);return globalThis.luma||((0,yt.B)()&&bt.R.log(1,"9.0.14 - set luma.log.level=1 (or higher) to trace rendering")(),globalThis.luma=globalThis.luma||{VERSION:e,version:e,log:bt.R,stats:wt}),e}();var St=n(9038),Rt=n(6049),Ct=n(5332);const xt=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],Pt=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function Mt(e){const t=Pt.exec(e);if(t){const[,e,n,r,i,s]=t;if(e){const t=`${r}${n}`,A=(0,Ct.l)(t);return{format:e,components:e.length,srgb:"-srgb"===i,unsized:"-unsized"===s,webgl:"-webgl"===s,...A}}}return function(e){const t=It[e];if(!t)throw new Error(`Unknown format ${e}`);return{format:t.format||"",components:t.components||t.format?.length||1,byteLength:t.bpp||1,srgb:!1,unsized:!1}}(e)}const It={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};class Lt{features;disabledFeatures;constructor(e=[],t){this.features=new Set(e),this.disabledFeatures=t||{}}*[Symbol.iterator](){yield*this.features}has(e){return!this.disabledFeatures[e]&&this.features.has(e)}}class kt{static defaultProps={id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:Boolean(bt.R.get("debug")),spector:Boolean(bt.R.get("spector")||bt.R.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:e=>bt.R.error(e.message)};get[Symbol.toStringTag](){return"Device"}static VERSION=Tt;constructor(e){this.props={...kt.defaultProps,...e},this.id=this.props.id||(0,St.L)(this[Symbol.toStringTag].toLowerCase())}id;props;userData={};statsManager=wt;_lumaData={};isTextureFormatCompressed(e){return t=e,xt.some((e=>t.startsWith(e)));var t}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(e){return(e instanceof Promise||"string"==typeof e)&&(e={data:e}),this._createTexture(e)}createCommandEncoder(e={}){throw new Error("not implemented")}readPixelsToArrayWebGL(e,t){throw new Error("not implemented")}readPixelsToBufferWebGL(e,t){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,t){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}timestamp=0;incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}_getBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t={...e};return(e.usage||0)&Rt.h.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?t.indexType="uint32":e.data instanceof Uint16Array?t.indexType="uint16":bt.R.warn("indices buffer content must be of integer type")()),t}}var Ot=n(290);const Bt=new Map;class Dt{static defaultProps={...kt.defaultProps,type:"best-available",devices:void 0};static stats=wt;static log=bt.R;static registerDevices(e){for(const t of e)(0,Ot.v)(t.type&&t.isSupported&&t.create),Bt.set(t.type,t)}static getAvailableDevices(){return Array.from(Bt).map((e=>e.type))}static getSupportedDevices(){return Array.from(Bt).filter((e=>e.isSupported())).map((e=>e.type))}static setDefaultDeviceProps(e){Object.assign(kt.defaultProps,e)}static async attachDevice(e){const t=Nt(e.devices)||Bt;if(e.handle instanceof WebGL2RenderingContext){const n=t.get("webgl");if(n)return await n.attach(e.handle)}if(null===e.handle){const e=t.get("unknown");if(e)return await e.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(e={}){(e={...Dt.defaultProps,...e}).gl&&(e.type="webgl");const t=Nt(e.devices)||Bt;switch(e.type){case"webgpu":let n=t.get("webgpu");if(n)return await n.create(e);break;case"webgl":let r=t.get("webgl");if(r)return await r.create(e);break;case"unknown":const i=t.get("unknown");if(i)return await i.create(e);break;case"best-available":if(n=t.get("webgpu"),n?.isSupported?.())return await n.create(e);if(r=t.get("webgl"),r?.isSupported?.())return await r.create(e)}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(e=!0){const t=HTMLCanvasElement.prototype;if(!e&&t.originalGetContext)return t.getContext=t.originalGetContext,void(t.originalGetContext=void 0);t.originalGetContext=t.getContext,t.getContext=function(e,t){return"webgl"===e||"experimental-webgl"===e?this.originalGetContext("webgl2",t):this.originalGetContext(e,t)}}}function Nt(e){if(!e||0===e?.length)return null;const t=new Map;for(const n of e)t.set(n.type,n);return t}const Ft=(0,yt.B)()&&"undefined"!=typeof document,Ut=()=>Ft&&"complete"===document.readyState,Gt={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class Vt{id;props;canvas;htmlCanvas;offscreenCanvas;type;width=1;height=1;resizeObserver;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};static get isPageLoaded(){return Ut()}static pageLoaded=function(){if(Ut()||"undefined"==typeof window)return Promise.resolve();return new Promise((e=>{window.addEventListener("load",(()=>e()))}))}();constructor(e){if(this.props={...Gt,...e},e=this.props,!(0,yt.B)())return this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,void(this.canvas=null);if(e.canvas)"string"==typeof e.canvas?this.canvas=function(e){const t=document.getElementById(e);if(!t&&!Ut())throw new Error(`Accessing '${e}' before page was loaded`);if(!(t instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return t}(e.canvas):this.canvas=e.canvas;else{const t=function(e){const{width:t,height:n}=e,r=document.createElement("canvas");return r.id="lumagl-auto-created-canvas",r.width=t||1,r.height=n||1,r.style.width=Number.isFinite(t)?`${t}px`:"100%",r.style.height=Number.isFinite(n)?`${n}px`:"100%",r}(e),n=function(e){if("string"==typeof e){const t=document.getElementById(e);if(!t&&!Ut())throw new Error(`Accessing '${e}' before page was loaded`);if(!t)throw new Error(`${e} is not an HTML element`);return t}if(e)return e;return document.body}(e?.container||null);n.insertBefore(t,n.firstChild),this.canvas=t,e?.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver((e=>{for(const t of e)t.target===this.canvas&&this.update()})),this.resizeObserver.observe(this.canvas))}getDevicePixelRatio(e){if("undefined"!=typeof OffscreenCanvas&&this.canvas instanceof OffscreenCanvas)return 1;if(!(e=void 0===e?this.props.useDevicePixels:e)||e<=0)return 1;if(!0===e){return"undefined"!=typeof window&&window.devicePixelRatio||1}return e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),t=this.canvas;return t.parentElement?[t.clientWidth*e,t.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,t]=this.getPixelSize();return e/t}cssToDeviceRatio(){try{const[e]=this.getDrawingBufferSize(),{clientWidth:t}=this._canvasSizeInfo;return t?e/t:1}catch{return 1}}cssToDevicePixels(e,t=!0){const n=this.cssToDeviceRatio(),[r,i]=this.getDrawingBufferSize();return function(e,t,n,r,i){const s=e,A=zt(s[0],t,n);let o=jt(s[1],t,r,i),a=zt(s[0]+1,t,n);const c=a===n-1?a:a-1;let l;a=jt(s[1]+1,t,r,i),i?(a=0===a?a:a+1,l=o,o=a):l=a===r-1?a:a-1;return{x:A,y:o,width:Math.max(c-A+1,1),height:Math.max(l-o+1,1)}}(e,n,r,i,t)}setDevicePixelRatio(e,t={}){if(!this.htmlCanvas)return;let n="width"in t?t.width:this.htmlCanvas.clientWidth,r="height"in t?t.height:this.htmlCanvas.clientHeight;n&&r||(bt.R.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=this.htmlCanvas.width||1,r=this.htmlCanvas.height||1);const i=this._canvasSizeInfo;if(i.clientWidth!==n||i.clientHeight!==r||i.devicePixelRatio!==e){let t=e;const i=Math.floor(n*t),s=Math.floor(r*t);this.htmlCanvas.width=i,this.htmlCanvas.height=s;const[A,o]=this.getDrawingBufferSize();A===i&&o===s||(t=Math.min(A/n,o/r),this.htmlCanvas.width=Math.floor(n*t),this.htmlCanvas.height=Math.floor(r*t),bt.R.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=r,this._canvasSizeInfo.devicePixelRatio=e}}getDrawingBufferSize(){const e=this.device.gl;if(!e)throw new Error("canvas size");return[e.drawingBufferWidth,e.drawingBufferHeight]}_setAutoCreatedCanvasId(e){"lumagl-auto-created-canvas"===this.htmlCanvas?.id&&(this.htmlCanvas.id=e)}}function zt(e,t,n){return Math.min(Math.round(e*t),n-1)}function jt(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}const Wt={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Ht=(e,t,n)=>t?e.enable(n):e.disable(n),Qt=(e,t,n)=>e.hint(n,t),Xt=(e,t,n)=>e.pixelStorei(n,t),$t=(e,t,n)=>{const r=36006===n?36009:36008;return e.bindFramebuffer(r,t)},Yt=(e,t,n)=>{const r={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];e.bindBuffer(r,t)};function Kt(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}const Zt={3042:Ht,32773:(e,t)=>e.blendColor(...t),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(e,t)=>e.clearColor(...t),3107:(e,t)=>e.colorMask(...t),2884:Ht,2885:(e,t)=>e.cullFace(t),2929:Ht,2931:(e,t)=>e.clearDepth(t),2932:(e,t)=>e.depthFunc(t),2928:(e,t)=>e.depthRange(...t),2930:(e,t)=>e.depthMask(t),3024:Ht,35723:Qt,35725:(e,t)=>e.useProgram(t),36007:(e,t)=>e.bindRenderbuffer(36161,t),36389:(e,t)=>e.bindTransformFeedback?.(36386,t),34229:(e,t)=>e.bindVertexArray(t),36006:$t,36010:$t,34964:Yt,36662:Yt,36663:Yt,35053:Yt,35055:Yt,2886:(e,t)=>e.frontFace(t),33170:Qt,2849:(e,t)=>e.lineWidth(t),32823:Ht,32824:"polygonOffset",10752:"polygonOffset",35977:Ht,32926:Ht,32928:Ht,32938:"sampleCoverage",32939:"sampleCoverage",3089:Ht,3088:(e,t)=>e.scissor(...t),2960:Ht,2961:(e,t)=>e.clearStencil(t),2968:(e,t)=>e.stencilMaskSeparate(1028,t),36005:(e,t)=>e.stencilMaskSeparate(1029,t),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(e,t)=>e.viewport(...t),34383:Ht,10754:Ht,12288:Ht,12289:Ht,12290:Ht,12291:Ht,12292:Ht,12293:Ht,12294:Ht,12295:Ht,3333:Xt,3317:Xt,37440:Xt,37441:Xt,37443:Xt,3330:Xt,3332:Xt,3331:Xt,3314:Xt,32878:Xt,3316:Xt,3315:Xt,32877:Xt,framebuffer:(e,t)=>{const n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{const n="number"==typeof t?[t,t]:t;e.blendEquationSeparate(...n)},blendFunc:(e,t)=>{const n=2===t?.length?[...t,...t]:t;e.blendFuncSeparate(...n)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=Kt(t)?t:[t,t];const[n,r]=t;e.stencilMaskSeparate(1028,n),e.stencilMaskSeparate(1029,r)},stencilFunc:(e,t)=>{t=Kt(t)&&3===t.length?[...t,...t]:t;const[n,r,i,s,A,o]=t;e.stencilFuncSeparate(1028,n,r,i),e.stencilFuncSeparate(1029,s,A,o)},stencilOp:(e,t)=>{t=Kt(t)&&3===t.length?[...t,...t]:t;const[n,r,i,s,A,o]=t;e.stencilOpSeparate(1028,n,r,i),e.stencilOpSeparate(1029,s,A,o)},viewport:(e,t)=>e.viewport(...t)};function qt(e,t,n){return void 0!==t[e]?t[e]:n[e]}const Jt={blendEquation:(e,t,n)=>e.blendEquationSeparate(qt(32777,t,n),qt(34877,t,n)),blendFunc:(e,t,n)=>e.blendFuncSeparate(qt(32969,t,n),qt(32968,t,n),qt(32971,t,n),qt(32970,t,n)),polygonOffset:(e,t,n)=>e.polygonOffset(qt(32824,t,n),qt(10752,t,n)),sampleCoverage:(e,t,n)=>e.sampleCoverage(qt(32938,t,n),qt(32939,t,n)),stencilFuncFront:(e,t,n)=>e.stencilFuncSeparate(1028,qt(2962,t,n),qt(2967,t,n),qt(2963,t,n)),stencilFuncBack:(e,t,n)=>e.stencilFuncSeparate(1029,qt(34816,t,n),qt(36003,t,n),qt(36004,t,n)),stencilOpFront:(e,t,n)=>e.stencilOpSeparate(1028,qt(2964,t,n),qt(2965,t,n),qt(2966,t,n)),stencilOpBack:(e,t,n)=>e.stencilOpSeparate(1029,qt(34817,t,n),qt(34818,t,n),qt(34819,t,n))},en={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,n)=>e({[t]:n}),hint:(e,t,n)=>e({[t]:n}),useProgram:(e,t)=>e({35725:t}),bindRenderbuffer:(e,t,n)=>e({36007:n}),bindTransformFeedback:(e,t,n)=>e({36389:n}),bindVertexArray:(e,t)=>e({34229:t}),bindFramebuffer:(e,t,n)=>{switch(t){case 36160:return e({36006:n,36010:n});case 36009:return e({36006:n});case 36008:return e({36010:n});default:return null}},bindBuffer:(e,t,n)=>{const r={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[t];return r?e({[r]:n}):{valueChanged:!0}},blendColor:(e,t,n,r,i)=>e({32773:new Float32Array([t,n,r,i])}),blendEquation:(e,t)=>e({32777:t,34877:t}),blendEquationSeparate:(e,t,n)=>e({32777:t,34877:n}),blendFunc:(e,t,n)=>e({32969:t,32968:n,32971:t,32970:n}),blendFuncSeparate:(e,t,n,r,i)=>e({32969:t,32968:n,32971:r,32970:i}),clearColor:(e,t,n,r,i)=>e({3106:new Float32Array([t,n,r,i])}),clearDepth:(e,t)=>e({2931:t}),clearStencil:(e,t)=>e({2961:t}),colorMask:(e,t,n,r,i)=>e({3107:[t,n,r,i]}),cullFace:(e,t)=>e({2885:t}),depthFunc:(e,t)=>e({2932:t}),depthRange:(e,t,n)=>e({2928:new Float32Array([t,n])}),depthMask:(e,t)=>e({2930:t}),frontFace:(e,t)=>e({2886:t}),lineWidth:(e,t)=>e({2849:t}),polygonOffset:(e,t,n)=>e({32824:t,10752:n}),sampleCoverage:(e,t,n)=>e({32938:t,32939:n}),scissor:(e,t,n,r,i)=>e({3088:new Int32Array([t,n,r,i])}),stencilMask:(e,t)=>e({2968:t,36005:t}),stencilMaskSeparate:(e,t,n)=>e({[1028===t?2968:36005]:n}),stencilFunc:(e,t,n,r)=>e({2962:t,2967:n,2963:r,34816:t,36003:n,36004:r}),stencilFuncSeparate:(e,t,n,r,i)=>e({[1028===t?2962:34816]:n,[1028===t?2967:36003]:r,[1028===t?2963:36004]:i}),stencilOp:(e,t,n,r)=>e({2964:t,2965:n,2966:r,34817:t,34818:n,34819:r}),stencilOpSeparate:(e,t,n,r,i)=>e({[1028===t?2964:34817]:n,[1028===t?2965:34818]:r,[1028===t?2966:34819]:i}),viewport:(e,t,n,r,i)=>e({2978:[t,n,r,i]})},tn=(e,t)=>e.isEnabled(t),nn={3042:tn,2884:tn,2929:tn,3024:tn,32823:tn,32926:tn,32928:tn,3089:tn,2960:tn,35977:tn},rn=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function sn(e,t){if(function(e){for(const t in e)return!1;return!0}(t))return;const n={};for(const i in t){const r=Number(i),s=Zt[i];s&&("string"==typeof s?n[s]=!0:s(e,t[i],r))}const r=e.state&&e.state.cache;if(r)for(const i in n){(0,Jt[i])(e,t,r)}}function An(e,t=Wt){if("number"==typeof t){const n=t,r=nn[n];return r?r(e,n):e.getParameter(n)}const n=Array.isArray(t)?t:Object.keys(t),r={};for(const i of n){const t=nn[i];r[i]=t?t(e,Number(i)):e.getParameter(Number(i))}return r}function on(e,t){if(e===t)return!0;const n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}class an{gl;program=null;stateStack=[];enable=!0;cache;log;constructor(e,{copyState:t=!1,log:n=(()=>{})}={}){this.gl=e,this.cache=t?An(e):Object.assign({},Wt),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){(0,Ot.v)(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];sn(this.gl,e),this.stateStack.pop()}_updateCache(e){let t,n=!1;const r=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const i in e){(0,Ot.v)(void 0!==i);const s=e[i],A=this.cache[i];on(s,A)||(n=!0,t=A,r&&!(i in r)&&(r[i]=A),this.cache[i]=s)}return{valueChanged:n,oldValue:t}}}function cn(e){return e.state}function ln(e,t){const{enable:n=!0,copyState:r}=t;if((0,Ot.v)(void 0!==r),!e.state){e.state=new an(e,{copyState:r}),function(e){const t=e.useProgram.bind(e);e.useProgram=function(n){const r=cn(e);r.program!==n&&(t(n),r.program=n)}}(e);for(const t in en){fn(e,t,en[t])}dn(e,"getParameter"),dn(e,"isEnabled")}return cn(e).enable=n,e}function un(e){let t=cn(e);t||(ln(e,{copyState:!1}),t=cn(e)),t.push()}function hn(e){const t=cn(e);(0,Ot.v)(t),t.pop()}function dn(e,t){const n=e[t].bind(e);e[t]=function(t){if(void 0===t||rn.has(t))return n(t);const r=cn(e);return t in r.cache||(r.cache[t]=n(t)),r.enable?r.cache[t]:n(t)},Object.defineProperty(e[t],"name",{value:`${t}-from-cache`,configurable:!1})}function fn(e,t,n){if(!e[t])return;const r=e[t].bind(e);e[t]=function(...t){const i=cn(e),{valueChanged:s,oldValue:A}=n(i._updateCache,...t);return s&&r(...t),A},Object.defineProperty(e[t],"name",{value:`${t}-to-cache`,configurable:!1})}const pn={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function gn(e,t,n){return void 0===n[t]&&(n[t]=e.getExtension(t)||null),n[t]}function _n(e,t){const n=e.getParameter(7936),r=e.getParameter(7937);gn(e,"WEBGL_debug_renderer_info",t);const i=t.WEBGL_debug_renderer_info,s=e.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936)||n,A=e.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937)||r,o=e.getParameter(7938),a=mn(s,A),c=function(e,t){if(/Metal/i.exec(e)||/Metal/i.exec(t))return"metal";if(/ANGLE/i.exec(e)||/ANGLE/i.exec(t))return"opengl";return"unknown"}(s,A),l=function(e,t){if(/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t))return"cpu";switch(mn(e,t)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}(s,A);return{type:"webgl",gpu:a,gpuType:l,gpuBackend:c,vendor:s,renderer:A,version:o,shadingLanguage:"glsl",shadingLanguageVersion:300}}function mn(e,t){return/NVIDIA/i.exec(e)||/NVIDIA/i.exec(t)?"nvidia":/INTEL/i.exec(e)||/INTEL/i.exec(t)?"intel":/Apple/i.exec(e)||/Apple/i.exec(t)?"apple":/AMD/i.exec(e)||/AMD/i.exec(t)||/ATI/i.exec(e)||/ATI/i.exec(t)?"amd":/SwiftShader/i.exec(e)||/SwiftShader/i.exec(t)?"software":"unknown"}function En(e){switch(e){case"uint8":case"unorm8":return 5121;case"sint8":case"snorm8":return 5120;case"uint16":case"unorm16":return 5123;case"sint16":case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(e))}const vn="texture-compression-bc",yn="texture-compression-astc",bn="texture-compression-etc2",wn="texture-compression-pvrtc-webgl",Tn="texture-compression-atc-webgl",Sn="float32-renderable-webgl",Rn="float16-renderable-webgl",Cn="snorm8-renderable-webgl",xn="norm16-renderable-webgl",Pn="snorm16-renderable-webgl",Mn="float32-filterable",In="float16-filterable-webgl",Ln="WEBGL_compressed_texture_s3tc",kn="WEBGL_compressed_texture_s3tc_srgb",On="EXT_texture_compression_rgtc",Bn="EXT_texture_compression_bptc",Dn="EXT_texture_norm16",Nn="EXT_render_snorm",Fn={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[Nn],"norm16-renderable-webgl":[Dn],"snorm16-renderable-webgl":[Dn,Nn],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[Ln,kn,On,Bn],"texture-compression-bc5-webgl":[On],"texture-compression-bc7-webgl":[Bn],"texture-compression-etc2":["WEBGL_compressed_texture_etc"],"texture-compression-astc":["WEBGL_compressed_texture_astc"],"texture-compression-etc1-webgl":["WEBGL_compressed_texture_etc1"],"texture-compression-pvrtc-webgl":["WEBGL_compressed_texture_pvrtc"],"texture-compression-atc-webgl":["WEBGL_compressed_texture_atc"]};function Un(e,t,n){return(Fn[t]||[]).every((t=>gn(e,t,n)))}const Gn={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:Cn},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:Cn},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:Rn,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:xn,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:Pn},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:Cn},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:Rn,filter:In,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:xn},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:Pn},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:Sn,filter:Mn},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:"rgb9e5ufloat_renderable-webgl"},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:Sn,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:xn},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:xn},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:Sn,filter:Mn,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:Rn,filter:In},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:xn,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:Pn},"rgb32float-webgl":{gl:34837,render:Sn,filter:Mn,gl2ext:"EXT_color_buffer_float",dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:Sn,filter:Mn,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:Ln,f:vn},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:kn,f:vn},"bc1-rgba-unorm":{gl:33777,x:Ln,f:vn},"bc1-rgba-unorm-srgb":{gl:35916,x:kn,f:vn},"bc2-rgba-unorm":{gl:33778,x:Ln,f:vn},"bc2-rgba-unorm-srgb":{gl:35918,x:kn,f:vn},"bc3-rgba-unorm":{gl:33779,x:Ln,f:vn},"bc3-rgba-unorm-srgb":{gl:35919,x:kn,f:vn},"bc4-r-unorm":{gl:36283,x:On,f:vn},"bc4-r-snorm":{gl:36284,x:On,f:vn},"bc5-rg-unorm":{gl:36285,x:On,f:vn},"bc5-rg-snorm":{gl:36286,x:On,f:vn},"bc6h-rgb-ufloat":{gl:36495,x:Bn,f:vn},"bc6h-rgb-float":{gl:36494,x:Bn,f:vn},"bc7-rgba-unorm":{gl:36492,x:Bn,f:vn},"bc7-rgba-unorm-srgb":{gl:36493,x:Bn,f:vn},"etc2-rgb8unorm":{gl:37492,f:bn},"etc2-rgb8unorm-srgb":{gl:37494,f:bn},"etc2-rgb8a1unorm":{gl:37496,f:bn},"etc2-rgb8a1unorm-srgb":{gl:37497,f:bn},"etc2-rgba8unorm":{gl:37493,f:bn},"etc2-rgba8unorm-srgb":{gl:37495,f:bn},"eac-r11unorm":{gl:37488,f:bn},"eac-r11snorm":{gl:37489,f:bn},"eac-rg11unorm":{gl:37490,f:bn},"eac-rg11snorm":{gl:37491,f:bn},"astc-4x4-unorm":{gl:37808,f:yn},"astc-4x4-unorm-srgb":{gl:37840,f:yn},"astc-5x4-unorm":{gl:37809,f:yn},"astc-5x4-unorm-srgb":{gl:37841,f:yn},"astc-5x5-unorm":{gl:37810,f:yn},"astc-5x5-unorm-srgb":{gl:37842,f:yn},"astc-6x5-unorm":{gl:37811,f:yn},"astc-6x5-unorm-srgb":{gl:37843,f:yn},"astc-6x6-unorm":{gl:37812,f:yn},"astc-6x6-unorm-srgb":{gl:37844,f:yn},"astc-8x5-unorm":{gl:37813,f:yn},"astc-8x5-unorm-srgb":{gl:37845,f:yn},"astc-8x6-unorm":{gl:37814,f:yn},"astc-8x6-unorm-srgb":{gl:37846,f:yn},"astc-8x8-unorm":{gl:37815,f:yn},"astc-8x8-unorm-srgb":{gl:37847,f:yn},"astc-10x5-unorm":{gl:37819,f:yn},"astc-10x5-unorm-srgb":{gl:37851,f:yn},"astc-10x6-unorm":{gl:37817,f:yn},"astc-10x6-unorm-srgb":{gl:37849,f:yn},"astc-10x8-unorm":{gl:37818,f:yn},"astc-10x8-unorm-srgb":{gl:37850,f:yn},"astc-10x10-unorm":{gl:37819,f:yn},"astc-10x10-unorm-srgb":{gl:37851,f:yn},"astc-12x10-unorm":{gl:37820,f:yn},"astc-12x10-unorm-srgb":{gl:37852,f:yn},"astc-12x12-unorm":{gl:37821,f:yn},"astc-12x12-unorm-srgb":{gl:37853,f:yn},"pvrtc-rgb4unorm-webgl":{gl:35840,f:wn},"pvrtc-rgba4unorm-webgl":{gl:35842,f:wn},"pvrtc-rbg2unorm-webgl":{gl:35841,f:wn},"pvrtc-rgba2unorm-webgl":{gl:35843,f:wn},"etc1-rbg-unorm-webgl":{gl:36196,f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{gl:35986,f:Tn},"atc-rgba-unorm-webgl":{gl:35986,f:Tn},"atc-rgbai-unorm-webgl":{gl:34798,f:Tn}},Vn={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},zn={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function jn(e,t,n){const r=Gn[t];if(!r)return!1;if(void 0===r.gl)return!1;const i=r.x||r.gl2ext;return!i||Boolean(gn(e,i,n))}function Wn(e){const t=Gn[e]?.gl;if(void 0===t)throw new Error(`Unsupported texture format ${e}`);return t}function Hn(e){const t=Gn[e],n=Wn(e),r=Mt(e);return{format:n,dataFormat:t?.dataFormat||Xn(r.format,r.integer,r.normalized,n),type:r.dataType?En(r.dataType):t?.types?.[0]||5121,compressed:r.compressed}}function Qn(e){const t=Hn(e);return(Vn[t.dataFormat]||4)*(zn[t.type]||1)}function Xn(e,t,n,r){if(6408===r||6407===r)return r;switch(e){case"r":return t&&!n?36244:6403;case"rg":return t&&!n?33320:33319;case"rgb":return t&&!n?36248:6407;case"rgba":return t&&!n?36249:6408;default:return 6408}}const $n={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Yn extends Lt{gl;extensions;testedFeatures=new Set;constructor(e,t,n){super([],n),this.gl=e,this.extensions=t,gn(e,"EXT_color_buffer_float",t)}*[Symbol.iterator](){const e=this.getFeatures();for(const t of e)this.has(t)&&(yield t);return[]}has(e){return!this.disabledFeatures[e]&&(this.testedFeatures.has(e)||(this.testedFeatures.add(e),function(e){return e in Fn}(e)&&Un(this.gl,e,this.extensions)&&this.features.add(e),this.getWebGLFeature(e)&&this.features.add(e)),this.features.has(e))}initializeFeatures(){const e=this.getFeatures().filter((e=>"polygon-mode-webgl"!==e));for(const t of e)this.has(t)}getFeatures(){return[...Object.keys($n),...Object.keys(Fn)]}getWebGLFeature(e){const t=$n[e];return"string"==typeof t?Boolean(gn(this.gl,t,this.extensions)):Boolean(t)}}class Kn extends class{}{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}gl;limits={};constructor(e){super(),this.gl=e}getParameter(e){return void 0===this.limits[e]&&(this.limits[e]=this.gl.getParameter(e)),this.limits[e]}}var Zn=n(6031),qn=n(5428);class Jn extends Zn.F{static defaultProps={...Zn.F.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null};get[Symbol.toStringTag](){return"Framebuffer"}width;height;colorAttachments=[];depthStencilAttachment=null;constructor(e,t={}){super(e,t,Jn.defaultProps),this.width=this.props.width,this.height=this.props.height}resize(e){let t=!e;if(e){const[n,r]=Array.isArray(e)?e:[e.width,e.height];t=t||r!==this.height||n!==this.width,this.width=n,this.height=r}t&&(bt.R.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((e=>{if("string"==typeof e){const t=this.createColorTexture(e);return this.attachResource(t),t.view}return e instanceof qn.g?e.view:e}));const e=this.props.depthStencilAttachment;if(e)if("string"==typeof e){const t=this.createDepthStencilTexture(e);this.attachResource(t),this.depthStencilAttachment=t.view}else e instanceof qn.g?this.depthStencilAttachment=e.view:this.depthStencilAttachment=e}createColorTexture(e){return this.device.createTexture({id:"color-attachment",usage:qn.g.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height})}createDepthStencilTexture(e){return this.device.createTexture({id:"depth-stencil-attachment",usage:qn.g.RENDER_ATTACHMENT,format:e,width:this.width,height:this.height})}resizeAttachments(e,t){for(let n=0;n<this.colorAttachments.length;++n)if(this.colorAttachments[n]){const r=this.device._createTexture({...this.colorAttachments[n].props,width:e,height:t});this.destroyAttachedResource(this.colorAttachments[n]),this.colorAttachments[n]=r.view,this.attachResource(r.view)}if(this.depthStencilAttachment){const n=this.device._createTexture({...this.depthStencilAttachment.props,width:e,height:t});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=n.view,this.attachResource(n)}}}let er="";async function tr(e,t){return await new Promise(((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error(`Could not load image ${e}.`)),i.crossOrigin=t?.crossOrigin||"anonymous",i.src=e.startsWith("http")?e:er+e}catch(i){r(i)}}))}async function nr(e,t){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("src",e),t&&(r.id=t),new Promise(((t,i)=>{r.onload=t,r.onerror=t=>i(new Error(`Unable to load script '${e}': ${t}`)),n.appendChild(r)}))}function rr(e,t,n){if(function(e){for(const t in e)return!1;return!0}(t))return n(e);const{nocatch:r=!0}=t;let i;if(un(e),sn(e,t),r)i=n(e),hn(e);else try{i=n(e)}finally{hn(e)}return i}function ir(e,t){const n=e,{gl:r}=n;if(t.cullMode)switch(t.cullMode){case"none":r.disable(2884);break;case"front":r.enable(2884),r.cullFace(1028);break;case"back":r.enable(2884),r.cullFace(1029)}if(t.frontFace&&r.frontFace(cr("frontFace",t.frontFace,{ccw:2305,cw:2304})),t.unclippedDepth&&e.features.has("depth-clip-control")&&r.enable(34383),void 0!==t.depthBias&&(r.enable(32823),r.polygonOffset(t.depthBias,t.depthBiasSlopeScale||0)),t.provokingVertex&&e.features.has("provoking-vertex-webgl")){const e=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,r=cr("provokingVertex",t.provokingVertex,{first:36429,last:36430});e?.provokingVertexWEBGL(r)}if((t.polygonMode||t.polygonOffsetLine)&&e.features.has("polygon-mode-webgl")){if(t.polygonMode){const e=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,r=cr("polygonMode",t.polygonMode,{fill:6914,line:6913});e?.polygonModeWEBGL(1028,r),e?.polygonModeWEBGL(1029,r)}t.polygonOffsetLine&&r.enable(10754)}if(e.features.has("shader-clip-cull-distance-webgl")&&(t.clipDistance0&&r.enable(12288),t.clipDistance1&&r.enable(12289),t.clipDistance2&&r.enable(12290),t.clipDistance3&&r.enable(12291),t.clipDistance4&&r.enable(12292),t.clipDistance5&&r.enable(12293),t.clipDistance6&&r.enable(12294),t.clipDistance7&&r.enable(12295)),void 0!==t.depthWriteEnabled&&r.depthMask(t.depthWriteEnabled),t.depthCompare&&("always"!==t.depthCompare?r.enable(2929):r.disable(2929),r.depthFunc(sr("depthCompare",t.depthCompare))),t.stencilWriteMask){const e=t.stencilWriteMask;r.stencilMaskSeparate(1028,e),r.stencilMaskSeparate(1029,e)}if(t.stencilReadMask&&bt.R.warn("stencilReadMask not supported under WebGL"),t.stencilCompare){const e=t.stencilReadMask||4294967295,n=sr("depthCompare",t.stencilCompare);"always"!==t.stencilCompare?r.enable(2960):r.disable(2960),r.stencilFuncSeparate(1028,n,0,e),r.stencilFuncSeparate(1029,n,0,e)}if(t.stencilPassOperation&&t.stencilFailOperation&&t.stencilDepthFailOperation){const e=Ar("stencilPassOperation",t.stencilPassOperation),n=Ar("stencilFailOperation",t.stencilFailOperation),i=Ar("stencilDepthFailOperation",t.stencilDepthFailOperation);r.stencilOpSeparate(1028,n,i,e),r.stencilOpSeparate(1029,n,i,e)}if(t.blendColorOperation||t.blendAlphaOperation){r.enable(3042);const e=or("blendColorOperation",t.blendColorOperation||"add"),n=or("blendAlphaOperation",t.blendAlphaOperation||"add");r.blendEquationSeparate(e,n);const i=ar("blendColorSrcFactor",t.blendColorSrcFactor||"one"),s=ar("blendColorDstFactor",t.blendColorDstFactor||"zero"),A=ar("blendAlphaSrcFactor",t.blendAlphaSrcFactor||"one"),o=ar("blendAlphaDstFactor",t.blendAlphaDstFactor||"zero");r.blendFuncSeparate(i,s,A,o)}}function sr(e,t){return cr(e,t,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function Ar(e,t){return cr(e,t,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function or(e,t){return cr(e,t,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function ar(e,t){return cr(e,t,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function cr(e,t,n){if(!(t in n))throw new Error(function(e,t){return`Illegal parameter ${t} for ${e}`}(e,t));return n[t]}function lr(e){const t={};return e.addressModeU&&(t[10242]=ur(e.addressModeU)),e.addressModeV&&(t[10243]=ur(e.addressModeV)),e.addressModeW&&(t[32882]=ur(e.addressModeW)),e.magFilter&&(t[10240]=hr(e.magFilter)),(e.minFilter||e.mipmapFilter)&&(t[10241]=function(e,t){if(!t)return hr(e);switch(e){case"nearest":return"nearest"===t?9984:9986;case"linear":return"nearest"===t?9985:9987}}(e.minFilter||"linear",e.mipmapFilter)),void 0!==e.lodMinClamp&&(t[33082]=e.lodMinClamp),void 0!==e.lodMaxClamp&&(t[33083]=e.lodMaxClamp),"comparison-sampler"===e.type&&(t[34892]=34894),e.compare&&(t[34893]=sr("compare",e.compare)),e.maxAnisotropy&&(t[34046]=e.maxAnisotropy),t}function ur(e){switch(e){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function hr(e){switch(e){case"nearest":return 9728;case"linear":return 9729}}class dr extends Rt.h{device;gl;handle;glTarget;glUsage;glIndexType=5123;byteLength;bytesUsed;constructor(e,t={}){super(e,t),this.device=e,this.gl=this.device.gl;const n="object"==typeof t?t.handle:void 0;this.handle=n||this.gl.createBuffer(),e.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=function(e){if(e&Rt.h.INDEX)return 34963;if(e&Rt.h.VERTEX)return 34962;if(e&Rt.h.UNIFORM)return 35345;return 34962}(this.props.usage),this.glUsage=function(e){if(e&Rt.h.INDEX)return 35044;if(e&Rt.h.VERTEX)return 35044;if(e&Rt.h.UNIFORM)return 35048;return 35044}(this.props.usage),this.glIndexType="uint32"===this.props.indexType?5125:5123,t.data?this._initWithData(t.data,t.byteOffset,t.byteLength):this._initWithByteLength(t.byteLength||0)}_initWithData(e,t=0,n=e.byteLength+t){const r=this.glTarget;this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.glUsage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(e,t,n),this.trackAllocatedMemory(n)}_initWithByteLength(e){(0,Ot.v)(e>=0);let t=e;0===e&&(t=new Float32Array(0));const n=this.glTarget;return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,t,this.glUsage),this.gl.bindBuffer(n,null),this.bytesUsed=e,this.byteLength=e,this._setDebugData(null,0,e),this.trackAllocatedMemory(e),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(e,t=0){const n=36663;this.gl.bindBuffer(n,this.handle),this.gl.bufferSubData(n,t,e),this.gl.bindBuffer(n,null),this._setDebugData(e,t,e.byteLength)}async readAsync(e=0,t){return this.readSyncWebGL(e,t)}readSyncWebGL(e=0,t){t=t??this.byteLength-e;const n=new Uint8Array(t);return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,n,0,t),this.gl.bindBuffer(36662,null),this._setDebugData(n,e,t),n}}var fr=n(4499);class pr extends fr.L{device;handle;parameters;constructor(e,t){super(e,t),this.device=e,this.parameters=lr(t),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(e){for(const[t,n]of Object.entries(e)){const e=Number(t);switch(e){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,e,n);break;default:this.device.gl.samplerParameteri(this.handle,e,n)}}}}var gr=n(8932);class _r extends gr.X{device;gl;handle;texture;constructor(e,t){super(e,{...qn.g.defaultProps,...t}),this.device=e,this.gl=this.device.gl,this.handle=null,this.texture=t.texture}}const mr={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0};class Er extends qn.g{static FACES=[34069,34070,34071,34072,34073,34074];MAX_ATTRIBUTES;device;gl;handle;sampler=void 0;view=void 0;glFormat=void 0;type=void 0;dataFormat=void 0;mipmaps=void 0;target;textureUnit=void 0;loaded=!1;_video;constructor(e,t){super(e,{...mr,format:"rgba8unorm",...t}),this.device=e,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=function(e){switch(e.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;default:throw new Error(e.dimension)}}(this.props),this.loaded=!1,"string"==typeof this.props?.data&&Object.assign(this.props,{data:tr(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(e){return new _r(this.device,{...e,texture:this})}initialize(e={}){if("cube"===this.props.dimension)return this.initializeCube(e);let t=e.data;if(t instanceof Promise)return t.then((t=>this.initialize(Object.assign({},e,{pixels:t,data:t})))),this;const n="undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement;if(n&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",(()=>this.initialize(e))),this;const{parameters:r={}}=e,{pixels:i=null,pixelStore:s={},textureUnit:A,mipmaps:o=!0}=e;t||(t=i);let{width:a,height:c,dataFormat:l,type:u,compressed:h=!1}=e;const{depth:d=0}=e,f=Wn(e.format);return({width:a,height:c,compressed:h,dataFormat:l,type:u}=this._deduceParameters({format:e.format,type:u,dataFormat:l,compressed:h,data:t,width:a,height:c})),this.width=a,this.height=c,this.glFormat=f,this.type=u,this.dataFormat=l,this.textureUnit=A,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=o,this.setImageData({data:t,width:a,height:c,depth:d,format:f,type:u,dataFormat:l,parameters:s,compressed:h}),this.setSampler(e.sampler),this._setSamplerParameters(r),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),o&&this.device.isTextureFormatFilterable(e.format)&&this.generateMipmap(),n&&(this._video={video:t,parameters:r,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}initializeCube(e){const{mipmaps:t=!0,parameters:n={}}=e;return this.setCubeMapImageData(e).then((()=>{this.loaded=!0,t&&this.generateMipmap(e),this.setSampler(e.sampler),this._setSamplerParameters(n)})),this}setSampler(e={}){let t;e instanceof pr?(this.sampler=e,t=e.props):(this.sampler=new pr(this.device,e),t=e);const n=lr(t);return this._setSamplerParameters(n),this}resize(e){const{height:t,width:n,mipmaps:r=!1}=e;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:r}):this}update(){if(this._video){const{video:e,parameters:t,lastTime:n}=this._video;if(n===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}generateMipmap(e={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),rr(this.gl,e,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this}setImageData(e){if("3d"===this.props.dimension||"2d-array"===this.props.dimension)return this.setImageData3D(e);this.trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:n=null,level:r=0,glFormat:i=this.glFormat,offset:s=0,parameters:A={}}=e;let{data:o=null,type:a=this.type,width:c=this.width,height:l=this.height,dataFormat:u=this.dataFormat,compressed:h=!1}=e;o||(o=n),({type:a,dataFormat:u,compressed:h,width:c,height:l}=this._deduceParameters({format:this.props.format,type:a,dataFormat:u,compressed:h,data:o,width:c,height:l}));const{gl:d}=this;d.bindTexture(this.target,this.handle);let f=null;if(({data:o,dataType:f}=this._getDataType({data:o,compressed:h})),rr(this.gl,A,(()=>{switch(f){case"null":case"browser-object":d.texImage2D(t,r,i,c,l,0,u,a,o);break;case"typed-array":d.texImage2D(t,r,i,c,l,0,u,a,o,s);break;case"buffer":this.device.gl.bindBuffer(35052,o.handle||o),this.device.gl.texImage2D(t,r,i,c,l,0,u,a,s),this.device.gl.bindBuffer(35052,null);break;case"compressed":for(const[e,n]of o.entries())d.compressedTexImage2D(t,e,n.format,n.width,n.height,0,n.data);break;default:(0,Ot.v)(!1,"Unknown image data type")}})),o&&o.byteLength)this.trackAllocatedMemory(o.byteLength,"Texture");else{const e=Qn(this.props.format);this.trackAllocatedMemory(this.width*this.height*e,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:t=null,data:n=null,x:r=0,y:i=0,width:s=this.width,height:A=this.height,level:o=0,glFormat:a=this.glFormat,type:c=this.type,dataFormat:l=this.dataFormat,compressed:u=!1,offset:h=0,parameters:d={}}){if(({type:c,dataFormat:l,compressed:u,width:s,height:A}=this._deduceParameters({format:this.props.format,type:c,dataFormat:l,compressed:u,data:n,width:s,height:A})),(0,Ot.v)(1===this.depth,"texSubImage not supported for 3D textures"),n||(n=t),n&&n.data){const e=n;n=e.data,s=e.shape[0],A=e.shape[1]}n instanceof dr&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),rr(this.gl,d,(()=>{u?this.gl.compressedTexSubImage2D(e,o,r,i,s,A,a,n):null===n?this.gl.texSubImage2D(e,o,r,i,s,A,l,c,null):ArrayBuffer.isView(n)?this.gl.texSubImage2D(e,o,r,i,s,A,l,c,n,h):"undefined"!=typeof WebGLBuffer&&n instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,n),this.device.gl.texSubImage2D(e,o,r,i,s,A,l,c,h),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(e,o,r,i,s,A,l,c,n)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return bt.R.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType({data:e,compressed:t=!1}){return t?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof dr?{data:e.handle,dataType:"buffer"}:"undefined"!=typeof WebGLBuffer&&e instanceof WebGLBuffer?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:n}=e;let{width:r,height:i,dataFormat:s,type:A,compressed:o}=e;const a=Hn(t);return s=s||a.dataFormat,A=A||a.type,o=o||a.compressed,({width:r,height:i}=this._deduceImageSize(n,r,i)),{dataFormat:s,type:A,compressed:o,width:r,height:i,format:t,data:n}}_deduceImageSize(e,t,n){let r;return r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},(0,Ot.v)(r,"Could not deduced texture size"),(0,Ot.v)(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),(0,Ot.v)(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}async setCubeMapImageData(e){const{gl:t}=this,{width:n,height:r,pixels:i,data:s,format:A=6408,type:o=5121}=e,a=i||s,c=await Promise.all(Er.FACES.map((e=>{const t=a[e];return Promise.all(Array.isArray(t)?t:[t])})));this.bind(),Er.FACES.forEach(((e,i)=>{c[i].length>1&&!1!==this.props.mipmaps&&bt.R.warn(`${this.id} has mipmap and multiple LODs.`)(),c[i].forEach(((i,s)=>{n&&r?t.texImage2D(e,s,A,n,r,0,A,o,i):t.texImage2D(e,s,A,A,o,i)}))})),this.unbind()}setImageDataForFace(e){const{face:t,width:n,height:r,pixels:i,data:s,format:A=6408,type:o=5121}=e,{gl:a}=this,c=i||s;return this.bind(),c instanceof Promise?c.then((n=>this.setImageDataForFace(Object.assign({},e,{face:t,data:n,pixels:n})))):this.width||this.height?a.texImage2D(t,0,A,n,r,0,A,o,c):a.texImage2D(t,0,A,A,o,c),this}setImageData3D(e){const{level:t=0,dataFormat:n,format:r,type:i,width:s,height:A,depth:o=1,offset:a=0,data:c,parameters:l={}}=e;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const u=Hn(r);if(rr(this.gl,l,(()=>{ArrayBuffer.isView(c)&&this.gl.texImage3D(this.target,t,u.format,s,A,o,0,u.dataFormat,u.type,c),c instanceof dr&&(this.gl.bindBuffer(35052,c.handle),this.gl.texImage3D(this.target,t,n,s,A,o,0,r,i,a))})),c&&c.byteLength)this.trackAllocatedMemory(c.byteLength,"Texture");else{const e=Qn(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*e,"Texture")}return this.loaded=!0,this}_setSamplerParameters(e){if(!(0,St.Z)(e)){!function(e){bt.R.log(1,"texture sampler parameters",e)()}(e),this.gl.bindTexture(this.target,this.handle);for(const[t,n]of Object.entries(e)){const e=Number(t),r=n;switch(e){case 33082:case 33083:this.gl.texParameterf(this.target,e,r);break;default:this.gl.texParameteri(this.target,e,r)}}this.gl.bindTexture(this.target,null)}}}class vr extends Jn{device;gl;handle;get texture(){return this.colorAttachments[0]}constructor(e,t){super(e,t);const n=null===t.handle;if(this.device=e,this.gl=e.gl,this.handle=this.props.handle||n?this.props.handle:this.gl.createFramebuffer(),!n){e.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const n=this.gl.bindFramebuffer(36160,this.handle);for(let e=0;e<this.colorAttachments.length;++e){const t=this.colorAttachments[e],n=36064+e;t&&this._attachOne(n,t)}if(this.depthStencilAttachment&&this._attachOne(function(e){const t=Gn[e];if(!t?.attachment)throw new Error(`${e} is not a depth stencil format`);return t.attachment}(this.depthStencilAttachment.props.format),this.depthStencilAttachment),!1!==t.check){const e=this.gl.checkFramebufferStatus(36160);if(36053!==e)throw new Error(`Framebuffer ${function(e){switch(e){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${e}`}}(e)}`)}this.gl.bindFramebuffer(36160,n)}}destroy(){super.destroy(),this.destroyed||null===this.handle||this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(e){return new Er(this.device,{id:`${this.id}-depth-stencil`,format:e,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(e,t){if(null===this.handle)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===t&&(t=this.gl.drawingBufferHeight);for(const n of this.colorAttachments)n.texture.resize({width:e,height:t});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:e,height:t}),this}_attachOne(e,t){if(Array.isArray(t)){const[n,r=0,i=0]=t;return this._attachTexture(e,n,r,i),n}if(t instanceof Er)return this._attachTexture(e,t,0,0),t;if(t instanceof _r){const n=t;return this._attachTexture(e,n.texture,n.props.baseMipLevel,n.props.baseArrayLayer),t.texture}throw new Error("attach")}_attachTexture(e,t,n,r){const{gl:i}=this.device;switch(i.bindTexture(t.target,t.handle),t.target){case 35866:case 32879:i.framebufferTextureLayer(36160,e,t.target,r,n);break;case 34067:const s=function(e){return e<34069?e+34069:e}(n);i.framebufferTexture2D(36160,e,s,t.handle,r);break;case 3553:i.framebufferTexture2D(36160,e,3553,t.handle,r);break;default:(0,Ot.v)(!1,"Illegal texture type")}i.bindTexture(t.target,null)}}class yr extends Vt{device;presentationSize;_framebuffer=null;constructor(e,t){super(t),this.device=e,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new vr(this.device,{handle:null}),this._framebuffer}update(){const e=this.getPixelSize();(e[0]!==this.presentationSize[0]||e[1]!==this.presentationSize[1])&&(this.presentationSize=e,this.resize())}resize(e){if(this.device.gl)if(this.canvas){const t=this.getDevicePixelRatio(e?.useDevicePixels);this.setDevicePixelRatio(t,e)}else;}commit(){}}const br={spector:bt.R.get("spector")||bt.R.get("spectorjs")};let wr=null,Tr=!1;var Sr;!function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",e[e.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.CULL_FACE=2884]="CULL_FACE",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.BLEND=3042]="BLEND",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.DITHER=3024]="DITHER",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DOUBLE=5130]="DOUBLE",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",e[e.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.READ_BUFFER=3074]="READ_BUFFER",e[e.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",e[e.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",e[e.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",e[e.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",e[e.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",e[e.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",e[e.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",e[e.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",e[e.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",e[e.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",e[e.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",e[e.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",e[e.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",e[e.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",e[e.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",e[e.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",e[e.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",e[e.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",e[e.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",e[e.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",e[e.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",e[e.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",e[e.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",e[e.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",e[e.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",e[e.RED=6403]="RED",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB10_A2=32857]="RGB10_A2",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",e[e.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",e[e.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",e[e.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",e[e.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",e[e.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",e[e.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",e[e.SRGB=35904]="SRGB",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",e[e.RGBA32F=34836]="RGBA32F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.RGB16F=34843]="RGB16F",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R16F=33325]="R16F",e[e.R32F=33326]="R32F",e[e.RG16F=33327]="RG16F",e[e.RG32F=33328]="RG32F",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2UI=36975]="RGB10_A2UI",e[e.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",e[e.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.RG=33319]="RG",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",e[e.CURRENT_QUERY=34917]="CURRENT_QUERY",e[e.QUERY_RESULT=34918]="QUERY_RESULT",e[e.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",e[e.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",e[e.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",e[e.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",e[e.DRAW_BUFFER0=34853]="DRAW_BUFFER0",e[e.DRAW_BUFFER1=34854]="DRAW_BUFFER1",e[e.DRAW_BUFFER2=34855]="DRAW_BUFFER2",e[e.DRAW_BUFFER3=34856]="DRAW_BUFFER3",e[e.DRAW_BUFFER4=34857]="DRAW_BUFFER4",e[e.DRAW_BUFFER5=34858]="DRAW_BUFFER5",e[e.DRAW_BUFFER6=34859]="DRAW_BUFFER6",e[e.DRAW_BUFFER7=34860]="DRAW_BUFFER7",e[e.DRAW_BUFFER8=34861]="DRAW_BUFFER8",e[e.DRAW_BUFFER9=34862]="DRAW_BUFFER9",e[e.DRAW_BUFFER10=34863]="DRAW_BUFFER10",e[e.DRAW_BUFFER11=34864]="DRAW_BUFFER11",e[e.DRAW_BUFFER12=34865]="DRAW_BUFFER12",e[e.DRAW_BUFFER13=34866]="DRAW_BUFFER13",e[e.DRAW_BUFFER14=34867]="DRAW_BUFFER14",e[e.DRAW_BUFFER15=34868]="DRAW_BUFFER15",e[e.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",e[e.MAX_SAMPLES=36183]="MAX_SAMPLES",e[e.SAMPLER_BINDING=35097]="SAMPLER_BINDING",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",e[e.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",e[e.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",e[e.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",e[e.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",e[e.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",e[e.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",e[e.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",e[e.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",e[e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",e[e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",e[e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",e[e.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",e[e.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",e[e.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",e[e.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",e[e.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",e[e.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",e[e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",e[e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",e[e.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",e[e.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",e[e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",e[e.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",e[e.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",e[e.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",e[e.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",e[e.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",e[e.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",e[e.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",e[e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",e[e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",e[e.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",e[e.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",e[e.UNIFORM_TYPE=35383]="UNIFORM_TYPE",e[e.UNIFORM_SIZE=35384]="UNIFORM_SIZE",e[e.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",e[e.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",e[e.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",e[e.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",e[e.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",e[e.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",e[e.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",e[e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",e[e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",e[e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS",e[e.SYNC_FENCE=37142]="SYNC_FENCE",e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED",e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED",e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",e[e.COLOR=6144]="COLOR",e[e.DEPTH=6145]="DEPTH",e[e.STENCIL=6146]="STENCIL",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STREAM_COPY=35042]="STREAM_COPY",e[e.STATIC_READ=35045]="STATIC_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",e[e.INVALID_INDEX=4294967295]="INVALID_INDEX",e[e.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",e[e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",e[e.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",e[e.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",e[e.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",e[e.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",e[e.R16_EXT=33322]="R16_EXT",e[e.RG16_EXT=33324]="RG16_EXT",e[e.RGB16_EXT=32852]="RGB16_EXT",e[e.RGBA16_EXT=32859]="RGBA16_EXT",e[e.R16_SNORM_EXT=36760]="R16_SNORM_EXT",e[e.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",e[e.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",e[e.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",e[e.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",e[e.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",e[e.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",e[e.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",e[e.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",e[e.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",e[e.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",e[e.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",e[e.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",e[e.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",e[e.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",e[e.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",e[e.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",e[e.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",e[e.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",e[e.LINE_WEBGL=6913]="LINE_WEBGL",e[e.FILL_WEBGL=6914]="FILL_WEBGL",e[e.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",e[e.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",e[e.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",e[e.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",e[e.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",e[e.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",e[e.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",e[e.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",e[e.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",e[e.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",e[e.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",e[e.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",e[e.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",e[e.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",e[e.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",e[e.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",e[e.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",e[e.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",e[e.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",e[e.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",e[e.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",e[e.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",e[e.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",e[e.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"}(Sr||(Sr={}));function Rr(e){return e.luma=e.luma||{},e.luma}function Cr(e,t={}){return e?t.debug?function(e,t){if(!globalThis.WebGLDebugUtils)return bt.R.warn("webgl-debug not loaded")(),e;const n=Rr(e);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...Sr,...e});const r=globalThis.WebGLDebugUtils.makeDebugContext(e,Pr.bind(null,t),Mr.bind(null,t));for(const A in Sr)A in r||"number"!=typeof Sr[A]||(r[A]=Sr[A]);class i{}Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.setPrototypeOf(i,r);const s=Object.create(i);return n.realContext=e,n.debugContext=s,s.debug=!0,s}(e,t):function(e){const t=Rr(e);return t.realContext?t.realContext:e}(e):null}function xr(e,t){t=Array.from(t).map((e=>void 0===e?"undefined":e));let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(e,t);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${e}(${n})`}function Pr(e,t,n,r){r=Array.from(r).map((e=>void 0===e?"undefined":e));const i=`${globalThis.WebGLDebugUtils.glEnumToString(t)} in gl.${n}(${globalThis.WebGLDebugUtils.glFunctionArgsToString(n,r)})`;if(bt.R.error(i)(),e.throwOnError)throw new Error(i)}function Mr(e,t,n){let r="";if(bt.R.level>=1&&(r=xr(t,n),bt.R.log(1,r)()),e.break&&e.break.length>0){r=r||xr(t,n);e.break.every((e=>-1!==r.indexOf(e)))}for(const i of n)if(void 0===i){if(r=r||xr(t,n),e.throwOnError)throw new Error(`Undefined argument: ${r}`);bt.R.error(`Undefined argument: ${r}`)()}}var Ir=n(5429);function Lr(e){const t=e.toLowerCase();return["warning","error","info"].includes(t)?t:"info"}class kr extends Ir.M{device;handle;constructor(e,t){switch(super(e,t),this.device=e,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){return function(e){const t=e.split(/\r?\n/),n=[];for(const r of t){if(r.length<=1)continue;const e=r.split(":");if(2===e.length){const[t,r]=e;n.push({message:r.trim(),type:Lr(t),lineNum:0,linePos:0});continue}const[t,i,s,...A]=e;let o=parseInt(s,10);isNaN(o)&&(o=0);let a=parseInt(i,10);isNaN(a)&&(a=0),n.push({message:A.join(":").trim(),type:Lr(t),lineNum:o,linePos:a})}return n}(this.device.gl.getShaderInfoLog(this.handle))}getTranslatedSource(){return this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders?.getTranslatedShaderSource(this.handle)}async _compile(e){e=(e=>e.startsWith("#version ")?e:`#version 100\n${e}`)(e);const{gl:t}=this.device;if(t.shaderSource(this.handle,e),t.compileShader(this.handle),0!==bt.R.level){if(this.device.features.has("compilation-status-async-webgl"))bt.R.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),bt.R.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader();else if(this._getCompilationStatus(),this.debugShader(),"error"===this.compilationStatus)throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`)}else this.compilationStatus="pending"}async _waitForCompilationComplete(){const e=async e=>await new Promise((t=>setTimeout(t,e)));if(!this.device.features.has("compilation-status-async-webgl"))return void await e(10);const{gl:t}=this.device;for(;;){if(t.getShaderParameter(this.handle,37297))return;await e(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}class Or extends Zn.F{static defaultProps={...Zn.F.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0};get[Symbol.toStringTag](){return"RenderPass"}constructor(e,t){super(e,t,Or.defaultProps)}}const Br=6144,Dr=[1,2,4,8];class Nr extends Or{device;glParameters;constructor(e,t){super(e,t),this.device=e,un(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){hn(this.device.gl)}pushDebugGroup(e){}popDebugGroup(){}insertDebugMarker(e){}setParameters(e={}){const t={...this.glParameters};this.props.framebuffer&&(t.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(t.depthMask=!this.props.depthReadOnly),t.stencilMask=this.props.stencilReadOnly?0:1,t[35977]=this.props.discard,e.viewport&&(e.viewport.length>=6?(t.viewport=e.viewport.slice(0,4),t.depthRange=[e.viewport[4],e.viewport[5]]):t.viewport=e.viewport),e.scissorRect&&(t.scissorTest=!0,t.scissor=e.scissorRect),e.blendConstant&&(t.blendColor=e.blendConstant),e.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),e[2967]=e.stencilReference),e.colorMask&&(t.colorMask=Dr.map((t=>Boolean(t&e.colorMask)))),this.glParameters=t,sn(this.device.gl,t)}beginOcclusionQuery(e){this.props.occlusionQuerySet?.beginOcclusionQuery()}endOcclusionQuery(){this.props.occlusionQuerySet?.endOcclusionQuery()}clear(){const e={...this.glParameters};let t=0;!1!==this.props.clearColor&&(t|=16384,e.clearColor=this.props.clearColor),!1!==this.props.clearDepth&&(t|=256,e.clearDepth=this.props.clearDepth),!1!==this.props.clearStencil&&(t|=1024,e.clearStencil=this.props.clearStencil),0!==t&&rr(this.device.gl,e,(()=>{this.device.gl.clear(t)}))}clearColorBuffer(e=0,t=[0,0,0,0]){rr(this.device.gl,{framebuffer:this.props.framebuffer},(()=>{switch(t.constructor){case Int32Array:this.device.gl.clearBufferiv(Br,e,t);break;case Uint32Array:this.device.gl.clearBufferuiv(Br,e,t);break;case Float32Array:default:this.device.gl.clearBufferfv(Br,e,t)}}))}}var Fr=n(6558);var Ur=n(831),Gr=n(9538);function Vr(e,t){const{clamped:n=!0}=t||{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const zr={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},jr={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Wr{offset;stride;type;size;divisor;normalized;integer;buffer;index;static getBytesPerElement(e){return Vr(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){(0,Ot.v)(e.size);return Vr(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Wr(...[zr,...e])}constructor(...e){e.forEach((e=>this._assign(e))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Wr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Wr.getBytesPerVertex(this)}_assign(e={}){return void 0!==(e=function(e,t,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const o in r)if(o in t){const t=r[o]?`${e}.${r[o]}`:"N/A";bt.R.removed(`${e}.${o}`,t)()}for(const o in i)if(o in t){const t=i[o];bt.R.deprecated(`${e}.${o}`,`${e}.${t}`)()}let A=null;for(const[o,a]of Object.entries(s))o in t&&(bt.R.deprecated(`${e}.${o}`,`${e}.${a}`)(),A=A||Object.assign({},t),A[a]=t[o],delete A[o]);return A||t}("Accessor",e,jr)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalize&&(this.normalized=e.normalize),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof e.index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),void 0===this.offset&&delete this.offset,void 0===this.stride&&delete this.stride,void 0===this.type&&delete this.type,void 0===this.size&&delete this.size,void 0===this.divisor&&delete this.divisor,void 0===this.normalized&&delete this.normalized,void 0===this.integer&&delete this.integer,void 0===this.buffer&&delete this.buffer,void 0===this.index&&delete this.index,this}}const Hr=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],Qr={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function Xr(e){const t=Qr[e];if(!t)throw new Error("uniform");const[n,r,,i]=t;return{format:i,components:r,glType:n}}function $r(e){const t=Qr[e];if(!t)throw new Error("attribute");const[,n,,r,i]=t;return{attributeType:r,vertexFormat:i,components:n}}function Yr(e,t){const n={attributes:[],bindings:[]};n.attributes=function(e,t){const n=[],r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i);if(!r)throw new Error("activeInfo");const{name:s,type:A}=r,o=e.getAttribLocation(t,s);if(o>=0){const{attributeType:e}=$r(A),t=/instance/i.test(s)?"instance":"vertex";n.push({name:s,location:o,stepMode:t,type:e})}}return n.sort(((e,t)=>e.location-t.location)),n}(e,t);const r=function(e,t){const n=(n,r)=>e.getActiveUniformBlockParameter(t,n,r),r=[],i=e.getProgramParameter(t,35382);for(let s=0;s<i;s++){const i={name:e.getActiveUniformBlockName(t,s)||"",location:n(s,35391),byteLength:n(s,35392),vertex:n(s,35396),fragment:n(s,35398),uniformCount:n(s,35394),uniforms:[]},A=n(s,35395)||[],o=e.getActiveUniforms(t,A,35383),a=e.getActiveUniforms(t,A,35384),c=e.getActiveUniforms(t,A,35387),l=e.getActiveUniforms(t,A,35388);for(let n=0;n<i.uniformCount;++n){const r=e.getActiveUniform(t,A[n]);if(!r)throw new Error("activeInfo");i.uniforms.push({name:r.name,format:Xr(o[n]).format,type:o[n],arrayLength:a[n],byteOffset:c[n],byteStride:l[n]})}r.push(i)}return r.sort(((e,t)=>e.location-t.location)),r}(e,t);for(const a of r){const e=a.uniforms.map((e=>({name:e.name,format:e.format,byteOffset:e.byteOffset,byteStride:e.byteStride,arrayLength:e.arrayLength})));n.bindings.push({type:"uniform",name:a.name,location:a.location,visibility:(a.vertex?1:0)&(a.fragment?2:0),minBindingSize:a.byteLength,uniforms:e})}const i=function(e,t){const n=[],r=e.getProgramParameter(t,35718);for(let i=0;i<r;i++){const r=e.getActiveUniform(t,i);if(!r)throw new Error("activeInfo");const{name:s,size:A,type:o}=r,{name:a,isArray:c}=qr(s);let l=e.getUniformLocation(t,a);const u={location:l,name:a,size:A,type:o,isArray:c};if(n.push(u),u.size>1)for(let i=0;i<u.size;i++){const r=`${a}[${i}]`;l=e.getUniformLocation(t,r);const s={...u,name:r,location:l};n.push(s)}}return n}(e,t);let s=0;for(const a of i)if(A=a.type,Hr.includes(A)){const{viewDimension:e,sampleType:t}=Zr(a.type);n.bindings.push({type:"texture",name:a.name,location:s,viewDimension:e,sampleType:t}),a.textureUnit=s,s+=1}var A;i.length&&(n.uniforms=i);const o=function(e,t){const n=[],r=e.getProgramParameter(t,35971);for(let i=0;i<r;i++){const r=e.getTransformFeedbackVarying(t,i);if(!r)throw new Error("activeInfo");const{name:s,type:A,size:o}=r,{glType:a,components:c}=Xr(A),l={location:i,name:s,accessor:new Wr({type:a,size:o*c})};n.push(l)}return n.sort(((e,t)=>e.location-t.location)),n}(e,t);return o?.length&&(n.varyings=o),n}const Kr={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function Zr(e){const t=Kr[e];if(!t)throw new Error("sampler");const[n,r]=t;return{viewDimension:n,sampleType:r}}function qr(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/.exec(e);if(!t||t.length<2)throw new Error(`Failed to parse GLSL uniform name ${e}`);return{name:t[1],length:t[2]?1:0,isArray:Boolean(t[2])}}function Jr(e,t,n,r){const i=e;let s=r;!0===s&&(s=1),!1===s&&(s=0);const A="number"==typeof s?[s]:s;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if("number"!=typeof r)throw new Error("samplers must be set to integers");return e.uniform1i(t,r);case 5126:return e.uniform1fv(t,A);case 35664:return e.uniform2fv(t,A);case 35665:return e.uniform3fv(t,A);case 35666:return e.uniform4fv(t,A);case 5124:case 35670:return e.uniform1iv(t,A);case 35667:case 35671:return e.uniform2iv(t,A);case 35668:case 35672:return e.uniform3iv(t,A);case 35669:case 35673:return e.uniform4iv(t,A);case 5125:return i.uniform1uiv(t,A,1);case 36294:return i.uniform2uiv(t,A,2);case 36295:return i.uniform3uiv(t,A,3);case 36296:return i.uniform4uiv(t,A,4);case 35674:return e.uniformMatrix2fv(t,!1,A);case 35675:return e.uniformMatrix3fv(t,!1,A);case 35676:return e.uniformMatrix4fv(t,!1,A);case 35685:return i.uniformMatrix2x3fv(t,!1,A);case 35686:return i.uniformMatrix2x4fv(t,!1,A);case 35687:return i.uniformMatrix3x2fv(t,!1,A);case 35688:return i.uniformMatrix3x4fv(t,!1,A);case 35689:return i.uniformMatrix4x2fv(t,!1,A);case 35690:return i.uniformMatrix4x3fv(t,!1,A)}throw new Error("Illegal uniform")}class ei extends Fr.r{device;handle;vs;fs;introspectedLayout;uniforms={};bindings={};varyings=null;_uniformCount=0;_uniformSetters={};constructor(e,t){super(e,t),this.device=e,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=t.vs,this.fs=t.fs;const{varyings:n,bufferMode:r=35981}=t;switch(n&&n.length>0&&(this.varyings=n,this.device.gl.transformFeedbackVaryings(this.handle,n,r)),this._linkShaders(),bt.R.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=Yr(this.device.gl,this.handle),bt.R.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=(0,Gr.GE)(this.introspectedLayout,t.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":bt.R.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`)}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(e,t){for(const[n,r]of Object.entries(e)){const e=this.shaderLayout.bindings.find((e=>e.name===n))||this.shaderLayout.bindings.find((e=>e.name===`${n}Uniforms`));if(e){switch(r||bt.R.warn(`Unsetting binding "${n}" in render pipeline "${this.id}"`)(),e.type){case"uniform":if(!(r instanceof dr||r.buffer instanceof dr))throw new Error("buffer value");break;case"texture":if(!(r instanceof _r||r instanceof Er||r instanceof vr))throw new Error("texture value");break;case"sampler":bt.R.warn(`Ignoring sampler ${n}`)();break;default:throw new Error(e.type)}this.bindings[n]=r}else{const e=this.shaderLayout.bindings.map((e=>`"${e.name}"`)).join(", ");t?.disableWarnings||bt.R.warn(`Unknown binding "${n}" in render pipeline "${this.id}", expected one of ${e}`)()}}}draw(e){const{renderPass:t,parameters:n=this.props.parameters,topology:r=this.props.topology,vertexArray:i,vertexCount:s,instanceCount:A,isInstanced:o=!1,firstVertex:a=0,transformFeedback:c}=e,l=function(e){switch(e){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(e)}}(r),u=Boolean(i.indexBuffer),h=i.indexBuffer?.glIndexType;if("success"!==this.linkStatus)return bt.R.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||0===s)return bt.R.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(0===s)return bt.R.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),i.bindBeforeRender(t),c&&c.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const d=t;return function(e,t,n,r){if((0,St.Z)(t))return r(e);const i=e;un(i.gl);try{ir(e,t),sn(i.gl,n),r(e)}finally{hn(i.gl)}}(this.device,n,d.glParameters,(()=>{u&&o?this.device.gl.drawElementsInstanced(l,s||0,h,a,A||0):u?this.device.gl.drawElements(l,s||0,h,a):o?this.device.gl.drawArraysInstanced(l,a,s||0,A||0):this.device.gl.drawArrays(l,a,s||0),c&&c.end()})),i.unbindAfterRender(t),!0}setUniformsWebGL(e){const{bindings:t}=(0,Ur.l)(e);Object.keys(t).forEach((e=>{bt.R.warn(`Unsupported value "${JSON.stringify(t[e])}" used in setUniforms() for key ${e}. Use setBindings() instead?`)()})),Object.assign(this.uniforms,e)}async _linkShaders(){const{gl:e}=this.device;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),bt.R.time(4,`linkProgram for ${this.id}`)(),e.linkProgram(this.handle),bt.R.timeEnd(4,`linkProgram for ${this.id}`)(),bt.R.level,!this.device.features.has("compilation-status-async-webgl")){const e=this._getLinkStatus();return void this._reportLinkStatus(e)}bt.R.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),bt.R.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const t=this._getLinkStatus();this._reportLinkStatus(t)}_reportLinkStatus(e){if("success"!==e){if("error"===this.vs.compilationStatus)throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);if("error"===this.fs?.compilationStatus)throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);throw new Error(`Error during ${e}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:e}=this.device;if(!e.getProgramParameter(this.handle,35714))return this.linkStatus="error","linking";e.validateProgram(this.handle);return e.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")}async _waitForLinkComplete(){const e=async e=>await new Promise((t=>setTimeout(t,e)));if(!this.device.features.has("compilation-status-async-webgl"))return void await e(10);const{gl:t}=this.device;for(;;){if(t.getProgramParameter(this.handle,37297))return;await e(10)}}_areTexturesRenderable(){let e=!0;for(const[,t]of Object.entries(this.bindings))t instanceof Er&&(t.update(),e=e&&t.loaded);return e}_applyBindings(){if("success"!==this.linkStatus)return;const{gl:e}=this.device;e.useProgram(this.handle);let t=0,n=0;for(const r of this.shaderLayout.bindings){const i=this.bindings[r.name]||this.bindings[r.name.replace(/Uniforms$/,"")];if(!i)throw new Error(`No value for binding ${r.name} in ${this.id}`);switch(r.type){case"uniform":const{name:s}=r,A=e.getUniformBlockIndex(this.handle,s);if(4294967295===A)throw new Error(`Invalid uniform block name ${s}`);e.uniformBlockBinding(this.handle,n,A),i instanceof dr?e.bindBufferBase(35345,n,i.handle):e.bindBufferRange(35345,n,i.buffer.handle,i.offset||0,i.size||i.buffer.byteLength-i.offset),n+=1;break;case"texture":if(!(i instanceof _r||i instanceof Er||i instanceof vr))throw new Error("texture");let o;if(i instanceof _r)o=i.texture;else if(i instanceof Er)o=i;else{if(!(i instanceof vr&&i.colorAttachments[0]instanceof _r))throw new Error("No texture");bt.R.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),o=i.colorAttachments[0].texture}e.activeTexture(33984+t),e.bindTexture(o.target,o.handle),t+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${r.type}' not supported in WebGL`)}}}_applyUniforms(){for(const e of this.shaderLayout.uniforms||[]){const{name:t,location:n,type:r,textureUnit:i}=e,s=this.uniforms[t]??i;void 0!==s&&Jr(this.device.gl,n,r,s)}}}class ti extends Zn.F{static defaultProps={...Zn.F.defaultProps,measureExecutionTime:void 0};get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,t){super(e,t,ti.defaultProps)}}class ni extends Zn.F{static defaultProps={...Zn.F.defaultProps};get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,t){super(e,t,ni.defaultProps)}}class ri extends ni{device;commands=[];constructor(e){super(e,{}),this.device=e}submitCommands(e=this.commands){for(const t of e)switch(t.name){case"copy-buffer-to-buffer":ii(this.device,t.options);break;case"copy-buffer-to-texture":si(this.device,t.options);break;case"copy-texture-to-buffer":Ai(this.device,t.options);break;case"copy-texture-to-texture":oi(this.device,t.options)}}}function ii(e,t){const n=t.source,r=t.destination;e.gl.bindBuffer(36662,n.handle),e.gl.bindBuffer(36663,r.handle),e.gl.copyBufferSubData(36662,36663,t.sourceOffset??0,t.destinationOffset??0,t.size),e.gl.bindBuffer(36662,null),e.gl.bindBuffer(36663,null)}function si(e,t){throw new Error("Not implemented")}function Ai(e,t){const{source:n,mipLevel:r=0,aspect:i="all",width:s=t.source.width,height:A=t.source.height,depthOrArrayLayers:o=0,origin:a=[0,0],destination:c,byteOffset:l=0,bytesPerRow:u,rowsPerImage:h}=t;if("all"!==i)throw new Error("not supported");if(0!==r||0!==o||u||h)throw new Error("not implemented");const{framebuffer:d,destroyFramebuffer:f}=ai(n);let p;try{const t=c,n=s||d.width,r=A||d.height,i=Hn(d.texture.props.format),o=i.dataFormat,u=i.type;e.gl.bindBuffer(35051,t.handle),p=e.gl.bindFramebuffer(36160,d.handle),e.gl.readPixels(a[0],a[1],n,r,o,u,l)}finally{e.gl.bindBuffer(35051,null),void 0!==p&&e.gl.bindFramebuffer(36160,p),f&&d.destroy()}}function oi(e,t){const{source:n,destinationMipLevel:r=0,origin:i=[0,0],destinationOrigin:s=[0,0],destination:A}=t;let{width:o=t.destination.width,height:a=t.destination.height}=t;const{framebuffer:c,destroyFramebuffer:l}=ai(n),[u,h]=i,[d,f,p]=s,g=e.gl.bindFramebuffer(36160,c.handle);let _,m=null;if(!(A instanceof Er))throw new Error("invalid destination");switch(m=A,o=Number.isFinite(o)?o:m.width,a=Number.isFinite(a)?a:m.height,m.bind(0),_=m.target,_){case 3553:case 34067:e.gl.copyTexSubImage2D(_,r,d,f,u,h,o,a);break;case 35866:case 32879:e.gl.copyTexSubImage3D(_,r,d,f,p,u,h,o,a)}m&&m.unbind(),e.gl.bindFramebuffer(36160,g),l&&c.destroy()}function ai(e){if(e instanceof qn.g){const{width:t,height:n,id:r}=e;return{framebuffer:e.device.createFramebuffer({id:`framebuffer-for-${r}`,width:t,height:n,colorAttachments:[e]}),destroyFramebuffer:!0}}return{framebuffer:e,destroyFramebuffer:!1}}class ci extends ti{device;commandBuffer;constructor(e,t){super(e,t),this.device=e,this.commandBuffer=new ri(e)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(e){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:e})}copyBufferToTexture(e){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:e})}copyTextureToBuffer(e){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:e})}copyTextureToTexture(e){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:e})}pushDebugGroup(e){}popDebugGroup(){}insertDebugMarker(e){}resolveQuerySet(e,t,n){}}class li extends Zn.F{static defaultProps={...Zn.F.defaultProps,renderPipeline:null};get[Symbol.toStringTag](){return"VertexArray"}maxVertexAttributes;attributeInfos;indexBuffer=null;attributes;constructor(e,t){super(e,t,li.defaultProps),this.maxVertexAttributes=e.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=(0,Gr.Mr)(t.renderPipeline.shaderLayout,t.renderPipeline.bufferLayout,this.maxVertexAttributes)}setConstantWebGL(e,t){throw new Error("constant attributes not supported")}}var ui=n(6220),hi=n(7989),di=n(3640);class fi extends li{get[Symbol.toStringTag](){return"VertexArray"}device;handle;buffer=null;bufferValue=null;static isConstantAttributeZeroSupported(e){return"Chrome"==(t||(0,yt.B)()?(0,hi.b)(t)?"Electron":(t||di.gM.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node");var t}constructor(e,t){super(e,t),this.device=e,this.handle=this.device.gl.createVertexArray()}destroy(){super.destroy(),this.buffer&&this.buffer?.destroy(),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(e){const t=e;if(t&&34963!==t.glTarget)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,t?t.handle:null),this.indexBuffer=t,this.device.gl.bindVertexArray(null)}setBuffer(e,t){const n=t;if(34963===n.glTarget)throw new Error("Use .setIndexBuffer()");const{size:r,type:i,stride:s,offset:A,normalized:o,integer:a,divisor:c}=this._getAccessor(e);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,n.handle),a?this.device.gl.vertexAttribIPointer(e,r,i,s,A):this.device.gl.vertexAttribPointer(e,r,i,o,s,A),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(e),this.device.gl.vertexAttribDivisor(e,c||0),this.attributes[e]=n,this.device.gl.bindVertexArray(null)}setConstantWebGL(e,t){this._enable(e,!1),this.attributes[e]=t}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let e=0;e<this.maxVertexAttributes;++e){const t=this.attributes[e];ArrayBuffer.isView(t)&&this.device.setConstantAttributeWebGL(e,t)}}_getAccessor(e){const t=this.attributeInfos[e];if(!t)throw new Error(`Unknown attribute location ${e}`);const n=En(t.bufferDataType);return{size:t.bufferComponents,type:n,stride:t.byteStride,offset:t.byteOffset,normalized:t.normalized,integer:t.integer,divisor:"instance"===t.stepMode?1:0}}_enable(e,t=!0){const n=fi.isConstantAttributeZeroSupported(this.device);(t||(n||0!==e))&&(e=Number(e),this.device.gl.bindVertexArray(this.handle),t?this.device.gl.enableVertexAttribArray(e):this.device.gl.disableVertexAttribArray(e),this.device.gl.bindVertexArray(null))}getConstantBuffer(e,t){const n=function(e){if(Array.isArray(e))return new Float32Array(e);return e}(t),r=n.byteLength*e,i=n.length*e;if(this.buffer&&r!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${r} !== ${this.buffer.byteLength}.`);let s=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:r}),s=s||!function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(n,this.bufferValue),s){const e=(0,ui.oF)(t.constructor,i);(0,ui.R2)({target:e,source:n,start:0,count:i}),this.buffer.write(e),this.bufferValue=t}return this.buffer}}class pi extends Zn.F{static defaultProps={...Zn.F.defaultProps,layout:void 0,buffers:{}};get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,t){super(e,t,pi.defaultProps)}}class gi extends pi{device;gl;handle;layout;buffers={};unusedBuffers={};bindOnUse=!0;_bound=!1;constructor(e,t){super(e,t),this.device=e,this.gl=e.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,t.buffers&&this.setBuffers(t.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(e="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(function(e){switch(e){case"point-list":return 0;case"line-list":case"line-strip":case"line-loop-webgl":return 1;case"triangle-list":case"triangle-strip":case"triangle-fan-webgl":return 4;default:throw new Error(e)}}(e))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(e){this.buffers={},this.unusedBuffers={},this.bind((()=>{for(const t in e)this.setBuffer(t,e[t])}))}setBuffer(e,t){const n=this._getVaryingIndex(e),{buffer:r,byteLength:i,byteOffset:s}=this._getBufferRange(t);if(n<0)return this.unusedBuffers[e]=r,void bt.R.warn(`${this.id} unusedBuffers varying buffer ${e}`)();this.buffers[n]={buffer:r,byteLength:i,byteOffset:s},this.bindOnUse||this._bindBuffer(n,r,s,i)}getBuffer(e){if(_i(e))return this.buffers[e]||null;const t=this._getVaryingIndex(e);return t>=0?this.buffers[t]:null}bind(e=this.handle){if("function"!=typeof e)return this.gl.bindTransformFeedback(36386,e),this;let t;return this._bound?t=e():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,t=e(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),t}unbind(){this.bind(null)}_getBufferRange(e){if(e instanceof dr)return{buffer:e,byteOffset:0,byteLength:e.byteLength};const{buffer:t,byteOffset:n=0,byteLength:r=e.buffer.byteLength}=e;return{buffer:t,byteOffset:n,byteLength:r}}_getVaryingIndex(e){if(_i(e))return Number(e);for(const t of this.layout.varyings)if(e===t.name)return t.location;return-1}_bindBuffers(){for(const e in this.buffers){const{buffer:t,byteLength:n,byteOffset:r}=this._getBufferRange(this.buffers[e]);this._bindBuffer(Number(e),t,r,n)}}_unbindBuffers(){for(const e in this.buffers)this.gl.bindBufferBase(35982,Number(e),null)}_bindBuffer(e,t,n=0,r){const i=t&&t.handle;i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i)}}function _i(e){return"number"==typeof e?Number.isInteger(e):/^\d+$/.test(e)}class mi extends Zn.F{static defaultProps={...Zn.F.defaultProps,type:void 0,count:void 0};get[Symbol.toStringTag](){return"QuerySet"}constructor(e,t){super(e,t,mi.defaultProps)}}class Ei extends mi{device;handle;target=null;_queryPending=!1;_pollingPromise=null;get[Symbol.toStringTag](){return"Query"}constructor(e,t){if(super(e,t),this.device=e,t.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(e){return this._begin(e?.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(e){this._queryPending||(this.target=e,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.device.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise(((n,r)=>{const i=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}}function vi(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,Ot.v)(!1),0}}function yi(e,t){const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408,sourceAttachment:s=36064}=t||{};let{target:A=null,sourceWidth:o,sourceHeight:a,sourceType:c}=t||{};const{framebuffer:l,deleteFramebuffer:u}=wi(e);(0,Ot.v)(l);const{gl:h,handle:d}=l;o=o||l.width,a=a||l.height;const f=s-36064;c=c||l.colorAttachments[f]?.texture?.type||5121,A=function(e,t,n,r,i){if(e)return e;const s=Vr(t=t||5121,{clamped:!1}),A=vi(n);return new s(r*i*A)}(A,c,i,o,a),c=c||function(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}(A);const p=h.bindFramebuffer(36160,d);return h.readPixels(n,r,o,a,i,c,A),h.bindFramebuffer(36160,p||null),u&&l.destroy(),A}function bi(e,t){const{target:n,sourceX:r=0,sourceY:i=0,sourceFormat:s=6408,targetByteOffset:A=0}=t||{};let{sourceWidth:o,sourceHeight:a,sourceType:c}=t||{};const{framebuffer:l,deleteFramebuffer:u}=wi(e);(0,Ot.v)(l),o=o||l.width,a=a||l.height;const h=l;c=c||5121;let d=n;if(!d){const e=A+o*a*vi(s)*function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,Ot.v)(!1),0}}(c);d=h.device.createBuffer({byteLength:e})}const f=e.device.createCommandEncoder();return f.copyTextureToBuffer({source:e,width:o,height:a,origin:[r,i],destination:d,byteOffset:A}),f.destroy(),u&&l.destroy(),d}function wi(e){return e instanceof Jn?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Ti(e),deleteFramebuffer:!0}}function Ti(e,t){const{device:n,width:r,height:i,id:s}=e;return n.createFramebuffer({...t,id:`framebuffer-for-${s}`,width:r,height:i,colorAttachments:[e]})}const Si="clear: bad arguments";class Ri extends kt{static type="webgl";type="webgl";handle;features;limits;info;canvasContext;lost;_resolveContextLost;static isSupported(){return"undefined"!=typeof WebGL2RenderingContext}static attach(e){if(e instanceof Ri)return e;if(e?.device instanceof kt)return e.device;if(!function(e){if("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext)return!0;return Boolean(e&&Number.isFinite(e._version))}(e))throw new Error("Invalid WebGL2RenderingContext");return new Ri({gl:e})}static async create(e={}){bt.R.groupCollapsed(1,"WebGLDevice created")();const t=[];e.debug&&t.push(async function(){(0,yt.B)()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await nr("https://unpkg.com/webgl-debug@2.0.1/index.js"))}()),e.spector&&t.push(async function(e){if(!globalThis.SPECTOR)try{await nr("https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js")}catch(t){bt.R.warn(String(t))}}()),"string"==typeof e.canvas&&t.push(Vt.pageLoaded);const n=await Promise.allSettled(t);for(const s of n)"rejected"===s.status&&bt.R.error(`Failed to initialize debug libraries ${s.reason}`)();if(bt.R.probe(2,"DOM is loaded")(),e.gl?.device)return bt.R.warn("reattaching existing device")(),Ri.attach(e.gl);const r=new Ri(e),i=`Created ${r.type}${r.debug?" debug":""} context: ${r.info.vendor}, ${r.info.renderer} for canvas: ${r.canvasContext.id}`;return bt.R.probe(1,i)(),bt.R.table(1,r.info)(),bt.R.groupEnd(1)(),r}constructor(e){super({...e,id:e.id||(0,St.L)("webgl-device")});const t=e.gl?.device;if(t)throw new Error(`WebGL context already attached to device ${t.id}`);const n=e.gl?.canvas||e.canvas;this.canvasContext=new yr(this,{...e,canvas:n}),this.lost=new Promise((e=>{this._resolveContextLost=e}));let r=e.gl||null;if(r||=function(e,t){t={...pn,...t};let n=null;const r=e=>n=e.statusMessage||n;e.addEventListener("webglcontextcreationerror",r,!1);let i=null;if(i||=e.getContext("webgl2",t),e.removeEventListener("webglcontextcreationerror",r,!1),!i)throw new Error(`Failed to create WebGL context: ${n||"Unknown error"}`);if(t.onContextLost){const{onContextLost:n}=t;e.addEventListener("webglcontextlost",(e=>n(e)),!1)}if(t.onContextRestored){const{onContextRestored:n}=t;e.addEventListener("webglcontextrestored",(e=>n(e)),!1)}return i}(this.canvasContext.canvas,{...e,onContextLost:e=>this._resolveContextLost?.({reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}),!r)throw new Error("WebGL context creation failed");this.handle=r,this.gl=r,this.gl.device=this,this.gl._version=2,e.spector&&(this.spectorJS=function(e){if(!(e={...br,...e})?.spector)return null;if(!wr&&globalThis.SPECTOR&&(bt.R.probe(1,"SPECTOR found and initialized")(),wr=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=wr)),!wr)return null;if(Tr||(Tr=!0,wr.spyCanvases(),wr?.onCaptureStarted.add((e=>bt.R.info("Spector capture started:",e)())),wr?.onCapture.add((e=>{bt.R.info("Spector capture complete:",e)(),wr?.getResultUI(),wr?.resultView.display(),wr?.resultView.addCapture(e)}))),e?.canvas){if("string"==typeof e.spector&&e.spector!==e.canvas.id)return wr;wr?.startCapture(e?.canvas,500),new Promise((e=>setTimeout(e,2e3))).then((e=>{bt.R.info("Spector capture stopped after 2 seconds")(),wr?.stopCapture()}))}return wr}({...this.props,canvas:this.handle.canvas})),this.info=_n(this.gl,this._extensions),this.limits=new Kn(this.gl),this.features=new Yn(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:i=!0,copyState:s=!1}=e;ln(this.gl,{enable:i,copyState:s,log:(...e)=>bt.R.log(1,...e)()}),e.debug&&(this.gl=Cr(this.gl,{...e,throwOnError:!0}),this.debug=!0,bt.R.level=Math.max(bt.R.level,1),bt.R.warn("WebGL debug mode activated. Performance reduced.")())}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(e){return jn(this.gl,e,this._extensions)}isTextureFormatFilterable(e){return function(e,t,n){if(!jn(e,t,n))return!1;if(t.startsWith("depth")||t.startsWith("stencil"))return!1;try{if(Mt(t).signed)return!1}catch{return!1}return t.endsWith("32float")?Boolean(gn(e,"OES_texture_float_linear, extensions",n)):!t.endsWith("16float")||Boolean(gn(e,"OES_texture_half_float_linear, extensions",n))}(this.gl,e,this._extensions)}isTextureFormatRenderable(e){return function(e,t,n){return!!jn(e,t,n)&&"number"!=typeof t}(this.gl,e,this._extensions)}createCanvasContext(e){throw new Error("WebGL only supports a single canvas")}createBuffer(e){const t=this._getBufferProps(e);return new dr(this,t)}_createTexture(e){return new Er(this,e)}createExternalTexture(e){throw new Error("createExternalTexture() not implemented")}createSampler(e){return new pr(this,e)}createShader(e){return new kr(this,e)}createFramebuffer(e){return new vr(this,e)}createVertexArray(e){return new fi(this,e)}createTransformFeedback(e){return new gi(this,e)}createQuerySet(e){return new Ei(this,e)}createRenderPipeline(e){return new ei(this,e)}beginRenderPass(e){return new Nr(this,e)}createComputePipeline(e){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(e){throw new Error("ComputePass not supported in WebGL")}renderPass=null;createCommandEncoder(e){return new ci(this,e)}submit(){this.renderPass?.end(),this.renderPass=null}readPixelsToArrayWebGL(e,t){return yi(e,t)}readPixelsToBufferWebGL(e,t){return bi(e,t)}setParametersWebGL(e){sn(this.gl,e)}getParametersWebGL(e){return An(this.gl,e)}withParametersWebGL(e,t){return rr(this.gl,e,t)}clearWebGL(e){!function(e,t){const{framebuffer:n=null,color:r=null,depth:i=null,stencil:s=null}=t||{},A={};n&&(A.framebuffer=n);let o=0;r&&(o|=16384,!0!==r&&(A.clearColor=r)),i&&(o|=256,!0!==i&&(A.clearDepth=i)),s&&(o|=1024,!0!==i&&(A.clearStencil=i)),(0,Ot.v)(0!==o,Si);const a=e.gl;rr(a,A,(()=>{a.clear(o)}))}(this,e)}resetWebGL(){bt.R.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),sn(this.gl,Wt)}gl;debug=!1;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};_extensions={};_polyfilled=!1;spectorJS;loseDevice(){let e=!1;const t=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return t&&(e=!0,t.loseContext()),this._resolveContextLost?.({reason:"destroyed",message:"Application triggered context loss"}),e}pushState(){un(this.gl)}popState(){hn(this.gl)}setSpectorMetadata(e,t){e.__SPECTOR_Metadata=t}getGLKey(e,t){t=t||this.gl2||this.gl;const n=Number(e);for(const r in t)if(t[r]===n)return`GL.${r}`;return String(e)}_constants;setConstantAttributeWebGL(e,t){const n=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(n).fill(null);const r=this._constants[e];switch(r&&function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(r,t)&&bt.R.info(1,`setConstantAttributeWebGL(${e}) could have been skipped, value unchanged`)(),this._constants[e]=t,t.constructor){case Float32Array:!function(e,t,n){switch(n.length){case 1:e.gl.vertexAttrib1fv(t,n);break;case 2:e.gl.vertexAttrib2fv(t,n);break;case 3:e.gl.vertexAttrib3fv(t,n);break;case 4:e.gl.vertexAttrib4fv(t,n);break;default:(0,Ot.v)(!1)}}(this,e,t);break;case Int32Array:!function(e,t,n){e.gl.vertexAttribI4iv(t,n)}(this,e,t);break;case Uint32Array:!function(e,t,n){e.gl.vertexAttribI4uiv(t,n)}(this,e,t);break;default:(0,Ot.v)(!1)}}getExtension(e){return gn(this.gl,e,this._extensions),this._extensions}}let Ci=0;const xi={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:e=>console.error(e),stats:Dt.stats.get("animation-loop-"+Ci++),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class Pi{device=null;canvas=null;props;animationProps=null;timeline=null;stats;cpuTime;gpuTime;frameRate;display;needsRedraw="initialized";_initialized=!1;_running=!1;_animationFrameId=null;_nextFramePromise=null;_resolveNextFrame=null;_cpuStartTime=0;constructor(e){if(this.props={...xi,...e},!(e=this.props).device)throw new Error("No device provided");const{useDevicePixels:t=!0}=this.props;this.stats=e.stats||new m({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:t}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(!1!==e&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const t=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(t),t}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){return this.device?.isLost||(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers()),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((e=>{this._resolveNextFrame=e}))),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){var e;this._running&&(this._animationFrameId=(e=this._animationFrame.bind(this),"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)))}_cancelAnimationFrame(){var e;null!==this._animationFrameId&&(e=this._animationFrameId,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){this.display?this.display._renderFrame(e):(this.props.onRender(this._getAnimationProps()),this.device.submit())}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:this.device?.canvasContext?.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:t,aspect:n}=this._getSizeAndAspect();e===this.animationProps.width&&t===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=this.device.canvasContext?.canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(t);const n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}_getSizeAndAspect(){if(!this.device)return{width:1,height:1,aspect:1};const[e,t]=this.device?.canvasContext?.getPixelSize()||[1,1];let n=1;const r=this.device?.canvasContext?.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.props.autoResizeDrawingBuffer&&this.device?.canvasContext?.resize({useDevicePixels:this.props.useDevicePixels})}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}var Mi=n(7168);const Ii={mousedown:1,mousemove:2,mouseup:4};!function(e){const t=e.prototype.handler;e.prototype.handler=function(e){const n=this.store;e.button>0&&"pointerdown"===e.type&&(function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(n,(t=>t.pointerId===e.pointerId))||n.push(e)),t.call(this,e)}}(Mi.PointerEventInput),Mi.MouseInput.prototype.handler=function(e){let t=Ii[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.buttons&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};const Li=Mi.Manager,ki=Mi;class Oi{constructor(e,t,n){this.element=e,this.callback=t,this.options={enable:!0,...n}}}const Bi=ki?[[ki.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[ki.Rotate,{enable:!1}],[ki.Pinch,{enable:!1}],[ki.Swipe,{enable:!1}],[ki.Pan,{threshold:0,enable:!1}],[ki.Press,{enable:!1}],[ki.Tap,{event:"doubletap",taps:2,enable:!1}],[ki.Tap,{event:"anytap",enable:!1}],[ki.Tap,{enable:!1}]]:null,Di={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ni={doubletap:["tap"]},Fi={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Ui={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Gi={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Vi={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},zi="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",ji="undefined"!=typeof window?window:n.g;void 0!==n.g?n.g:window,"undefined"!=typeof document&&document;let Wi=!1;try{const e={get passive(){return Wi=!0,!0}};ji.addEventListener("test",null,e),ji.removeEventListener("test",null)}catch(Ms){Wi=!1}const Hi=-1!==zi.indexOf("firefox"),{WHEEL_EVENTS:Qi}=Ui,Xi="wheel",$i=4.000244140625;class Yi extends Oi{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{if(!this.options.enable)return;let t=e.deltaY;ji.WheelEvent&&(Hi&&e.deltaMode===ji.WheelEvent.DOM_DELTA_PIXEL&&(t/=ji.devicePixelRatio),e.deltaMode===ji.WheelEvent.DOM_DELTA_LINE&&(t*=40)),0!==t&&t%$i==0&&(t=Math.floor(t/$i)),e.shiftKey&&t&&(t*=.25),this.callback({type:Xi,center:{x:e.clientX,y:e.clientY},delta:-t,srcEvent:e,pointerType:"mouse",target:e.target})},this.events=(this.options.events||[]).concat(Qi),this.events.forEach((t=>e.addEventListener(t,this.handleEvent,!!Wi&&{passive:!1})))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===Xi&&(this.options.enable=t)}}const{MOUSE_EVENTS:Ki}=Ui,Zi="pointermove",qi="pointerover",Ji="pointerout",es="pointerenter",ts="pointerleave";class ns extends Oi{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.handleOverEvent(e),this.handleOutEvent(e),this.handleEnterEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Ki),this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===Zi&&(this.enableMoveEvent=t),e===qi&&(this.enableOverEvent=t),e===Ji&&(this.enableOutEvent=t),e===es&&(this.enableEnterEvent=t),e===ts&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(qi,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(Ji,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(es,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(ts,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.buttons&&(this.pressed=!1),this.pressed||this._emit(Zi,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:rs}=Ui,is="keydown",ss="keyup";class As extends Oi{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{const t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:is,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:ss,srcEvent:e,key:e.key,target:e.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(rs),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach((t=>e.addEventListener(t,this.handleEvent)))}destroy(){this.events.forEach((e=>this.element.removeEventListener(e,this.handleEvent)))}enableEventType(e,t){e===is&&(this.enableDownEvent=t),e===ss&&(this.enableUpEvent=t)}}const os="contextmenu";class as extends Oi{constructor(e,t,n){super(e,t,n),this.handleEvent=e=>{this.options.enable&&this.callback({type:os,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===os&&(this.options.enable=t)}}const cs={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function ls(e){const t=cs[e.srcEvent.type];if(!t)return null;const{buttons:n,button:r}=e.srcEvent;let i=!1,s=!1,A=!1;return 2===t?(i=Boolean(1&n),s=Boolean(4&n),A=Boolean(2&n)):(i=0===r,s=1===r,A=2===r),{leftButton:i,middleButton:s,rightButton:A}}function us(e,t){const n=e.center;if(!n)return null;const r=t.getBoundingClientRect(),i=r.width/t.offsetWidth||1,s=r.height/t.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-r.left-t.clientLeft)/i,y:(n.y-r.top-t.clientTop)/s}}}const hs={srcElement:"root",priority:0};class ds{constructor(e){this.handleEvent=e=>{if(this.isEmpty())return;const t=this._normalizeEvent(e);let n=e.srcEvent.target;for(;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,n,r=!1,i=!1){const{handlers:s,handlersByElement:A}=this;let o=hs;"string"==typeof n||n&&n.addEventListener?o={...hs,srcElement:n}:n&&(o={...hs,...n});let a=A.get(o.srcElement);a||(a=[],A.set(o.srcElement,a));const c={type:e,handler:t,srcElement:o.srcElement,priority:o.priority};r&&(c.once=!0),i&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let l=a.length-1;for(;l>=0&&!(a[l].priority>=c.priority);)l--;a.splice(l+1,0,c)}remove(e,t){const{handlers:n,handlersByElement:r}=this;for(let i=n.length-1;i>=0;i--){const s=n[i];if(s.type===e&&s.handler===t){n.splice(i,1);const e=r.get(s.srcElement);e.splice(e.indexOf(s),1),0===e.length&&r.delete(s.srcElement)}}this._active=n.some((e=>!e.passive))}_emit(e,t){const n=this.handlersByElement.get(t);if(n){let t=!1;const r=()=>{e.handled=!0},i=()=>{e.handled=!0,t=!0},s=[];for(let A=0;A<n.length;A++){const{type:o,handler:a,once:c}=n[A];if(a({...e,type:o,stopPropagation:r,stopImmediatePropagation:i}),c&&s.push(n[A]),t)break}for(let e=0;e<s.length;e++){const{type:t,handler:n}=s[e];this.remove(t,n)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...ls(e),...us(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const fs={events:null,recognizers:null,recognizerOptions:{},Manager:Li,touchAction:"none",tabIndex:0};class ps{constructor(e=null,t){this._onBasicInput=e=>{const{srcEvent:t}=e,n=Fi[t.type];n&&this.manager.emit(n,e)},this._onOtherEvent=e=>{this.manager.emit(e.type,e)},this.options={...fs,...t},this.events=new Map,this.setElement(e);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this,n=t.Manager;this.manager=new n(e,{touchAction:t.touchAction,recognizers:t.recognizers||Bi}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(Di).forEach((e=>{const t=this.manager.get(e);t&&Di[e].forEach((e=>{t.recognizeWith(e)}))}));for(const r in t.recognizerOptions){const e=this.manager.get(r);if(e){const n=t.recognizerOptions[r];delete n.enable,e.set(n)}}this.wheelInput=new Yi(e,this._onOtherEvent,{enable:!1}),this.moveInput=new ns(e,this._onOtherEvent,{enable:!1}),this.keyInput=new As(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new as(e,this._onOtherEvent,{enable:!1});for(const[r,i]of this.events)i.isEmpty()||(this._toggleRecognizer(i.recognizerName,!0),this.manager.on(r,i.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,n){this._addEventHandler(e,t,n,!1)}once(e,t,n){this._addEventHandler(e,t,n,!0)}watch(e,t,n){this._addEventHandler(e,t,n,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:n}=this;if(!n)return;const r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const i=Ni[e];i&&!this.options.recognizers&&i.forEach((i=>{const s=n.get(i);t?(s.requireFailure(e),r.dropRequireFailure(i)):s.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,n,r,i){if("string"!=typeof e){n=t;for(const t in e)this._addEventHandler(t,e[t],n,r,i);return}const{manager:s,events:A}=this,o=Vi[e]||e;let a=A.get(o);a||(a=new ds(this),A.set(o,a),a.recognizerName=Gi[o]||o,s&&s.on(o,a.handleEvent)),a.add(e,t,n,r,i),a.isEmpty()||this._toggleRecognizer(a.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const t in e)this._removeEventHandler(t,e[t]);return}const{events:n}=this,r=Vi[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){const{recognizerName:e}=i;let t=!1;for(const r of n.values())if(r.recognizerName===e&&!r.isEmpty()){t=!0;break}t||this._toggleRecognizer(e,!1)}}}function gs(){}const _s={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:gs,onWebGLInitialized:gs,onResize:gs,onViewStateChange:gs,onInteractionStateChange:gs,onBeforeRender:gs,onAfterRender:gs,onLoad:gs,onError:e=>d.A.error(e.message,e.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:e})=>e?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class ms{static{this.defaultProps=_s}static{this.VERSION=vt}constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new m({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=e=>{const{_pickRequest:t}=this;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;{const n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.event=e},this._onEvent=e=>{const t=_e.qY[e.type],n=e.offsetCenter;if(!t||!n||!this.layerManager)return;const r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:s}=i,A=s&&(s[t.handler]||s.props[t.handler]),o=this.props[t.handler];let a=!1;A&&(a=A.call(s,i,e)),a||(o?.(i,e),this.widgetManager.onEvent(i,e))},this._onPointerDown=e=>{const t=e.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:t.x,y:t.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo},this.props={..._s,...e},(e=this.props).viewState&&e.initialViewState&&d.A.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device?this.device=e.device:e.gl&&(e.gl instanceof WebGLRenderingContext&&d.A.error("WebGL1 context not supported.")(),this.device=Ri.attach(e.gl));let t=this.device;t||(Dt.registerDevices([Ri]),t=Dt.createDevice({...e.deviceProps,canvas:this._createCanvas(e)})),this.animationLoop=this._createAnimationLoop(t,e),this.setProps(e),e._typedArrayManagerProps&&Xe.A.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop?.stop(),this.animationLoop?.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager?.finalize(),this.layerManager=null,this.viewManager?.finalize(),this.viewManager=null,this.effectManager?.finalize(),this.effectManager=null,this.deckRenderer?.finalize(),this.deckRenderer=null,this.deckPicker?.finalize(),this.deckPicker=null,this.eventManager?.destroy(),this.eventManager=null,this.widgetManager?.finalize(),this.widgetManager=null,this.props.canvas||this.props.device||this.props.gl||!this.canvas||(this.canvas.parentElement?.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&d.A.removed("onLayerHover","onHover")(),"onLayerClick"in e&&d.A.removed("onLayerClick","onClick")(),e.initialViewState&&!(0,T.b)(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop?.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t),this.widgetManager.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||s,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return(0,J.A)(this.viewManager),this.viewManager.views}getViewports(e){return(0,J.A)(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){this.layerManager?.removeDefaultShaderModule(e)}_pick(e,t,n){(0,J.A)(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const i=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(t).timeEnd(),i}_createCanvas(e){let t=e.canvas;if("string"==typeof t&&(t=document.getElementById(t),(0,J.A)(t)),!t){t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay";(e.parent||document.body).appendChild(t)}return Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:n}=e;if(t||0===t){const e=Number.isFinite(t)?`${t}px`:t;this.canvas.style.width=e}if(n||0===n){const t=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=e.style?.position||"absolute",this.canvas.style.height=t}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth??e.width,n=e.clientHeight??e.height;t===this.width&&n===this.height||(this.width=t,this.height=n,this.viewManager?.setProps({width:t,height:n}),this.layerManager?.activateViewport(this.getViewports()[0]),this.props.onResize({width:t,height:n}))}_createAnimationLoop(e,t){const{gl:n,onError:r,useDevicePixels:i}=t;return new Pi({device:e,useDevicePixels:i,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:e=>this._setDevice(e.device),onRender:this._onRenderFrame.bind(this),onError:r})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,t=Array.isArray(e)?e:e?[e]:[new ne({id:"default-view"})];return t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:t,emptyInfo:n}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=t.length>0;let r=n,i=!1;for(const s of t)r=s,i=s.layer?.onHover(s,e.event)||i;i||(this.props.onHover?.(r,e.event),this.widgetManager.onHover(r,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=this.device.canvasContext?.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof Ri&&this.props.onWebGLInitialized(this.device.gl);const t=new A;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new ps(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in _e.qY)this.eventManager.on(r,this._onEvent);this.viewManager=new S({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new w(this.device,{deck:this,stats:this.stats,viewport:n,timeline:t}),this.effectManager=new Pe({deck:this,device:this.device}),this.deckRenderer=new Oe(this.device),this.deckPicker=new Ge(this.device),this.widgetManager=new We({deck:this,parentElement:this.canvas?.parentElement}),this.widgetManager.addDefault(new Qe),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{device:n,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:r});const i={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...t};this.deckRenderer?.renderLayers(i),"screen"===i.pass&&this.widgetManager.onRedraw({viewports:i.viewports,layers:i.layers}),this.props.onAfterRender({device:n,gl:r})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),d.A.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const n=Dt.stats.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}const Es="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function vs(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}var ys=n(1420);const bs={position:"absolute",zIndex:-1};function ws(e,t){if("function"==typeof e)return e(t);if(Array.isArray(e))return e.map((e=>ws(e,t)));if(Ts(e)){if(e.props?.mapStyle)return t.style=bs,(0,r.cloneElement)(e,t);if(function(e){const t=e.type;return t&&t.deckGLViewProps}(e))return(0,r.cloneElement)(e,t)}return e}function Ts(e){return e&&"object"==typeof e&&"type"in e||!1}function Ss(e){if("function"==typeof e)return(0,r.createElement)(P,{},e);if(Array.isArray(e))return e.map(Ss);if(Ts(e)){if(e.type===r.Fragment)return Ss(e.props.children);if(vs(e.type,P))return e}return e}const Rs={mixBlendMode:null};function Cs(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const xs=r.forwardRef((function(e,t){const[n,i]=(0,r.useState)(0),s=(0,r.useRef)({control:null,version:n,forceUpdate:()=>i((e=>e+1))}).current,A=(0,r.useRef)(null),o=(0,r.useRef)(null),a=(0,r.useMemo)((()=>function({children:e,layers:t=[],views:n=null}){const i=[],s=[],A={};return r.Children.forEach(Ss(e),(e=>{if(Ts(e)){const t=e.type;if(vs(t,ys.A)){const n=function(e,t){const n={},r=e.defaultProps||{};for(const i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);s.push(n)}else i.push(e);if(vs(t,P)&&t!==P&&e.props.id){const n=new t(e.props);A[n.id]=n}}else e&&i.push(e)})),Object.keys(A).length>0&&(Array.isArray(n)?n.forEach((e=>{A[e.id]=e})):n&&(A[n.id]=n),n=Object.values(A)),{layers:t=s.length>0?[...s,...t]:t,children:i,views:n}}(e)),[e.layers,e.views,e.children]);let c=!0;const l=t=>c&&e.viewState?(s.viewStateUpdateRequested=t,null):(s.viewStateUpdateRequested=null,e.onViewStateChange?.(t)),u=t=>{c?s.interactionStateUpdateRequested=t:(s.interactionStateUpdateRequested=null,e.onInteractionStateChange?.(t))},h=(0,r.useMemo)((()=>{const t={...e,style:null,width:"100%",height:"100%",parent:A.current,canvas:o.current,layers:a.layers,views:a.views,onViewStateChange:l,onInteractionStateChange:u};return delete t._customRender,s.deck&&s.deck.setProps(t),t}),[e]);(0,r.useEffect)((()=>{const t=e.Deck||ms;return s.deck=function(e,t,n){const r=new t({...n,_customRender:t=>{e.redrawReason=t;const n=r.getViewports();e.lastRenderedViewports!==n?e.forceUpdate():Cs(e)}});return r}(s,t,{...h,parent:A.current,canvas:o.current}),()=>s.deck?.finalize()}),[]),Es((()=>{Cs(s);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=s;e&&l(e),t&&u(t)})),(0,r.useImperativeHandle)(t,(()=>function(e){return{get deck(){return e.deck},pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)}}(s)),[]);const d=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:f,width:p="100%",height:g="100%",id:_,style:m}=e,{containerStyle:E,canvasStyle:v}=(0,r.useMemo)((()=>function({width:e,height:t,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:e,height:t},i={left:0,top:0};if(n)for(const s in n)s in Rs?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}({width:p,height:g,style:m})),[p,g,m]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===d||s.version!==n){s.lastRenderedViewports=d,s.version=n;const e=function({children:e,deck:t,ContextProvider:n}){const{viewManager:i}=t||{};if(!i||!i.views.length)return[];const s={},A=i.views[0].id;for(const r of e){let e=A,t=r;Ts(r)&&vs(r.type,P)&&(e=r.props.id||A,t=r.props.children);const n=i.getViewport(e),o=i.getViewState(e);if(n){o.padding=n.padding;const{x:r,y:i,width:A,height:a}=n;t=ws(t,{x:r,y:i,width:A,height:a,viewport:n,viewState:o}),s[e]||(s[e]={viewport:n,children:[]}),s[e].children.push(t)}}return Object.keys(s).map((e=>{const{viewport:i,children:A}=s[e],{x:o,y:a,width:c,height:l}=i,u={position:"absolute",left:o,top:a,width:c,height:l},h=`view-${e}`,d=(0,r.createElement)("div",{key:h,id:h,style:u},...A);if(n){const s={viewport:i,container:t.canvas.offsetParent,eventManager:t.eventManager,onViewStateChange:n=>{n.viewId=e,t._onViewStateChange(n)}};return(0,r.createElement)(n,{key:h,value:s},d)}return d}))}({children:a.children,deck:s.deck,ContextProvider:f}),t=(0,r.createElement)("canvas",{key:"canvas",id:_||"deckgl-overlay",ref:o,style:v});s.control=(0,r.createElement)("div",{id:`${_||"deckgl"}-wrapper`,ref:A,style:E},[t,e])}return c=!1,s.control})),Ps=xs},5359:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>s,H1:()=>h,Pe:()=>u,Sv:()=>c,Td:()=>a,aC:()=>A,qf:()=>l,xZ:()=>o});const r=e=>"boolean"==typeof e,i=e=>"function"==typeof e,s=e=>null!==e&&"object"==typeof e,A=e=>s(e)&&e.constructor==={}.constructor,o=e=>Boolean(e)&&"function"==typeof e[Symbol.iterator],a=e=>e&&"function"==typeof e[Symbol.asyncIterator],c=e=>"undefined"!=typeof Response&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,l=e=>"undefined"!=typeof Blob&&e instanceof Blob,u=e=>e&&"object"==typeof e&&e.isBuffer,h=e=>(e=>"undefined"!=typeof ReadableStream&&e instanceof ReadableStream||s(e)&&i(e.tee)&&i(e.cancel)&&i(e.getReader))(e)||(e=>s(e)&&i(e.read)&&i(e.pipe)&&r(e.readable))(e)},2240:(e,t,n)=>{"use strict";n.d(t,{H:()=>le});var r=n(5359),i=n(6799);let s="";const A={};class o extends Error{constructor(e,t){super(e),this.reason=t.reason,this.url=t.url,this.response=t.response}reason;url;response}const a=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,c=/^([-\w.]+\/[-\w.+]+)/;function l(e,t){return e.toLowerCase()===t.toLowerCase()}function u(e){const t=a.exec(e);return t?t[1]:""}const h=/\?.*/;function d(e){return e.replace(h,"")}function f(e){if((0,r.Sv)(e)){return e.url}if((0,r.qf)(e)){return e.name||""}return"string"==typeof e?e:""}function p(e){if((0,r.Sv)(e)){const t=e,n=t.headers.get("content-type")||"",r=d(t.url);return function(e){const t=c.exec(e);return t?t[1]:e}(n)||u(r)}if((0,r.qf)(e)){return e.type||""}return"string"==typeof e?u(e):""}async function g(e){if((0,r.Sv)(e))return e;const t={},n=function(e){if((0,r.Sv)(e))return e.headers["content-length"]||-1;if((0,r.qf)(e))return e.size;return"string"==typeof e?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}(e);n>=0&&(t["content-length"]=String(n));const i=f(e),s=p(e);s&&(t["content-type"]=s);const A=await async function(e){const t=5;if("string"==typeof e)return`data:,${e.slice(0,t)}`;if(e instanceof Blob){const t=e.slice(0,5);return await new Promise((e=>{const n=new FileReader;n.onload=t=>e(t?.target?.result),n.readAsDataURL(t)}))}if(e instanceof ArrayBuffer){return`data:base64,${function(e){let t="";const n=new Uint8Array(e);for(let r=0;r<n.byteLength;r++)t+=String.fromCharCode(n[r]);return btoa(t)}(e.slice(0,t))}`}return null}(e);A&&(t["x-first-bytes"]=A),"string"==typeof e&&(e=(new TextEncoder).encode(e));const o=new Response(e,{headers:t});return Object.defineProperty(o,"url",{value:i}),o}async function _(e){if(!e.ok){const t=await async function(e){const n=function(e){if(e.length<50)return e;const t=e.slice(e.length-15);return`${e.substr(0,32)}...${t}`}(e.url);let r=`Failed to fetch resource (${e.status}) ${e.statusText}: ${n}`;r=r.length>100?`${r.slice(0,100)}...`:r;const i={reason:e.statusText,url:e.url,response:e};try{const t=e.headers.get("Content-Type");i.reason=t?.includes("application/json")?await e.json():e.text()}catch(t){}return new o(r,i)}(e);throw t}}async function m(e,t){if("string"==typeof e){const n=function(e){for(const t in A)if(e.startsWith(t)){const n=A[t];e=e.replace(t,n)}return e.startsWith("http://")||e.startsWith("https://")||(e=`${s}${e}`),e}(e);return function(e){return!function(e){return e.startsWith("http:")||e.startsWith("https:")}(e)&&!function(e){return e.startsWith("data:")}(e)}(n)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(n,t):await fetch(n,t)}return await g(e)}var E=n(1181);function v(e,t){const n=(0,E.pp)(),i=e||n;return"function"==typeof i.fetch?i.fetch:(0,r.Gv)(i.fetch)?e=>m(e,i.fetch):t?.fetch?t?.fetch:m}"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const y="object"!=typeof process||"[object process]"!==String(process)||process.browser,b="undefined"!=typeof window&&void 0!==window.orientation,w="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);w&&parseFloat(w[1]);class T{terminate(){}}function S(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const R=new Map;function C(e){S(e.source&&!e.url||!e.source&&e.url);let t=R.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return x((t=e,`try {\n  importScripts('${t}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var t}(e.url),R.set(e.url,t)),e.source&&(t=x(e.source),R.set(e.source,t))),S(t),t}function x(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function P(e,t=!0,n){const r=n||new Set;if(e){if(M(e))r.add(e);else if(M(e.buffer))r.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const i in e)P(e[i],t,r)}else;return void 0===n?Array.from(r):[]}function M(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const I=()=>{};class L{name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return"undefined"!=typeof Worker&&y||void 0!==T&&!y}constructor(e){const{name:t,source:n,url:r}=e;S(n||r),this.name=t,this.source=n,this.url=r,this.onMessage=I,this.onError=e=>console.log(e),this.worker=y?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=I,this.onError=I,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||P(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+=`worker ${this.name} from ${this.url}. `,e.message&&(t+=`${e.message} in `),e.lineno&&(t+=`:${e.lineno}:${e.colno}`),new Error(t)}_createBrowserWorker(){this._loadableURL=C({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new T(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new T(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class k{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(e,t){this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){S(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){S(this.isRunning),this.isRunning=!1,this._reject(e)}}class O{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return L.isSupported()}constructor(e){this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t=((e,t,n)=>e.done(n)),n=((e,t)=>e.error(t))){const r=new Promise((r=>(this.jobQueue.push({name:e,onMessage:t,onError:n,onStart:r}),this)));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const r=new k(t.name,e);e.onMessage=e=>t.onMessage(r,e.type,e.payload),e.onError=e=>t.onError(r,e),t.onStart(r);try{await r.result}catch(n){console.error(`Worker exception: ${n}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!y||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new L({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return b?this.maxMobileConcurrency:this.maxConcurrency}}const B={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class D{props;workerPools=new Map;static _workerFarm;static isSupported(){return L.isSupported()}static getWorkerFarm(e={}){return D._workerFarm=D._workerFarm||new D({}),D._workerFarm.setProps(e),D._workerFarm}constructor(e){this.props={...B},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:n,url:r}=e;let i=this.workerPools.get(t);return i||(i=new O({name:t,source:n,url:r}),i.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,i)),i}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}const N=(globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version);async function F(e,t,n,r,i){const s=e.id,A=function(e,t={}){const n=t[e.id]||{},r=y?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=n.workerUrl;if(i||"compression"!==e.id||(i=t.workerUrl),"test"===t._workerType&&(i=y?`modules/${e.module}/dist/${r}`:`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let t=e.version;"latest"===t&&(t="latest");const n=t?`@${t}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${n}/dist/${r}`}return S(i),i}(e,n),o=D.getWorkerFarm(n).getWorkerPool({name:s,url:A});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const a=await o.startJob("process-on-worker",U.bind(null,i));a.postMessage("process",{input:t,options:n,context:r});const c=await a.result;return await c.result}async function U(e,t,n,r){switch(n){case"done":t.done(r);break;case"error":t.error(new Error(r.error));break;case"process":const{id:s,input:A,options:o}=r;try{const n=await e(A,o);t.postMessage("done",{id:s,result:n})}catch(i){const e=i instanceof Error?i.message:"unknown error";t.postMessage("error",{id:s,error:e})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function G(e,t){return V(e||{},t)}function V(e,t,n=0){if(n>3)return t;const r={...e};for(const[i,s]of Object.entries(t))s&&"object"==typeof s&&!Array.isArray(s)?r[i]=V(r[i]||{},t[i],n+1):r[i]=t[i];return r}function z(...e){return function(e){const t=e.map((e=>e instanceof ArrayBuffer?new Uint8Array(e):e)),n=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(n);let i=0;for(const s of t)r.set(s,i),i+=s.byteLength;return r.buffer}(e)}const j=262144;var W=n(4177);function H(e){if((t=e)&&"object"==typeof t&&t.isBuffer)return e;var t;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return 0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if("string"==typeof e){const t=e;return(new TextEncoder).encode(t).buffer}if(e&&"object"==typeof e&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function Q(e,t){return W.Bd?async function*(e,t){const n=e.getReader();let r;try{for(;;){const e=r||n.read();t?._streamReadAhead&&(r=n.read());const{done:i,value:s}=await e;if(i)return;yield H(s)}}catch(i){n.releaseLock()}}(e,t):async function*(e,t){for await(const n of e)yield H(n)}(e)}function X(e,t){if("string"==typeof e)return function*(e,t){const n=t?.chunkSize||262144;let r=0;const i=new TextEncoder;for(;r<e.length;){const t=Math.min(e.length-r,n),s=e.slice(r,r+t);r+=t,yield i.encode(s)}}(e,t);if(e instanceof ArrayBuffer)return function*(e,t={}){const{chunkSize:n=j}=t;let r=0;for(;r<e.byteLength;){const t=Math.min(e.byteLength-r,n),i=new ArrayBuffer(t),s=new Uint8Array(e,r,t);new Uint8Array(i).set(s),r+=t,yield i}}(e,t);if((0,r.qf)(e))return async function*(e,t){const n=t?.chunkSize||1048576;let r=0;for(;r<e.size;){const t=r+n,i=await e.slice(r,t).arrayBuffer();r=t,yield i}}(e,t);if((0,r.H1)(e))return Q(e,t);if((0,r.Sv)(e)){return Q(e.body,t)}throw new Error("makeIterator")}const $="Cannot convert supplied data type";async function Y(e,t,n){const i=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if("string"==typeof e||i)return function(e,t,n){if(t.text&&"string"==typeof e)return e;if((0,r.Pe)(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const r=e.byteLength||e.length;return 0===e.byteOffset&&r===n.byteLength||(n=n.slice(e.byteOffset,e.byteOffset+r)),n}throw new Error($)}(e,t);if((0,r.qf)(e)&&(e=await g(e)),(0,r.Sv)(e)){const n=e;return await _(n),t.binary?await n.arrayBuffer():await n.text()}if((0,r.H1)(e)&&(e=X(e,n)),(0,r.xZ)(e)||(0,r.Td)(e))return async function(e){const t=[];for await(const n of e)t.push(n);return z(...t)}(e);throw new Error($)}function K(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function Z(e,t,n){if(n)return n;const r={fetch:v(t,e),...e};if(r.url){const e=d(r.url);r.baseUrl=e,r.queryString=function(e){const t=e.match(h);return t&&t[0]}(r.url),r.filename=K(e),r.baseUrl=function(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}(e)}return Array.isArray(r.loaders)||(r.loaders=null),r}const q=new(n(5335).t)({id:"loaders.gl"});var J=n(1469);const ee=/\.([^.]+)$/;function te(e,t=[],n,r){if(!ne(e))return null;if(t&&!Array.isArray(t))return(0,i.D)(t);let s=[];t&&(s=s.concat(t)),n?.ignoreRegisteredLoaders||s.push(...(0,J.Ph)()),function(e){for(const t of e)(0,i.D)(t)}(s);const A=function(e,t,n,r){const i=f(e),s=p(e),A=d(i)||r?.url;let o=null,a="";n?.mimeType&&(o=ie(t,n?.mimeType),a=`match forced by supplied MIME type ${n?.mimeType}`);o=o||function(e,t){const n=t&&ee.exec(t),r=n&&n[1];return r?function(e,t){t=t.toLowerCase();for(const n of e)for(const e of n.extensions)if(e.toLowerCase()===t)return n;return null}(e,r):null}(t,A),a=a||(o?`matched url ${A}`:""),o=o||ie(t,s),a=a||(o?`matched MIME type ${s}`:""),o=o||function(e,t){if(!t)return null;for(const n of e)if("string"==typeof t){if(se(t,n))return n}else if(ArrayBuffer.isView(t)){if(Ae(t.buffer,t.byteOffset,n))return n}else if(t instanceof ArrayBuffer){if(Ae(t,0,n))return n}return null}(t,e),a=a||(o?`matched initial data ${oe(e)}`:""),n?.fallbackMimeType&&(o=o||ie(t,n?.fallbackMimeType),a=a||(o?`matched fallback MIME type ${s}`:""));a&&q.log(1,`selectLoader selected ${o?.name}: ${a}.`);return o}(e,s,n,r);if(!A&&!n?.nothrow)throw new Error(re(e));return A}function ne(e){return!(e instanceof Response&&204===e.status)}function re(e){const t=f(e),n=p(e);let r="No valid loader found (";r+=t?`${K(t)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const i=e?oe(e):"";return r+=i?` first bytes: "${i}"`:"first bytes: not available",r+=")",r}function ie(e,t){for(const n of e){if(n.mimeTypes?.some((e=>l(t,e))))return n;if(l(t,`application/x.${n.id}`))return n}return null}function se(e,t){if(t.testText)return t.testText(e);return(Array.isArray(t.tests)?t.tests:[t.tests]).some((t=>e.startsWith(t)))}function Ae(e,t,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((n=>function(e,t,n,r){if(r instanceof ArrayBuffer)return function(e,t,n){if(n=n||e.byteLength,e.byteLength<n||t.byteLength<n)return!1;const r=new Uint8Array(e),i=new Uint8Array(t);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(r,e,r.byteLength);switch(typeof r){case"function":return r(e);case"string":return r===ae(e,t,r.length);default:return!1}}(e,t,0,n)))}function oe(e,t=5){if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return ae(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){return ae(e,0,t)}return""}function ae(e,t,n){if(e.byteLength<t+n)return"";const r=new DataView(e);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(t+s));return i}async function ce(e,t,n,s){!t||Array.isArray(t)||(0,i.l)(t)||(s=void 0,n=t,t=void 0),n=n||{};const A=f(e=await e),o=function(e,t){if(e&&!Array.isArray(e))return e;let n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){const e=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[...n,...e]:e}return n&&n.length?n:void 0}(t,s),a=await async function(e,t=[],n,i){if(!ne(e))return null;let s=te(e,t,{...n,nothrow:!0},i);if(s)return s;if((0,r.qf)(e)&&(s=te(e=await e.slice(0,10).arrayBuffer(),t,n,i)),!s&&!n?.nothrow)throw new Error(re(e));return s}(e,o,n);return a?(s=Z({url:A,_parse:ce,loaders:o},n=(0,E.a5)(n,a,o,A),s||null),await async function(e,t,n,i){if(function(e,t=N){S(e,"no worker provided");const n=e.version}(e),n=G(e.options,n),(0,r.Sv)(t)){const e=t,{ok:n,redirected:r,status:s,statusText:A,type:o,url:a}=e,c=Object.fromEntries(e.headers.entries());i.response={headers:c,ok:n,redirected:r,status:s,statusText:A,type:o,url:a}}t=await Y(t,e,n);const s=e;if(s.parseTextSync&&"string"==typeof t)return s.parseTextSync(t,n,i);if(function(e,t){return!!D.isSupported()&&!(!y&&!t?._nodeWorkers)&&e.worker&&t?.worker}(e,n))return await F(e,t,n,i,ce);if(s.parseText&&"string"==typeof t)return await s.parseText(t,n,i);if(s.parse)return await s.parse(t,n,i);throw S(!s.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}(a,e,n,s)):null}async function le(e,t,n,s){let A,o;Array.isArray(t)||(0,i.l)(t)?(A=t,o=n):(A=[],o=t);const a=v(o);let c=e;return"string"==typeof e&&(c=await a(e)),(0,r.qf)(e)&&(c=await a(e)),Array.isArray(A),await ce(c,A,o)}},1469:(e,t,n)=>{"use strict";n.d(t,{Ph:()=>o,mk:()=>A});var r=n(6799),i=n(1181);const s=()=>{const e=(0,i.K2)();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function A(e){const t=s();e=Array.isArray(e)?e:[e];for(const n of e){const e=(0,r.D)(n);t.find((t=>e===t))||t.unshift(e)}}function o(){return s()}},6799:(e,t,n)=>{"use strict";n.d(t,{D:()=>s,l:()=>i});var r=n(5018);function i(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);return Array.isArray(e?.extensions)}function s(e){let t;return(0,r.v)(e,"null loader"),(0,r.v)(i(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=e[0],e={...e,options:{...e.options,...t}}),(e?.parseTextSync||e?.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}},1181:(e,t,n)=>{"use strict";n.d(t,{pp:()=>l,K2:()=>c,a5:()=>u});var r=n(5359);const i=new(n(5335).t)({id:"loaders.gl"});class s{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var A=n(4177);const o={fetch:null,mimeType:void 0,nothrow:!1,log:new class{console;constructor(){this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:A.Bd,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},a={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function c(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state||(e._state={}),e._state}function l(){const e=c();return e.globalOptions=e.globalOptions||{...o},e.globalOptions}function u(e,t,n,r){return n=n||[],function(e,t){h(e,null,o,a,t);for(const n of t){const r=e&&e[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};h(r,n.id,i,s,t)}}(e,n=Array.isArray(n)?n:[n]),f(t,e,r)}function h(e,t,n,s,A){const o=t||"Top level",a=t?`${t}.`:"";for(const c in e){const l=!t&&(0,r.Gv)(e[c]),u="baseUri"===c&&!t,h="workerUrl"===c&&t;if(!(c in n)&&!u&&!h)if(c in s)i.warn(`${o} loader option '${a}${c}' no longer supported, use '${s[c]}'`)();else if(!l){const e=d(c,A);i.warn(`${o} loader option '${a}${c}' not recognized. ${e}`)()}}}function d(e,t){const n=e.toLowerCase();let r="";for(const i of t)for(const t in i.options){if(e===t)return`Did you mean '${i.id}.${t}'?`;const s=t.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||`Did you mean '${i.id}.${t}'?`)}return r}function f(e,t,n){const r={...e.options||{}};return function(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}(r,n),null===r.log&&(r.log=new s),p(r,l()),p(r,t),r}function p(e,t){for(const n in t)if(n in t){const i=t[n];(0,r.aC)(i)&&(0,r.aC)(e[n])?e[n]={...e[n],...t[n]}:e[n]=t[n]}}},5018:(e,t,n)=>{"use strict";function r(e,t){if(!e)throw new Error(t||"loader assertion failed.")}n.d(t,{v:()=>r})},4177:(e,t,n)=>{"use strict";n.d(t,{Bd:()=>r});"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const r=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),i="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);i&&parseFloat(i[1])},9538:(e,t,n)=>{"use strict";n.d(t,{Mr:()=>c,PV:()=>a,GE:()=>h});var r=n(9749);const i={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},s={f32:4,f16:2,i32:4,u32:4};var A=n(5332);function o(e){let t;e.endsWith("-webgl")&&(e.replace("-webgl",""),t=!0);const[n,r]=e.split("x"),i=n,s=r?parseInt(r):1,o=(0,A.l)(i),a={type:i,components:s,byteLength:o.byteLength*s,integer:o.integer,signed:o.signed,normalized:o.normalized};return t&&(a.webglOnly=!0),a}function a(e,t){const n={};for(const r of e.attributes)n[r.name]=l(e,t,r.name);return n}function c(e,t,n=16){const r=a(e,t),i=new Array(n).fill(null);for(const s of Object.values(r))i[s.location]=s;return i}function l(e,t,n){const A=function(e,t){const n=e.attributes.find((e=>e.name===t));n||r.R.warn(`shader layout attribute "${t}" not present in shader`);return n||null}(e,n),a=function(e,t){u(e);let n=function(e,t){for(const n of e)if(n.format&&n.name===t)return{attributeName:n.name,bufferName:t,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}(e,t);if(n)return n;if(n=function(e,t){for(const n of e){let e=n.byteStride;if("number"!=typeof n.byteStride)for(const t of n.attributes||[]){e+=o(t.format).byteLength}const r=n.attributes?.find((e=>e.attribute===t));if(r)return{attributeName:r.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:r.format,byteOffset:r.byteOffset,byteStride:e}}return null}(e,t),n)return n;return r.R.warn(`layout for attribute "${t}" not present in buffer layout`),null}(t,n);if(!A)return null;const c=function(e){const[t,n]=i[e],r="i32"===t||"u32"===t,A="u32"!==t,o=s[t]*n,a=function(e,t){let n;switch(e){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return t<=2?"float16x2":"float16x4"}return 1===t?n:`${n}x${t}`}(t,n);return{dataType:t,components:n,defaultVertexFormat:a,byteLength:o,integer:r,signed:A}}(A.type),l=a?.vertexFormat||c.defaultVertexFormat,h=o(l);return{attributeName:a?.attributeName||A.name,bufferName:a?.bufferName||A.name,location:A.location,shaderType:A.type,shaderDataType:c.dataType,shaderComponents:c.components,vertexFormat:l,bufferDataType:h.type,bufferComponents:h.components,normalized:h.normalized,integer:c.integer,stepMode:a?.stepMode||A.stepMode,byteOffset:a?.byteOffset||0,byteStride:a?.byteStride||0}}function u(e){for(const t of e)(t.attributes&&t.format||!t.attributes&&!t.format)&&r.R.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function h(e,t){const n={...e,attributes:e.attributes.map((e=>({...e})))};for(const i of t?.attributes||[]){const e=n.attributes.find((e=>e.name===i.name));e?(e.type=i.type||e.type,e.stepMode=i.stepMode||e.stepMode):r.R.warn(`shader layout attribute ${i.name} not present in shader`)}return n}},6049:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(6031);class i extends r.F{static defaultProps={...r.F.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1};static MAP_READ=1;static MAP_WRITE=2;static COPY_SRC=4;static COPY_DST=8;static INDEX=16;static VERTEX=32;static UNIFORM=64;static STORAGE=128;static INDIRECT=256;static QUERY_RESOLVE=512;get[Symbol.toStringTag](){return"Buffer"}usage;indexType;updateTimestamp;constructor(e,t){const n={...t};(t.usage||0)&i.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?n.indexType="uint32":t.data instanceof Uint16Array&&(n.indexType="uint16")),super(e,n,i.defaultProps),this.usage=t.usage||0,this.indexType=n.indexType,this.updateTimestamp=e.incrementTimestamp()}readSyncWebGL(e,t){throw new Error("not implemented")}static DEBUG_DATA_MAX_LENGTH=32;debugData=new ArrayBuffer(0);_setDebugData(e,t,n){const r=ArrayBuffer.isView(e)?e.buffer:e,s=Math.min(e?e.byteLength:n,i.DEBUG_DATA_MAX_LENGTH);null===e?this.debugData=new ArrayBuffer(s):0===t&&n===e.byteLength?this.debugData=r.slice(0,s):this.debugData=r.slice(t,t+s)}}},6558:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(6031);class i extends r.F{static defaultProps={...r.F.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}};get[Symbol.toStringTag](){return"RenderPipeline"}shaderLayout;bufferLayout;linkStatus="pending";hash="";constructor(e,t){super(e,t,i.defaultProps),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(e){throw new Error("Use uniform blocks")}}},6031:(e,t,n)=>{"use strict";n.d(t,{F:()=>i});var r=n(9038);class i{static defaultProps={id:"undefined",handle:void 0,userData:void 0};id;props;userData={};_device;destroyed=!1;allocatedBytes=0;_attachedResources=new Set;constructor(e,t,n){if(!e)throw new Error("no device");this._device=e,this.props=function(e,t){const n={...t};for(const r in e)void 0!==e[r]&&(n[r]=e[r]);return n}(t,n);const i="undefined"!==this.props.id?this.props.id:(0,r.L)(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get(`${t}s Active`).decrementCount()}trackAllocatedMemory(e,t=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get(`${t} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const t=this._device.statsManager.getStats("Resource Counts");t.get("GPU Memory").subtractCount(this.allocatedBytes),t.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),t=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${t}s Created`).incrementCount(),e.get(`${t}s Active`).incrementCount()}}},4499:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(6031);class i extends r.F{static defaultProps={...r.F.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1};get[Symbol.toStringTag](){return"Sampler"}constructor(e,t){super(e,t,i.defaultProps)}}},5429:(e,t,n)=>{"use strict";n.d(t,{M:()=>l});var r=n(6031),i=n(9038);function s(e,t,n,r){if(r?.inlineSource){const r=function(e,t,n){let r="";for(let i=t-2;i<=t;i++){const s=e[i-1];void 0!==s&&(r+=A(s,t,n))}return r}(t,n);return`\n${r}${e.linePos>0?`${" ".repeat(e.linePos+5)}^^^\n`:""}${e.type.toUpperCase()}: ${e.message}\n\n`}return r?.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${e.type.toUpperCase()}: ${e.message}</b></div>`:`${e.type.toUpperCase()}: ${e.message}`}function A(e,t,n){const r=n?.html?e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):e;return`${function(e,t){let n="";for(let r=e.length;r<t;++r)n+=" ";return n+e}(String(t),4)}: ${r}${n?.html?"<br/>":"\n"}`}function o(e,t){return{name:a(e,t),language:"glsl",version:c(e)}}function a(e,t="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(e);return n?n[1]:t}function c(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}return t}class l extends r.F{static defaultProps={...r.F.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"};get[Symbol.toStringTag](){return"Shader"}stage;source;compilationStatus="pending";constructor(e,t){super(e,{id:u(t),...t},l.defaultProps),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(e=this.props.debug){switch(e){case"never":return;case"errors":if("success"===this.compilationStatus)return}const t=await this.getCompilationInfo();"warnings"===this.props.debug&&0===t?.length||this._displayShaderLog(t)}_displayShaderLog(e){if("undefined"==typeof document||!document?.createElement)return;const t=o(this.source).name,n=`${this.stage} ${t}`;let r=function(e,t,n){let r="";const i=t.split(/\r?\n/),o=e.slice().sort(((e,t)=>e.lineNum-t.lineNum));switch(n?.showSourceCode||"no"){case"all":let t=0;for(let e=1;e<=i.length;e++)for(r+=A(i[e-1],e,n);o.length>t&&o[t].lineNum===e;){const e=o[t++];r+=s(e,i,e.lineNum,{...n,inlineSource:!1})}return r;case"issues":case"no":for(const A of e)r+=s(A,i,A.lineNum,{inlineSource:"no"!==n?.showSourceCode});return r}}(e,this.source,{showSourceCode:"all",html:!0});const i=this.getTranslatedSource();i&&(r+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${i}</pre></code>`);const a=document.createElement("Button");a.innerHTML=`\n<h1>Shader Compilation Error in ${n}</h1><br /><br />\n<code style="user-select:text;"><pre>\n${r}\n</pre></code>`,a.style.top="10px",a.style.left="10px",a.style.position="absolute",a.style.zIndex="9999",a.style.width="100%",a.style.textAlign="left",document.body.appendChild(a);const c=document.getElementsByClassName("luma-compiler-log-error");c[0]?.scrollIntoView&&c[0].scrollIntoView(),a.onclick=()=>{const e=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(e)}}}function u(e){return o(e.source).name||e.id||(0,i.L)(`unnamed ${e.stage}-shader`)}},8932:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n(6031);class i extends r.F{static defaultProps={...r.F.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0};get[Symbol.toStringTag](){return"TextureView"}constructor(e,t){super(e,t,i.defaultProps)}}},5428:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var r=n(6031);class i extends r.F{static defaultProps={...r.F.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0};static COPY_SRC=1;static COPY_DST=2;static TEXTURE_BINDING=4;static STORAGE_BINDING=8;static RENDER_ATTACHMENT=16;get[Symbol.toStringTag](){return"Texture"}dimension;format;width;height;depth;updateTimestamp;constructor(e,t,n=i.defaultProps){super(e,t,n),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=e.incrementTimestamp()}}},5332:(e,t,n)=>{"use strict";function r(e){const t=function(e){return s[e]}(i[e]),n=e.includes("norm"),r=!n&&!e.startsWith("float"),A=e.startsWith("s");return{dataType:i[e],byteLength:t,integer:r,signed:A,normalized:n}}n.d(t,{l:()=>r});const i={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},s={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4}},3912:(e,t,n)=>{"use strict";function r(e){const t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(t.constructor.name)}}function i(e){switch(e){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(e)}}function s(e,t,n){if(!t||t>4)throw new Error(`size ${t}`);const i=t;let s=r(e);if("uint8"===s||"sint8"===s){if(1===i||3===i)throw new Error(`size: ${t}`);return n&&(s=s.replace("int","norm")),`${s}x${i}`}if("uint16"===s||"sint16"===s){if(1===i||3===i)throw new Error(`size: ${t}`);return n&&(s=s.replace("int","norm")),`${s}x${i}`}return 1===i?s:`${s}x${i}`}n.d(t,{OB:()=>s,UE:()=>r,Y0:()=>i})},831:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var r=n(475);function i(e){const t={bindings:{},uniforms:{}};return Object.keys(e).forEach((n=>{const i=e[n];var s;s=i,null!==(0,r.p)(s)||"number"==typeof s||"boolean"==typeof s?t.uniforms[n]=i:t.bindings[n]=i})),t}},6220:(e,t,n)=>{"use strict";let r;function i(e){return(!r||r.byteLength<e)&&(r=new ArrayBuffer(e)),r}function s(e,t){return new e(i(e.BYTES_PER_ELEMENT*t),0,t)}function A(e){const{target:t,source:n,start:r=0,count:i=1}=e,s=n.length,A=i*s;let o=0;for(let a=r;o<s;o++)t[a++]=n[o];for(;o<A;)o<A-o?(t.copyWithin(r+o,r,r+o),o*=2):(t.copyWithin(r+o,r,r+A-o),o=A);return e.target}n.d(t,{R2:()=>A,oF:()=>s,oK:()=>i})},290:(e,t,n)=>{"use strict";function r(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n.d(t,{v:()=>r})},475:(e,t,n)=>{"use strict";function r(e){return Array.isArray(e)?0===e.length||"number"==typeof e[0]?e:null:function(e){return!ArrayBuffer.isView(e)||e instanceof DataView?null:e}(e)}n.d(t,{p:()=>r})},9749:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});const r=new(n(5335).t)({id:"luma.gl"})},9038:(e,t,n)=>{"use strict";n.d(t,{L:()=>i,Z:()=>s});const r={};function i(e="id"){r[e]=r[e]||1;return`${e}-${r[e]++}`}function s(e){let t=!0;for(const n in e){t=!1;break}return t}},457:(e,t,n)=>{"use strict";n.d(t,{K:()=>rt});var r=n(8932),i=n(6049),s=n(5428),A=n(4499),o=n(6558),a=n(475);class c{name;uniforms={};modifiedUniforms={};modified=!0;bindingLayout={};needsRedraw="initialized";constructor(e){if(this.name=e?.name,e?.name&&e?.shaderLayout){const t=e?.shaderLayout.bindings?.find((t=>"uniform"===t.type&&t.name===e?.name));if(!t)throw new Error(e?.name);const n=t;for(const e of n.uniforms||[])this.bindingLayout[e.name]=e}}setUniforms(e){for(const[t,n]of Object.entries(e))this._setUniform(t,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${t}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,t){(function(e,t,n=16){if(e!==t)return!1;const r=(0,a.p)(e);if(!r)return!1;const i=(0,a.p)(t);if(i&&r.length===i.length)for(let s=0;s<r.length;++s)if(i[s]!==r[s])return!1;return!0})(this.uniforms[e],t)||(this.uniforms[e]=function(e){const t=(0,a.p)(e);return t?t.slice():e}(t),this.modifiedUniforms[e]=!0,this.modified=!0)}}var l=n(290);const u={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function h(e){const t=u[e];return(0,l.v)(e),t}function d(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}var f=n(6220),p=n(9749);class g{layout={};byteLength;constructor(e){let t=0;for(const[r,i]of Object.entries(e)){const e=h(i),{type:n,components:s}=e;t=d(t,s);const A=t;t+=s,this.layout[r]={type:n,size:s,offset:A}}t+=(4-t%4)%4;const n=4*t;this.byteLength=Math.max(n,1024)}getData(e){const t=Math.max(this.byteLength,1024),n=(0,f.oK)(t),r={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(const[i,s]of Object.entries(e)){const e=this.layout[i];if(!e){p.R.warn(`Supplied uniform value ${i} not present in uniform block layout`)();continue}const{type:t,size:n,offset:A}=e,o=r[t];if(1===n){if("number"!=typeof s&&"boolean"!=typeof s){p.R.warn(`Supplied value for single component uniform ${i} is not a number: ${s}`)();continue}o[A]=Number(s)}else{const e=(0,a.p)(s);if(!e){p.R.warn(`Supplied value for multi component / array uniform ${i} is not a numeric array: ${s}`)();continue}o.set(e,A)}}return new Uint8Array(n)}has(e){return Boolean(this.layout[e])}get(e){return this.layout[e]}}class _{uniformBlocks=new Map;uniformBufferLayouts=new Map;uniformBuffers=new Map;constructor(e){for(const[t,n]of Object.entries(e)){const e=t,r=new g(n.uniformTypes||{});this.uniformBufferLayouts.set(e,r);const i=new c({name:t});i.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(e,i)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){for(const[t,n]of Object.entries(e))this.uniformBlocks.get(t).setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(e){return this.uniformBufferLayouts.get(e).byteLength}getUniformBufferData(e){const t=this.uniformBlocks.get(e).getAllUniforms();return this.uniformBufferLayouts.get(e).getData(t)}createUniformBuffer(e,t,n){n&&this.setUniforms(n);const r=this.getUniformBufferByteLength(t),s=e.createBuffer({usage:i.h.UNIFORM|i.h.COPY_DST,byteLength:r}),A=this.getUniformBufferData(t);return s.write(A),s}getManagedUniformBuffer(e,t){if(!this.uniformBuffers.get(t)){const n=this.getUniformBufferByteLength(t),r=e.createBuffer({usage:i.h.UNIFORM|i.h.COPY_DST,byteLength:n});this.uniformBuffers.set(t,r)}return this.uniformBuffers.get(t)}updateUniformBuffers(){let e=!1;for(const t of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(t);e||=n}return e&&p.R.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){const t=this.uniformBlocks.get(e);let n=!1;if(this.uniformBuffers.get(e)&&t.needsRedraw){n||=t.needsRedraw;const r=this.getUniformBufferData(e);this.uniformBuffers.get(e).write(r);const i=this.uniformBlocks.get(e).getAllUniforms();p.R.log(4,`Writing to uniform buffer ${String(e)}`,r,i)()}return n}}var m=n(9038);function E(e,t,n){if(e===t)return!0;if(!n||!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!E(e[r],t[r],n-1))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const s of r){if(!t.hasOwnProperty(s))return!1;if(!E(e[s],t[s],n-1))return!1}return!0}return!1}var v,y,b,w,T,S=n(831),R=n(9538),C=n(3912),x=n(9404);class P{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class M{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}}class I extends M{constructor(){super()}}class L extends I{constructor(e,t,n,r){super(),this.name=e,this.args=t,this.returnType=n,this.body=r}get astNodeType(){return"function"}}class k extends I{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}}class O extends I{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"while"}}class B extends I{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}}class D extends I{constructor(e,t,n,r){super(),this.init=e,this.condition=t,this.increment=n,this.body=r}get astNodeType(){return"for"}}class N extends I{constructor(e,t,n,r,i){super(),this.name=e,this.type=t,this.storage=n,this.access=r,this.value=i}get astNodeType(){return"var"}}class F extends I{constructor(e,t,n){super(),this.name=e,this.type=t,this.value=n}get astNodeType(){return"override"}}class U extends I{constructor(e,t,n,r,i){super(),this.name=e,this.type=t,this.storage=n,this.access=r,this.value=i}get astNodeType(){return"let"}}class G extends I{constructor(e,t,n,r,i){super(),this.name=e,this.type=t,this.storage=n,this.access=r,this.value=i}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}}!function(e){e.increment="++",e.decrement="--"}(v||(v={})),function(e){e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for IncrementOperator");return e[n]}}(v||(v={}));class V extends I{constructor(e,t){super(),this.operator=e,this.variable=t}get astNodeType(){return"increment"}}!function(e){e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="}(y||(y={})),function(e){e.parse=function(t){const n=t;if("parse"==n)throw new Error("Invalid value for AssignOperator");return e[n]}}(y||(y={}));class z extends I{constructor(e,t,n){super(),this.operator=e,this.variable=t,this.value=n}get astNodeType(){return"assign"}}class j extends I{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"call"}}class W extends I{constructor(e,t){super(),this.body=e,this.continuing=t}get astNodeType(){return"loop"}}class H extends I{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"body"}}class Q extends I{constructor(e,t,n,r){super(),this.condition=e,this.body=t,this.elseif=n,this.else=r}get astNodeType(){return"if"}}class X extends I{constructor(e){super(),this.value=e}get astNodeType(){return"return"}}class $ extends I{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class Y extends I{constructor(e,t){super(),this.name=e,this.type=t}get astNodeType(){return"alias"}}class K extends I{constructor(){super()}get astNodeType(){return"discard"}}class Z extends I{constructor(){super()}get astNodeType(){return"break"}}class q extends I{constructor(){super()}get astNodeType(){return"continue"}}class J extends I{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class ee extends J{constructor(e,t){super(e),this.members=t}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let t=0;t<this.members.length;t++)if(this.members[t].name==e)return t;return-1}}class te extends J{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"template"}}class ne extends J{constructor(e,t,n,r){super(e),this.storage=t,this.type=n,this.access=r}get astNodeType(){return"pointer"}}class re extends J{constructor(e,t,n,r){super(e),this.attributes=t,this.format=n,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}}class ie extends J{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return"sampler"}}class se extends M{constructor(){super()}}class Ae extends se{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class oe extends se{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"createExpr"}}class ae extends se{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return 180*this.args[0].evaluate(e)/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}}class ce extends se{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}}class le extends se{constructor(e,t){super(),this.name=e,this.initializer=t}get astNodeType(){return"constExpr"}evaluate(e){var t,n;if(this.initializer instanceof oe){const r=null===(t=this.postfix)||void 0===t?void 0:t.evaluateString(e),i=null===(n=this.initializer.type)||void 0===n?void 0:n.name,s=e.structs.get(i),A=null==s?void 0:s.getMemberIndex(r);if(-1!=A){return this.initializer.args[A].evaluate(e)}console.log(A)}return this.initializer.evaluate(e)}}class ue extends se{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class he extends se{constructor(e,t){super(),this.type=e,this.value=t}get astNodeType(){return"bitcastExpr"}}class de extends se{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return"typecastExpr"}evaluate(e){return this.args[0].evaluate(e)}}class fe extends se{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}}class pe extends se{constructor(){super()}}class ge extends pe{constructor(e,t){super(),this.operator=e,this.right=t}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}}class _e extends pe{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}}class me extends M{constructor(){super()}}class Ee extends me{constructor(e,t){super(),this.selector=e,this.body=t}get astNodeType(){return"case"}}class ve extends me{constructor(e){super(),this.body=e}get astNodeType(){return"default"}}class ye extends M{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"argument"}}class be extends M{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return"elseif"}}class we extends M{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return"member"}}class Te extends M{constructor(e,t){super(),this.name=e,this.value=t}get astNodeType(){return"attribute"}}!function(e){e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"}(w||(w={}));class Se{constructor(e,t,n){this.name=e,this.type=t,this.rule=n}toString(){return this.name}}class Re{}b=Re,Re.none=new Se("",w.reserved,""),Re.eof=new Se("EOF",w.token,""),Re.reserved={asm:new Se("asm",w.reserved,"asm"),bf16:new Se("bf16",w.reserved,"bf16"),do:new Se("do",w.reserved,"do"),enum:new Se("enum",w.reserved,"enum"),f16:new Se("f16",w.reserved,"f16"),f64:new Se("f64",w.reserved,"f64"),handle:new Se("handle",w.reserved,"handle"),i8:new Se("i8",w.reserved,"i8"),i16:new Se("i16",w.reserved,"i16"),i64:new Se("i64",w.reserved,"i64"),mat:new Se("mat",w.reserved,"mat"),premerge:new Se("premerge",w.reserved,"premerge"),regardless:new Se("regardless",w.reserved,"regardless"),typedef:new Se("typedef",w.reserved,"typedef"),u8:new Se("u8",w.reserved,"u8"),u16:new Se("u16",w.reserved,"u16"),u64:new Se("u64",w.reserved,"u64"),unless:new Se("unless",w.reserved,"unless"),using:new Se("using",w.reserved,"using"),vec:new Se("vec",w.reserved,"vec"),void:new Se("void",w.reserved,"void")},Re.keywords={array:new Se("array",w.keyword,"array"),atomic:new Se("atomic",w.keyword,"atomic"),bool:new Se("bool",w.keyword,"bool"),f32:new Se("f32",w.keyword,"f32"),i32:new Se("i32",w.keyword,"i32"),mat2x2:new Se("mat2x2",w.keyword,"mat2x2"),mat2x3:new Se("mat2x3",w.keyword,"mat2x3"),mat2x4:new Se("mat2x4",w.keyword,"mat2x4"),mat3x2:new Se("mat3x2",w.keyword,"mat3x2"),mat3x3:new Se("mat3x3",w.keyword,"mat3x3"),mat3x4:new Se("mat3x4",w.keyword,"mat3x4"),mat4x2:new Se("mat4x2",w.keyword,"mat4x2"),mat4x3:new Se("mat4x3",w.keyword,"mat4x3"),mat4x4:new Se("mat4x4",w.keyword,"mat4x4"),ptr:new Se("ptr",w.keyword,"ptr"),sampler:new Se("sampler",w.keyword,"sampler"),sampler_comparison:new Se("sampler_comparison",w.keyword,"sampler_comparison"),struct:new Se("struct",w.keyword,"struct"),texture_1d:new Se("texture_1d",w.keyword,"texture_1d"),texture_2d:new Se("texture_2d",w.keyword,"texture_2d"),texture_2d_array:new Se("texture_2d_array",w.keyword,"texture_2d_array"),texture_3d:new Se("texture_3d",w.keyword,"texture_3d"),texture_cube:new Se("texture_cube",w.keyword,"texture_cube"),texture_cube_array:new Se("texture_cube_array",w.keyword,"texture_cube_array"),texture_multisampled_2d:new Se("texture_multisampled_2d",w.keyword,"texture_multisampled_2d"),texture_storage_1d:new Se("texture_storage_1d",w.keyword,"texture_storage_1d"),texture_storage_2d:new Se("texture_storage_2d",w.keyword,"texture_storage_2d"),texture_storage_2d_array:new Se("texture_storage_2d_array",w.keyword,"texture_storage_2d_array"),texture_storage_3d:new Se("texture_storage_3d",w.keyword,"texture_storage_3d"),texture_depth_2d:new Se("texture_depth_2d",w.keyword,"texture_depth_2d"),texture_depth_2d_array:new Se("texture_depth_2d_array",w.keyword,"texture_depth_2d_array"),texture_depth_cube:new Se("texture_depth_cube",w.keyword,"texture_depth_cube"),texture_depth_cube_array:new Se("texture_depth_cube_array",w.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new Se("texture_depth_multisampled_2d",w.keyword,"texture_depth_multisampled_2d"),texture_external:new Se("texture_external",w.keyword,"texture_external"),u32:new Se("u32",w.keyword,"u32"),vec2:new Se("vec2",w.keyword,"vec2"),vec3:new Se("vec3",w.keyword,"vec3"),vec4:new Se("vec4",w.keyword,"vec4"),bitcast:new Se("bitcast",w.keyword,"bitcast"),block:new Se("block",w.keyword,"block"),break:new Se("break",w.keyword,"break"),case:new Se("case",w.keyword,"case"),continue:new Se("continue",w.keyword,"continue"),continuing:new Se("continuing",w.keyword,"continuing"),default:new Se("default",w.keyword,"default"),discard:new Se("discard",w.keyword,"discard"),else:new Se("else",w.keyword,"else"),enable:new Se("enable",w.keyword,"enable"),fallthrough:new Se("fallthrough",w.keyword,"fallthrough"),false:new Se("false",w.keyword,"false"),fn:new Se("fn",w.keyword,"fn"),for:new Se("for",w.keyword,"for"),function:new Se("function",w.keyword,"function"),if:new Se("if",w.keyword,"if"),let:new Se("let",w.keyword,"let"),const:new Se("const",w.keyword,"const"),loop:new Se("loop",w.keyword,"loop"),while:new Se("while",w.keyword,"while"),private:new Se("private",w.keyword,"private"),read:new Se("read",w.keyword,"read"),read_write:new Se("read_write",w.keyword,"read_write"),return:new Se("return",w.keyword,"return"),storage:new Se("storage",w.keyword,"storage"),switch:new Se("switch",w.keyword,"switch"),true:new Se("true",w.keyword,"true"),alias:new Se("alias",w.keyword,"alias"),type:new Se("type",w.keyword,"type"),uniform:new Se("uniform",w.keyword,"uniform"),var:new Se("var",w.keyword,"var"),override:new Se("override",w.keyword,"override"),workgroup:new Se("workgroup",w.keyword,"workgroup"),write:new Se("write",w.keyword,"write"),r8unorm:new Se("r8unorm",w.keyword,"r8unorm"),r8snorm:new Se("r8snorm",w.keyword,"r8snorm"),r8uint:new Se("r8uint",w.keyword,"r8uint"),r8sint:new Se("r8sint",w.keyword,"r8sint"),r16uint:new Se("r16uint",w.keyword,"r16uint"),r16sint:new Se("r16sint",w.keyword,"r16sint"),r16float:new Se("r16float",w.keyword,"r16float"),rg8unorm:new Se("rg8unorm",w.keyword,"rg8unorm"),rg8snorm:new Se("rg8snorm",w.keyword,"rg8snorm"),rg8uint:new Se("rg8uint",w.keyword,"rg8uint"),rg8sint:new Se("rg8sint",w.keyword,"rg8sint"),r32uint:new Se("r32uint",w.keyword,"r32uint"),r32sint:new Se("r32sint",w.keyword,"r32sint"),r32float:new Se("r32float",w.keyword,"r32float"),rg16uint:new Se("rg16uint",w.keyword,"rg16uint"),rg16sint:new Se("rg16sint",w.keyword,"rg16sint"),rg16float:new Se("rg16float",w.keyword,"rg16float"),rgba8unorm:new Se("rgba8unorm",w.keyword,"rgba8unorm"),rgba8unorm_srgb:new Se("rgba8unorm_srgb",w.keyword,"rgba8unorm_srgb"),rgba8snorm:new Se("rgba8snorm",w.keyword,"rgba8snorm"),rgba8uint:new Se("rgba8uint",w.keyword,"rgba8uint"),rgba8sint:new Se("rgba8sint",w.keyword,"rgba8sint"),bgra8unorm:new Se("bgra8unorm",w.keyword,"bgra8unorm"),bgra8unorm_srgb:new Se("bgra8unorm_srgb",w.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new Se("rgb10a2unorm",w.keyword,"rgb10a2unorm"),rg11b10float:new Se("rg11b10float",w.keyword,"rg11b10float"),rg32uint:new Se("rg32uint",w.keyword,"rg32uint"),rg32sint:new Se("rg32sint",w.keyword,"rg32sint"),rg32float:new Se("rg32float",w.keyword,"rg32float"),rgba16uint:new Se("rgba16uint",w.keyword,"rgba16uint"),rgba16sint:new Se("rgba16sint",w.keyword,"rgba16sint"),rgba16float:new Se("rgba16float",w.keyword,"rgba16float"),rgba32uint:new Se("rgba32uint",w.keyword,"rgba32uint"),rgba32sint:new Se("rgba32sint",w.keyword,"rgba32sint"),rgba32float:new Se("rgba32float",w.keyword,"rgba32float"),static_assert:new Se("static_assert",w.keyword,"static_assert")},Re.tokens={decimal_float_literal:new Se("decimal_float_literal",w.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new Se("hex_float_literal",w.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new Se("int_literal",w.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new Se("uint_literal",w.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new Se("ident",w.token,/[a-zA-Z][0-9a-zA-Z_]*/),and:new Se("and",w.token,"&"),and_and:new Se("and_and",w.token,"&&"),arrow:new Se("arrow ",w.token,"->"),attr:new Se("attr",w.token,"@"),attr_left:new Se("attr_left",w.token,"[["),attr_right:new Se("attr_right",w.token,"]]"),forward_slash:new Se("forward_slash",w.token,"/"),bang:new Se("bang",w.token,"!"),bracket_left:new Se("bracket_left",w.token,"["),bracket_right:new Se("bracket_right",w.token,"]"),brace_left:new Se("brace_left",w.token,"{"),brace_right:new Se("brace_right",w.token,"}"),colon:new Se("colon",w.token,":"),comma:new Se("comma",w.token,","),equal:new Se("equal",w.token,"="),equal_equal:new Se("equal_equal",w.token,"=="),not_equal:new Se("not_equal",w.token,"!="),greater_than:new Se("greater_than",w.token,">"),greater_than_equal:new Se("greater_than_equal",w.token,">="),shift_right:new Se("shift_right",w.token,">>"),less_than:new Se("less_than",w.token,"<"),less_than_equal:new Se("less_than_equal",w.token,"<="),shift_left:new Se("shift_left",w.token,"<<"),modulo:new Se("modulo",w.token,"%"),minus:new Se("minus",w.token,"-"),minus_minus:new Se("minus_minus",w.token,"--"),period:new Se("period",w.token,"."),plus:new Se("plus",w.token,"+"),plus_plus:new Se("plus_plus",w.token,"++"),or:new Se("or",w.token,"|"),or_or:new Se("or_or",w.token,"||"),paren_left:new Se("paren_left",w.token,"("),paren_right:new Se("paren_right",w.token,")"),semicolon:new Se("semicolon",w.token,";"),star:new Se("star",w.token,"*"),tilde:new Se("tilde",w.token,"~"),underscore:new Se("underscore",w.token,"_"),xor:new Se("xor",w.token,"^"),plus_equal:new Se("plus_equal",w.token,"+="),minus_equal:new Se("minus_equal",w.token,"-="),times_equal:new Se("times_equal",w.token,"*="),division_equal:new Se("division_equal",w.token,"/="),modulo_equal:new Se("modulo_equal",w.token,"%="),and_equal:new Se("and_equal",w.token,"&="),or_equal:new Se("or_equal",w.token,"|="),xor_equal:new Se("xor_equal",w.token,"^="),shift_right_equal:new Se("shift_right_equal",w.token,">>="),shift_left_equal:new Se("shift_left_equal",w.token,"<<=")},Re.storage_class=[b.keywords.function,b.keywords.private,b.keywords.workgroup,b.keywords.uniform,b.keywords.storage],Re.access_mode=[b.keywords.read,b.keywords.write,b.keywords.read_write],Re.sampler_type=[b.keywords.sampler,b.keywords.sampler_comparison],Re.sampled_texture_type=[b.keywords.texture_1d,b.keywords.texture_2d,b.keywords.texture_2d_array,b.keywords.texture_3d,b.keywords.texture_cube,b.keywords.texture_cube_array],Re.multisampled_texture_type=[b.keywords.texture_multisampled_2d],Re.storage_texture_type=[b.keywords.texture_storage_1d,b.keywords.texture_storage_2d,b.keywords.texture_storage_2d_array,b.keywords.texture_storage_3d],Re.depth_texture_type=[b.keywords.texture_depth_2d,b.keywords.texture_depth_2d_array,b.keywords.texture_depth_cube,b.keywords.texture_depth_cube_array,b.keywords.texture_depth_multisampled_2d],Re.texture_external_type=[b.keywords.texture_external],Re.any_texture_type=[...b.sampled_texture_type,...b.multisampled_texture_type,...b.storage_texture_type,...b.depth_texture_type,...b.texture_external_type],Re.texel_format=[b.keywords.r8unorm,b.keywords.r8snorm,b.keywords.r8uint,b.keywords.r8sint,b.keywords.r16uint,b.keywords.r16sint,b.keywords.r16float,b.keywords.rg8unorm,b.keywords.rg8snorm,b.keywords.rg8uint,b.keywords.rg8sint,b.keywords.r32uint,b.keywords.r32sint,b.keywords.r32float,b.keywords.rg16uint,b.keywords.rg16sint,b.keywords.rg16float,b.keywords.rgba8unorm,b.keywords.rgba8unorm_srgb,b.keywords.rgba8snorm,b.keywords.rgba8uint,b.keywords.rgba8sint,b.keywords.bgra8unorm,b.keywords.bgra8unorm_srgb,b.keywords.rgb10a2unorm,b.keywords.rg11b10float,b.keywords.rg32uint,b.keywords.rg32sint,b.keywords.rg32float,b.keywords.rgba16uint,b.keywords.rgba16sint,b.keywords.rgba16float,b.keywords.rgba32uint,b.keywords.rgba32sint,b.keywords.rgba32float],Re.const_literal=[b.tokens.int_literal,b.tokens.uint_literal,b.tokens.decimal_float_literal,b.tokens.hex_float_literal,b.keywords.true,b.keywords.false],Re.literal_or_ident=[b.tokens.ident,b.tokens.int_literal,b.tokens.uint_literal,b.tokens.decimal_float_literal,b.tokens.hex_float_literal],Re.element_count_expression=[b.tokens.int_literal,b.tokens.uint_literal,b.tokens.ident],Re.template_types=[b.keywords.vec2,b.keywords.vec3,b.keywords.vec4,b.keywords.mat2x2,b.keywords.mat2x3,b.keywords.mat2x4,b.keywords.mat3x2,b.keywords.mat3x3,b.keywords.mat3x4,b.keywords.mat4x2,b.keywords.mat4x3,b.keywords.mat4x4,b.keywords.atomic,b.keywords.bitcast,...b.any_texture_type],Re.attribute_name=[b.tokens.ident,b.keywords.block],Re.assignment_operators=[b.tokens.equal,b.tokens.plus_equal,b.tokens.minus_equal,b.tokens.times_equal,b.tokens.division_equal,b.tokens.modulo_equal,b.tokens.and_equal,b.tokens.or_equal,b.tokens.xor_equal,b.tokens.shift_right_equal,b.tokens.shift_left_equal],Re.increment_operators=[b.tokens.plus_plus,b.tokens.minus_minus];class Ce{constructor(e,t,n){this.type=e,this.lexeme=t,this.line=n}toString(){return this.lexeme}isTemplateType(){return-1!=Re.template_types.indexOf(this.type)}isArrayType(){return this.type==Re.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class xe{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!=e?e:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new Ce(Re.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if("\n"==e)return this._line++,!0;if(this._isWhitespace(e))return!0;if("/"==e){if("/"==this._peekAhead()){for(;"\n"!=e;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let t=1;for(;t>0;){if(this._isAtEnd())return!0;if(e=this._advance(),"\n"==e)this._line++;else if("*"==e){if("/"==this._peekAhead()&&(this._advance(),t--,0==t))return!0}else"/"==e&&"*"==this._peekAhead()&&(this._advance(),t++)}return!0}}let t=Re.none;for(;;){let n=this._findType(e);const r=this._peekAhead();if(">"==e&&(">"==r||"="==r)){let e=!1,t=this._tokens.length-1;for(let n=0;n<5&&t>=0;++n,--t)if(this._tokens[t].type===Re.tokens.less_than){t>0&&this._tokens[t-1].isArrayOrTemplateType()&&(e=!0);break}if(e)return this._addToken(n),!0}if(n===Re.none){let r=e,i=0;const s=2;for(let e=0;e<s;++e)if(r+=this._peekAhead(e),n=this._findType(r),n!==Re.none){i=e;break}if(n===Re.none)return t!==Re.none&&(this._current--,this._addToken(t),!0);e=r,this._current+=i+1}if(t=n,this._isAtEnd())break;e+=this._advance()}return t!==Re.none&&(this._addToken(t),!0)}_findType(e){for(const t in Re.keywords){const n=Re.keywords[t];if(this._match(e,n.rule))return n}for(const t in Re.tokens){const n=Re.tokens[t];if(this._match(e,n.rule))return n}return Re.none}_match(e,t){if("string"==typeof t){if(t==e)return!0}else{const n=t.exec(e);if(n&&0==n.index&&n[0]==e)return!0}return!1}_isAtEnd(){return this._current>=this._source.length}_isWhitespace(e){return" "==e||"\t"==e||"\r"==e}_advance(e=0){let t=this._source[this._current];return e=e||0,e++,this._current+=e,t}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const t=this._source.substring(this._start,this._current);this._tokens.push(new Ce(e,t,this._line))}}class Pe{constructor(){this._tokens=[],this._current=0,this._context=new P}parse(e){this._initialize(e);let t=[];for(;!this._isAtEnd();){const e=this._global_decl_or_directive();if(!e)break;t.push(e)}return t}_initialize(e){if(e)if("string"==typeof e){const t=new xe(e);this._tokens=t.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,t){return console.error(e,t),{token:e,message:t,toString:function(){return`${t}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==Re.eof}_match(e){if(e instanceof Se)return!!this._check(e)&&(this._advance(),!0);for(let t=0,n=e.length;t<n;++t){const n=e[t];if(this._check(n))return this._advance(),!0}return!1}_consume(e,t){if(this._check(e))return this._advance();throw this._error(this._peek(),t)}_check(e){if(this._isAtEnd())return!1;const t=this._peek();if(e instanceof Array){let n=t.type;return-1!=e.indexOf(n)}return t.type==e}_advance(){return this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(Re.tokens.semicolon)&&!this._isAtEnd(););if(this._match(Re.keywords.alias)){const e=this._type_alias();return this._consume(Re.tokens.semicolon,"Expected ';'"),e}if(this._match(Re.keywords.enable)){const e=this._enable_directive();return this._consume(Re.tokens.semicolon,"Expected ';'"),e}const e=this._attribute();if(this._check(Re.keywords.var)){const t=this._global_variable_decl();return null!=t&&(t.attributes=e),this._consume(Re.tokens.semicolon,"Expected ';'."),t}if(this._check(Re.keywords.override)){const t=this._override_variable_decl();return null!=t&&(t.attributes=e),this._consume(Re.tokens.semicolon,"Expected ';'."),t}if(this._check(Re.keywords.let)){const t=this._global_let_decl();return null!=t&&(t.attributes=e),this._consume(Re.tokens.semicolon,"Expected ';'."),t}if(this._check(Re.keywords.const)){const t=this._global_const_decl();return null!=t&&(t.attributes=e),this._consume(Re.tokens.semicolon,"Expected ';'."),t}if(this._check(Re.keywords.struct)){const t=this._struct_decl();return null!=t&&(t.attributes=e),t}if(this._check(Re.keywords.fn)){const t=this._function_decl();return null!=t&&(t.attributes=e),t}return null}_function_decl(){if(!this._match(Re.keywords.fn))return null;const e=this._consume(Re.tokens.ident,"Expected function name.").toString();this._consume(Re.tokens.paren_left,"Expected '(' for function arguments.");const t=[];if(!this._check(Re.tokens.paren_right))do{if(this._check(Re.tokens.paren_right))break;const e=this._attribute(),n=this._consume(Re.tokens.ident,"Expected argument name.").toString();this._consume(Re.tokens.colon,"Expected ':' for argument type.");const r=this._attribute(),i=this._type_decl();null!=i&&(i.attributes=r,t.push(new ye(n,i,e)))}while(this._match(Re.tokens.comma));this._consume(Re.tokens.paren_right,"Expected ')' after function arguments.");let n=null;if(this._match(Re.tokens.arrow)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}const r=this._compound_statement();return new L(e,t,n,r)}_compound_statement(){const e=[];for(this._consume(Re.tokens.brace_left,"Expected '{' for block.");!this._check(Re.tokens.brace_right);){const t=this._statement();null!==t&&e.push(t)}return this._consume(Re.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(Re.tokens.semicolon)&&!this._isAtEnd(););if(this._check(Re.keywords.if))return this._if_statement();if(this._check(Re.keywords.switch))return this._switch_statement();if(this._check(Re.keywords.loop))return this._loop_statement();if(this._check(Re.keywords.for))return this._for_statement();if(this._check(Re.keywords.while))return this._while_statement();if(this._check(Re.keywords.continuing))return this._continuing_statement();if(this._check(Re.keywords.static_assert))return this._static_assert_statement();if(this._check(Re.tokens.brace_left))return this._compound_statement();let e=null;return e=this._check(Re.keywords.return)?this._return_statement():this._check([Re.keywords.var,Re.keywords.let,Re.keywords.const])?this._variable_statement():this._match(Re.keywords.discard)?new K:this._match(Re.keywords.break)?new Z:this._match(Re.keywords.continue)?new q:this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),null!=e&&this._consume(Re.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(Re.keywords.static_assert))return null;let e=this._optional_paren_expression();return new k(e)}_while_statement(){if(!this._match(Re.keywords.while))return null;let e=this._optional_paren_expression();const t=this._compound_statement();return new O(e,t)}_continuing_statement(){if(!this._match(Re.keywords.continuing))return null;const e=this._compound_statement();return new B(e)}_for_statement(){if(!this._match(Re.keywords.for))return null;this._consume(Re.tokens.paren_left,"Expected '('.");const e=this._check(Re.tokens.semicolon)?null:this._for_init();this._consume(Re.tokens.semicolon,"Expected ';'.");const t=this._check(Re.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(Re.tokens.semicolon,"Expected ';'.");const n=this._check(Re.tokens.paren_right)?null:this._for_increment();this._consume(Re.tokens.paren_right,"Expected ')'.");const r=this._compound_statement();return new D(e,t,n,r)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(Re.keywords.var)){const e=this._variable_decl();if(null===e)throw this._error(this._peek(),"Variable declaration expected.");let t=null;return this._match(Re.tokens.equal)&&(t=this._short_circuit_or_expression()),new N(e.name,e.type,e.storage,e.access,t)}if(this._match(Re.keywords.let)){const e=this._consume(Re.tokens.ident,"Expected name for let.").toString();let t=null;if(this._match(Re.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}this._consume(Re.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new U(e,t,null,null,n)}if(this._match(Re.keywords.const)){const e=this._consume(Re.tokens.ident,"Expected name for const.").toString();let t=null;if(this._match(Re.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}this._consume(Re.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new G(e,t,null,null,n)}return null}_increment_decrement_statement(){const e=this._current,t=this._unary_expression();if(null==t)return null;if(!this._check(Re.increment_operators))return this._current=e,null;const n=this._consume(Re.increment_operators,"Expected increment operator");return new V(n.type===Re.tokens.plus_plus?v.increment:v.decrement,t)}_assignment_statement(){let e=null;if(this._check(Re.tokens.brace_right))return null;let t=this._match(Re.tokens.underscore);if(t||(e=this._unary_expression()),!t&&null==e)return null;const n=this._consume(Re.assignment_operators,"Expected assignment operator."),r=this._short_circuit_or_expression();return new z(y.parse(n.lexeme),e,r)}_func_call_statement(){if(!this._check(Re.tokens.ident))return null;const e=this._current,t=this._consume(Re.tokens.ident,"Expected function name."),n=this._argument_expression_list();return null===n?(this._current=e,null):new j(t.lexeme,n)}_loop_statement(){if(!this._match(Re.keywords.loop))return null;this._consume(Re.tokens.brace_left,"Expected '{' for loop.");const e=[];let t=this._statement();for(;null!==t;){if(Array.isArray(t))for(let n of t)e.push(n);else e.push(t);t=this._statement()}let n=null;return this._match(Re.keywords.continuing)&&(n=this._compound_statement()),this._consume(Re.tokens.brace_right,"Expected '}' for loop."),new W(e,n)}_switch_statement(){if(!this._match(Re.keywords.switch))return null;const e=this._optional_paren_expression();this._consume(Re.tokens.brace_left,"Expected '{' for switch.");const t=this._switch_body();if(null==t||0==t.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(Re.tokens.brace_right,"Expected '}' for switch."),new H(e,t)}_switch_body(){const e=[];if(this._match(Re.keywords.case)){const t=this._case_selectors();this._match(Re.tokens.colon),this._consume(Re.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(Re.tokens.brace_right,"Exected '}' for switch case."),e.push(new Ee(t,n))}if(this._match(Re.keywords.default)){this._match(Re.tokens.colon),this._consume(Re.tokens.brace_left,"Exected '{' for switch default.");const t=this._case_body();this._consume(Re.tokens.brace_right,"Exected '}' for switch default."),e.push(new ve(t))}if(this._check([Re.keywords.default,Re.keywords.case])){const t=this._switch_body();e.push(t[0])}return e}_case_selectors(){var e,t,n,r;const i=[null!==(t=null===(e=this._shift_expression())||void 0===e?void 0:e.evaluate(this._context).toString())&&void 0!==t?t:""];for(;this._match(Re.tokens.comma);)i.push(null!==(r=null===(n=this._shift_expression())||void 0===n?void 0:n.evaluate(this._context).toString())&&void 0!==r?r:"");return i}_case_body(){if(this._match(Re.keywords.fallthrough))return this._consume(Re.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(null==e)return[];e instanceof Array||(e=[e]);const t=this._case_body();return 0==t.length?e:[...e,t[0]]}_if_statement(){if(!this._match(Re.keywords.if))return null;const e=this._optional_paren_expression(),t=this._compound_statement();let n=[];this._match_elseif()&&(n=this._elseif_statement(n));let r=null;return this._match(Re.keywords.else)&&(r=this._compound_statement()),new Q(e,t,n,r)}_match_elseif(){return this._tokens[this._current].type===Re.keywords.else&&this._tokens[this._current+1].type===Re.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const t=this._optional_paren_expression(),n=this._compound_statement();return e.push(new be(t,n)),this._match_elseif()&&this._elseif_statement(e),e}_return_statement(){if(!this._match(Re.keywords.return))return null;const e=this._short_circuit_or_expression();return new X(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(Re.tokens.or_or);)e=new _e(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(Re.tokens.and_and);)e=new _e(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(Re.tokens.or);)e=new _e(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(Re.tokens.xor);)e=new _e(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(Re.tokens.and);)e=new _e(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([Re.tokens.equal_equal,Re.tokens.not_equal])?new _e(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([Re.tokens.less_than,Re.tokens.greater_than,Re.tokens.less_than_equal,Re.tokens.greater_than_equal]);)e=new _e(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([Re.tokens.shift_left,Re.tokens.shift_right]);)e=new _e(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([Re.tokens.plus,Re.tokens.minus]);)e=new _e(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([Re.tokens.star,Re.tokens.forward_slash,Re.tokens.modulo]);)e=new _e(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([Re.tokens.minus,Re.tokens.bang,Re.tokens.tilde,Re.tokens.star,Re.tokens.and])?new ge(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),t=this._postfix_expression();return t&&(e.postfix=t),e}_postfix_expression(){if(this._match(Re.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(Re.tokens.bracket_right,"Expected ']'.");const t=this._postfix_expression();return t&&(e.postfix=t),e}if(this._match(Re.tokens.period)){const e=this._consume(Re.tokens.ident,"Expected member name."),t=this._postfix_expression(),n=new Ae(e.lexeme);return t&&(n.postfix=t),n}return null}_getStruct(e){if(this._context.aliases.has(e)){return this._context.aliases.get(e).type}if(this._context.structs.has(e)){return this._context.structs.get(e)}return null}_primary_expression(){if(this._match(Re.tokens.ident)){const e=this._previous().toString();if(this._check(Re.tokens.paren_left)){const t=this._argument_expression_list(),n=this._getStruct(e);return null!=n?new oe(n,t):new ae(e,t)}if(this._context.constants.has(e)){const t=this._context.constants.get(e);return new le(e,t.value)}return new ce(e)}if(this._match(Re.const_literal))return new ue(parseFloat(this._previous().toString()));if(this._check(Re.tokens.paren_left))return this._paren_expression();if(this._match(Re.keywords.bitcast)){this._consume(Re.tokens.less_than,"Expected '<'.");const e=this._type_decl();this._consume(Re.tokens.greater_than,"Expected '>'.");const t=this._paren_expression();return new he(e,t)}const e=this._type_decl(),t=this._argument_expression_list();return new de(e,t)}_argument_expression_list(){if(!this._match(Re.tokens.paren_left))return null;const e=[];do{if(this._check(Re.tokens.paren_right))break;const t=this._short_circuit_or_expression();e.push(t)}while(this._match(Re.tokens.comma));return this._consume(Re.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(Re.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(Re.tokens.paren_right),new fe([e])}_paren_expression(){this._consume(Re.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(Re.tokens.paren_right,"Expected ')'."),new fe([e])}_struct_decl(){if(!this._match(Re.keywords.struct))return null;const e=this._consume(Re.tokens.ident,"Expected name for struct.").toString();this._consume(Re.tokens.brace_left,"Expected '{' for struct body.");const t=[];for(;!this._check(Re.tokens.brace_right);){const e=this._attribute(),n=this._consume(Re.tokens.ident,"Expected variable name.").toString();this._consume(Re.tokens.colon,"Expected ':' for struct member type.");const r=this._attribute(),i=this._type_decl();null!=i&&(i.attributes=r),this._check(Re.tokens.brace_right)?this._match(Re.tokens.comma):this._consume(Re.tokens.comma,"Expected ',' for struct member."),t.push(new we(n,i,e))}this._consume(Re.tokens.brace_right,"Expected '}' after struct body.");const n=new ee(e,t);return this._context.structs.set(e,n),n}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(Re.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(Re.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(Re.keywords.const))return null;const e=this._consume(Re.tokens.ident,"Expected variable name");let t=null;if(this._match(Re.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}let n=null;if(this._match(Re.tokens.equal)){const e=this._short_circuit_or_expression();if(e instanceof oe)n=e;else if(e instanceof le&&e.initializer instanceof oe)n=e.initializer;else try{const t=e.evaluate(this._context);n=new ue(t)}catch(b){n=e}}const r=new G(e.toString(),t,"","",n);return this._context.constants.set(r.name,r),r}_global_let_decl(){if(!this._match(Re.keywords.let))return null;const e=this._consume(Re.tokens.ident,"Expected variable name");let t=null;if(this._match(Re.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}let n=null;return this._match(Re.tokens.equal)&&(n=this._const_expression()),new U(e.toString(),t,"","",n)}_const_expression(){if(this._match(Re.const_literal))return new Ae(this._previous().toString());const e=this._type_decl();this._consume(Re.tokens.paren_left,"Expected '('.");let t=[];for(;!this._check(Re.tokens.paren_right)&&(t.push(this._const_expression()),this._check(Re.tokens.comma));)this._advance();return this._consume(Re.tokens.paren_right,"Expected ')'."),new oe(e,t)}_variable_decl(){if(!this._match(Re.keywords.var))return null;let e="",t="";this._match(Re.tokens.less_than)&&(e=this._consume(Re.storage_class,"Expected storage_class.").toString(),this._match(Re.tokens.comma)&&(t=this._consume(Re.access_mode,"Expected access_mode.").toString()),this._consume(Re.tokens.greater_than,"Expected '>'."));const n=this._consume(Re.tokens.ident,"Expected variable name");let r=null;if(this._match(Re.tokens.colon)){const e=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=e)}return new N(n.toString(),r,e,t,null)}_override_decl(){if(!this._match(Re.keywords.override))return null;const e=this._consume(Re.tokens.ident,"Expected variable name");let t=null;if(this._match(Re.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}return new F(e.toString(),t,null)}_enable_directive(){const e=this._consume(Re.tokens.ident,"identity expected.");return new $(e.toString())}_type_alias(){const e=this._consume(Re.tokens.ident,"identity expected.");this._consume(Re.tokens.equal,"Expected '=' for type alias.");let t=this._type_decl();if(null===t)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);const n=new Y(e.toString(),t);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([Re.tokens.ident,...Re.texel_format,Re.keywords.bool,Re.keywords.f32,Re.keywords.i32,Re.keywords.u32])){const e=this._advance(),t=e.toString();return this._context.structs.has(t)?this._context.structs.get(t):this._context.aliases.has(t)?this._context.aliases.get(t).type:new J(e.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(Re.template_types)){let e=this._advance().toString(),t=null,n=null;return this._match(Re.tokens.less_than)&&(t=this._type_decl(),n=null,this._match(Re.tokens.comma)&&(n=this._consume(Re.access_mode,"Expected access_mode for pointer").toString()),this._consume(Re.tokens.greater_than,"Expected '>' for type.")),new te(e,t,n)}if(this._match(Re.keywords.ptr)){let e=this._previous().toString();this._consume(Re.tokens.less_than,"Expected '<' for pointer.");const t=this._consume(Re.storage_class,"Expected storage_class for pointer");this._consume(Re.tokens.comma,"Expected ',' for pointer.");const n=this._type_decl();let r=null;return this._match(Re.tokens.comma)&&(r=this._consume(Re.access_mode,"Expected access_mode for pointer").toString()),this._consume(Re.tokens.greater_than,"Expected '>' for pointer."),new ne(e,t.toString(),n,r)}const t=this._attribute();if(this._match(Re.keywords.array)){let e=null,n=-1;const r=this._previous();if(this._match(Re.tokens.less_than)){e=this._type_decl(),this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);let t="";if(this._match(Re.tokens.comma)){t=this._shift_expression().evaluate(this._context).toString()}this._consume(Re.tokens.greater_than,"Expected '>' for array."),n=t?parseInt(t):0}return new re(r.toString(),t,e,n)}return null}_texture_sampler_types(){if(this._match(Re.sampler_type))return new ie(this._previous().toString(),null,null);if(this._match(Re.depth_texture_type))return new ie(this._previous().toString(),null,null);if(this._match(Re.sampled_texture_type)||this._match(Re.multisampled_texture_type)){const e=this._previous();this._consume(Re.tokens.less_than,"Expected '<' for sampler type.");const t=this._type_decl();return this._consume(Re.tokens.greater_than,"Expected '>' for sampler type."),new ie(e.toString(),t,null)}if(this._match(Re.storage_texture_type)){const e=this._previous();this._consume(Re.tokens.less_than,"Expected '<' for sampler type.");const t=this._consume(Re.texel_format,"Invalid texel format.").toString();this._consume(Re.tokens.comma,"Expected ',' after texel format.");const n=this._consume(Re.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(Re.tokens.greater_than,"Expected '>' for sampler type."),new ie(e.toString(),t,n)}return null}_attribute(){let e=[];for(;this._match(Re.tokens.attr);){const t=this._consume(Re.attribute_name,"Expected attribute name"),n=new Te(t.toString(),null);if(this._match(Re.tokens.paren_left)){if(n.value=this._consume(Re.literal_or_ident,"Expected attribute value").toString(),this._check(Re.tokens.comma)){this._advance();do{const e=this._consume(Re.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(e)}while(this._match(Re.tokens.comma))}this._consume(Re.tokens.paren_right,"Expected ')'")}e.push(n)}for(;this._match(Re.tokens.attr_left);){if(!this._check(Re.tokens.attr_right))do{const t=this._consume(Re.attribute_name,"Expected attribute name"),n=new Te(t.toString(),null);if(this._match(Re.tokens.paren_left)){if(n.value=[this._consume(Re.literal_or_ident,"Expected attribute value").toString()],this._check(Re.tokens.comma)){this._advance();do{const e=this._consume(Re.literal_or_ident,"Expected attribute value").toString();n.value.push(e)}while(this._match(Re.tokens.comma))}this._consume(Re.tokens.paren_right,"Expected ')'")}e.push(n)}while(this._match(Re.tokens.comma));this._consume(Re.tokens.attr_right,"Expected ']]' after attribute declarations")}return 0==e.length?null:e}}class Me{constructor(e,t){this.name=e,this.attributes=t,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class Ie{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Le extends Me{constructor(e,t){super(e,t),this.members=[],this.align=0}get isStruct(){return!0}}class ke extends Me{constructor(e,t){super(e,t),this.count=0,this.stride=0}get isArray(){return!0}}class Oe extends Me{constructor(e,t,n,r){super(e,n),this.format=t,this.access=r}get isTemplate(){return!0}}!function(e){e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"}(T||(T={}));class Be{constructor(e,t,n,r,i,s,A){this.name=e,this.type=t,this.group=n,this.binding=r,this.attributes=i,this.resourceType=s,this.access=A}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class De{constructor(e,t){this.name=e,this.type=t}}class Ne{constructor(e,t){this.align=e,this.size=t}}class Fe{constructor(e,t,n,r){this.name=e,this.type=t,this.locationType=n,this.location=r,this.interpolation=null}}class Ue{constructor(e,t,n,r){this.name=e,this.type=t,this.locationType=n,this.location=r}}class Ge{constructor(e,t=null){this.stage=null,this.inputs=[],this.outputs=[],this.name=e,this.stage=t}}class Ve{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class ze{constructor(e,t,n,r){this.name=e,this.type=t,this.attributes=n,this.id=r}}class je{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new Ve,this._types=new Map,e&&this.update(e)}_isStorageTexture(e){return"texture_storage_1d"==e.name||"texture_storage_2d"==e.name||"texture_storage_2d_array"==e.name||"texture_storage_3d"==e.name}update(e){const t=(new Pe).parse(e);for(const n of t)if(n instanceof ee){const e=this._getTypeInfo(n,null);e instanceof Le&&this.structs.push(e)}else if(n instanceof Y)this.aliases.push(this._getAliasInfo(n));else if(n instanceof F){const e=n,t=this._getAttributeNum(e.attributes,"id",0),r=null!=e.type?this._getTypeInfo(e.type,e.attributes):null;this.overrides.push(new ze(e.name,r,e.attributes,t))}else if(this._isUniformVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this._getTypeInfo(e.type,e.attributes),s=new Be(e.name,i,t,r,e.attributes,T.Uniform,e.access);this.uniforms.push(s)}else if(this._isStorageVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this._getTypeInfo(e.type,e.attributes),s=this._isStorageTexture(i),A=new Be(e.name,i,t,r,e.attributes,s?T.StorageTexture:T.Storage,e.access);this.storage.push(A)}else if(this._isTextureVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this._getTypeInfo(e.type,e.attributes),s=this._isStorageTexture(i),A=new Be(e.name,i,t,r,e.attributes,s?T.StorageTexture:T.Texture,e.access);s?this.storage.push(A):this.textures.push(A)}else if(this._isSamplerVar(n)){const e=n,t=this._getAttributeNum(e.attributes,"group",0),r=this._getAttributeNum(e.attributes,"binding",0),i=this._getTypeInfo(e.type,e.attributes),s=new Be(e.name,i,t,r,e.attributes,T.Sampler,e.access);this.samplers.push(s)}else if(n instanceof L){const e=this._getAttribute(n,"vertex"),t=this._getAttribute(n,"fragment"),r=this._getAttribute(n,"compute"),i=e||t||r;if(i){const e=new Ge(n.name,i.name);e.inputs=this._getInputs(n.args),e.outputs=this._getOutputs(n.returnType),this.entry[i.name].push(e)}}else;}getBindGroups(){const e=[];function t(t,n){t>=e.length&&(e.length=t+1),void 0===e[t]&&(e[t]=[]),n>=e[t].length&&(e[t].length=n+1)}for(const n of this.uniforms){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.storage){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.textures){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.samplers){t(n.group,n.binding);e[n.group][n.binding]=n}return e}_getOutputs(e,t){if(void 0===t&&(t=[]),e instanceof ee)this._getStructOutputs(e,t);else{const n=this._getOutputInfo(e);null!==n&&t.push(n)}return t}_getStructOutputs(e,t){for(const n of e.members)if(n.type instanceof ee)this._getStructOutputs(n.type,t);else{const e=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(null!==e){const r=this._getTypeInfo(n.type,n.type.attributes),i=this._parseInt(e.value),s=new Ue(n.name,r,e.name,i);t.push(s)}}}_getOutputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getTypeInfo(e,e.attributes),r=this._parseInt(t.value);return new Ue("",n,t.name,r)}return null}_getInputs(e,t){void 0===t&&(t=[]);for(const n of e)if(n.type instanceof ee)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}return t}_getStructInputs(e,t){for(const n of e.members)if(n.type instanceof ee)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}}_getInputInfo(e){const t=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(null!==t){const n=this._getAttribute(e,"interpolation"),r=this._getTypeInfo(e.type,e.attributes),i=this._parseInt(t.value),s=new Fe(e.name,r,t.name,i);return null!==n&&(s.interpolation=this._parseString(n.value)),s}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const t=parseInt(e);return isNaN(t)?e:t}_getAlias(e){for(const t of this.aliases)if(t.name==e)return t.type;return null}_getAliasInfo(e){return new De(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,t){if(this._types.has(e))return this._types.get(e);if(e instanceof re){const n=e,r=this._getTypeInfo(n.format,n.attributes),i=new ke(n.name,t);return i.format=r,i.count=n.count,this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof ee){const n=e,r=new Le(n.name,t);for(const e of n.members){const t=this._getTypeInfo(e.type,e.attributes);r.members.push(new Ie(e.name,t,e.attributes))}return this._types.set(e,r),this._updateTypeInfo(r),r}if(e instanceof ie){const n=e,r=n.format instanceof J,i=n.format?r?this._getTypeInfo(n.format,null):new Me(n.format,null):null,s=new Oe(n.name,i,t,n.access);return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof te){const n=e,r=n.format?this._getTypeInfo(n.format,null):null,i=new Oe(n.name,r,t,n.access);return this._types.set(e,i),this._updateTypeInfo(i),i}const n=new Me(e.name,t);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var t,n;const r=this._getTypeSize(e);if(e.size=null!==(t=null==r?void 0:r.size)&&void 0!==t?t:0,e instanceof ke){const t=this._getTypeSize(e.format);e.stride=null!==(n=null==t?void 0:t.size)&&void 0!==n?n:0,this._updateTypeInfo(e.format)}e instanceof Le&&this._updateStructInfo(e)}_updateStructInfo(e){var t;let n=0,r=0,i=0,s=0;for(let A=0,o=e.members.length;A<o;++A){const o=e.members[A],a=this._getTypeSize(o);if(!a)continue;null!==(t=this._getAlias(o.type.name))&&void 0!==t||o.type;const c=a.align,l=a.size;n=this._roundUp(c,n+r),r=l,i=n,s=Math.max(s,c),o.offset=n,o.size=l,this._updateTypeInfo(o.type)}e.size=this._roundUp(s,i+r),e.align=s}_getTypeSize(e){var t;if(null==e)return null;const n=this._getAttributeNum(e.attributes,"size",0),r=this._getAttributeNum(e.attributes,"align",0);if(e instanceof Ie&&(e=e.type),e instanceof Me){const t=this._getAlias(e.name);null!==t&&(e=t)}{const t=je._typeInfo[e.name];if(void 0!==t){const i="f16"===e.format?2:1;return new Ne(Math.max(r,t.align/i),Math.max(n,t.size/i))}}{const t=je._typeInfo[e.name.substring(0,e.name.length-1)];if(t){const i="h"===e.name[e.name.length-1]?2:1;return new Ne(Math.max(r,t.align/i),Math.max(n,t.size/i))}}if(e instanceof ke){let i=e,s=8,A=8;const o=this._getTypeSize(i.format);null!==o&&(A=o.size,s=o.align);return A=i.count*this._getAttributeNum(null!==(t=null==e?void 0:e.attributes)&&void 0!==t?t:null,"stride",this._roundUp(s,A)),n&&(A=n),new Ne(Math.max(r,s),Math.max(n,A))}if(e instanceof Le){let t=0,i=0,s=0,A=0,o=0;for(const n of e.members){const e=this._getTypeSize(n.type);null!==e&&(t=Math.max(e.align,t),s=this._roundUp(e.align,s+A),A=e.size,o=s)}return i=this._roundUp(t,o+A),new Ne(Math.max(r,t),Math.max(n,i))}return null}_isUniformVar(e){return e instanceof N&&"uniform"==e.storage}_isStorageVar(e){return e instanceof N&&"storage"==e.storage}_isTextureVar(e){return e instanceof N&&null!==e.type&&-1!=je._textureTypes.indexOf(e.type.name)}_isSamplerVar(e){return e instanceof N&&null!==e.type&&-1!=je._samplerTypes.indexOf(e.type.name)}_getAttribute(e,t){const n=e;if(!n||!n.attributes)return null;const r=n.attributes;for(let i of r)if(i.name==t)return i;return null}_getAttributeNum(e,t,n){if(null===e)return n;for(let r of e)if(r.name==t){let e=null!==r&&null!==r.value?r.value:n;return e instanceof Array&&(e=e[0]),"number"==typeof e?e:"string"==typeof e?parseInt(e):n}return n}_roundUp(e,t){return Math.ceil(t/e)*e}}function We(e){const t={attributes:[],bindings:[]};let n;try{n=function(e){try{return new je(e)}catch(t){if(t instanceof Error)throw t;let e="WGSL parse error";throw"object"==typeof t&&t?.message&&(e+=`: ${t.message} `),"object"==typeof t&&t?.token&&(e+=t.token.line||""),new Error(e,{cause:t})}}(e)}catch(s){return p.R.error(s.message)(),t}for(const A of n.uniforms){const e=[];for(const t of A.type.members)e.push({name:t.name,type:He(t.type)});t.bindings.push({type:"uniform",name:A.name,location:A.binding,group:A.group,members:e})}const r=n.entry.vertex[0],i=r?.inputs.length||0;for(let A=0;A<i;A++){const e=r.inputs[A];if("location"===e.locationType){const n=He(e.type);t.attributes.push({name:e.name,location:e.location,type:n})}}return t}function He(e){return e.format?`${e.name}<${e.format.name}>`:e.name}je._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},je._textureTypes=Re.any_texture_type.map((e=>e.name)),je._samplerTypes=Re.sampler_type.map((e=>e.name));class Qe{id;userData={};topology;bufferLayout=[];vertexCount;indices;attributes;constructor(e){this.id=e.id||(0,m.L)("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&(0,l.v)(this.indices.usage===i.h.INDEX)}destroy(){this.indices?.destroy();for(const e of Object.values(this.attributes))e.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(e){return e.byteLength/12}}function Xe(e,t){if(t instanceof Qe)return t;const n=function(e,t){if(!t.indices)return;const n=t.indices.value;return e.createBuffer({usage:i.h.INDEX,data:n})}(e,t),{attributes:r,bufferLayout:s}=function(e,t){const n=[],r={};for(const[s,A]of Object.entries(t.attributes)){let t=s;switch(s){case"POSITION":t="positions";break;case"NORMAL":t="normals";break;case"TEXCOORD_0":t="texCoords";break;case"COLOR_0":t="colors"}r[t]=e.createBuffer({data:A.value,id:`${s}-buffer`});const{value:i,size:o,normalized:a}=A;n.push({name:t,format:(0,C.OB)(i,o,a)})}const i=t._calculateVertexCount(t.attributes,t.indices);return{attributes:r,bufferLayout:n,vertexCount:i}}(e,t);return new Qe({topology:t.topology||"triangle-list",bufferLayout:s,vertexCount:t.vertexCount,indices:n,attributes:r})}var $e=n(5833);class Ye{modules;moduleUniforms;moduleBindings;moduleUniformsChanged;constructor(e){const t=(0,$e.KC)(Object.values(e).filter((e=>e.dependencies)));for(const n of t)e[n.name]=n;p.R.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[n,r]of Object.entries(e)){const e=n;this.moduleUniforms[e]=r.defaultUniforms||{},this.moduleBindings[e]={}}}destroy(){}setProps(e){for(const t of Object.keys(e)){const n=t,r=e[n],i=this.modules[n];if(!i){p.R.warn(`Module ${t} not found`)();continue}const s=this.moduleUniforms[n],A=i.getUniforms?.(r,this.moduleUniforms[n])||r;this.moduleUniforms[n]={...s,...A}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const e={};for(const t of Object.values(this.moduleBindings))Object.assign(e,t);return e}getDebugTable(){const e={};for(const[t,n]of Object.entries(this.moduleUniforms))for(const[r,i]of Object.entries(n))e[`${t}.${r}`]={type:this.modules[t].uniformTypes?.[r],value:String(i)};return e}}var Ke=n(6031);class Ze extends Ke.F{static defaultProps={...Ke.F.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0};get[Symbol.toStringTag](){return"ComputePipeline"}hash="";constructor(e,t){super(e,t,Ze.defaultProps)}}class qe{static defaultProps={...o.r.defaultProps};device;_hashCounter=0;_hashes={};_renderPipelineCache={};_computePipelineCache={};static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new qe(e),e._lumaData.defaultPipelineFactory}constructor(e){this.device=e}createRenderPipeline(e){const t={...o.r.defaultProps,...e},n=this._hashRenderPipeline(t);if(!this._renderPipelineCache[n]){const e=this.device.createRenderPipeline({...t,id:t.id?`${t.id}-cached`:void 0});e.hash=n,this._renderPipelineCache[n]={pipeline:e,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const t={...Ze.defaultProps,...e},n=this._hashComputePipeline(t);if(!this._computePipelineCache[n]){const e=this.device.createComputePipeline({...t,id:t.id?`${t.id}-cached`:void 0});e.hash=n,this._computePipelineCache[n]={pipeline:e,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const t=e.hash,n=e instanceof Ze?this._computePipelineCache:this._renderPipelineCache;n[t].useCount--,0===n[t].useCount&&(n[t].pipeline.destroy(),delete n[t])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const t=this._getHash(e.vs.source),n=e.fs?this._getHash(e.fs.source):0,r=this._getHash(JSON.stringify(e.bufferLayout));if("webgl"===this.device.type)return`${t}/${n}V-BL${r}`;{const i=this._getHash(JSON.stringify(e.parameters));return`${t}/${n}V-T${e.topology}P${i}BL${r}`}}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}}var Je=n(5429);class et{static defaultProps={...Je.M.defaultProps};device;_cache={};static getDefaultShaderFactory(e){return e._lumaData.defaultShaderFactory||=new et(e),e._lumaData.defaultShaderFactory}constructor(e){this.device=e}createShader(e){const t=this._hashShader(e);let n=this._cache[t];if(!n){const r=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[t]=n={shader:r,useCount:0}}return n.useCount++,n.shader}release(e){const t=this._hashShader(e),n=this._cache[t];n&&(n.useCount--,0===n.useCount&&(delete this._cache[t],n.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}}let tt=null,nt=null;class rt{static defaultProps={...o.r.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:x._.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0};device;id;source;vs;fs;pipelineFactory;shaderFactory;userData={};parameters;topology;bufferLayout;isInstanced=void 0;instanceCount=0;vertexCount;indexBuffer=null;bufferAttributes={};constantAttributes={};bindings={};uniforms={};vertexArray;transformFeedback=null;pipeline;shaderInputs;_uniformStore;_attributeInfos={};_gpuGeometry=null;_getModuleUniforms;props;_pipelineNeedsUpdate="newly created";_needsRedraw="initializing";_destroyed=!1;_lastDrawTimestamp=-1;constructor(e,t){this.props={...rt.defaultProps,...t},t=this.props,this.id=t.id||(0,m.L)("model"),this.device=e,Object.assign(this.userData,t.userData);const n=Object.fromEntries(this.props.modules?.map((e=>[e.name,e]))||[]);this.setShaderInputs(t.shaderInputs||new Ye(n));const r=function(e){return{type:e.type,shaderLanguage:e.info.shadingLanguage,shaderLanguageVersion:e.info.shadingLanguageVersion,gpu:e.info.gpu,features:e.features}}(e),i=(this.props.modules?.length>0?this.props.modules:this.shaderInputs?.getModules())||[];if("webgpu"===this.device.type&&this.props.source){this.props.shaderLayout||=We(this.props.source);const{source:e,getUniforms:t}=this.props.shaderAssembler.assembleShader({platformInfo:r,...this.props,modules:i});this.source=e,this._getModuleUniforms=t}else{const{vs:e,fs:t,getUniforms:n}=this.props.shaderAssembler.assembleShaderPair({platformInfo:r,...this.props,modules:i});this.vs=e,this.fs=t,this._getModuleUniforms=n}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,t.geometry&&this.setGeometry(t.geometry),this.pipelineFactory=t.pipelineFactory||qe.getDefaultPipelineFactory(this.device),this.shaderFactory=t.shaderFactory||et.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in t&&(this.isInstanced=t.isInstanced),t.instanceCount&&this.setInstanceCount(t.instanceCount),t.vertexCount&&this.setVertexCount(t.vertexCount),t.indexBuffer&&this.setIndexBuffer(t.indexBuffer),t.attributes&&this.setAttributes(t.attributes),t.constantAttributes&&this.setConstantAttributes(t.constantAttributes),t.bindings&&this.setBindings(t.bindings),t.uniforms&&this.setUniforms(t.uniforms),t.moduleSettings&&this.updateModuleSettings(t.moduleSettings),t.transformFeedback&&(this.transformFeedback=t.transformFeedback),Object.seal(this)}destroy(){this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),this._gpuGeometry?.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||=e}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){let t;this.predraw();try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),(0,m.Z)(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:n}=this.vertexArray,r=n?n.byteLength/("uint32"===n.indexType?4:2):void 0;t=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:r,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(e),t?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",t}setGeometry(e){this._gpuGeometry?.destroy();const t=e&&Xe(this.device,e);t&&(this.setTopology(t.topology||"triangle-list"),this.bufferLayout=it(t.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(t)),this._gpuGeometry=t}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){this.bufferLayout=this._gpuGeometry?it(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){E(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,void 0===this.isInstanced&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new _(this.shaderInputs.modules);for(const t of Object.keys(this.shaderInputs.modules)){const e=this._uniformStore.getManagedUniformBuffer(this.device,t);this.bindings[`${t}Uniforms`]=e}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,t){e.indices&&p.R.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[n,r]of Object.entries(e)){const e=this.bufferLayout.find((e=>st(e).includes(n)));if(!e){p.R.warn(`Model(${this.id}): Missing layout for buffer "${n}".`)();continue}const i=st(e);let s=!1;for(const t of i){const e=this._attributeInfos[t];e&&(this.vertexArray.setBuffer(e.location,r),s=!0)}s||(t?.disableWarnings??this.props.disableWarnings)||p.R.warn(`Model(${this.id}): Ignoring buffer "${r.id}" for unknown attribute "${n}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,t){for(const[n,r]of Object.entries(e)){const e=this._attributeInfos[n];e?this.vertexArray.setConstantWebGL(e.location,r):(t?.disableWarnings??this.props.disableWarnings)||p.R.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){(0,m.Z)(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettings(e){const{bindings:t,uniforms:n}=(0,S.l)(this._getModuleUniforms(e));Object.assign(this.bindings,t),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let e=0;for(const t of Object.values(this.bindings))t instanceof r.X?e=Math.max(e,t.texture.updateTimestamp):t instanceof i.h||t instanceof s.g?e=Math.max(e,t.updateTimestamp):t instanceof A.L||(e=Math.max(e,t.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const t={...e.attributes};for(const[n]of Object.entries(t))this.pipeline.shaderLayout.attributes.find((e=>e.name===n))||"positions"===n||delete t[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(t,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||=e,this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,t=null;this.pipeline&&(p.R.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,t=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let r=null;this.source?r=n:this.fs&&(r=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:n,fs:r}),this._attributeInfos=(0,R.PV)(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),t&&this.shaderFactory.release(t)}return this.pipeline}_lastLogTime=0;_logOpen=!1;_logDrawCallStart(){const e=p.R.level>3?0:1e4;p.R.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,p.R.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:p.R.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=function(e,t){const n={},r="Values";if(0===e.attributes.length&&!e.varyings?.length)return{"No attributes or varyings":{[r]:"N/A"}};for(const i of e.attributes)i&&(n[`in ${i.location} ${i.name}: ${i.type}`]={[r]:i.stepMode||"vertex"});for(const i of e.varyings||[])n[`out ${i.location} ${i.name}`]={[r]:JSON.stringify(i.accessor)};return n}(this.pipeline.shaderLayout,this.id);p.R.table(2,e)();const t=this.shaderInputs.getDebugTable();for(const[r,i]of Object.entries(this.uniforms))t[r]={value:i};p.R.table(2,t)();const n=this._getAttributeDebugTable();p.R.table(2,this._attributeInfos)(),p.R.table(2,n)(),p.R.groupEnd(2)(),this._logOpen=!1}}_drawCount=0;_logFramebuffer(e){const t=p.R.get("framebuffer");if(this._drawCount++,!t||this._drawCount++>3&&this._drawCount%60)return;const n=e.props.framebuffer;n&&function(e,{id:t,minimap:n,opaque:r,top:i="0",left:s="0",rgbaScale:A=1}){tt||(tt=document.createElement("canvas"),tt.id=t,tt.title=t,tt.style.zIndex="100",tt.style.position="absolute",tt.style.top=i,tt.style.left=s,tt.style.border="blue 1px solid",tt.style.transform="scaleY(-1)",document.body.appendChild(tt),nt=tt.getContext("2d")),tt.width===e.width&&tt.height===e.height||(tt.width=e.width/2,tt.height=e.height/2,tt.style.width="400px",tt.style.height="400px");const o=e.device.readPixelsToArrayWebGL(e),a=nt.createImageData(e.width,e.height);for(let c=0;c<o.length;c+=4)a.data[0+c+0]=o[c+0]*A,a.data[0+c+1]=o[c+1]*A,a.data[0+c+2]=o[c+2]*A,a.data[0+c+3]=r?255:o[c+3]*A;nt.putImageData(a,0,0)}(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[t,n]of Object.entries(this._attributeInfos))e[n.location]={name:t,type:n.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[n.location],n.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:t}=this.vertexArray,n="uint32"===t.indexType?new Uint32Array(t.debugData):new Uint16Array(t.debugData);e.indices={name:"indices",type:t.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,t){const n=(0,C.Y0)(t);return(e instanceof i.h?new n(e.debugData):e).toString()}}function it(e,t){const n=[...e];for(const r of t){const e=n.findIndex((e=>e.name===r.name));e<0?n.push(r):n[e]=r}return n}function st(e){return e.attributes?e.attributes?.map((e=>e.attribute)):[e.name]}},9404:(e,t,n)=>{"use strict";n.d(t,{_:()=>b});var r=n(6745);function i(e){if(e.source&&"webgpu"===e.platformInfo.type){return{...e,vs:void 0,fs:void 0}}if(!e.vs)throw new Error("no vertex shader");const t=s(e.platformInfo,e.vs);let n;return e.fs&&(n=s(e.platformInfo,e.fs)),{...e,vs:t,fs:n}}function s(e,t){if("string"==typeof t)return t;if("webgpu"===e.type){if(t?.wgsl)return t.wgsl;throw new Error("WebGPU does not support GLSL shaders")}if(t?.glsl)return t.glsl;throw new Error("WebGL does not support WGSL shaders")}var A=n(5833);var o=n(2414);const a=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],c=[...a,[h("attribute"),"in $1"],[h("varying"),"out $1"]],l=[...a,[h("varying"),"in $1"]];function u(e,t){for(const[n,r]of t)e=e.replace(n,r);return e}function h(e){return new RegExp(`\\b${e}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function d(e,t){let n="";for(const r in e){const i=e[r];if(n+=`void ${i.signature} {\n`,i.header&&(n+=`  ${i.header}`),t[r]){const e=t[r];e.sort(((e,t)=>e.order-t.order));for(const t of e)n+=`  ${t.injection}\n`}i.footer&&(n+=`  ${i.footer}`),n+="}\n"}return n}function f(e){const t={vertex:{},fragment:{}};for(const n of e){let e,r;"string"!=typeof n?(e=n,r=e.hook):(e={},r=n),r=r.trim();const[i,s]=r.split(":"),A=r.replace(/\(.+/,""),o=Object.assign(e,{signature:s});switch(i){case"vs":t.vertex[A]=o;break;case"fs":t.fragment[A]=o;break;default:throw new Error(i)}}return t}var p=n(568);function g(e,t="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(e);return n?n[1]:t}function _(e){let t=100;const n=e.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const e=parseInt(n[1],10);Number.isFinite(e)&&(t=e)}if(100!==t&&300!==t)throw new Error(`Invalid GLSL version ${t}`);return t}const m=`\n\n${o.O_}\n`;function E(e,t){const{source:n,stage:r,modules:i,hookFunctions:s=[],inject:A={},log:a}=t;(0,p.v)("string"==typeof n,"shader source must be a string");const c=n;let l="";const u=f(s),h={},g={},_={};for(const o in A){const e="string"==typeof A[o]?{injection:A[o],order:0}:A[o],t=/^(v|f)s:(#)?([\w-]+)$/.exec(o);if(t){const n=t[2],r=t[3];n?"decl"===r?g[o]=[e]:_[o]=[e]:h[o]=[e]}else _[o]=[e]}const E="webgpu"!==e.type?i:[];for(const o of E){a&&o.checkDeprecations(c,a);l+=o.getModuleSource(r,"wgsl");const e=o.injections[r];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const r="decl"===n[2]?g:_;r[t]=r[t]||[],r[t].push(e[t])}else h[t]=h[t]||[],h[t].push(e[t])}}return l+=m,l=(0,o.bv)(l,r,g),l+=d(u[r],h),l+=c,l=(0,o.bv)(l,r,_),l}function v(e,t){const{id:n,source:r,stage:i,language:s="glsl",modules:A,defines:a={},hookFunctions:h=[],inject:E={},prologue:v=!0,log:y}=t;(0,p.v)("string"==typeof r,"shader source must be a string");const b="glsl"===s?function(e,t){return{name:g(e,t),language:"glsl",version:_(e)}}(r).version:-1,w=e.shaderLanguageVersion,T=100===b?"#version 100":"#version 300 es",S=r.split("\n").slice(1).join("\n"),R={};A.forEach((e=>{Object.assign(R,e.getDefines())})),Object.assign(R,a);let C="";switch(s){case"wgsl":break;case"glsl":C=v?`${T}\n\n// ----- PROLOGUE -------------------------\n${function(e){const{id:t,source:n,stage:r}=e;return t&&-1===n.indexOf("SHADER_NAME")?`\n#define SHADER_NAME ${t}_${r}\n\n`:""}({id:n,source:r,stage:i})}\n#define SHADER_TYPE_${i.toUpperCase()}\n${function(e){switch(e?.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e)}\n${"fragment"===i?"precision highp float;\n":""}\n\n// ----- APPLICATION DEFINES -------------------------\n\n${function(e={}){let t="";for(const n in e){const r=e[n];(r||Number.isFinite(r))&&(t+=`#define ${n.toUpperCase()} ${e[n]}\n`)}return t}(R)}\n\n`:`${T}\n`}const x=f(h),P={},M={},I={};for(const o in E){const e="string"==typeof E[o]?{injection:E[o],order:0}:E[o],t=/^(v|f)s:(#)?([\w-]+)$/.exec(o);if(t){const n=t[2],r=t[3];n?"decl"===r?M[o]=[e]:I[o]=[e]:P[o]=[e]}else I[o]=[e]}for(const o of A){y&&o.checkDeprecations(S,y);C+=o.getModuleSource(i);const e=o.injections[i];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const r="decl"===n[2]?M:I;r[t]=r[t]||[],r[t].push(e[t])}else P[t]=P[t]||[],P[t].push(e[t])}}return C+="// ----- MAIN SHADER SOURCE -------------------------",C+=m,C=(0,o.bv)(C,i,M),C+=d(x[i],P),C+=S,C=(0,o.bv)(C,i,I),"glsl"===s&&b!==w&&(C=function(e,t){if(300!==Number(e.match(/^#version[ \t]+(\d+)/m)?.[1]||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(t){case"vertex":return u(e,c);case"fragment":return u(e,l);default:throw new Error(t)}}(C,i)),C.trim()}function y(e){return function(t){const n={};for(const r of e){const e=r.getUniforms(t,n);Object.assign(n,e)}return n}}class b{static defaultShaderAssembler;_hookFunctions=[];_defaultModules=[];static getDefaultShaderAssembler(){return b.defaultShaderAssembler=b.defaultShaderAssembler||new b,b.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find((t=>t.name===("string"==typeof e?e:e.name)))||this._defaultModules.push(e)}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((e=>e.name!==t))}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e)}assembleShader(e){const t=this._getModuleList(e.modules),n=this._hookFunctions,r=i(e),s=function(e){const t=(0,A.KC)(e.modules||[]);return{source:E(e.platformInfo,{...e,source:e.source,stage:"vertex",modules:t}),getUniforms:y(t)}}({platformInfo:e.platformInfo,...r,modules:t,hookFunctions:n});return{...s,modules:t}}assembleShaderPair(e){const t=i(e),n=this._getModuleList(e.modules),r=this._hookFunctions,{platformInfo:s}=e,o="wgsl"===e.platformInfo.shaderLanguage?function(e){const t=(0,A.KC)(e.modules||[]);return{vs:E(e.platformInfo,{...e,source:e.vs,stage:"vertex",modules:t}),fs:E(e.platformInfo,{...e,source:e.fs,stage:"fragment",modules:t}),getUniforms:y(t)}}({platformInfo:s,...t,modules:n,hookFunctions:r}):function(e){const{vs:t,fs:n}=e,r=(0,A.KC)(e.modules||[]);return{vs:v(e.platformInfo,{...e,source:t,stage:"vertex",modules:r}),fs:v(e.platformInfo,{...e,source:n,stage:"fragment",modules:r}),getUniforms:y(r)}}({platformInfo:s,...t,modules:n,hookFunctions:r});return{...o,modules:n}}_getModuleList(e=[]){const t=new Array(this._defaultModules.length+e.length),n={};let i=0;for(let r=0,s=this._defaultModules.length;r<s;++r){const e=this._defaultModules[r],s=e.name;t[i++]=e,n[s]=!0}for(let r=0,s=e.length;r<s;++r){const s=e[r],A=s.name;n[A]||(t[i++]=s,n[A]=!0)}return t.length=i,r.z.instantiateModules(t)}}},5833:(e,t,n)=>{"use strict";n.d(t,{KC:()=>i});var r=n(6745);function i(e){return s(r.z.instantiateModules(e))}function s(e){const t={},n={};return A({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort(((e,t)=>n[t]-n[e])).map((e=>t[e]))}function A(e){const{modules:t,level:n,moduleMap:r,moduleDepth:i}=e;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of t)r[s.name]=s,(void 0===i[s.name]||i[s.name]<n)&&(i[s.name]=n);for(const s of t)s.dependencies&&A({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}},2414:(e,t,n)=>{"use strict";n.d(t,{O_:()=>o,bv:()=>l,Uu:()=>a});const r={vertex:"#ifdef MODULE_LOGDEPTH\nlogdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\ngl_FragColor = material_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_LIGHTING\ngl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_FOG\ngl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_PICKING\ngl_FragColor = picking_filterHighlightColor(gl_FragColor);\ngl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n#ifdef MODULE_LOGDEPTH\nlogdepth_setFragDepth();\n#endif\n"},i=/void\s+main\s*\([^)]*\)\s*\{\n?/,s=/}\n?[^{}]*$/,A=[],o="__LUMA_INJECT_DECLARATIONS__";function a(e){const t={vertex:{},fragment:{}};for(const n in e){let r=e[n];const i=c(n);"string"==typeof r&&(r={order:0,injection:r}),t[i][n]=r}return t}function c(e){const t=e.slice(0,2);switch(t){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(t)}}function l(e,t,n,a=!1){const c="vertex"===t;for(const r in n){const t=n[r];t.sort(((e,t)=>e.order-t.order)),A.length=t.length;for(let e=0,n=t.length;e<n;++e)A[e]=t[e].injection;const a=`${A.join("\n")}\n`;switch(r){case"vs:#decl":c&&(e=e.replace(o,a));break;case"vs:#main-start":c&&(e=e.replace(i,(e=>e+a)));break;case"vs:#main-end":c&&(e=e.replace(s,(e=>a+e)));break;case"fs:#decl":c||(e=e.replace(o,a));break;case"fs:#main-start":c||(e=e.replace(i,(e=>e+a)));break;case"fs:#main-end":c||(e=e.replace(s,(e=>a+e)));break;default:e=e.replace(r,(e=>e+a))}}return e=e.replace(o,""),a&&(e=e.replace(/\}\s*$/,(e=>e+r[t]))),e}},6745:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=n(568);const i={number:{type:"number",validate:(e,t)=>Number.isFinite(e)&&"object"==typeof t&&(void 0===t.max||e<=t.max)&&(void 0===t.min||e>=t.min)},array:{type:"array",validate:(e,t)=>Array.isArray(e)||ArrayBuffer.isView(e)}};function s(e){let t=A(e);if("object"!==t)return{value:e,...i[t],type:t};if("object"==typeof e)return e?void 0!==e.type?{...e,...i[e.type],type:e.type}:void 0===e.value?{type:"object",value:e}:(t=A(e.value),{...e,...i[t],type:t}):{type:"object",value:null};throw new Error("props")}function A(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}var o=n(2414);let a=1;class c{name;vs;fs;getModuleUniforms;dependencies;deprecations;defines;injections;uniforms={};uniformTypes={};static instantiateModules(e){return e.map((e=>{if(e instanceof c)return e;(0,r.v)("string"!=typeof e,`Shader module use by name is deprecated. Import shader module '${JSON.stringify(e)}' and use it directly.`),e.name||(console.warn("shader module has no name"),e.name="shader-module-"+a++);const t=new c(e);return t.dependencies=c.instantiateModules(e.dependencies||[]),t}))}constructor(e){const{name:t,vs:n,fs:i,dependencies:A=[],uniformTypes:a={},uniformPropTypes:l={},getUniforms:u,deprecations:h=[],defines:d={},inject:f={}}=e;(0,r.v)("string"==typeof t),this.name=t,this.vs=n,this.fs=i,this.getModuleUniforms=u,this.dependencies=c.instantiateModules(A),this.deprecations=this._parseDeprecationDefinitions(h),this.defines=d,this.injections=(0,o.Uu)(f),this.uniformTypes=a,l&&(this.uniforms=function(e){const t={};for(const[n,r]of Object.entries(e))t[n]=s(r);return t}(l))}getModuleSource(e){let t;switch(e){case"vertex":t=this.vs||"";break;case"fragment":t=this.fs||"";break;default:(0,r.v)(!1)}const n=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------\n\n#define MODULE_${n}\n${t}\n\n`}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):function(e,t,n){const i={};for(const[s,A]of Object.entries(t))e&&s in e&&!A.private?(A.validate&&(0,r.v)(A.validate(e[s],A),`${n}: invalid ${s}`),i[s]=e[s]):i[s]=A.value;return i}(e,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach((n=>{n.regex?.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(e){return e.forEach((e=>{if("function"===e.type)e.regex=new RegExp(`\\b${e.old}\\(`);else e.regex=new RegExp(`${e.type} ${e.old};`)})),e}_defaultGetUniforms(e={}){const t={},n=this.uniforms;for(const i in n){const s=n[i];i in e&&!s.private?(s.validate&&(0,r.v)(s.validate(e[i],s),`${this.name}: invalid ${i}`),t[i]=e[i]):t[i]=s.value}return t}}},568:(e,t,n)=>{"use strict";function r(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}n.d(t,{v:()=>r})},3683:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});var r=n(4315);class i extends Array{clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}toArray(e=[],t=0){for(let n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:(0,r.cy)(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(r.$W)}formatString(e){let t="";for(let n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+(0,r.Fl)(this[n],e);return`${e.printTypes?this.constructor.name:""}[${t}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!(0,r.aI)(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,n){if(void 0===n)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const i=e[r],s="number"==typeof t?t:t[r];this[r]=i+n*(s-i)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}add(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]+=t[e];return this.check()}subtract(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]-=t[e];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(r.$W.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}get elements(){return this}}},2879:(e,t,n)=>{"use strict";n.d(t,{k:()=>m});var r=n(3683),i=n(1697),s=n(4315);class A extends r.a{toString(){let e="[";if(s.$W.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+t]}`}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=` ${this[t]}`}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,n){return this[t*this.RANK+e]=(0,i.ws)(n),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[n+r];return t}setColumn(e,t){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}var o,a=n(7919),c=n(3348),l=n(9210),u=n(6425),h=n(7964);!function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"}(o||(o={}));const d=45*Math.PI/180,f=1,p=.1,g=500,_=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class m extends A{static get IDENTITY(){return function(){v||(v=new m,Object.freeze(v));return v}()}static get ZERO(){return function(){E||(E=new m([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(E));return E}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return o}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,n,r,i,s,A,o,a,c,l,u,h,d,f,p){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=s,this[6]=A,this[7]=o,this[8]=a,this[9]=c,this[10]=l,this[11]=u,this[12]=h,this[13]=d,this[14]=f,this[15]=p,this.check()}setRowMajor(e,t,n,r,i,s,A,o,a,c,l,u,h,d,f,p){return this[0]=e,this[1]=i,this[2]=a,this[3]=h,this[4]=t,this[5]=s,this[6]=c,this[7]=d,this[8]=n,this[9]=A,this[10]=l,this[11]=f,this[12]=r,this[13]=o,this[14]=u,this[15]=p,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(_)}fromObject(e){return this.check()}fromQuaternion(e){return(0,c.I0)(this,e),this.check()}frustum(e){const{left:t,right:n,bottom:r,top:i,near:s=p,far:A=g}=e;return A===1/0?function(e,t,n,r,i,s){const A=2*s/(n-t),o=2*s/(i-r),a=(n+t)/(n-t),c=(i+r)/(i-r),l=-1,u=-1,h=-2*s;e[0]=A,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=a,e[9]=c,e[10]=l,e[11]=u,e[12]=0,e[13]=0,e[14]=h,e[15]=0}(this,t,n,r,i,s):(0,c.$h)(this,t,n,r,i,s,A),this.check()}lookAt(e){const{eye:t,center:n=[0,0,0],up:r=[0,1,0]}=e;return(0,c.t5)(this,t,n,r),this.check()}ortho(e){const{left:t,right:n,bottom:r,top:i,near:s=p,far:A=g}=e;return(0,c.v3)(this,t,n,r,i,s,A),this.check()}orthographic(e){const{fovy:t=d,aspect:n=f,focalDistance:r=1,near:i=p,far:s=g}=e;y(t);const A=t/2,o=r*Math.tan(A),a=o*n;return this.ortho({left:-a,right:a,bottom:-o,top:o,near:i,far:s})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}=e;return y(t),(0,c.fN)(this,t,n,r,i),this.check()}determinant(){return(0,c.a4)(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],i=1/n[1],s=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=t||[-0,-0,-0];const n=this.getScale(t),r=1/n[0],i=1/n[1],s=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*s,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*s,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*s,e}transpose(){return(0,c.mg)(this,this),this.check()}invert(){return(0,c.B8)(this,this),this.check()}multiplyLeft(e){return(0,c.lw)(this,e,this),this.check()}multiplyRight(e){return(0,c.lw)(this,this,e),this.check()}rotateX(e){return(0,c.eL)(this,this,e),this.check()}rotateY(e){return(0,c.Z8)(this,this,e),this.check()}rotateZ(e){return(0,c.Qr)(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return(0,c.e$)(this,this,e,t),this.check()}scale(e){return(0,c.hs)(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return(0,c.Tl)(this,this,e),this.check()}transform(e,t){return 4===e.length?(t=(0,h.Z0)(t||[-0,-0,-0,-0],e,this),(0,i.qk)(t,4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:n}=e;let r;switch(n){case 2:r=(0,l.Z0)(t||[-0,-0],e,this);break;case 3:r=(0,u.Z0)(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return(0,i.qk)(r,e.length),r}transformAsVector(e,t){let n;switch(e.length){case 2:n=(0,a.B$)(t||[-0,-0],e,this);break;case 3:n=(0,a.cL)(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return(0,i.qk)(n,e.length),n}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,n){return this.identity().translate([e,t,n])}}let E,v;function y(e){if(e>2*Math.PI)throw Error("expected radians")}},5427:(e,t,n)=>{"use strict";n.d(t,{P:()=>h});var r=n(3683),i=n(1697);function s(e,t){if(!e)throw new Error(`math.gl assertion ${t}`)}class A extends r.a{get x(){return this[0]}set x(e){this[0]=(0,i.ws)(e)}get y(){return this[1]}set y(e){this[1]=(0,i.ws)(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-e[n];t+=r*r}return(0,i.ws)(t)}dot(e){let t=0;for(let n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return(0,i.ws)(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t[e];return this.check()}divide(...e){for(const t of e)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t[e];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return s(e>=0&&e<this.ELEMENTS,"index is out of range"),(0,i.ws)(this[e])}setComponent(e,t){return s(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}var o=n(4315),a=n(6425),c=n(7919);const l=[0,0,0];let u;class h extends A{static get ZERO(){return u||(u=new h(0,0,0),Object.freeze(u)),u}constructor(e=0,t=0,n=0){super(-0,-0,-0),1===arguments.length&&(0,o.cy)(e)?this.copy(e):(o.$W.debug&&((0,i.ws)(e),(0,i.ws)(t),(0,i.ws)(n)),this[0]=e,this[1]=t,this[2]=n)}set(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return o.$W.debug&&((0,i.ws)(e.x),(0,i.ws)(e.y),(0,i.ws)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=(0,i.ws)(e)}angle(e){return(0,a.g7)(this,e)}cross(e){return(0,a.$A)(this,this,e),this.check()}rotateX({radians:e,origin:t=l}){return(0,a.eL)(this,this,t,e),this.check()}rotateY({radians:e,origin:t=l}){return(0,a.Z8)(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=l}){return(0,a.x6)(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return(0,a.Z0)(this,this,e),this.check()}transformAsVector(e){return(0,c.cL)(this,this,e),this.check()}transformByMatrix3(e){return(0,a.ei)(this,this,e),this.check()}transformByMatrix2(e){return(0,c.J4)(this,this,e),this.check()}transformByQuaternion(e){return(0,a.gL)(this,this,e),this.check()}}},7055:(e,t,n)=>{"use strict";n.d(t,{p8:()=>r,tb:()=>i});const r=1e-6;let i="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI},3348:(e,t,n)=>{"use strict";n.d(t,{$h:()=>p,B8:()=>s,I0:()=>f,Qr:()=>d,Tl:()=>a,Z8:()=>h,a4:()=>A,e$:()=>l,eL:()=>u,fN:()=>g,hs:()=>c,lw:()=>o,mg:()=>i,t5:()=>m,v3:()=>_});var r=n(7055);function i(e,t){if(e===t){const n=t[1],r=t[2],i=t[3],s=t[6],A=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=A,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function s(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],A=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],_=t[15],m=n*o-r*A,E=n*a-i*A,v=n*c-s*A,y=r*a-i*o,b=r*c-s*o,w=i*c-s*a,T=l*p-u*f,S=l*g-h*f,R=l*_-d*f,C=u*g-h*p,x=u*_-d*p,P=h*_-d*g;let M=m*P-E*x+v*C+y*R-b*S+w*T;return M?(M=1/M,e[0]=(o*P-a*x+c*C)*M,e[1]=(i*x-r*P-s*C)*M,e[2]=(p*w-g*b+_*y)*M,e[3]=(h*b-u*w-d*y)*M,e[4]=(a*R-A*P-c*S)*M,e[5]=(n*P-i*R+s*S)*M,e[6]=(g*v-f*w-_*E)*M,e[7]=(l*w-h*v+d*E)*M,e[8]=(A*x-o*R+c*T)*M,e[9]=(r*R-n*x-s*T)*M,e[10]=(f*b-p*v+_*m)*M,e[11]=(u*v-l*b-d*m)*M,e[12]=(o*S-A*C-a*T)*M,e[13]=(n*C-r*S+i*T)*M,e[14]=(p*E-f*y-g*m)*M,e[15]=(l*y-u*E+h*m)*M,e):null}function A(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],A=e[5],o=e[6],a=e[7],c=e[8],l=e[9],u=e[10],h=e[11],d=e[12],f=e[13],p=e[14],g=t*A-n*s,_=t*o-r*s,m=n*o-r*A,E=c*f-l*d,v=c*p-u*d,y=l*p-u*f;return a*(t*y-n*v+r*E)-i*(s*y-A*v+o*E)+e[15]*(c*m-l*_+u*g)-h*(d*m-f*_+p*g)}function o(e,t,n){const r=t[0],i=t[1],s=t[2],A=t[3],o=t[4],a=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],g=t[13],_=t[14],m=t[15];let E=n[0],v=n[1],y=n[2],b=n[3];return e[0]=E*r+v*o+y*u+b*p,e[1]=E*i+v*a+y*h+b*g,e[2]=E*s+v*c+y*d+b*_,e[3]=E*A+v*l+y*f+b*m,E=n[4],v=n[5],y=n[6],b=n[7],e[4]=E*r+v*o+y*u+b*p,e[5]=E*i+v*a+y*h+b*g,e[6]=E*s+v*c+y*d+b*_,e[7]=E*A+v*l+y*f+b*m,E=n[8],v=n[9],y=n[10],b=n[11],e[8]=E*r+v*o+y*u+b*p,e[9]=E*i+v*a+y*h+b*g,e[10]=E*s+v*c+y*d+b*_,e[11]=E*A+v*l+y*f+b*m,E=n[12],v=n[13],y=n[14],b=n[15],e[12]=E*r+v*o+y*u+b*p,e[13]=E*i+v*a+y*h+b*g,e[14]=E*s+v*c+y*d+b*_,e[15]=E*A+v*l+y*f+b*m,e}function a(e,t,n){const r=n[0],i=n[1],s=n[2];let A,o,a,c,l,u,h,d,f,p,g,_;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15]):(A=t[0],o=t[1],a=t[2],c=t[3],l=t[4],u=t[5],h=t[6],d=t[7],f=t[8],p=t[9],g=t[10],_=t[11],e[0]=A,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=g,e[11]=_,e[12]=A*r+l*i+f*s+t[12],e[13]=o*r+u*i+p*s+t[13],e[14]=a*r+h*i+g*s+t[14],e[15]=c*r+d*i+_*s+t[15]),e}function c(e,t,n){const r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function l(e,t,n,i){let s,A,o,a,c,l,u,h,d,f,p,g,_,m,E,v,y,b,w,T,S,R,C,x,P=i[0],M=i[1],I=i[2],L=Math.sqrt(P*P+M*M+I*I);return L<r.p8?null:(L=1/L,P*=L,M*=L,I*=L,A=Math.sin(n),s=Math.cos(n),o=1-s,a=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=t[8],_=t[9],m=t[10],E=t[11],v=P*P*o+s,y=M*P*o+I*A,b=I*P*o-M*A,w=P*M*o-I*A,T=M*M*o+s,S=I*M*o+P*A,R=P*I*o+M*A,C=M*I*o-P*A,x=I*I*o+s,e[0]=a*v+h*y+g*b,e[1]=c*v+d*y+_*b,e[2]=l*v+f*y+m*b,e[3]=u*v+p*y+E*b,e[4]=a*w+h*T+g*S,e[5]=c*w+d*T+_*S,e[6]=l*w+f*T+m*S,e[7]=u*w+p*T+E*S,e[8]=a*R+h*C+g*x,e[9]=c*R+d*C+_*x,e[10]=l*R+f*C+m*x,e[11]=u*R+p*C+E*x,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function u(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[4],A=t[5],o=t[6],a=t[7],c=t[8],l=t[9],u=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*r,e[5]=A*i+l*r,e[6]=o*i+u*r,e[7]=a*i+h*r,e[8]=c*i-s*r,e[9]=l*i-A*r,e[10]=u*i-o*r,e[11]=h*i-a*r,e}function h(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],A=t[1],o=t[2],a=t[3],c=t[8],l=t[9],u=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*r,e[1]=A*i-l*r,e[2]=o*i-u*r,e[3]=a*i-h*r,e[8]=s*r+c*i,e[9]=A*r+l*i,e[10]=o*r+u*i,e[11]=a*r+h*i,e}function d(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],A=t[1],o=t[2],a=t[3],c=t[4],l=t[5],u=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*r,e[1]=A*i+l*r,e[2]=o*i+u*r,e[3]=a*i+h*r,e[4]=c*i-s*r,e[5]=l*i-A*r,e[6]=u*i-o*r,e[7]=h*i-a*r,e}function f(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],A=n+n,o=r+r,a=i+i,c=n*A,l=r*A,u=r*o,h=i*A,d=i*o,f=i*a,p=s*A,g=s*o,_=s*a;return e[0]=1-u-f,e[1]=l+_,e[2]=h-g,e[3]=0,e[4]=l-_,e[5]=1-c-f,e[6]=d+p,e[7]=0,e[8]=h+g,e[9]=d-p,e[10]=1-c-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,t,n,r,i,s,A){const o=1/(n-t),a=1/(i-r),c=1/(s-A);return e[0]=2*s*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*a,e[6]=0,e[7]=0,e[8]=(n+t)*o,e[9]=(i+r)*a,e[10]=(A+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=A*s*2*c,e[15]=0,e}const g=function(e,t,n,r,i){const s=1/Math.tan(t/2);if(e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0){const t=1/(r-i);e[10]=(i+r)*t,e[14]=2*i*r*t}else e[10]=-1,e[14]=-2*r;return e};const _=function(e,t,n,r,i,s,A){const o=1/(t-n),a=1/(r-i),c=1/(s-A);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*o,e[13]=(i+r)*a,e[14]=(A+s)*c,e[15]=1,e};function m(e,t,n,i){let s,A,o,a,c,l,u,h,d,f;const p=t[0],g=t[1],_=t[2],m=i[0],E=i[1],v=i[2],y=n[0],b=n[1],w=n[2];return Math.abs(p-y)<r.p8&&Math.abs(g-b)<r.p8&&Math.abs(_-w)<r.p8?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(h=p-y,d=g-b,f=_-w,s=1/Math.sqrt(h*h+d*d+f*f),h*=s,d*=s,f*=s,A=E*f-v*d,o=v*h-m*f,a=m*d-E*h,s=Math.sqrt(A*A+o*o+a*a),s?(s=1/s,A*=s,o*=s,a*=s):(A=0,o=0,a=0),c=d*a-f*o,l=f*A-h*a,u=h*o-d*A,s=Math.sqrt(c*c+l*l+u*u),s?(s=1/s,c*=s,l*=s,u*=s):(c=0,l=0,u=0),e[0]=A,e[1]=c,e[2]=h,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=a,e[9]=u,e[10]=f,e[11]=0,e[12]=-(A*p+o*g+a*_),e[13]=-(c*p+l*g+u*_),e[14]=-(h*p+d*g+f*_),e[15]=1,e)}},9210:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>A,Cc:()=>a,WQ:()=>i,Z0:()=>c,hs:()=>s,jb:()=>l,ze:()=>o});var r=n(7055);function i(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function s(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function A(e){const t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function o(e,t){return e[0]=-t[0],e[1]=-t[1],e}function a(e,t,n,r){const i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e}function c(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}const l=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};!function(){const e=function(){const e=new r.tb(2);return r.tb!=Float32Array&&(e[0]=0,e[1]=0),e}()}()},6425:(e,t,n)=>{"use strict";n.d(t,{$A:()=>A,Z0:()=>o,Z8:()=>u,eL:()=>l,ei:()=>a,g7:()=>d,gL:()=>c,jb:()=>f,x6:()=>h,xg:()=>p,ze:()=>i});var r=n(7055);function i(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function s(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function A(e,t,n){const r=t[0],i=t[1],s=t[2],A=n[0],o=n[1],a=n[2];return e[0]=i*a-s*o,e[1]=s*A-r*a,e[2]=r*o-i*A,e}function o(e,t,n){const r=t[0],i=t[1],s=t[2];let A=n[3]*r+n[7]*i+n[11]*s+n[15];return A=A||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/A,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/A,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/A,e}function a(e,t,n){const r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function c(e,t,n){const r=n[0],i=n[1],s=n[2],A=n[3],o=t[0],a=t[1],c=t[2];let l=i*c-s*a,u=s*o-r*c,h=r*a-i*o,d=i*h-s*u,f=s*l-r*h,p=r*u-i*l;const g=2*A;return l*=g,u*=g,h*=g,d*=2,f*=2,p*=2,e[0]=o+l+d,e[1]=a+u+f,e[2]=c+h+p,e}function l(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function u(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function h(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function d(e,t){const n=e[0],r=e[1],i=e[2],A=t[0],o=t[1],a=t[2],c=Math.sqrt((n*n+r*r+i*i)*(A*A+o*o+a*a)),l=c&&s(e,t)/c;return Math.acos(Math.min(Math.max(l,-1),1))}const f=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},p=function(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)};!function(){const e=function(){const e=new r.tb(3);return r.tb!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}()}()},7964:(e,t,n)=>{"use strict";n.d(t,{Z0:()=>s,hs:()=>i});var r=n(7055);function i(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function s(e,t,n){const r=t[0],i=t[1],s=t[2],A=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*A,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*A,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*A,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*A,e}!function(){const e=function(){const e=new r.tb(4);return r.tb!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}()},4315:(e,t,n)=>{"use strict";n.d(t,{$W:()=>r,Cc:()=>o,Fl:()=>i,aI:()=>a,cy:()=>s,qE:()=>A});Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const r=globalThis.mathgl.config;function i(e,{precision:t=r.precision}={}){return e=function(e){return Math.round(e/r.EPSILON)*r.EPSILON}(e),`${parseFloat(e.toPrecision(t))}`}function s(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A(e,t,n){return c(e,(e=>Math.max(t,Math.min(n,e))))}function o(e,t,n){return s(e)?e.map(((e,r)=>o(e,t[r],n))):n*t+(1-n)*e}function a(e,t,n){const i=r.EPSILON;n&&(r.EPSILON=n);try{if(e===t)return!0;if(s(e)&&s(t)){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!a(e[n],t[n]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):"number"==typeof e&&"number"==typeof t&&Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{r.EPSILON=i}}function c(e,t,n){if(s(e)){const r=e;n=n||function(e){return e.clone?e.clone():new Array(e.length)}(r);for(let i=0;i<n.length&&i<r.length;++i){const r="number"==typeof e?e:e[i];n[i]=t(r,i,n)}return n}return t(e)}},7919:(e,t,n)=>{"use strict";function r(e,t,n){const r=t[0],i=t[1],s=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/s,e[1]=(n[1]*r+n[5]*i)/s,e}function i(e,t,n){const r=t[0],i=t[1],s=t[2],A=n[3]*r+n[7]*i+n[11]*s||1;return e[0]=(n[0]*r+n[4]*i+n[8]*s)/A,e[1]=(n[1]*r+n[5]*i+n[9]*s)/A,e[2]=(n[2]*r+n[6]*i+n[10]*s)/A,e}function s(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2],e}n.d(t,{B$:()=>r,J4:()=>s,cL:()=>i})},1697:(e,t,n)=>{"use strict";n.d(t,{qk:()=>s,ws:()=>i});var r=n(4315);function i(e){if(!Number.isFinite(e))throw new Error(`Invalid number ${JSON.stringify(e)}`);return e}function s(e,t,n=""){if(r.$W.debug&&!function(e,t){if(e.length!==t)return!1;for(let n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return e}},9451:(e,t,n)=>{"use strict";n.d(t,{dT:()=>C,Os:()=>M,Fe:()=>O,rj:()=>V,wZ:()=>I,gW:()=>D,nI:()=>R,v7:()=>z,fO:()=>T,om:()=>P,rY:()=>x,Gw:()=>b,CK:()=>F,xJ:()=>k,mY:()=>S,iV:()=>w,VJ:()=>L});var r=n(7964);function i(e,t){const n=r.Z0([],t,e);return r.hs(n,n,1/n[3]),n}function s(e,t){const n=e%t;return n<0?t+n:n}function A(e,t,n){return e<t?t:e>n?n:e}const o=Math.log2||function(e){return Math.log(e)*Math.LOG2E};var a=n(3348),c=n(6425),l=n(9210);function u(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const h=Math.PI,d=h/4,f=h/180,p=180/h,g=512,_=4003e4,m=85.051129,E=1.5;function v(e){return Math.pow(2,e)}function y(e){return o(e)}function b(e){const[t,n]=e;u(Number.isFinite(t)),u(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=n*f;return[g*(t*f+h)/(2*h),g*(h+Math.log(Math.tan(d+.5*r)))/(2*h)]}function w(e){const[t,n]=e,r=t/g*(2*h)-h,i=2*(Math.atan(Math.exp(n/g*(2*h)-h))-d);return[r*p,i*p]}function T(e){const{latitude:t}=e;u(Number.isFinite(t));const n=Math.cos(t*f);return y(_*n)-9}function S(e){return 12790407194604047e-21/Math.cos(e*f)}function R(e){const{latitude:t,longitude:n,highPrecision:r=!1}=e;u(Number.isFinite(t)&&Number.isFinite(n));const i=Math.cos(t*f),s=512/360,A=s/i,o=12790407194604047e-21/i,a={unitsPerMeter:[o,o,o],metersPerUnit:[1/o,1/o,1/o],unitsPerDegree:[s,A,o],degreesPerUnit:[.703125,1/A,1/o]};if(r){const e=f*Math.tan(t*f)/i,n=s*e/2,r=12790407194604047e-21*e,c=r/A*o;a.unitsPerDegree2=[0,n,r],a.unitsPerMeter2=[c,0,c]}return a}function C(e,t){const[n,r,i]=e,[s,A,o]=t,{unitsPerMeter:a,unitsPerMeter2:c}=R({longitude:n,latitude:r,highPrecision:!0}),l=b(e);l[0]+=s*(a[0]+c[0]*A),l[1]+=A*(a[1]+c[1]*A);const u=w(l),h=(i||0)+(o||0);return Number.isFinite(i)||Number.isFinite(o)?[u[0],u[1],h]:u}function x(e){const{height:t,pitch:n,bearing:r,altitude:i,scale:s,center:A}=e,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];a.Tl(o,o,[0,0,-i]),a.eL(o,o,-n*f),a.Qr(o,o,r*f);const l=s/t;return a.hs(o,o,[l,l,l]),A&&a.Tl(o,o,c.ze([],A)),o}function P(e){const{width:t,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=e;let{fovy:u=M(E)}=e;void 0!==r&&(u=M(r));const h=u*f,d=i*f,p=I(u);let g=p;o&&(g+=o[2]*a/Math.cos(d)/n);const _=h*(.5+(s?s[1]:0)/n),m=Math.sin(_)*g/Math.sin(A(Math.PI/2-d-_,.01,Math.PI-.01)),v=Math.sin(d)*m+g,y=10*g;return{fov:h,aspect:t/n,focalDistance:p,near:c,far:Math.min(v*l,y)}}function M(e){return 2*Math.atan(.5/e)*p}function I(e){return.5/Math.tan(.5*e*f)}function L(e,t){const[n,r,s=0]=e;return u(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(s)),i(t,[n,r,s,1])}function k(e,t,n=0){const[r,s,A]=e;if(u(Number.isFinite(r)&&Number.isFinite(s),"invalid pixel coordinate"),Number.isFinite(A)){return i(t,[r,s,A,1])}const o=i(t,[r,s,0,1]),a=i(t,[r,s,1,1]),c=o[2],h=a[2],d=c===h?0:((n||0)-c)/(h-c);return l.Cc([],o,a,d)}function O(e){const{width:t,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:a=[0,0]}=e,[[c,l],[h,d]]=r,f=function(e=0){if("number"==typeof e)return{top:e,bottom:e,left:e,right:e};return u(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e}(e.padding),p=b([c,A(d,-85.051129,m)]),g=b([h,A(l,-85.051129,m)]),_=[Math.max(Math.abs(g[0]-p[0]),i),Math.max(Math.abs(g[1]-p[1]),i)],E=[t-f.left-f.right-2*Math.abs(a[0]),n-f.top-f.bottom-2*Math.abs(a[1])];u(E[0]>0&&E[1]>0);const v=E[0]/_[0],y=E[1]/_[1],T=(f.right-f.left)/2/v,S=(f.top-f.bottom)/2/y,R=w([(g[0]+p[0])/2+T,(g[1]+p[1])/2+S]),C=Math.min(s,o(Math.abs(Math.min(v,y))));return u(Number.isFinite(C)),{longitude:R[0],latitude:R[1],zoom:C}}const B=Math.PI/180;function D(e,t=0){const{width:n,height:r,unproject:i}=e,s={targetZ:t},A=i([0,r],s),o=i([n,r],s);let a,c;return(e.fovy?.5*e.fovy*B:Math.atan(.5/e.altitude))>(90-e.pitch)*B-.01?(a=N(e,0,t),c=N(e,n,t)):(a=i([0,0],s),c=i([n,0],s)),[A,o,c,a]}function N(e,t,n){const{pixelUnprojectionMatrix:r}=e,s=i(r,[t,0,1,1]),A=i(r,[t,e.height,1,1]),o=(n*e.distanceScales.unitsPerMeter[2]-s[2])/(A[2]-s[2]),a=w(l.Cc([],s,A,o));return a.push(n),a}function F(e){const{width:t,height:n,pitch:r=0}=e;let{longitude:i,latitude:A,zoom:a,bearing:c=0}=e;(i<-180||i>180)&&(i=s(i+180,360)-180),(c<-180||c>180)&&(c=s(c+180,360)-180);const l=o(n/512);if(a<=l)a=l,A=0;else{const e=n/2/Math.pow(2,a),t=w([0,e])[1];if(A<t)A=t;else{const t=w([0,512-e])[1];A>t&&(A=t)}}return{width:t,height:n,longitude:i,latitude:A,zoom:a,pitch:r,bearing:c}}const U=["longitude","latitude","zoom"],G={curve:1.414,speed:1.2};function V(e,t,n,r){const{startZoom:i,startCenterXY:s,uDelta:A,w0:o,u1:a,S:c,rho:u,rho2:h,r0:d}=j(e,t,r);if(a<.01){const r={};for(const i of U){const s=e[i],A=t[i];r[i]=(f=n)*A+(1-f)*s}return r}var f;const p=n*c,g=Math.cosh(d)/Math.cosh(d+u*p),_=o*((Math.cosh(d)*Math.tanh(d+u*p)-Math.sinh(d))/h)/a,m=i+y(1/g),E=l.hs([],A,_);l.WQ(E,E,s);const v=w(E);return{longitude:v[0],latitude:v[1],zoom:m}}function z(e,t,n){const r={...G,...n},{screenSpeed:i,speed:s,maxDuration:A}=r,{S:o,rho:a}=j(e,t,r),c=1e3*o;let l;return l=Number.isFinite(i)?c/(i/a):c/s,Number.isFinite(A)&&l>A?0:l}function j(e,t,n){const r=(n=Object.assign({},G,n)).curve,i=e.zoom,s=[e.longitude,e.latitude],A=v(i),o=t.zoom,a=[t.longitude,t.latitude],c=v(o-i),u=b(s),h=b(a),d=l.jb([],h,u),f=Math.max(e.width,e.height),p=f/c,g=l.Bw(d)*A,_=Math.max(g,.01),m=r*r,E=(p*p-f*f+m*m*_*_)/(2*f*m*_),y=(p*p-f*f-m*m*_*_)/(2*p*m*_),w=Math.log(Math.sqrt(E*E+1)-E),T=Math.log(Math.sqrt(y*y+1)-y);return{startZoom:i,startCenterXY:u,uDelta:d,w0:f,u1:g,S:(T-w)/r,rho:r,rho2:m,r0:w,r1:T}}},3640:(e,t,n)=>{"use strict";n.d(t,{eh:()=>i,gM:()=>s,x:()=>r});const r=globalThis,i=(globalThis.document,globalThis.process||{}),s=(globalThis.console,globalThis.navigator||{})},4003:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});var r=n(7989);function i(){return!("object"==typeof process&&"[object process]"===String(process)&&!process?.browser)||(0,r.b)()}},7989:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof window&&"renderer"===window.process?.type)return!0;if("undefined"!=typeof process&&Boolean(process.versions?.electron))return!0;const t="undefined"!=typeof navigator&&navigator.userAgent,n=e||t;return Boolean(n&&n.indexOf("Electron")>=0)}n.d(t,{b:()=>r})},5335:(e,t,n)=>{"use strict";n.d(t,{t:()=>g});var r=n(4003);const i="4.0.7";class s{constructor(e,t,n="sessionStorage"){this.storage=function(e){try{const t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(t){return null}}(n),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}var A;!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(A||(A={}));function o(e){return"string"!=typeof e?e:(e=e.toUpperCase(),A[e]||A.WHITE)}function a(e,t){if(!e)throw new Error(t||"Assertion failed")}var c=n(3640);function l(){let e;if((0,r.B)()&&c.x.performance)e=c.x?.performance?.now?.();else if("hrtime"in c.eh){const t=c.eh?.hrtime?.();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const u={debug:(0,r.B)()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},h={enabled:!0,level:0};function d(){}const f={},p={once:!0};class g{constructor({id:e}={id:""}){this.VERSION=i,this._startTs=l(),this._deltaTs=l(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new s(`__probe-${this.id}__`,h),this.timeStamp(`${this.id} started`),function(e,t=["constructor"]){const n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=e;for(const s of r){const n=i[s];"function"==typeof n&&(t.find((e=>s===e))||(i[s]=n.bind(e)))}}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((l()-this._startTs).toPrecision(10))}getDelta(){return Number((l()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){if(!e)throw new Error(t||"Assertion failed")}warn(e){return this._getLogFunction(0,e,u.warn,arguments,p)}error(e){return this._getLogFunction(0,e,u.error,arguments)}deprecated(e,t){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${t}\` instead`)}removed(e,t){return this.error(`\`${e}\` has been removed. Use \`${t}\` instead`)}probe(e,t){return this._getLogFunction(e,t,u.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,u.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,u.debug||u.info,arguments,p)}table(e,t,n){return t?this._getLogFunction(e,t,console.table||d,n&&[n],{tag:E(t)}):d}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||d)}group(e,t,n={collapsed:!1}){const r=m({logLevel:e,message:t,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t,n={}){return this.group(e,t,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||d)}withGroup(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=_(e)}_getLogFunction(e,t,n,i,s){if(this._shouldLog(e)){s=m({logLevel:e,message:t,args:i,opts:s}),a(n=n||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=l();const A=s.tag||s.message;if(s.once&&A){if(f[A])return d;f[A]=l()}return t=function(e,t,n){if("string"==typeof t){const i=n.time?function(e,t=8){const n=Math.max(t-e.length,0);return`${" ".repeat(n)}${e}`}(function(e){let t;return t=e<10?`${e.toFixed(2)}ms`:e<100?`${e.toFixed(1)}ms`:e<1e3?`${e.toFixed(0)}ms`:`${(e/1e3).toFixed(2)}s`,t}(n.total)):"";t=function(e,t,n){r.B||"string"!=typeof e||(t&&(e=`\x1b[${o(t)}m${e}\x1b[39m`),n&&(e=`\x1b[${o(n)+10}m${e}\x1b[49m`));return e}(t=n.time?`${e}: ${i}  ${t}`:`${e}: ${t}`,n.color,n.background)}return t}(this.id,s.message,s),n.bind(console,t,...s.args)}return d}}function _(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return a(Number.isFinite(t)&&t>=0),t}function m(e){const{logLevel:t,message:n}=e;e.logLevel=_(t);const r=e.args?Array.from(e.args):[];for(;r.length&&r.shift()!==n;);switch(typeof t){case"string":case"function":void 0!==n&&r.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const i=typeof e.message;return a("string"===i||"object"===i),Object.assign(e,{args:r},e.opts)}function E(e){for(const t in e)for(const n in e[t])return n||"untitled";return"empty"}g.VERSION=i}}]);